{
"version":3,
"file":"voyant.min.map.js",
"lineCount":1276,
"mappings":"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",
"sources":[" [synthetic:base] "," [synthetic:es6/util/arrayiterator] "," [synthetic:es6/util/makeiterator] "," [synthetic:util/global] "," [synthetic:util/defines] "," [synthetic:util/defineproperty] "," [synthetic:util/polyfill] "," [synthetic:es6/promise/promise] "," [synthetic:es6/promise/finally] "," [synthetic:es6/symbol] "," [synthetic:es6/util/setprototypeof] "," [synthetic:es6/generator_engine] "," [synthetic:es6/execute_async_generator] ","/resources/bubblelines/Bubblelines.js","/resources/knots/Knots.js","/resources/cirrus/html5/Cirrus.js","/resources/cirrus/html5/Word.js","/resources/cirrus/html5/WordController.js","/resources/doubletree/DoubleTree.js","/resources/doubletree/Trie.js","/resources/termsradio/TermsRadio.js","/app/util/Api.js","/app/util/Localization.js","/app/util/Colors.js","/app/util/Deferrable.js","/app/util/DetailedError.js","/app/util/ResponseError.js","/app/util/SparkLine.js","/app/util/Toolable.js","/app/util/Transferable.js","/app/util/Variants.js","/app/util/Downloadable.js","/app/util/Storage.js","/app/util/DiacriticsRemover.js","/app/notebook/util/Embed.js","/app/data/model/AnalysisToken.js","/app/data/model/Context.js","/app/data/model/CorpusFacet.js","/app/data/model/CorpusCollocate.js","/app/data/model/CorpusTerm.js","/app/data/model/CorpusNgram.js","/app/data/model/Dimension.js","/app/data/model/Document.js","/app/data/model/DocumentEntity.js","/app/data/model/DocumentQueryMatch.js","/app/data/model/DocumentTerm.js","/app/data/model/PrincipalComponent.js","/app/data/model/RelatedTerm.js","/app/data/model/StatisticalAnalysis.js","/app/data/model/Token.js","/app/data/model/TermCorrelation.js","/app/data/store/VoyantStore.js","/app/data/store/CAAnalysis.js","/app/data/store/Contexts.js","/app/data/store/CorpusCollocates.js","/app/data/store/CorpusFacets.js","/app/data/store/CorpusTerms.js","/app/data/store/DocumentQueryMatches.js","/app/data/store/DocumentTerms.js","/app/data/store/DocumentEntities.js","/app/data/store/Documents.js","/app/data/store/PCAAnalysis.js","/app/data/store/DocSimAnalysis.js","/app/data/store/CorpusNgrams.js","/app/data/store/RelatedTerms.js","/app/data/store/TermCorrelations.js","/app/data/store/Tokens.js","/app/data/store/TSNEAnalysis.js","/app/data/store/NotebookFacets.js","/app/data/util/Table.js","/app/data/util/NetworkGraph.js","/app/data/util/Geonames.js","/app/data/model/Corpus.js","/app/widget/CodeEditor.js","/app/widget/CorpusSelector.js","/app/widget/ListEditor.js","/app/widget/StopListOption.js","/app/widget/QuerySearchField.js","/app/widget/TotalPropertyStatus.js","/app/widget/DocumentSelector.js","/app/widget/CorpusDocumentSelector.js","/app/widget/DownloadFilenameBuilder.js","/app/widget/DownloadFileFormat.js","/app/widget/DownloadOptions.js","/app/widget/FontFamilyOption.js","/app/widget/ColorPaletteOption.js","/app/widget/VoyantChart.js","/app/widget/LiveSearchGrid.js","/app/widget/ProgressMonitor.js","/app/widget/VoyantTableTransform.js","/app/widget/CategoriesBuilder.js","/app/widget/VoyantNetworkGraph.js","/app/widget/ReaderGraph.js","/app/panel/Panel.js","/app/panel/VoyantTabPanel.js","/app/widget/Facet.js","/app/panel/Bubbles.js","/app/panel/Bubblelines.js","/app/panel/Catalogue.js","/app/panel/Cirrus.js","/app/panel/CollocatesGraph.js","/app/panel/Contexts.js","/app/panel/CorpusCollocates.js","/app/panel/CorpusTermSummary.js","/app/panel/Correlations.js","/app/panel/CorpusCreator.js","/app/panel/DreamScape.js","/app/panel/Knots.js","/app/panel/Phrases.js","/app/panel/CorpusTerms.js","/app/panel/DocumentTerms.js","/app/panel/Documents.js","/app/panel/DocumentsFinder.js","/app/panel/Embedder.js","/app/panel/Fountain.js","/app/panel/RezoViz.js","/app/panel/Loom.js","/app/panel/MicroSearch.js","/app/panel/Mandala.js","/app/panel/MicroOcp.js","/app/panel/Reader.js","/app/panel/SimpleDocReader.js","/app/panel/ScatterPlot.js","/app/panel/StreamGraph.js","/app/panel/Summary.js","/app/panel/TextualArc.js","/app/panel/TopicContexts.js","/app/panel/TermsBerry.js","/app/panel/TermsRadio.js","/app/panel/Trends.js","/app/panel/NoTool.js","/app/panel/VoyantFooter.js","/app/panel/VoyantHeader.js","/app/panel/CorpusSet.js","/app/panel/ScatterSet.js","/app/panel/Subset.js","/app/panel/CollocatesSet.js","/app/panel/BubblelinesSet.js","/app/panel/CustomSet.js","/app/panel/Veliza.js","/app/panel/WordTree.js","/app/panel/WordWall.js","/app/panel/Topics.js","/app/panel/Via.js","/app/notebook/editor/button/Add.js","/app/notebook/editor/button/CodeConfig.js","/app/notebook/editor/button/Export.js","/app/notebook/editor/button/Counter.js","/app/notebook/editor/button/MoveDown.js","/app/notebook/editor/button/MoveUp.js","/app/notebook/editor/button/Remove.js","/app/notebook/editor/button/Run.js","/app/notebook/editor/button/RunAll.js","/app/notebook/editor/button/RunUntil.js","/app/notebook/editor/EditorWrapper.js","/app/notebook/editor/RunnableEditorWrapper.js","/app/notebook/editor/SandboxWrapper.js","/app/notebook/editor/CodeEditor.js","/app/notebook/editor/CodeEditorWrapper.js","/app/notebook/editor/TextEditor.js","/app/notebook/editor/TextEditorWrapper.js","/app/notebook/editor/FileInput.js","/app/notebook/editor/DataWrapper.js","/app/notebook/storage/github/OctokitWrapper.js","/app/notebook/storage/github/ReposBrowser.js","/app/notebook/storage/github/FileSaver.js","/app/notebook/storage/github/GitHubDialogs.js","/app/notebook/storage/voyant/StorageDialogs.js","/app/notebook/metadata/MetadataEditor.js","/app/notebook/util/FormatConverter.js","/app/notebook/Catalogue.js","/app/notebook/Notebook.js","/app/VoyantApp.js","/app/VoyantCorpusApp.js","/app/VoyantCorpusToolsetApp.js","/app/VoyantDefaultApp.js","/app/VoyantDocumentToolsetApp.js","/app/VoyantNotebookApp.js","/app/VoyantToolApp.js"],
"sourcesContent":["/*\n * Copyright 2012 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @fileoverview The base namespace for code injected by the compiler\n * at compile-time.\n *\n * @author nicksantos@google.com (Nick Santos)\n */\n\n/** @const */\nvar $jscomp = $jscomp || {};\n\n/** @const Locals for goog.scope */\n$jscomp.scope = {};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Utility method for creating an iterator for Arrays.\n */\n'require base';\n\n/**\n * Returns an internal iterator from the given array.\n * @param {!Array<T>} array\n * @return {function():!IIterableResult<T>}\n * @template T\n */\n$jscomp.arrayIteratorImpl = function(array) {\n  var index = 0;\n  return function() {\n    if (index < array.length) {\n      return {\n        done: false,\n        value: array[index++],\n      };\n    } else {\n      return {done: true};\n    }\n  };\n};\n\n/**\n * Returns an internal iterator from the given array.\n * @param {!Array<T>} array\n * @return {!Iterator<T>}\n * @template T\n */\n$jscomp.arrayIterator = function(array) {\n  return /** @type {!Iterator<T>} */ ({next: $jscomp.arrayIteratorImpl(array)});\n};\n\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Polyfill for for-of loops.\n */\n'require es6/util/arrayiterator';\n\n/**\n * Creates an iterator for the given iterable.  This iterator should never\n * be exposed to user code.\n *\n * @param {string|!Iterable<T>|!Iterator<T>|!Arguments} iterable\n * @return {!Iterator<T>}\n * @template T\n * @suppress {reportUnknownTypes}\n */\n$jscomp.makeIterator = function(iterable) {\n  // NOTE: Disabling typechecking because [] not allowed on @struct.\n  var iteratorFunction = typeof Symbol != 'undefined' && Symbol.iterator &&\n      (/** @type {?} */ (iterable)[Symbol.iterator]);\n  return iteratorFunction ? iteratorFunction.call(iterable) :\n      $jscomp.arrayIterator(/** @type {!Array} */ (iterable));\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Runtime code to store the global object.\n */\n'require base';\n\n\n/**\n * @param {!Object} maybeGlobal\n * @return {!Object} The global object.\n * @suppress {undefinedVars|reportUnknownTypes}\n */\n$jscomp.getGlobal = function(maybeGlobal) {\n  // This logic can be simplified to be made more optimizable.\n  return (typeof window != 'undefined' && window === maybeGlobal) ?\n      maybeGlobal :\n      (typeof global != 'undefined' && global != null) ?\n      /** @type {!Object} */ (global) :\n      maybeGlobal;\n};\n\n\n// TODO(sdh): This should be typed as \"the global object\" now that the type\n// of \"Global\" has landed in the type system.\n/**\n * The global object. For browsers we could just use `this` but in Node that\n * doesn't work.\n * @const {?}\n */\n$jscomp.global = $jscomp.getGlobal(this);\n","/*\n * Copyright 2017 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require base';\n\n\n/**\n * Whether to assume ES5 is available.  This enables removing several\n * internal polyfills, which must otherwise be detected at runtime.\n * @define {boolean}\n */\n$jscomp.ASSUME_ES5 = false;\n\n/**\n * Whether to skip the conformance check and simply use the polyfill always.\n * @define {boolean}\n */\n$jscomp.ASSUME_NO_NATIVE_MAP = false;\n\n/**\n * Whether to skip the conformance check and simply use the polyfill always.\n * @define {boolean}\n */\n$jscomp.ASSUME_NO_NATIVE_SET = false;\n\n/**\n * Whether to provide an incorrect but tiny Math.fround polyfill that just\n * returns the number given.  This is usually okay to do, particularly if\n * `Math.fround` is only used to allow the JavaScript engine to use faster\n * 32-bit float operations, but could cause problems if program logic is\n * dependent on floats being truncated consistently.\n * @define {boolean}\n */\n$jscomp.SIMPLE_FROUND_POLYFILL = false;\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides methods to polyfill native objects.\n * @suppress {reportUnknownTypes}\n */\n'require util/defines';\n\n\n/**\n * Polyfill for Object.defineProperty() method:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\n *\n * Refuses to define properties on Array.prototype and Object.prototype,\n * since we can't make them non-enumerable and this messes up peoples' for\n * loops.  Beyond this, we simply assign values and not worry\n * about enumerability or writeability.\n * @param {?} target\n * @param {string} property\n * @param {?} descriptor\n * @suppress {reportUnknownTypes}\n */\n$jscomp.defineProperty =\n    $jscomp.ASSUME_ES5 || typeof Object.defineProperties == 'function' ?\n    Object.defineProperty :\n    function(target, property, descriptor) {\n      descriptor = /** @type {!ObjectPropertyDescriptor} */ (descriptor);\n      // NOTE: This is currently never called with a descriptor outside\n      // the control of the compiler.  If we ever decide to polyfill either\n      // Object.defineProperty or Reflect.defineProperty for ES3, we should\n      // explicitly check for `get` or `set` on the descriptor and throw a\n      // TypeError, since it's impossible to properly polyfill it.\n      if (target == Array.prototype || target == Object.prototype) return;\n      target[property] = descriptor.value;\n    };\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides methods to polyfill native objects.\n */\n'require util/defineproperty';\n'require util/global';\n\n\n/**\n * @param {string} target Qualified name of the class or method to polyfill,\n *     e.g. 'Array.prototype.includes' or 'Map'.\n * @param {?function(*): *} polyfill A function that takes the current browser\n *     implementation of the target and returns an optional new polyfill\n *     implementation.  If null is returned, then no polyfill will be added.  A\n *     null argument for this parameter indicates that the function will not be\n *     polyfilled, and is only useful for `build_polyfill_table.js` bookkeeping.\n * @param {string} fromLang The language level in which the target is expected\n *     to already be present in the browser.  The compiler requires that\n *     `languageOut < fromLang` before injecting a polyfill (i.e. if the\n *     specified output language already includes the feature then there's no\n *     need to polyfill it).\n * @param {string} toLang The language level required by the polyfill\n *     implementation.  The compiler will issue an error if a polyfill is\n *     required, but `languageOut < toLang`.  Additionally, the\n *     `build_polyfill_table.js` script audits the polyfill dependency tree to\n *     ensure that no polyfill with a lower `toLang` depends on one with a\n *     higher `toLang`.\n * @suppress {reportUnknownTypes}\n * @noinline\n * NOTE: We prevent inlining so RemoveUnusedPolyfills can always recognize this\n * call.\n */\n$jscomp.polyfill = function(target, polyfill, fromLang, toLang) {\n  if (!polyfill) return;\n  var obj = $jscomp.global;\n  var split = target.split('.');\n  for (var i = 0; i < split.length - 1; i++) {\n    var key = split[i];\n    if (!(key in obj)) obj[key] = {};  // Might want to be defineProperty.\n    obj = obj[key];\n  }\n  var property = split[split.length - 1];\n  var orig = obj[property];\n  var impl = polyfill(orig);\n  if (impl == orig || impl == null) return;\n  $jscomp.defineProperty(\n      obj, property, {configurable: true, writable: true, value: impl});\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require base';\n'require es6/util/makeiterator';\n'require util/global';\n'require util/polyfill';\n\n/**\n * Should we unconditionally override a native Promise implementation with our\n * own?\n * @define {boolean}\n */\n$jscomp.FORCE_POLYFILL_PROMISE = false;\n\n\n$jscomp.polyfill('Promise',\n    /**\n     * @param {*} NativePromise\n     * @return {*}\n     * @suppress {reportUnknownTypes}\n     */\n    function(NativePromise) {\n  // TODO(bradfordcsmith): Do we need to add checks for standards conformance?\n  //     e.g. The version of FireFox we currently use for testing has a Promise\n  //     that fails to reject attempts to fulfill it with itself, but that\n  //     isn't reasonably testable here.\n  if (NativePromise && !$jscomp.FORCE_POLYFILL_PROMISE) {\n    return NativePromise;\n  }\n\n  /**\n    * Schedules code to be executed asynchronously.\n    * @constructor\n    * @struct\n    */\n  function AsyncExecutor() {\n    /**\n     * Batch of functions to execute.\n     *\n     * Will be `null` initially and immediately after a batch finishes\n     * executing.\n     * @private {?Array<function()>}\n     */\n    this.batch_ = null;\n  }\n\n  /**\n   * Schedule a function to execute asynchronously.\n   *\n   * -   The function will execute:\n   *     -   After the current call stack has completed executing.\n   *     -   After any functions previously scheduled using this object.\n   * -   The return value will be ignored.\n   * -   An exception thrown by the method will be caught and asynchronously\n   *     rethrown when it cannot interrupt any other code. This class provides\n   *     no way to catch such exceptions.\n   * @param {function():?} f\n   */\n  AsyncExecutor.prototype.asyncExecute = function(f) {\n    if (this.batch_ == null) {\n      // no batch created yet, or last batch was fully executed\n      this.batch_ = [];\n      var self = this;\n      this.asyncExecuteFunction(function() { self.executeBatch_(); });\n    }\n    this.batch_.push(f);\n  };\n\n  // NOTE: We want to make sure AsyncExecutor will work as expected even if\n  // testing code should override setTimeout()\n  /** @const {function(!Function, number)} */\n  var nativeSetTimeout = $jscomp.global['setTimeout'];\n\n  /**\n   * Schedule a function to execute asynchronously as soon as possible.\n   *\n   * NOTE: May be overridden for testing.\n   * @package\n   * @param {function()} f\n   */\n  AsyncExecutor.prototype.asyncExecuteFunction = function(f) {\n    nativeSetTimeout(f, 0);\n  };\n\n  /**\n   * Execute scheduled jobs in a batch until all are executed or the batch\n   * execution time limit has been reached.\n   * @private\n   */\n  AsyncExecutor.prototype.executeBatch_ = function() {\n    while (this.batch_ && this.batch_.length) {\n      var /** !Array<?function()> */ executingBatch = this.batch_;\n      // Executions scheduled while executing this batch go into a new one to\n      // avoid the batch array getting too big.\n      this.batch_ = [];\n      for (var i = 0; i < executingBatch.length; ++i) {\n        var f = /** @type {function()} */ (executingBatch[i]);\n        executingBatch[i] = null;  // free memory\n        try {\n          f();\n        } catch (error) {\n          this.asyncThrow_(error);\n        }\n      }\n    }\n    // All jobs finished executing, so force scheduling a new batch next\n    // time asyncExecute() is called.\n    this.batch_ = null;\n  };\n\n  /**\n   * @private\n   * @param {*} exception\n   */\n  AsyncExecutor.prototype.asyncThrow_ = function(exception) {\n    this.asyncExecuteFunction(function() { throw exception; });\n  };\n\n  /**\n   * @enum {number}\n   */\n  var PromiseState = {\n    /** The Promise is waiting for resolution. */\n    PENDING: 0,\n\n    /** The Promise has been resolved with a fulfillment value. */\n    FULFILLED: 1,\n\n    /** The Promise has been resolved with a rejection reason. */\n    REJECTED: 2\n  };\n\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n   * @param {function(\n   *             function((TYPE|IThenable<TYPE>|Thenable|null)=),\n   *             function(*=))} executor\n   * @constructor\n   * @extends {Promise<TYPE>}\n   * @template TYPE\n   */\n  var PolyfillPromise = function(executor) {\n    /** @private {PromiseState} */\n    this.state_ = PromiseState.PENDING;\n\n    /**\n     * The settled result of the Promise. Immutable once set with either a\n     * fulfillment value or rejection reason.\n     * @private {*}\n     */\n    this.result_ = undefined;\n\n    /**\n     * These functions must be asynchronously executed when this promise\n     * settles.\n     * @private {?Array<function()>}\n     */\n    this.onSettledCallbacks_ = [];\n\n    var resolveAndReject = this.createResolveAndReject_();\n    try {\n      executor(resolveAndReject.resolve, resolveAndReject.reject);\n    } catch (e) {\n      resolveAndReject.reject(e);\n    }\n  };\n\n\n  /**\n   * Create a pair of functions for resolving or rejecting this Promise.\n   *\n   * <p>After the resolve or reject function has been called once, later calls\n   * do nothing.\n   * @private\n   * @return {{\n   *     resolve: function((TYPE|IThenable<TYPE>|Thenable|null)=),\n   *     reject:  function(*=)\n   * }}\n   */\n  PolyfillPromise.prototype.createResolveAndReject_ = function() {\n    var thisPromise = this;\n    var alreadyCalled = false;\n    /**\n     * @param {function(this:PolyfillPromise<TYPE>, T=)} method\n     * @return {function(T=)}\n     * @template T\n     */\n    function firstCallWins(method) {\n      return function(/** T= */ x) {\n        if (!alreadyCalled) {\n          alreadyCalled = true;\n          method.call(thisPromise, x);\n        }\n      };\n    }\n    return {\n      resolve: firstCallWins(this.resolveTo_),\n      reject: firstCallWins(this.reject_)\n    };\n  };\n\n\n  /**\n   * @private\n   * @param {*=} value\n   */\n  PolyfillPromise.prototype.resolveTo_ = function(value) {\n    if (value === this) {\n      this.reject_(new TypeError('A Promise cannot resolve to itself'));\n    } else if (value instanceof PolyfillPromise) {\n      this.settleSameAsPromise_(/** @type {!PolyfillPromise} */ (value));\n    } else if (isObject(value)) {\n      this.resolveToNonPromiseObj_(/** @type {!Object} */ (value));\n    } else {\n      this.fulfill_(value);\n    }\n  };\n\n\n  /**\n   * @private\n   * @param {!Object} obj\n   * @suppress {strictMissingProperties} obj.then\n   */\n  PolyfillPromise.prototype.resolveToNonPromiseObj_ = function(obj) {\n    var thenMethod = undefined;\n\n    try {\n      thenMethod = obj.then;\n    } catch (error) {\n      this.reject_(error);\n      return;\n    }\n    if (typeof thenMethod == 'function') {\n      this.settleSameAsThenable_(thenMethod, /** @type {!Thenable} */ (obj));\n    } else {\n      this.fulfill_(obj);\n    }\n  };\n\n\n  /**\n   * @param {*} value anything\n   * @return {boolean}\n   */\n  function isObject(value) {\n    switch (typeof value) {\n      case 'object':\n        return value != null;\n      case 'function':\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  /**\n   * Reject this promise for the given reason.\n   * @private\n   * @param {*=} reason\n   * @throws {!Error} if this promise is already fulfilled or rejected.\n   */\n  PolyfillPromise.prototype.reject_ = function(reason) {\n    this.settle_(PromiseState.REJECTED, reason);\n  };\n\n  /**\n   * Fulfill this promise with the given value.\n   * @private\n   * @param {!TYPE} value\n   * @throws {!Error} when this promise is already fulfilled or rejected.\n   */\n  PolyfillPromise.prototype.fulfill_ = function(value) {\n    this.settle_(PromiseState.FULFILLED, value);\n  };\n\n  /**\n   * Fulfill or reject this promise with the given value/reason.\n   * @private\n   * @param {!PromiseState} settledState (FULFILLED or REJECTED)\n   * @param {*} valueOrReason\n   * @throws {!Error} when this promise is already fulfilled or rejected.\n   */\n  PolyfillPromise.prototype.settle_ = function(settledState, valueOrReason) {\n    if (this.state_ != PromiseState.PENDING) {\n      throw new Error(\n          'Cannot settle(' + settledState + ', ' + valueOrReason +\n          '): Promise already settled in state' + this.state_);\n    }\n    this.state_ = settledState;\n    this.result_ = valueOrReason;\n    this.executeOnSettledCallbacks_();\n  };\n\n  PolyfillPromise.prototype.executeOnSettledCallbacks_ = function() {\n    if (this.onSettledCallbacks_ != null) {\n      for (var i = 0; i < this.onSettledCallbacks_.length; ++i) {\n        asyncExecutor.asyncExecute(this.onSettledCallbacks_[i]);\n      }\n      this.onSettledCallbacks_ = null;  // free memory\n    }\n  };\n\n  /**\n   * All promise async execution is managed by a single executor for the\n   * sake of efficiency.\n   * @const {!AsyncExecutor}\n   */\n  var asyncExecutor = new AsyncExecutor();\n\n  /**\n   * Arrange to settle this promise in the same way as the given thenable.\n   * @private\n   * @param {!PolyfillPromise} promise\n   */\n  PolyfillPromise.prototype.settleSameAsPromise_ = function(promise) {\n    var methods = this.createResolveAndReject_();\n\n    // Calling then() would create an unnecessary extra promise.\n    promise.callWhenSettled_(methods.resolve, methods.reject);\n  };\n\n  /**\n   * Arrange to settle this promise in the same way as the given thenable.\n   * @private\n   * @param {function(\n   *     function((TYPE|IThenable<TYPE>|Thenable|null)=),\n   *     function(*=))\n   * } thenMethod\n   * @param {!Thenable} thenable\n   */\n  PolyfillPromise.prototype.settleSameAsThenable_ = function(\n      thenMethod, thenable) {\n    var methods = this.createResolveAndReject_();\n\n    // Don't trust an unknown thenable implementation not to throw exceptions.\n    try {\n      thenMethod.call(thenable, methods.resolve, methods.reject);\n    } catch (error) {\n      methods.reject(error);\n    }\n  };\n\n  /** @override */\n  PolyfillPromise.prototype.then = function(onFulfilled, onRejected) {\n    var resolveChild;\n    var rejectChild;\n    var childPromise = new PolyfillPromise(function(resolve, reject) {\n      resolveChild = resolve;\n      rejectChild = reject;\n    });\n    function createCallback(paramF, defaultF) {\n      // The spec says to ignore non-function values for onFulfilled and\n      // onRejected\n      if (typeof paramF == 'function') {\n        return function(x) {\n          try {\n            resolveChild(paramF(x));\n          } catch (error) {\n            rejectChild(error);\n          }\n        };\n      } else {\n        return defaultF;\n      }\n    }\n\n    this.callWhenSettled_(\n        createCallback(onFulfilled, resolveChild),\n        createCallback(onRejected, rejectChild));\n    return childPromise;\n  };\n\n  /** @override */\n  PolyfillPromise.prototype.catch = function(onRejected) {\n    return this.then(undefined, onRejected);\n  };\n\n\n  PolyfillPromise.prototype.callWhenSettled_ = function(\n      onFulfilled, onRejected) {\n    var /** !PolyfillPromise */ thisPromise = this;\n    function callback() {\n      switch (thisPromise.state_) {\n        case PromiseState.FULFILLED:\n          onFulfilled(thisPromise.result_);\n          break;\n        case PromiseState.REJECTED:\n          onRejected(thisPromise.result_);\n          break;\n        default:\n          throw new Error('Unexpected state: ' + thisPromise.state_);\n      }\n    }\n    if (this.onSettledCallbacks_ == null) {\n      // we've already settled\n      asyncExecutor.asyncExecute(callback);\n    } else {\n      this.onSettledCallbacks_.push(callback);\n    }\n  };\n\n  // called locally, so give it a name\n  function resolvingPromise(opt_value) {\n    if (opt_value instanceof PolyfillPromise) {\n      return opt_value;\n    } else {\n      return new PolyfillPromise(function(resolve, reject) {\n        resolve(opt_value);\n      });\n    }\n  }\n  PolyfillPromise['resolve'] = resolvingPromise;\n\n\n  PolyfillPromise['reject'] = function(opt_reason) {\n    return new PolyfillPromise(function(resolve, reject) {\n      reject(opt_reason);\n    });\n  };\n\n\n  PolyfillPromise['race'] = function(thenablesOrValues) {\n    return new PolyfillPromise(function(resolve, reject) {\n      var /** !Iterator<*> */ iterator =\n          $jscomp.makeIterator(thenablesOrValues);\n      for (var /** !IIterableResult<*> */ iterRec = iterator.next();\n           !iterRec.done;\n           iterRec = iterator.next()) {\n        // Using resolvingPromise() allows us to treat all elements the same\n        // way.\n        // NOTE: resolvingPromise(promise) always returns the argument\n        // unchanged.\n        // Using .callWhenSettled_() instead of .then() avoids creating an\n        // unnecessary extra promise.\n        resolvingPromise(iterRec.value).callWhenSettled_(resolve, reject);\n      }\n    });\n  };\n\n\n  PolyfillPromise['all'] = function(thenablesOrValues) {\n    var /** !Iterator<*> */ iterator = $jscomp.makeIterator(thenablesOrValues);\n    var /** !IIterableResult<*> */ iterRec = iterator.next();\n\n    if (iterRec.done) {\n      return resolvingPromise([]);\n    } else {\n      return new PolyfillPromise(function(resolveAll, rejectAll) {\n        var resultsArray = [];\n        var unresolvedCount = 0;\n\n        function onFulfilled(i) {\n          return function(ithResult) {\n            resultsArray[i] = ithResult;\n            unresolvedCount--;\n            if (unresolvedCount == 0) {\n              resolveAll(resultsArray);\n            }\n          };\n        }\n\n        do {\n          resultsArray.push(undefined);\n          unresolvedCount++;\n          // Using resolvingPromise() allows us to treat all elements the same\n          // way.\n          // NOTE: resolvingPromise(promise) always returns the argument\n          // unchanged. Using .callWhenSettled_() instead of .then() avoids\n          // creating an unnecessary extra promise.\n          resolvingPromise(iterRec.value)\n              .callWhenSettled_(\n                  onFulfilled(resultsArray.length - 1), rejectAll);\n          iterRec = iterator.next();\n        } while (!iterRec.done);\n      });\n    }\n  };\n\n  return PolyfillPromise;\n}, 'es6', 'es3');\n","/*\n * Copyright 2018 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n'require es6/promise/promise';\n\n$jscomp.polyfill('Promise.prototype.finally', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * @this {!Promise<VALUE>}\n   * @param {function():?} onFinally\n   * @return {!Promise<VALUE>}\n   * @template VALUE\n   * @suppress {reportUnknownTypes}\n   */\n  var polyfill = function(onFinally) {\n    return this.then(\n        function(value) {\n          var promise = Promise.resolve(onFinally());\n          return promise.then(function () { return value; });\n        },\n        function(reason) {\n          var promise = Promise.resolve(onFinally());\n          return promise.then(function () { throw reason; });\n        });\n  };\n\n  return polyfill;\n}, 'es9', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Symbol polyfill.\n * @suppress {uselessCode}\n */\n\n'require es6/util/arrayiterator';\n'require util/defineproperty';\n'require util/global';\n\n/** @const {string} */\n$jscomp.SYMBOL_PREFIX = 'jscomp_symbol_';\n\n/**\n * Initializes the Symbol function.\n * @suppress {reportUnknownTypes}\n */\n$jscomp.initSymbol = function() {\n  // Only need to do this once. All future calls are no-ops.\n  $jscomp.initSymbol = function() {};\n\n  if (!$jscomp.global['Symbol']) {\n    $jscomp.global['Symbol'] = $jscomp.Symbol;\n  }\n};\n\n\n/**\n * @struct @constructor\n * @param {string} id\n * @param {string=} opt_description\n */\n$jscomp.SymbolClass = function(id, opt_description) {\n  /** @private @const {string} */\n  this.$jscomp$symbol$id_ = id;\n\n  /** @const {string|undefined} */\n  this.description;\n\n  // description is read-only.\n  $jscomp.defineProperty(\n      this, 'description',\n      {configurable: true, writable: true, value: opt_description});\n};\n\n\n/** @override */\n$jscomp.SymbolClass.prototype.toString = function() {\n  return this.$jscomp$symbol$id_;\n};\n\n\n/**\n * Produces \"symbols\" (actually just unique strings).\n * @param {string=} opt_description\n * @return {symbol}\n */\n$jscomp.Symbol = /** @type {function(): !Function} */ (function() {\n  var counter = 0;\n\n  /**\n   * @param {string=} opt_description\n   * @return {symbol}\n   * @suppress {reportUnknownTypes}\n   */\n  function Symbol(opt_description) {\n    if (/** @type {?} */ (this) instanceof Symbol) {\n      throw new TypeError('Symbol is not a constructor');\n    }\n    return /** @type {?} */ (new $jscomp.SymbolClass(\n        $jscomp.SYMBOL_PREFIX + (opt_description || '') + '_' + (counter++),\n        opt_description));\n  }\n\n  return Symbol;\n})();\n\n/**\n * Initializes Symbol.iterator (if it's not already defined) and adds a\n * Symbol.iterator property to the Array prototype.\n * @suppress {reportUnknownTypes}\n */\n$jscomp.initSymbolIterator = function() {\n  $jscomp.initSymbol();\n  var symbolIterator = $jscomp.global['Symbol'].iterator;\n  if (!symbolIterator) {\n    symbolIterator = $jscomp.global['Symbol'].iterator =\n        $jscomp.global['Symbol']('Symbol.iterator');\n  }\n\n  if (typeof Array.prototype[symbolIterator] != 'function') {\n    $jscomp.defineProperty(\n        Array.prototype, symbolIterator, {\n          configurable: true,\n          writable: true,\n          /**\n           * @this {Array}\n           * @return {!IteratorIterable}\n           */\n          value: function() {\n            return $jscomp.iteratorPrototype(\n                $jscomp.arrayIteratorImpl(this));\n          }\n        });\n  }\n\n  // Only need to do this once. All future calls are no-ops.\n  $jscomp.initSymbolIterator = function() {};\n};\n\n\n/**\n * Initializes Symbol.asyncIterator (if it's not already defined)\n * @suppress {reportUnknownTypes}\n */\n$jscomp.initSymbolAsyncIterator = function() {\n  $jscomp.initSymbol();\n  var symbolAsyncIterator = $jscomp.global['Symbol'].asyncIterator;\n  if (!symbolAsyncIterator) {\n    symbolAsyncIterator = $jscomp.global['Symbol'].asyncIterator =\n        $jscomp.global['Symbol']('Symbol.asyncIterator');\n  }\n\n  // Only need to do this once. All future calls are no-ops.\n  $jscomp.initSymbolAsyncIterator = function() {};\n};\n\n/**\n * Returns an iterator with the given `next` method.  Passing\n * all iterators through this function allows easily extending\n * the definition of `%IteratorPrototype%` if methods are ever\n * added to it in the future.\n *\n * @param {function(this: Iterator<T>): T} next\n * @return {!IteratorIterable<T>}\n * @template T\n * @suppress {reportUnknownTypes}\n */\n$jscomp.iteratorPrototype = function(next) {\n  $jscomp.initSymbolIterator();\n\n  var iterator = {next: next};\n  /**\n   * @this {IteratorIterable}\n   * @return {!IteratorIterable}\n   */\n  iterator[$jscomp.global['Symbol'].iterator] = function() {\n    return this;\n  };\n  return /** @type {!IteratorIterable} */ (iterator);\n};\n","/*\n * Copyright 2017 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview\n * @suppress {uselessCode}\n */\n\n/**\n * @suppress {missingProperties,reportUnknownTypes}\n * @return {boolean}\n */\n$jscomp.underscoreProtoCanBeSet = function() {\n  var x = {a: true};\n  var y = {};\n  try {\n    y.__proto__ = x;\n    return y.a;\n  } catch (e) {\n    // __proto__ property is readonly (possibly IE 10?)\n  }\n  return false;\n};\n\n/**\n * If we can implement it, this will be a function that attempts to set the\n * prototype of an object, otherwise it will be `null`.\n *\n * It returns the first argument if successful. Throws a `TypeError` if the\n * object is not extensible.\n *\n * @type {null|function(!Object, ?Object): !Object}\n */\n$jscomp.setPrototypeOf = (typeof Object.setPrototypeOf == 'function') ?\n    Object.setPrototypeOf :\n    $jscomp.underscoreProtoCanBeSet() ?\n    function(target, proto) {\n      target.__proto__ = proto;\n      if (target.__proto__ !== proto) {\n        throw new TypeError(target + ' is not extensible');\n      }\n      return target;\n    } :\n    null;\n","/*\n * Copyright 2018 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require base';\n'require es6/symbol';\n'require es6/util/setprototypeof';\n'require es6/util/makeiterator';\n\n/**\n * @fileoverview Implementation for $jscomp.generator\n *\n * This closure-compiler internal JavaScript library provides an ES3-compatible\n * API for writing generator functions using a minimum of boilerplate.\n *\n * Example:\n * ```javascript\n * // yields numbers starting with the given value, then incrementing by the\n * // value supplied to the next() method until the computed value is <= min or\n * // >= max. Then it returns the total number of times it yielded.\n * // If the client code calls throw(), the error will be logged and then\n * // yielded, but the generator won't terminate.\n * function *es6Definition(start, min, max) {\n *   let currentValue = start;\n *   let yieldCount = 0;\n *   while (currentValue > min && currentValue < max) {\n *     try {\n *       currentValue += yield(currentValue);\n *     } catch (e) {\n *       yield(e);\n *       console.log('client threw error', e);\n *     } finally {\n *       yieldCount++;\n *     }\n *   }\n *   return [yieldCount, currentValue];\n * }\n *\n * function es3Definition(start, min, max) {\n *   var currentValue;\n *   var yieldCount;\n *   var e;\n *\n *   return $jscomp.generator.createGenerator(\n *       es3Definition,\n *       function (context$) {\n *         switch (context$.nextAddress) {\n *           case 1: // execution always starts with 1\n *             currentValue = start;\n *             yieldCount = 0;\n *             // fall-through\n *\n *           case 2:\n *             if (!(currentValue > min && currentValue < max)) {\n *               // exit while loop:\n *               return context$.jumpTo(3);\n *             }\n *             // try {\n *             JSCompiler_temp_const$jscomp$1 = currentValue;\n *             context$.setCatchFinallyBlocks(4, 5);\n *             return context$.yield(currentValue, 7);\n *\n *           case 7:\n *             currentValue =\n *                 JSCompiler_temp_const$jscomp$1 + context$.yieldResult;\n *             // fall-through: execute finally block\n *\n *           case 5: // finally block start\n *             context$.enterFinallyBlock();\n *             yieldCount++;\n *             return context$.leaveFinallyBlock(6);\n *\n *           case 4: // catch block start\n *             e = context$.enterCatchBlock();\n *             return context$.yield(e, 8);\n *\n *           case 8: // finish catch block\n *             console.log('client threw error', e);\n *             return context$.jumpTo(5);\n *\n *           case 6:\n *             context$.jumpTo(2);\n *             break;\n *\n *           case 3:\n *             // come back here when while loop block exits\n *             return context$.return([yieldCount, currentValue]);\n *         }\n *       }\n *   });\n * };\n * ```\n */\n\n/** @const */\n$jscomp.generator = {};\n\n/**\n * Ensures that the iterator result is actually an object.\n *\n * @private\n * @final\n * @param {*} result\n * @return {void}\n * @throws {TypeError} if the result is not an instenace of Object.\n */\n$jscomp.generator.ensureIteratorResultIsObject_ = function(result) {\n  if (result instanceof Object) {\n    return;\n  }\n  throw new TypeError('Iterator result ' + result + ' is not an object');\n};\n\n\n/**\n * Tracks state machine state used by generator.Engine.\n *\n * @template VALUE\n * @constructor\n * @final\n * @struct\n */\n$jscomp.generator.Context = function() {\n  /**\n   * Whether the generator program is being executed at the moment in the\n   * current context. Is used to prevent reentrancy.\n   *\n   * @private\n   * @type {boolean}\n   */\n  this.isRunning_ = false;\n\n  /**\n   * An iterator that should yield all its values before the main program can\n   * continue.\n   *\n   * @private\n   * @type {?Iterator<VALUE>}\n   */\n  this.yieldAllIterator_ = null;\n\n  /**\n   * The value that will be sent to the program as the result of suspended\n   * yield expression.\n   *\n   * @type {?}\n   */\n  this.yieldResult = undefined;\n\n  /**\n   * The next address where the state machine execution should be resumed.\n   *\n   * <p>Program execution starts at 1 and ends at 0.\n   *\n   * @type {number}\n   */\n  this.nextAddress = 1;\n\n  /**\n   * The address that should be executed once an exception is thrown.\n   *\n   * <p>Value of 0 means no catch block exist that would handles an exception.\n   *\n   * @private\n   * @type {number}\n   */\n  this.catchAddress_ = 0;\n\n  /**\n   * The address that should be executed once the result is being returned\n   * or if the exception is thrown and there is no catchAddress specified.\n   *\n   * <p>Value of 0 means no finally block is set.\n   *\n   * @private\n   * @type {number}\n   */\n  this.finallyAddress_ = 0;\n\n  /**\n   * Stores information for the runtime propagation of values and control\n   * flow such as the behaviour of statements (break, continue, return and\n   * throw) that perform nonlocal transfers of control.\n   *\n   * @private\n   * @type {null|{return: VALUE}|{exception, isException: boolean}|{jumpTo: number}}.\n   */\n  this.abruptCompletion_ = null;\n\n  /**\n   * The preserved abruptCompletion_ when entering a `finally` block. If\n   * the `finally` block completes normally the preserved abruptCompletion_ is\n   * restored:\n   * <pre>\n   * try {\n   * } finally {  // nesting level 0\n   *   // abruptCompletion_ is saved in finallyContexts_[0]\n   *   try {\n   *   } finally {  // nesting level 1\n   *     // abruptCompletion_ is saved in finallyContexts_[1]\n   *     ...\n   *     // abruptCompletion_ is restored from finallyContexts_[1]\n   *   }\n   *   // abruptCompletion_ is restored from finallyContexts_[0]\n   * }\n   * <pre>\n   *\n   * @private\n   * @type {?Array<null|{return: VALUE}|{exception, isException: boolean}|{jumpTo: number}>}.\n   */\n  this.finallyContexts_ = null;\n};\n\n/**\n * Marks generator program as being run.\n *\n * @private\n * @final\n * @return {void}\n * @throws {TypeError} if generator is already running.\n */\n$jscomp.generator.Context.prototype.start_ = function() {\n  if (this.isRunning_) {\n    throw new TypeError('Generator is already running');\n  }\n  this.isRunning_ = true;\n};\n\n/**\n *\n *\n * @private\n * @final\n * @return {void}\n */\n$jscomp.generator.Context.prototype.stop_ = function() {\n  this.isRunning_ = false;\n};\n\n/**\n * Transfers program execution to an appropriate catch/finally block that\n * should be executed if exception occurs.\n *\n * @private\n * @final\n * @return {void}\n */\n$jscomp.generator.Context.prototype.jumpToErrorHandler_ = function() {\n  this.nextAddress = this.catchAddress_ || this.finallyAddress_;\n};\n\n/**\n * Sets the result of suspended yield expression.\n *\n * @private\n * @final\n * @param {?=} value The value to send to the generator.\n * @return {void}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.prototype.next_ = function(value) {\n  this.yieldResult = value;\n};\n\n/**\n * Throws exception as the result of suspended yield.\n *\n * @private\n * @final\n * @param {?} e\n * @return {void}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.prototype.throw_ = function(e) {\n  this.abruptCompletion_ = {exception: e, isException: true};\n  this.jumpToErrorHandler_();\n};\n\n/**\n * Returns a value as the result of generator function.\n *\n * @final\n * @param {VALUE=} value\n * @return {void}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.prototype.return = function(value) {\n  this.abruptCompletion_ = {return: /** @type {VALUE} */ (value)};\n  this.nextAddress = this.finallyAddress_;\n};\n\n/**\n * Changes the context so the program execution will continue from the given\n * state after executing nessesary pending finally blocks first.\n *\n * @final\n * @param {number} nextAddress The state that should be run.\n * @return {void}\n */\n$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks = function(\n    nextAddress) {\n  this.abruptCompletion_ = {jumpTo: nextAddress};\n  this.nextAddress = this.finallyAddress_;\n};\n\n/**\n * Pauses the state machine program assosiated with generator function to yield\n * a value.\n *\n * @final\n * @param {VALUE} value The value to return from the generator function via\n *     the iterator protocol.\n * @param {number} resumeAddress The address where the program should resume.\n * @return {{value: VALUE}}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.prototype.yield = function(value, resumeAddress) {\n  this.nextAddress = resumeAddress;\n  return {value: value};\n};\n\n/**\n * Causes the state machine program to yield all values from an iterator.\n *\n * @final\n * @param {string|!Iterator<VALUE>|!Iterable<VALUE>|!Arguments} iterable\n *     Iterator to yeild all values from.\n * @param {number} resumeAddress The address where the program should resume.\n * @return {void | {value: VALUE}}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.prototype.yieldAll = function(\n    iterable, resumeAddress) {\n  /** @const @type {!Iterator<VALUE>} */ var iterator =\n      $jscomp.makeIterator(iterable);\n  /** @const */ var result = iterator.next();\n  $jscomp.generator.ensureIteratorResultIsObject_(result);\n  if (result.done) {\n    // If `someGenerator` in `x = yield *someGenerator` completes immediately,\n    // x is the return value of that generator.\n    this.yieldResult = result.value;\n    this.nextAddress = resumeAddress;\n    return;\n  }\n  this.yieldAllIterator_ = iterator;\n  return this.yield(result.value, resumeAddress);\n};\n\n/**\n * Changes the context so the program execution will continue from the given\n * state.\n *\n * @final\n * @param {number} nextAddress The state the program should continue\n * @return {void}\n */\n$jscomp.generator.Context.prototype.jumpTo = function(nextAddress) {\n  this.nextAddress = nextAddress;\n};\n\n/**\n * Changes the context so the program execution ends.\n *\n * @final\n * @return {void}\n */\n$jscomp.generator.Context.prototype.jumpToEnd = function() {\n  this.nextAddress = 0;\n};\n\n/**\n * Sets catch / finally handlers.\n * Used for try statements with catch blocks.\n *\n * @final\n * @param {number} catchAddress The address of the catch block.\n * @param {number=} finallyAddress The address of the finally block.\n * @return {void}\n */\n$jscomp.generator.Context.prototype.setCatchFinallyBlocks = function(\n    catchAddress, finallyAddress) {\n  this.catchAddress_ = catchAddress;\n  if (finallyAddress != undefined) {\n    this.finallyAddress_ = finallyAddress;\n  }\n};\n\n/**\n * Sets finally handler.\n * Used for try statements without catch blocks.\n *\n * @const\n * @param {number=} finallyAddress The address of the finally block or 0.\n * @return {void}\n */\n$jscomp.generator.Context.prototype.setFinallyBlock = function(finallyAddress) {\n  this.catchAddress_ = 0;\n  this.finallyAddress_ = finallyAddress || 0;\n};\n\n/**\n * Sets a catch handler and jumps to the next address.\n * Used for try statements without finally blocks.\n *\n * @final\n * @param {number} nextAddress The state that should be run next.\n * @param {number=} catchAddress The address of the catch block or 0.\n * @return {void}\n */\n$jscomp.generator.Context.prototype.leaveTryBlock = function(\n    nextAddress, catchAddress) {\n  this.nextAddress = nextAddress;\n  this.catchAddress_ = catchAddress || 0;\n};\n\n/**\n * Initializes exception variable in the beginning of catch block.\n *\n * @final\n * @param {number=} nextCatchBlockAddress The address of the next catch block\n *     that is preceded by no finally blocks.\n * @return {?} Returns an exception that was thrown from \"try\" block.\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.prototype.enterCatchBlock = function(\n    nextCatchBlockAddress) {\n  this.catchAddress_ = nextCatchBlockAddress || 0;\n  /** @const */ var exception =\n      /** @type {{exception, isException: boolean}} */ (this.abruptCompletion_)\n          .exception;\n  this.abruptCompletion_ = null;\n  return exception;\n};\n\n/**\n * Saves the current throw context which will be restored at the end of finally\n * block.\n *\n * @final\n * @param {number=} nextCatchAddress\n * @param {number=} nextFinallyAddress\n * @param {number=} finallyDepth The nesting level of current \"finally\" block.\n * @return {void}\n */\n$jscomp.generator.Context.prototype.enterFinallyBlock = function(\n    nextCatchAddress, nextFinallyAddress, finallyDepth) {\n  if (!finallyDepth) {\n    this.finallyContexts_ = [this.abruptCompletion_];\n  } else {\n    /**\n     * @type {!Array<null|{return: VALUE}|{exception, isException: boolean}|{jumpTo: number}>}\n     */\n    (this.finallyContexts_)[finallyDepth] = this.abruptCompletion_;\n  }\n  this.catchAddress_ = nextCatchAddress || 0;\n  this.finallyAddress_ = nextFinallyAddress || 0;\n};\n\n/**\n * Figures out whether the program execution should continue normally, or jump\n * to the closest catch/finally block.\n *\n * @final\n * @param {number} nextAddress The state that should be run next.\n * @param {number=} finallyDepth The nesting level of current \"finally\" block.\n * @return {void}\n * @suppress {strictMissingProperties}\n */\n$jscomp.generator.Context.prototype.leaveFinallyBlock = function(\n    nextAddress, finallyDepth) {\n  // There could be trailing finally contexts if a nested finally throws an\n  // exception or return.\n  // e.g.\n  // try {\n  //   ...\n  //   return 1;\n  // } finally {\n  //   // finallyDepth == 0\n  //   // finallyContext == [{return: 1}]\n  //   try {\n  //     ...\n  //     try {\n  //       throw new Error(2);\n  //     } finally {\n  //       // finallyDepth == 1\n  //       // finallyContext == [{return: 1}, {exception: Error(2)}]\n  //       try {\n  //         throw new Error(3);\n  //       } finally {\n  //         // finallyDepth == 2\n  //         // finallyContext == [\n  //         //     {return: 1},\n  //         //     {exception: Error(2)},\n  //         //     {exception: Error(3)}\n  //         // ]\n  //         throw new Error(4); // gets written in abruptCompletion_\n  //         // leaveFinallyBlock() never gets called here\n  //       }\n  //       // leaveFinallyBlock() never gets called here\n  //     }\n  //   } catch (e) {\n  //      // swallow error\n  //      // abruptCompletion becomes null\n  //   } finally {\n  //     // finallyDepth == 1\n  //     // finallyContext == [\n  //     //     {return: 1},\n  //     //     null, // overwritten, because catch swallowed the error\n  //     //     {exception: Error(3)}  // left over\n  //     // ]\n  //     // leaveFinallyBlock() called here\n  //     // finallyContext == [{return: 1}]\n  //     // abruptCompletion == null\n  //   }\n  //   // leaveFinallyBlock() called here\n  //   // finallyContext = []\n  //   // abruptCompletion == {return: 1};\n  // }\n  /** @const */ var preservedContext =\n      /**\n       * @type {!Array<null|{return: VALUE}|{exception, isException: boolean}|{jumpTo: number}>}\n       */\n      (this.finallyContexts_).splice(finallyDepth || 0)[0];\n  /** @const */ var abruptCompletion = this.abruptCompletion_ =\n      this.abruptCompletion_ || preservedContext;\n  if (abruptCompletion) {\n    if (abruptCompletion.isException) {\n      return this.jumpToErrorHandler_();\n    }\n    // Check if there is a pending break/continue jump that is not preceded by\n    // finally blocks that should be executed before.\n    // We always generate case numbers for the start and end of loops before\n    // numbers for anything they contain, so any finally blocks within will be\n    // guaranteed to have higher addresses than the loop break and continue\n    // positions.\n    // e.g.\n    // l1: while (...) {            // generated addresses: 100: break l1;\n    //       try {                  // generated addresses: 101: finally,\n    //         try {                // generated addresses: 102: finally,\n    //           l2: while (...) {  // generated addresses: 103: break l2;\n    //\n    //                 if (...) {\n    //                   break l1;  // becomes\n    //                              // $context.jumpThroughFinallyBlocks(101),\n    //                              // since 2 finally blocks must be crossed\n    //                 }\n    //                 break l2;    // becomes $context.jumpTo(103)\n    //               }\n    //         } finally {\n    //           // When leaving this finally block:\n    //           // 1. We keep the abrupt completion indicating 'break l1'\n    //           // 2. We jump to the enclosing finally block.\n    //         }\n    //       } finally {\n    //         // When leaving this finally block:\n    //         // 1. We complete the abruptCompletion indicating 'break l1' by\n    //         //   jumping to the loop start address.\n    //         // 2. Abrupt completion is now null, so normal execution\n    //         //   continues from there.\n    //       }\n    //     }\n    if (abruptCompletion.jumpTo != undefined &&\n        this.finallyAddress_ < abruptCompletion.jumpTo) {\n      this.nextAddress = abruptCompletion.jumpTo;\n      this.abruptCompletion_ = null;\n    } else {\n      this.nextAddress = this.finallyAddress_;\n    }\n  } else {\n    this.nextAddress = nextAddress;\n  }\n};\n\n/**\n * Is used in transpilation of `for in` statements.\n *\n * <p><code>for (var i in obj) {...}</code> becomes:\n * <pre>\n * for (var i, $for$in = context$.forIn(obj);\n *      (i = $for$in.getNext()) != null;\n *      ) {\n *   ...\n * }\n * </pre>\n *\n * @final\n * @param {?} object\n * @return {!$jscomp.generator.Context.PropertyIterator}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.prototype.forIn = function(object) {\n  return new $jscomp.generator.Context.PropertyIterator(object);\n};\n\n/**\n * @constructor\n * @final\n * @struct\n * @param {?} object\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.PropertyIterator = function(object) {\n  /**\n   * @private\n   * @const\n   * @type {?}\n   */\n  this.object_ = object;\n\n  /**\n   * @private\n   * @const\n   * @type {!Array<string>}\n   */\n  this.properties_ = [];\n\n  for (var property in /** @type {!Object} */ (object)) {\n    this.properties_.push(property);\n  }\n  this.properties_.reverse();\n};\n\n/**\n * Returns the next object's property that is still valid.\n *\n * @final\n * @return {?string}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Context.PropertyIterator.prototype.getNext = function() {\n  // The JS spec does not require that properties added after the loop begins\n  // be included in the loop, but it does require that the current property\n  // must still exist on the object when the loop iteration starts.\n  while (this.properties_.length > 0) {\n    /** @const */ var property = this.properties_.pop();\n    if (property in /** @type {!Object} */ (this.object_)) {\n      return property;\n    }\n  }\n  return null;\n};\n\n/**\n * Engine handling execution of a state machine associated with the generator\n * program and its context.\n *\n * @private\n * @template VALUE\n * @constructor\n * @final\n * @struct\n * @param {function(!$jscomp.generator.Context<VALUE>): (void|{value: VALUE})} program\n */\n$jscomp.generator.Engine_ = function(program) {\n  /**\n   * @private\n   * @const\n   * @type {!$jscomp.generator.Context<VALUE>}\n   */\n  this.context_ = new $jscomp.generator.Context();\n\n  /**\n   * @private\n   * @const\n   * @type {function(!$jscomp.generator.Context<VALUE>): (void|{value: VALUE})}\n   */\n  this.program_ = program;\n};\n\n/**\n * Returns an object with two properties done and value.\n * You can also provide a parameter to the next method to send a value to the\n * generator.\n *\n * @private\n * @final\n * @param {?=} value The value to send to the generator.\n * @return {!IIterableResult<VALUE>}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Engine_.prototype.next_ = function(value) {\n  this.context_.start_();\n  if (this.context_.yieldAllIterator_) {\n    return this.yieldAllStep_(\n        this.context_.yieldAllIterator_.next, value, this.context_.next_);\n  }\n  this.context_.next_(value);\n  return this.nextStep_();\n};\n\n/**\n * Attempts to finish the generator with a given value.\n *\n * @private\n * @final\n * @param {VALUE} value The value to return.\n * @return {!IIterableResult<VALUE>}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Engine_.prototype.return_ = function(value) {\n  this.context_.start_();\n  /** @const */ var yieldAllIterator = this.context_.yieldAllIterator_;\n  if (yieldAllIterator) {\n    /** @const @type {function(VALUE): !IIterableResult<VALUE>} */ var\n        returnFunction =\n            'return' in yieldAllIterator ? yieldAllIterator['return'] :\n                                           function(v) {\n                                             return {value: v, done: true};\n                                           };\n    return this.yieldAllStep_(returnFunction, value, this.context_.return);\n  }\n  this.context_.return(value);\n  return this.nextStep_();\n};\n\n/**\n * Resumes the execution of a generator by throwing an error into it and\n * returns an object with two properties done and value.\n *\n * @private\n * @final\n * @param {?} exception The exception to throw.\n * @return {!IIterableResult<VALUE>}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Engine_.prototype.throw_ = function(exception) {\n  this.context_.start_();\n  if (this.context_.yieldAllIterator_) {\n    return this.yieldAllStep_(\n        this.context_.yieldAllIterator_['throw'], exception,\n        this.context_.next_);\n  }\n  this.context_.throw_(exception);\n  return this.nextStep_();\n};\n\n/**\n * Redirects next/throw/return method calls to an iterator passed to \"yield *\".\n *\n * @private\n * @final\n * @template T\n * @param {function(this:Iterator<VALUE>, T): !IIterableResult<VALUE>} action\n * @param {T} value\n * @param {function(this:$jscomp.generator.Context, VALUE): void} nextAction\n * @return {!IIterableResult<VALUE>}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Engine_.prototype.yieldAllStep_ = function(\n    action, value, nextAction) {\n  try {\n    /** @const */ var result = action.call(\n        /** @type {!Iterator<VALUE>} */ (this.context_.yieldAllIterator_),\n        value);\n    $jscomp.generator.ensureIteratorResultIsObject_(result);\n    if (!result.done) {\n      this.context_.stop_();\n      return result;\n    }\n    // After `x = yield *someGenerator()` x is the return value of the\n    // generator, not a value passed to this generator by the next() method.\n    /** @const */ var resultValue = result.value;\n  } catch (e) {\n    this.context_.yieldAllIterator_ = null;\n    this.context_.throw_(e);\n    return this.nextStep_();\n  }\n  this.context_.yieldAllIterator_ = null;\n  nextAction.call(this.context_, resultValue);\n  return this.nextStep_();\n};\n\n/**\n * Continues/resumes program execution until the next suspension point (yield).\n *\n * @private\n * @final\n * @return {!IIterableResult<VALUE>}\n * @suppress {reportUnknownTypes, strictMissingProperties}\n */\n$jscomp.generator.Engine_.prototype.nextStep_ = function() {\n  while (this.context_.nextAddress) {\n    try {\n      /** @const */ var yieldValue = this.program_(this.context_);\n      if (yieldValue) {\n        this.context_.stop_();\n        return {value: yieldValue.value, done: false};\n      }\n    } catch (e) {\n      this.context_.yieldResult = undefined;\n      this.context_.throw_(e);\n    }\n  }\n\n  this.context_.stop_();\n  if (this.context_.abruptCompletion_) {\n    /** @const */ var abruptCompletion = this.context_.abruptCompletion_;\n    this.context_.abruptCompletion_ = null;\n    if (abruptCompletion.isException) {\n      throw abruptCompletion.exception;\n    }\n    return {value: abruptCompletion.return, done: true};\n  }\n  return {value: /** @type {?} */ (undefined), done: true};\n};\n\n/**\n * The Generator object that is returned by a generator function and it\n * conforms to both the iterable protocol and the iterator protocol.\n *\n * @private\n * @template VALUE\n * @constructor\n * @final\n * @implements {Generator<VALUE>}\n * @param {!$jscomp.generator.Engine_<VALUE>} engine\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.Generator_ = function(engine) {\n  /** @const @override */\n  this.next = function(opt_value) {\n    return engine.next_(opt_value);\n  };\n\n  /** @const @override */\n  this.throw = function(exception) {\n    return engine.throw_(exception);\n  };\n\n  /** @const @override */\n  this.return = function(value) {\n    return engine.return_(value);\n  };\n\n  $jscomp.initSymbolIterator();\n\n  /** @this {$jscomp.generator.Generator_<VALUE>} */\n  this[Symbol.iterator] = function() {\n    return this;\n  };\n\n  // TODO(skill): uncomment once Symbol.toStringTag is polyfilled:\n  // this[Symbol.toStringTag] = 'Generator';\n};\n\n/**\n * Creates a generator backed up by Engine running a given program.\n *\n * @final\n * @template VALUE\n * @param {function(this:?, ...): (!Iterator<VALUE>|!Iterable<VALUE>)} generator\n * @param {function(!$jscomp.generator.Context<VALUE>): (void|{value: VALUE})} program\n * @return {!Generator<VALUE>}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.generator.createGenerator = function(generator, program) {\n  /** @const */ var result =\n      new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(program));\n  // The spec says that `myGenFunc() instanceof myGenFunc` must be true.\n  // We'll make this work by setting the prototype before calling the\n  // constructor every time. All of the methods of the object are defined on the\n  // instance by the constructor, so this does no harm.\n  // We also cast Generator_ to Object to hide dynamic inheritance from\n  // jscompiler, it makes ConformanceRules$BanUnknownThis happy.\n  if ($jscomp.setPrototypeOf) {\n    /** @type {function(!Object, ?Object): !Object} */ ($jscomp.setPrototypeOf)(\n        result, generator.prototype);\n  }\n  return result;\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require base';\n'require es6/promise';\n'require es6/generator_engine';\n\n/**\n * Handles the execution of an async function.\n *\n * An async function, foo(a, b), will be rewritten as:\n *\n * ```\n * function foo(a, b) {\n *   let $jscomp$async$this = this;\n *   let $jscomp$async$arguments = arguments;\n *   let $jscomp$async$super$get$x = () => super.x;\n *   function* $jscomp$async$generator() {\n *     // original body of foo() with:\n *     // - await (x) replaced with yield (x)\n *     // - arguments replaced with $jscomp$async$arguments\n *     // - this replaced with $jscomp$async$this\n *     // - super.x replaced with $jscomp$async$super$get$x()\n *     // - super.x(5) replaced with  $jscomp$async$super$get$x()\n *     //      .call($jscomp$async$this, 5)\n *   }\n *   return $jscomp.executeAsyncGenerator($jscomp$async$generator());\n * }\n * ```\n * @param {!Generator<?>} generator\n * @return {!Promise<?>}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.asyncExecutePromiseGenerator = function(generator) {\n  function passValueToGenerator(value) {\n    return generator.next(value);\n  }\n\n  function passErrorToGenerator(error) {\n    return generator.throw(error);\n  }\n\n  return new Promise(function(resolve, reject) {\n    function handleGeneratorRecord(/** !IIterableResult<*> */ genRec) {\n      if (genRec.done) {\n        resolve(genRec.value);\n      } else {\n        // One can await a non-promise, so genRec.value\n        // might not already be a promise.\n        Promise.resolve(genRec.value)\n            .then(passValueToGenerator, passErrorToGenerator)\n            .then(handleGeneratorRecord, reject);\n      }\n    }\n\n    handleGeneratorRecord(generator.next());\n  });\n};\n\n/**\n * Handles the execution of a generator function returning promises.\n *\n * An async function, foo(a, b), will be rewritten as:\n *\n * ```\n * function foo(a, b) {\n *   let $jscomp$async$this = this;\n *   let $jscomp$async$arguments = arguments;\n *   let $jscomp$async$super$get$x = () => super.x;\n *   return $jscomp.asyncExecutePromiseGeneratorFunction(\n *       function* () {\n *         // original body of foo() with:\n *         // - await (x) replaced with yield (x)\n *         // - arguments replaced with $jscomp$async$arguments\n *         // - this replaced with $jscomp$async$this\n *         // - super.x replaced with $jscomp$async$super$get$x()\n *         // - super.x(5) replaced with  $jscomp$async$super$get$x()\n *         //      .call($jscomp$async$this, 5)\n *       });\n * }\n * ```\n * @param {function(): !Generator<?>} generatorFunction\n * @return {!Promise<?>}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.asyncExecutePromiseGeneratorFunction = function(generatorFunction) {\n  return $jscomp.asyncExecutePromiseGenerator(generatorFunction());\n};\n\n/**\n * Handles the execution of a state machine program that represents transpiled\n * async function.\n *\n * @final\n * @param {function(!$jscomp.generator.Context<?>): (void|{value: ?})} program\n * @return {!Promise<?>}\n * @suppress {reportUnknownTypes, visibility}\n */\n$jscomp.asyncExecutePromiseGeneratorProgram = function(program) {\n  return $jscomp.asyncExecutePromiseGenerator(\n      new $jscomp.generator.Generator_(\n          new $jscomp.generator.Engine_(\n              program)));\n};\n","function Bubblelines(config) {\r\n\tthis.container = config.container;\r\n\tthis.externalClickHandler = config.clickHandler;\r\n\t\r\n\tthis.INTERVAL = 50; // milliseconds between each redraw\r\n\tthis.DISMISS_DELAY = 2500; // milliseconds before tooltip auto hides\r\n\tthis.UNIFORM_LINE_LENGTH = true; // should all document lines be the same length?\r\n\tthis.SEPARATE_LINES_FOR_TERMS = false; // draw a separate line for each term?\r\n\t\r\n\t// these 2 get set in the code\r\n\tthis.MAX_LABEL_WIDTH = 0;\r\n\tthis.MAX_LINE_WIDTH = 0;\r\n\t\r\n\tthis.DRAW_TITLES = true; // where to draw the document titles for each graph; gets set to false if the corpus has only 1 document\r\n\tthis.DRAW_SHORT_TITLES = false; // whether to use the docIndex for the title or not; gets set to true if the window is small enough\r\n\t\r\n\tthis.MIN_GRAPH_SEPARATION = 50; // vertical separation between graphs\r\n\tthis.graphSeparation = 50;\r\n\t\r\n\tthis.yIndex = 0; // for tracking yIndex during the drawing process\r\n\t\r\n\tthis.mouseOver = false; // is the mouse over the canvas\r\n\tthis.intervalId = null;\r\n\tthis.clearToolTipId = null;\r\n\tthis.overBubbles = [];\r\n\tthis.lastClickedBubbles = {};\r\n\tthis.dragInfo = null;\r\n\tthis.canvas = null;\r\n\tthis.ctx = null;\r\n\tthis.maxDocLength = 2;\r\n\tthis.maxFreq = {term: null, value: 0};\r\n\tthis.maxRadius = 0;\r\n\t\r\n\t/**\r\n\t * The cache of docs. Each has the following properties:\r\n\t * @param {String} id\r\n\t * @param {String} title\r\n\t * @param {Integer} index\r\n\t * @param {Integer} totalTokens\r\n\t * @param {Object} terms Stores the terms for this doc\r\n\t * @param {Object} freqCounts Used for tool tip display\r\n\t * @param {Float} height The height of the graph for this doc\r\n\t * @param {Float} titleWidth The width of the title\r\n\t * @param {Float} lineLength The length of the graph line for this doc\r\n\t */\r\n\tthis.cache = new Ext.util.MixedCollection();\r\n\t\r\n\tthis.currentTerms = {}; // tracks what terms we're currently showing\r\n\tthis.termsFilter = []; // tracks the subset of terms\r\n\tthis.bubbleSpacing = 50;\r\n\r\n\tthis.initialized = false;\r\n}\r\n\r\nBubblelines.prototype = {\r\n\tconstructor: Bubblelines,\r\n\t\r\n\tinitializeCanvas: function() {\r\n\t\tvar container = this.container;\r\n\t\tvar height = container.getHeight();\r\n\t\tvar width = container.getWidth();\r\n\t\tthis.DRAW_SHORT_TITLES = width < 500;\r\n\t\tvar id = Ext.id('bubblelines');\r\n\t\tcontainer.add({\r\n\t\t\txtype: 'container',\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\thtml: '<canvas id=\"'+id+'\" width=\"'+width+'\" height=\"'+height+'\"></canvas>',\r\n\t\t\tborder: false,\r\n        \tlisteners: {\r\n        \t\tafterrender: {\r\n        \t\t\tfn: function(cnt) {\r\n    \t\t\t\t\tthis.canvas = document.getElementById(id);\r\n        \t\t\t\tthis.ctx = this.canvas.getContext('2d');\r\n        \t\t\t\tthis.canvas.addEventListener('click', this.clickHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousedown', this.mouseDownHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseup', this.mouseUpHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousemove', this.moveHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseenter', this.mouseEnterHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseleave', this.mouseLeaveHandler.bind(this), false);\r\n        \t\t\t\t            \t\t\t\t\r\n//        \t\t\t\tthis.findLongestDocumentTitle();\r\n//        \t\t\t\t\r\n//        \t\t\t\tvar padding = 75;\r\n//        \t\t\t\tif (this.DRAW_SHORT_TITLES) padding = 50;\r\n//        \t\t\t\tthis.setMaxLineWidth(width - this.MAX_LABEL_WIDTH - padding);\r\n        \t\t\t},\r\n        \t\t\tsingle: true,\r\n        \t\t\tscope: this\r\n        \t\t}\r\n        \t}\r\n\t\t});\r\n\t\tcontainer.updateLayout();\r\n\t\tthis.initialized = true;\r\n\t},\r\n\t\r\n\tdoBubblelinesLayout: function() {\r\n\t\tif (this.initialized) {\r\n\t\t\tvar width = this.container.getWidth();\r\n\t\t\t\r\n\t\t\t// width related calculations\r\n\t\t\tthis.DRAW_SHORT_TITLES = width < 500;\r\n\t\t\tthis.setTitleWidthsAndMaxTitleWidth();\r\n\t\t\t\r\n\t\t\tvar children = Ext.DomQuery.jsSelect('div:not(div[class*=term])', this.container.el.dom);\r\n\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\tvar child = Ext.fly(children[i]);\r\n\t\t\t\tchild.setWidth(width);\r\n\t\t\t}\r\n\t\t\tthis.canvas.width = width;\r\n\t\t\t\r\n\t\t\tvar padding = 75;\r\n\t\t\tif (this.DRAW_SHORT_TITLES) padding = 50;\r\n\t\t\tthis.setMaxLineWidth(width - this.MAX_LABEL_WIDTH - padding);\r\n\t\t\tthis.setLineLengths();\r\n\t\t\t\r\n\t\t\tthis.recache();\r\n\t\t\t\r\n\t\t\t// height related calculations\r\n\t\t\tthis.setCanvasHeight();\r\n\t\t\t\r\n\t\t\tthis.drawGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\taddDocToCache: function(doc) {\r\n\t\tthis.cacheBubbles(doc);\r\n\t\tthis.calculateBubbleRadii(doc);\r\n\t\tdoc.lineLength = 600;\r\n\t\tdoc.freqCounts = {}; // used for tool tip display\r\n\t\tif (this.cache.containsKey(doc.id) === false) {\r\n\t\t\tthis.cache.add(doc);\r\n\t\t} else {\r\n\t\t\tthis.cache.replace(doc.id, doc);\r\n\t\t}\r\n\t\tthis.cache.sort('index', 'ASC');\r\n\t},\r\n\t\r\n\taddTermsToDoc: function(termsObj, docId) {\r\n\t\tvar term;\r\n\t\t// only one key\r\n\t\tfor (var key in termsObj) {\r\n\t\t\tterm = key;\r\n\t\t}\r\n\t\tthis.currentTerms[term] = true;\r\n\t\t\r\n\t\tvar doc = this.cache.get(docId);\r\n\t\tExt.apply(doc.terms, termsObj);\r\n\t\tvar maxFreqChanged = this.cacheBubbles(doc);\r\n\t\tif (maxFreqChanged) {\r\n\t\t\tthis.recache();\r\n\t\t} else {\r\n\t\t\tthis.calculateBubbleRadii(doc);\r\n\t\t}\r\n\t},\r\n\t\r\n\tcacheBubbles: function(doc) {\r\n\t\tvar maxFreqChanged = false;\r\n\t\tfor (var term in doc.terms) {\r\n\t\t\tvar termInfo = doc.terms[term];\r\n\t\t\tvar bins = termInfo.distributions.length;\r\n\t\t\tvar spacing = doc.lineLength / bins;\r\n\t\t\t\r\n\t\t\tvar cachedPositions = [];\r\n\t\t\tvar tokenPos = 0;\r\n\t\t\tvar maxDistribution = 0;\r\n\t\t\tvar xIndex = 0;\r\n\t\t\tfor (var i = 0; i < bins; i++) {\r\n\t\t\t\tvar d = termInfo.distributions[i];\r\n\t\t\t\tif (d > maxDistribution) {\r\n\t\t\t\t\tmaxDistribution = d;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcachedPositions.push({id: Ext.id(null, 'bub'), x: xIndex, freq: d, radius: 0, bin: i, tokenPositions: termInfo.positions.slice(tokenPos, tokenPos+=d)});\r\n\t\t\t\txIndex += spacing;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdoc.terms[term].maxDistribution = maxDistribution;\r\n\t\t\tdoc.terms[term].pos = cachedPositions;\r\n\t\t\t\r\n\t\t\tif (maxDistribution > this.maxFreq.value) {\r\n\t\t\t\tmaxFreqChanged = true;\r\n\t\t\t\tthis.setMaxFreq({term: term, value: maxDistribution});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxFreqChanged;\r\n\t},\r\n\t\r\n\tcalculateBubbleRadii: function(doc, newTerm) {\r\n\t\tvar maxFreqLog = Math.log(this.maxFreq.value);\r\n\t\tvar minFreq = Math.log(2) / 2;\r\n//\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tvar term = doc.terms[t];\r\n\t\t\t\tif (term) {\r\n\t\t\t\t\tif (newTerm == null || t == newTerm) {\r\n\t\t\t\t\t\tfor (var i = 0; i < term.pos.length; i++) {\r\n\t\t\t\t\t\t\tvar bubble = term.pos[i];\r\n\t\t\t\t\t\t\tif (bubble.freq > 0) {\r\n\t\t\t\t\t\t\t\tvar freqLog = Math.max(Math.log(bubble.freq), minFreq);\r\n\t\t\t\t\t\t\t\tvar radius = freqLog / maxFreqLog * this.maxRadius;\r\n\t\t\t\t\t\t\t\tbubble.radius = radius;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbubble.radius = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n//\t\t}, this);\r\n\t},\r\n\t\r\n\t\r\n\trecache: function() {\r\n\t\tfunction doCache(doc) {\r\n\t\t\tthis.cacheBubbles(doc);\r\n\t\t\tthis.calculateBubbleRadii(doc);\r\n\t\t}\r\n\t\t\r\n\t\tthis.cache.each(doCache, this);\r\n\t},\r\n\t\r\n\t/**\r\n\t * Get the total height of the all the graphs\r\n\t */\r\n\tgetTotalHeight: function() {\r\n\t\tvar totalHeight = this.maxRadius;\r\n\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\ttotalHeight += doc.height;\r\n\t\t}, this);\r\n\t\treturn totalHeight;\r\n\t},\r\n\t\r\n\r\n\t/**\r\n\t * Set the height for the canvas and associated elements\r\n\t */\r\n\tsetCanvasHeight: function() {\r\n\t\tthis.calculateGraphHeights();\r\n\t\tvar height = this.getTotalHeight();\r\n\t\tvar container = this.container.dom;\r\n\t\tif (container !== undefined) {\r\n\t\t\tvar children = Ext.DomQuery.jsSelect('div', container);\r\n\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\tvar child = Ext.fly(children[i]);\r\n\t\t\t\tchild.setHeight(height);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.canvas) {\r\n\t\t\tthis.canvas.height = height;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Set max line width as well as maxRadius\r\n\t */\r\n\tsetMaxLineWidth: function(width) {\r\n\t\tthis.maxRadius = width / 30;\r\n\t\tthis.MAX_LINE_WIDTH = width - this.maxRadius / 2;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Calculate graph heights, based on maxRadius\r\n\t */\r\n\tcalculateGraphHeights: function() {\r\n\t\tvar graphSeparation = this.maxRadius * 0.5;\r\n\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\tvar terms = this.termsFilter;\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tvar height = this.maxRadius * terms.length;\r\n\t\t\t\tfor (var i = 0; i < terms.length; i++) {\r\n\t\t\t\t\tif (!doc.terms[terms[i]]) {\r\n\t\t\t\t\t\theight -= this.maxRadius;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (height == 0) height = this.maxRadius;\r\n\t\t\t\t\r\n\t\t\t\tdoc.height = height + graphSeparation;\r\n\t\t\t}, this);\r\n\t\t} else {\r\n\t\t\tvar height = Math.max(this.maxRadius, this.MIN_GRAPH_SEPARATION);\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tdoc.height = height + graphSeparation;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfindLongestDocument: function(doc) {\r\n\t\tvar twt = doc.getTotalWordTokens();\r\n\t\tif (twt > this.maxDocLength) {\r\n\t\t\tthis.maxDocLength = twt;\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetTitleWidth: function(doc) {\r\n\t\tvar title = doc.title;\r\n\t\tif (this.DRAW_SHORT_TITLES) {\r\n\t\t\tvar index = this.cache.indexOf(doc);\r\n\t\t\ttitle = (index+1)+')';\r\n\t\t}\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\t\tvar width = this.ctx.measureText(title).width;\r\n\t\treturn width;\r\n\t},\r\n\t\r\n\tsetTitleWidthsAndMaxTitleWidth: function() {\r\n\t\tfunction doTitle(doc, index) {\r\n\t\t\tvar width = this.getTitleWidth(doc);\r\n\t\t\tdoc.titleWidth = width;\r\n\t\t\tif (width > this.MAX_LABEL_WIDTH) {\r\n\t\t\t\tthis.MAX_LABEL_WIDTH = width;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.cache.each(doTitle, this);\r\n\t},\r\n\t\r\n\tsetLineLengths: function() {\r\n\t\tfunction doLength(doc, index) {\r\n\t\t\tvar lineLength;\r\n\t\t\tif (this.UNIFORM_LINE_LENGTH) {\r\n\t\t\t\tlineLength = this.MAX_LINE_WIDTH;\r\n\t\t\t} else {\r\n\t\t\t\tvar percentage = Math.log(doc.getTotalWordTokens()) / Math.log(this.maxDocLength);\r\n\t\t\t\tlineLength = percentage * this.MAX_LINE_WIDTH;\r\n\t\t\t}\r\n\t\t\tdoc.lineLength = lineLength;\r\n\t\t}\r\n\t\t\r\n\t\tthis.cache.each(doLength, this);\r\n\t},\r\n\t\r\n\tdrawGraph: function(includeLegend) {\r\n\t\tif (this.intervalId != null) clearInterval(this.intervalId);\r\n\t\t\r\n\t\tif (this.mouseOver) {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.bind(this, [includeLegend]), this.INTERVAL);\r\n\t\t} else {\r\n\t\t\tsetTimeout(this.doDraw.bind(this, [includeLegend]), 5);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoDraw: function(includeLegend) {\r\n\t\tthis.clearCanvas();\r\n\t\tthis.yIndex = this.maxRadius;\r\n\t\tif (includeLegend === true) this.yIndex += 30;\r\n\t\tthis.cache.each(this.drawDocument, this);\r\n\t\tif (includeLegend === true) this.drawLegend();\r\n\t\telse this.drawToolTip();\r\n\t\tthis.doDrag();\r\n\t},\r\n\t\r\n\tdrawDocument: function(doc, index, totalDocs) {\r\n\t\tif (!doc.hidden) {\r\n\t\t\tvar lineLength = doc.lineLength;\r\n\t\t\tvar titleIndent = this.MAX_LABEL_WIDTH - doc.titleWidth;\r\n\t\t\t\r\n\t\t\tvar xIndex = 5;\r\n\t\t\t\r\n\t\t\tthis.ctx.textBaseline = 'top';\r\n\t\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\t\t\t\r\n\t\t\tif (this.dragInfo != null && this.dragInfo.oldIndex == index) {\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 0.5)';\r\n\t\t\t\txIndex += titleIndent;\r\n\t\t\t\tthis.ctx.fillText(doc.title, xIndex, this.yIndex);\r\n\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tthis.yIndex += doc.height;\r\n\t\t\t\t}\r\n\t\t\t} else {\t\t\t\r\n\t\t\t\t// draw label\r\n\t\t\t\tif (this.DRAW_TITLES) {\r\n\t\t\t\t\txIndex += titleIndent;\r\n\t//\t\t\t\tvar c = this.getColor(this.getApplication().getCorpus().getDocument(doc.id).getIndex());\r\n\t//\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c[0]+', '+c[1]+', '+c[2]+', 1.0)';\r\n\t//\t\t\t\tthis.ctx.lineWidth = 2;\r\n\t//\t\t\t\tthis.ctx.beginPath();\r\n\t//\t\t\t\tthis.ctx.moveTo(xIndex, this.yIndex+12);\r\n\t//\t\t\t\tthis.ctx.lineTo(this.MAX_LABEL_WIDTH, this.yIndex+12);\r\n\t//\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tvar title = doc.title;\r\n\t\t\t\t\tif (this.DRAW_SHORT_TITLES) title = (index+1)+')';\r\n\t\t\t\t\tthis.ctx.fillText(title, xIndex, this.yIndex);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t//\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 128, 1.0)';\r\n\t//\t\t\tthis.ctx.fillRect(0, this.yIndex-this.maxRadius*0.75, 250, 2);\r\n\t\t\t\t\r\n\t\t\t\t// shift down slightly to vertically align line and bubbles with label\r\n\t\t\t\tthis.yIndex += 4;\r\n\t\t\t\t\r\n\t\t\t\t// draw line\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tfunction drawLine() {\r\n\t\t\t\t\txIndex = that.MAX_LABEL_WIDTH + that.maxRadius;\r\n\t\t\t\t\tthat.ctx.strokeStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tthat.ctx.fillStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tthat.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex, that.yIndex-6);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex, that.yIndex+6);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex, that.yIndex);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex + lineLength, that.yIndex);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex + lineLength, that.yIndex-6);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex + lineLength, that.yIndex+6);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t//\t\t\tvar filter = this.getApiParamValue('typeFilter');\r\n\t//\t\t\tvar filter = [];\r\n\t//\t\t\tfor (var term in this.currentTerms) {\r\n\t//\t\t\t\tfilter.push(term);\r\n\t//\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t} else if (this.termsFilter == null || this.termsFilter.length === 0) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// draw bubbles\r\n\t\t\t\tvar pi2 = Math.PI * 2;\r\n\t\t\t\t\r\n\t\t\t\tvar freqTotal = 0;\r\n\t\t\t\tdoc.freqCounts = {};\r\n\t\t\t\tvar terms = doc.terms;\r\n\t\t\t\tvar checkClickedBubbles = this.lastClickedBubbles[index] != null;\r\n\t\t\t\tvar termsDrawn = 0;\r\n\t\t\t\tfor (var t in terms) {\r\n\t\t\t\t\tif (this.termsFilter.indexOf(t) !== -1) {\r\n\t\t\t\t\t\tvar info = terms[t];\r\n\t\t\t\t\t\tif (info) {\r\n\t\t\t\t\t\t\ttermsDrawn++;\r\n\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\tdrawLine();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar freqForType = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar c = info.color.join(',');\r\n\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c+', 1)';\r\n\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.35)';\r\n\t\t\t\t\t\t\tthis.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfreqTotal += info.rawFreq;\r\n\t\t\t\t\t\t\tfreqForType += info.rawFreq;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar checkCurrentType = checkClickedBubbles && this.lastClickedBubbles[index][t];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (var i = 0; i < info.pos.length; i++) {\r\n\t\t\t\t\t\t\t\tvar b = info.pos[i];\r\n\t\t\t\t\t\t\t\tif (b.radius > 0) {\r\n\t\t\t\t\t\t\t\t\tvar doClickedBubble = false;\r\n\t\t\t\t\t\t\t\t\tif (checkCurrentType && this.lastClickedBubbles[index][t] == b.id) {\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba(0, 0, 0, 0.75)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.5)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.lineWidth = 1;\r\n\t\t\t\t\t\t\t\t\t\tdoClickedBubble = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.arc(b.x+xIndex, this.yIndex, b.radius, 0, pi2, true);\r\n\t\t\t\t\t\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.fill();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (doClickedBubble) {\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c+', 1)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.35)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdoc.freqCounts[t] = freqForType;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\t\t\t\tthis.ctx.fillText(freqForType, xIndex + lineLength + 5, this.yIndex-4);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.yIndex += this.maxRadius;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS && termsDrawn == 0) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\tthis.ctx.fillText(0, xIndex + lineLength + 5, this.yIndex-4);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.yIndex += this.maxRadius;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\txIndex += lineLength;\r\n\t\t\t\t\r\n\t\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\tthis.ctx.fillText(freqTotal, xIndex + 5, this.yIndex-4);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\tthis.yIndex += doc.height;\r\n\t\t\t} else {\r\n\t\t\t\tthis.yIndex += this.maxRadius * 0.5;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// undo previous shift\r\n\t\t\tthis.yIndex -= 4;\r\n\t\t\t\r\n\t//\t\tthis.ctx.fillStyle = 'rgba(128, 0, 0, 1.0)';\r\n\t//\t\tthis.ctx.fillRect(0, this.yIndex-this.maxRadius*0.75, 350, 2);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawLegend: function() { // obsolete code?\r\n\t\tvar x = this.MAX_LABEL_WIDTH + this.maxRadius;\r\n\t\tvar y = 5;\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = '16px serif';\r\n\t\tif (this.typeStore) {\r\n\t\t\tthis.typeStore.each(function(record) {\r\n\t\t\t\tvar color = record.get('color').join(',');\r\n\t\t\t\tthis.ctx.fillStyle = 'rgb('+color+')';\r\n\t\t\t\tvar type = record.get('type');\r\n\t\t\t\tthis.ctx.fillText(type, x, y);\r\n\t\t\t\tvar width = this.ctx.measureText(type).width;\r\n\t\t\t\tx += width + 8;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawToolTip: function() {\r\n\t\tif (this.overBubbles.length > 0) {\r\n\t\t\tthis.ctx.lineWidth = 0.5;\r\n\t\t\tthis.ctx.fillStyle = 'rgba(224, 224, 224, 0.8)';\r\n\t\t\tthis.ctx.strokeStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\r\n\t\t\tvar x = this.overBubbles[0].x;\r\n\t\t\tvar y = this.overBubbles[0].y;\r\n\t\t\tvar width = 110;\r\n\t\t\tif (x + width > this.canvas.width) {\r\n\t\t\t\tx -= width;\r\n\t\t\t}\r\n\t\t\tvar height;\r\n\t\t\tvar summary = this.overBubbles[0].label == null;\r\n\t\t\tif (summary) {\r\n\t\t\t\tvar doc = this.cache.get(this.overBubbles[0].docIndex);\r\n\t\t\t\tvar count = 1;\r\n\t\t\t\tfor (var t in doc.freqCounts) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t\theight = count * 16;// + 10;\r\n\t\t\t\tif (y + height > this.canvas.height) {\r\n\t\t\t\t\ty -= height;\r\n\t\t\t\t}\r\n\t\t\t\tthis.ctx.fillRect(x, y, width, height);\r\n\t\t\t\tthis.ctx.strokeRect(x, y, width, height);\r\n\t\t\t\tx += 10;\r\n\t\t\t\ty += 10;\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\tthis.ctx.font = '10px Verdana';\r\n//\t\t\t\tvar total = 0;\r\n\t\t\t\tfor (var t in doc.freqCounts) {\r\n\t\t\t\t\tvar freq = doc.freqCounts[t];\r\n//\t\t\t\t\ttotal += freq;\r\n\t\t\t\t\tthis.ctx.fillText(t+': '+freq, x, y, 90);\r\n\t\t\t\t\ty += 16;\r\n\t\t\t\t}\r\n//\t\t\t\tthis.ctx.fillText(this.localize('total')+': '+total, x, y, 90);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\theight = this.overBubbles.length * 16 + 10;\r\n\t\t\t\tif (y + height > this.canvas.height) {\r\n\t\t\t\t\ty -= height;\r\n\t\t\t\t}\r\n\t\t\t\tthis.ctx.fillRect(x, y, width, height);\r\n\t\t\t\tthis.ctx.strokeRect(x, y, width, height);\r\n\t\t\t\tx += 10;\r\n\t\t\t\ty += 10;\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\tfor (var i = 0; i < this.overBubbles.length; i++) {\r\n\t\t\t\t\tvar b = this.overBubbles[i];\r\n\t\t\t\t\tthis.ctx.fillText(b.label+': '+b.freq, x, y, 90);\r\n\t\t\t\t\ty += 16;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.clearToolTipId == null) {\r\n\t\t\t\tthis.clearToolTipId = setTimeout(this.clearToolTip.bind(this), this.DISMISS_DELAY);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tclearToolTip: function() {\r\n\t\tthis.overBubbles = [];\r\n\t\tclearTimeout(this.clearToolTipId);\r\n\t\tthis.clearToolTipId = null;\r\n\t},\r\n\t\r\n\tmouseEnterHandler: function(event) {\r\n\t\tthis.mouseOver = true;\r\n\t\tthis.drawGraph();\r\n\t},\r\n\t\r\n\tmouseLeaveHandler: function(event) {\r\n\t\tthis.mouseOver = false;\r\n\t\tif (this.intervalId != null) clearInterval(this.intervalId);\r\n\t\t// draw once to remove any popup\r\n\t\tthis.overBubbles = [];\r\n\t\tthis.drawGraph();\r\n\t},\r\n\t\r\n\tmoveHandler: function(event) {\r\n\t\tthis.clearToolTip();\r\n\t\t\r\n\t\tthis.overBubbles = [];\r\n\t\tvar x = event.layerX - this.MAX_LABEL_WIDTH;\r\n\t\tvar y = event.layerY;\r\n\t\t\r\n\t\tvar docHeight = this.maxRadius*0.25; // where the first graph actually starts\r\n\t\t\r\n\t\tvar docIndex = -1;\r\n\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\tif (y < docHeight) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tdocHeight += doc.height;\r\n\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\tdocIndex = index;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tthis.dragInfo.x = event.layerX;\r\n\t\t\tthis.dragInfo.y = y;\r\n\r\n\t\t\tif (docIndex >= this.cache.getCount()) {\r\n\t\t\t\tdocIndex = this.cache.getCount()-1;\r\n\t\t\t} else if (docIndex < 0) {\r\n\t\t\t\tif (y + this.maxRadius > this.canvas.height) {\r\n\t\t\t\t\tdocIndex = this.cache.getCount()-1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dragInfo.newIndex = docIndex;\r\n\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t} else {\r\n\t\t\tif (docIndex >= 0 && docIndex < this.cache.getCount()) {\r\n\t\t\t\tif (x >= 0) {\r\n\t\t\t\t\tvar showPointer = false;\r\n\t\t\t\t\tx -= this.maxRadius; // re-adjust x to the start of the doc line \r\n\t\t\t\t\tvar hits = [];\r\n\t\t\t\t\tvar doc = this.cache.get(docIndex);\r\n\t\t\t\t\tif (x >= doc.lineLength) {\r\n\t\t\t\t\t\tthis.overBubbles = [{\r\n\t\t\t\t\t\t\tdocIndex: docIndex,\r\n\t\t\t\t\t\t\tx: event.layerX+10,\r\n\t\t\t\t\t\t\ty: event.layerY+10\r\n\t\t\t\t\t\t}];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar spacing = doc.lineLength / this.bubbleSpacing;\r\n\t\t\t\t\t\tvar xIndex = Math.round(x / spacing);\r\n\t\t\t\t\t\tvar prevDocHeight = this.maxRadius;\r\n\t\t\t\t\t\tif (docIndex > 0) {\r\n\t\t\t\t\t\t\tprevDocHeight = docHeight - (this.cache.get(docIndex).height - this.maxRadius*0.75);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar yIndex = Math.round((y - prevDocHeight) / this.maxRadius);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\t\t\t\tif (this.termsFilter.indexOf(t) !== -1) {\r\n\t\t\t\t\t\t\t\tvar type = doc.terms[t];\r\n\t\t\t\t\t\t\t\tif (type) {\r\n\t\t\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS && count == yIndex || !this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\t\t\tif (type.pos[xIndex] && type.pos[xIndex].radius > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tshowPointer = true;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.overBubbles.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: t,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: type,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocId: doc.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocIndex: docIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\txIndex: xIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\tyIndex: yIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\tfreq: type.pos[xIndex].freq,\r\n\t\t\t\t\t\t\t\t\t\t\t\tid: type.pos[xIndex].id,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttokenPositions: type.pos[xIndex].tokenPositions,\r\n\t\t\t\t\t\t\t\t\t\t\t\tx: event.layerX+10,\r\n\t\t\t\t\t\t\t\t\t\t\t\ty: event.layerY+10\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (this.SEPARATE_LINES_FOR_TERMS) count--;\r\n\t\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (showPointer) {\r\n\t\t\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseDownHandler: function(event) {\r\n\t\tvar x = event.layerX;\r\n\t\tvar y = event.layerY;\r\n\t\tif (x < this.MAX_LABEL_WIDTH) {\r\n\t\t\t\r\n\t\t\tvar docHeight = this.maxRadius*0.25;\r\n\t\t\tvar docIndex = -1;\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocHeight += doc.height;\r\n\t\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\t\tdocIndex = index;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\r\n\t\t\tif (docIndex >= 0 && docIndex < this.cache.getCount()) {\r\n\t\t\t\tvar xOffset = x - 5;\r\n\t\t\t\tvar yOffset = 5;\r\n\t\t\t\tthis.dragInfo = {\r\n\t\t\t\t\toldIndex: docIndex,\r\n\t\t\t\t\tnewIndex: docIndex,\r\n\t\t\t\t\txOffset: xOffset,\r\n\t\t\t\t\tyOffset: yOffset,\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseUpHandler: function(event) {\r\n\t\tthis.dragInfo = null;\r\n\t},\r\n\t\r\n\tdoDrag: function() {\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tvar ordering = {};\r\n\t\t\tfor (var i = 0; i < this.cache.getCount(); i++) {\r\n\t\t\t\tif (i < this.dragInfo.oldIndex && i < this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i;\r\n\t\t\t\t} else if (i < this.dragInfo.oldIndex && i >= this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i + 1;\r\n\t\t\t\t} else if (i == this.dragInfo.oldIndex) {\r\n\t\t\t\t\tordering[i] = this.dragInfo.newIndex;\r\n\t\t\t\t} else if (i > this.dragInfo.oldIndex && i > this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i;\r\n\t\t\t\t} else if (i > this.dragInfo.oldIndex && i <= this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dragInfo.oldIndex = this.dragInfo.newIndex;\r\n\t\t\t\r\n\t\t\tthis.cache.reorder(ordering);\r\n\t\t\t\r\n\t\t\tvar doc = this.cache.get(this.dragInfo.oldIndex);\r\n\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 1)';\r\n\t\t\tthis.ctx.textBaseline = 'top';\r\n\t\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\r\n\t\t\tthis.ctx.fillText(doc.title, this.dragInfo.x - this.dragInfo.xOffset, this.dragInfo.y - this.dragInfo.yOffset);\r\n\t\t}\r\n\t},\r\n\t\r\n\tclickHandler: function(event) {\r\n\t\tthis.lastClickedBubbles = {};\r\n\t\tif (this.overBubbles.length > 0 && this.overBubbles[0].label) {\r\n\t\t\tvar hits = [];\r\n\t\t\tvar tokenPositions = [];\r\n\t\t\tvar termData = [];\r\n\t\t\tfor (var i = 0; i < this.overBubbles.length; i++) {\r\n\t\t\t\tvar b = this.overBubbles[i];\r\n\t\t\t\t\r\n\t\t\t\ttermData.push({term: b.label, docIndex: b.docIndex, docId: b.docId, tokenPositions: b.tokenPositions});\r\n\t\t\t\t\r\n\t\t\t\tif (this.lastClickedBubbles[b.docIndex] == null) {\r\n\t\t\t\t\tthis.lastClickedBubbles[b.docIndex] = {};\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastClickedBubbles[b.docIndex][b.label] = b.id;\r\n\t\t\t\thits.push(b.docId+':'+b.label);\r\n\t\t\t\ttokenPositions.push(b.tokenPositions);\r\n\t\t\t}\r\n\t\t\ttokenPositions = Ext.flatten(tokenPositions);\r\n\t\t\ttokenPositions.sort();\r\n\t\t\t\r\n\t\t\tif (this.externalClickHandler !== undefined) {\r\n\t\t\t\tthis.externalClickHandler(termData);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.overBubbles = [];\r\n\t},\r\n\t\r\n\tsetMaxFreq: function(maxObj) {\r\n\t\tif (maxObj == null) {\r\n\t\t\tmaxObj = this.findMaxFreq();\r\n\t\t}\r\n\t\tthis.maxFreq = maxObj;\r\n\t},\r\n\t\r\n\tfindMaxFreq: function() {\r\n\t\tvar max = {term: '', value: 0};\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tvar maxDistribution = doc.terms[t].maxDistribution;\r\n\t\t\t\tif (maxDistribution > max.value) {\r\n\t\t\t\t\tmax = {term: t, value: maxDistribution};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\treturn max;\r\n\t},\r\n\t\r\n\tgetNewColor: function() {\r\n\t\tvar color = null;\r\n\t\tfor (var i = 0; i < this.colors.length; i++) {\r\n\t\t\tcolor = this.colors[i];\r\n\t\t\tvar match = this.typeStore.findExact('color', color);\r\n\t\t\tif (match == -1) break;\r\n\t\t\telse color = null;\r\n\t\t}\r\n\t\tif (color == null) color = [128, 128, 128];\r\n\t\treturn color;\r\n\t},\r\n\t\r\n\tremoveAllTerms: function() {\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tdoc.terms = {};\r\n\t\t}, this);\r\n\t\tthis.currentTerms = {};\r\n\t\tthis.termsFilter = [];\r\n\t},\r\n\t\r\n\tremoveTerm: function(term) {\r\n//\t\tvar types = this.store.query('type', type);\r\n//\t\ttypes.each(function(type) {\r\n//\t\t\tthis.store.remove(type);\r\n//\t\t}, this);\r\n\t\t\r\n\t\tdelete this.currentTerms[term];\r\n\t\t\r\n//\t\tvar types = this.getApiParamValue('type');\r\n//\t\ttypes = types.remove(type);\r\n//\t\tthis.setApiParams({type: types});\r\n\t\t\r\n\t\tvar getNewMax = false;\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tif (t == term) {\r\n\t\t\t\t\tif (this.maxFreq.term == term) {\r\n\t\t\t\t\t\tthis.maxFreq = {term: null, value: 0};\r\n\t\t\t\t\t\tgetNewMax = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete doc.terms[t];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t\r\n\t\tfor (var i in this.lastClickedBubbles) {\r\n\t\t\tvar lcTypes = this.lastClickedBubbles[i];\r\n\t\t\tfor (var lcType in lcTypes) {\r\n\t\t\t\tif (lcType == term) {\r\n\t\t\t\t\tdelete this.lastClickedBubbles[i][lcType];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (getNewMax) {\r\n\t\t\tthis.setMaxFreq();\r\n\t\t\tthis.calculateBubbleRadii();\r\n\t\t\tthis.drawGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\tclearCanvas: function() {\r\n\t\tthis.canvas.width = this.canvas.width;\r\n\t}\r\n};","function Knots(config) {\r\n\tthis.container = config.container;\r\n\tthis.externalClickHandler = config.clickHandler;\r\n\t\r\n\tthis.MAX_LINE_LENGTH = 0;\r\n\tthis.LINE_SIZE = 2.5;\r\n\t\r\n\tthis.progressiveDraw = true;\r\n\tthis.progDrawDone = false;\r\n\tthis.drawStep = 0;\r\n\t\r\n\tthis.mouseOver = false;\r\n\tthis.refreshInterval = 100;\r\n\tthis.forceRedraw = false;\r\n\tthis.lastDrawTime = new Date().getTime();\r\n\tthis.intervalId = null;\r\n\tthis.startAngle = 315;\r\n\tthis.angleIncrement = 15;\r\n\t\r\n\tthis.canvas = null;\r\n\tthis.ctx = null;\r\n\tthis.currentDoc = {\r\n\t\tterms: {},\r\n\t\tlineLength: undefined\r\n\t};\r\n\tthis.maxDocLength = 0;\r\n\t\r\n\tthis.offset = {x: 0, y: 0};\r\n\r\n\tthis.termsFilter = [];\r\n\t\r\n\tthis.initialized = false;\r\n\t\r\n\tthis.audio = config.audio;\r\n\tthis.audioCtx = null;\r\n}\r\n\r\n\r\nKnots.prototype = {\r\n\tconstructor: Knots,\r\n\t\r\n\tinitializeCanvas: function() {\r\n\t\tvar container = this.container;\r\n\t\tvar height = container.getHeight()-5;\r\n\t\tvar width = container.getWidth();\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((width * width) + (height * height));\r\n\t\t\r\n\t\tvar id = Ext.id('knots');\r\n\t\tcontainer.add({\r\n\t\t\txtype: 'container',\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\thtml: '<canvas id=\"'+id+'\" width=\"'+width+'\" height=\"'+height+'\"></canvas>',\r\n\t\t\tborder: false,\r\n        \tlisteners: {\r\n        \t\tafterrender: {\r\n        \t\t\tfn: function(cnt) {\r\n    \t\t\t\t\tthis.canvas = document.getElementById(id);\r\n        \t\t\t\tthis.ctx = this.canvas.getContext('2d');\r\n        \t\t\t\tthis.canvas.addEventListener('click', this.clickHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousedown', this.mouseDownHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseup', this.mouseUpHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousemove', this.moveHandler.bind(this), false);\r\n        \t\t\t},\r\n        \t\t\tsingle: true,\r\n        \t\t\tscope: this\r\n        \t\t}\r\n        \t}\r\n\t\t});\r\n\t\tcontainer.updateLayout();\r\n\t\tthis.initialized = true;\r\n\t},\r\n\t\r\n\tdoLayout: function() {\r\n\t\tif (this.initialized) {\r\n\t\t\tvar width = this.container.getWidth();\r\n\t\t\tvar height = this.container.getHeight()-5;\r\n\t\t\tthis.canvas.width = width;\r\n\t\t\tthis.canvas.height = height;\r\n\t\t\tthis.recache();\r\n\t\t\tthis.buildGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\tbuildGraph: function(drawStep) {\r\n\t\tif (this.intervalId != null) {\r\n\t\t\tthis.progDrawDone = false;\r\n\t\t\tclearInterval(this.intervalId);\r\n\t\t}\r\n\t\tthis.forceRedraw = true;\r\n\r\n\t\tthis.drawStep = drawStep || 0;\r\n\t\t\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tvar term = this.currentDoc.terms[t];\r\n\t\t\tterm.done = false;\r\n\t\t}\r\n\t\t\r\n\t\tif (!this.progressiveDraw) {\r\n\t\t\tthis.doDraw(false);\r\n\t\t} else {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [false]), 50);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawGraph: function(includeLegend) {\r\n\t\tif (this.intervalId != null) {\r\n\t\t\tthis.progDrawDone = false;\r\n\t\t\tclearInterval(this.intervalId);\r\n\t\t}\r\n\t\tthis.forceRedraw = true;\r\n\t\t\r\n\t\tif (!this.progressiveDraw) {\r\n\t\t\tthis.doDraw(false, includeLegend);\r\n\t\t} else {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [includeLegend]), 50);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoDraw: function(includeLegend) {\r\n\t\tvar time = new Date().getTime();\r\n\t\tif (this.forceRedraw || time - this.lastDrawTime >= this.refreshInterval) {\r\n\t\t\tthis.forceRedraw = false;\r\n\t\t\t\r\n\t\t\tthis.clearCanvas();\r\n\t\t\t\r\n\t\t\tthis.ctx.save();\r\n\t\t\tthis.ctx.translate(this.offset.x, this.offset.y);\r\n\t\t\t\r\n\t\t\tthis.drawDocument(this.currentDoc);\r\n\t\t\t\r\n\t\t\t// animate the origin\r\n\t//\t\tthis.originOpacity -= 0.01;\r\n\t//\t\tif (this.originOpacity < 0) {\r\n\t//\t\t\tthis.originOpacity = 1.0;\r\n\t//\t\t}\r\n\t\t\tthis.originOpacity = 0.5;\r\n\t\t\tthis.originColor = '128,128,128';\r\n\t\t\tthis.ctx.lineWidth = Math.abs(this.originOpacity - 1) * 15;\r\n\t\t\tthis.ctx.fillStyle = 'rgba('+this.originColor+',1.0)';\r\n\t\t\tthis.ctx.strokeStyle = 'rgba('+this.originColor+','+this.originOpacity+')';\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.arc(0, 0, this.LINE_SIZE*2, 0, Math.PI*2, true);\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.fill();\r\n\t\t\t\r\n\t\t\tif (!includeLegend) this.ctx.stroke();\r\n\t\t\tthis.ctx.restore();\r\n\t\t\tthis.ctx.lineWidth = 1;\r\n\t\t\t\r\n\t\t\tif (includeLegend === true) {\r\n\t\t\t\tthis.drawLegend();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.lastDrawTime = new Date().getTime();\r\n\t\t\t\r\n\t\t\t// test to see if each doc term is done\r\n\t\t\tif (this.progressiveDraw) {\r\n\t\t\t\tvar done = true;\r\n\t\t\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\t\t\tdone = done && this.currentDoc.terms[t].done;\r\n\t\t\t\t}\r\n\t\t\t\tthis.progDrawDone = done;\r\n\t\t\t\tif (done) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.intervalId = null;\r\n\t\t\t\t\tthis.muteTerms();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.drawStep++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tsetAudio: function(audio) {\r\n\t\tthis.audio = audio;\r\n\t\tif (!audio) {this.muteTerms();}\r\n\t},\r\n\t\r\n\tmuteTerms: function() {\r\n\t\tfor (t in this.currentDoc.terms) {\r\n\t\t\tif (this.currentDoc.terms[t].audio) {\r\n\t\t\t\tthis.currentDoc.terms[t].audio.gainNode.gain.value=0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawDocument: function(doc) {\r\n\t\tvar terms = doc.terms;\r\n\t\t\r\n\t\tfor (var t in terms) {\r\n\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\tvar info = terms[t];\r\n\t\t\t\tif (info && info.pos) {\r\n\t\t\t\t\tvar prevXY = [[0,0],[0,0]];\r\n\t\t\t\t\tif (this.progressiveDraw) {\r\n\t\t\t\t\t\tvar length = this.drawStep + 1;\r\n\t\t\t\t\t\tif (info.pos.length <= this.drawStep) {\r\n\t\t\t\t\t\t\tinfo.done = true;\r\n\t\t\t\t\t\t\tlength = info.pos.length;\r\n\t\t\t\t\t\t\tif (info.audio) {info.audio.gainNode.gain.value=0};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.audio && info.audio) {\r\n\t\t\t\t\t\t\t\tinfo.audio.gainNode.gain.value=.1;\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\tinfo.audio.gainNode.gain.value=0;\r\n\t\t\t\t\t\t\t\t}, this.refreshInterval*.75)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinfo.done = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\t\t\t\tvar xy = info.pos[i];\r\n\t\t\t\t\t\t\tthis.drawPolygon(xy, prevXY, info.color);\r\n\t\t\t\t\t\t\tprevXY = [[xy.polygon[0][3], xy.polygon[1][3]], [xy.polygon[0][2], xy.polygon[1][2]]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var i = 0; i < info.pos.length; i++) {\r\n\t\t\t\t\t\t\tvar xy = info.pos[i];\r\n\t\t\t\t\t\t\tthis.drawPolygon(xy, prevXY, info.color);\r\n\t\t\t\t\t\t\tprevXY = [[xy.polygon[0][3], xy.polygon[1][3]], [xy.polygon[0][2], xy.polygon[1][2]]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawPolygon: function(xy, prevXY, color) {\r\n\t\tvar polyX = xy.polygon[0];\r\n\t\tvar polyY = xy.polygon[1];\r\n\t\t\r\n\t\t// connect to previous polygon to make smoother turns\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.moveTo(prevXY[0][0], prevXY[0][1]);\r\n\t\tthis.ctx.lineTo(polyX[0], polyY[0]);\r\n\t\tthis.ctx.lineTo(polyX[1], polyY[1]);\r\n\t\tthis.ctx.lineTo(prevXY[1][0], prevXY[1][1]);\r\n\t\tthis.ctx.closePath();\r\n\t\t\r\n\t\tthis.ctx.fillStyle = 'rgba('+color+', 0.6)';\r\n\t\tthis.ctx.fill();\r\n\r\n\t\t// draw the current polygon\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.moveTo(polyX[0], polyY[0]);\r\n\t\tthis.ctx.lineTo(polyX[1], polyY[1]);\r\n\t\tthis.ctx.lineTo(polyX[2], polyY[2]);\r\n\t\tthis.ctx.lineTo(polyX[3], polyY[3]);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tif (xy.over) this.ctx.fillStyle = 'rgba('+color+', 1.0)';\r\n\t\tthis.ctx.fill();\r\n\t},\r\n\t\r\n\tdrawLegend: function() {\r\n\t\tvar x = 5;\r\n\t\tvar y = 5;\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = '16px serif';\r\n\t\tthis.termStore.each(function(record) {\r\n\t\t\tvar color = record.get('color');\r\n\t\t\tthis.ctx.fillStyle = 'rgb('+color+')';\r\n\t\t\tvar term = record.get('term');\r\n\t\t\tthis.ctx.fillText(term, x, y);\r\n\t\t\tvar width = this.ctx.measureText(term).width;\r\n\t\t\tx += width + 8;\r\n\t\t}, this);\r\n\t},\r\n\t\r\n\tsetCurrentDoc: function(doc) {\r\n\t\tthis.currentDoc = doc;\r\n\t\tthis.cacheCurrentDocument();\r\n\t},\r\n\t\r\n\taddTerms: function(termsObj) {\r\n\t\tExt.apply(this.currentDoc.terms, termsObj);\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\tremoveTerm: function(term) {\r\n\t\tif (this.currentDoc.terms[term].audio) {this.currentDoc.terms[term].audio.oscillator.stop();}\r\n\t\tdelete this.currentDoc.terms[term];\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\tremoveAllTerms: function() {\r\n\t\tfor (term in this.currentDoc.terms) {\r\n\t\t\tif (this.currentDoc.terms[term].audio) {\r\n\t\t\t\tthis.currentDoc.terms[term].audio.oscillator.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentDoc.terms = {};\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\trecache: function() {\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((this.canvas.width * this.canvas.width) + (this.canvas.height * this.canvas.height));\r\n\t\tthis.cacheCurrentDocument();\r\n\t\tthis.determineGraphSizeAndPosition();\r\n\t},\r\n\t\r\n\tcacheCurrentDocument: function() {\r\n\t\tvar lineLength = this.MAX_LINE_LENGTH;\r\n\t\t\r\n\t\tthis.currentDoc.lineLength = lineLength;\r\n\t\t\r\n\t\tif (this.audio && this.audioCtx == null) {\r\n\t\t\ttry {\r\n\t\t\t\tthis.audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n\t\t\t} catch(e) {\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (var term in this.currentDoc.terms) {\r\n\t\t\tif (this.audio && this.audioCtx && !this.currentDoc.terms[term].audio) {\r\n\t\t\t\tvar oscillator = this.audioCtx.createOscillator();\r\n\t\t\t\tvar gainNode = this.audioCtx.createGain();\r\n\t\t\t\toscillator.connect(gainNode);\r\n\t\t\t\tgainNode.connect(this.audioCtx.destination);\r\n\t\t\t\toscillator.frequency.value = (Math.random()*500)+150; // value in hertz\r\n\t\t\t\toscillator.start();\r\n\t\t\t\tgainNode.gain.value = 0;\r\n\t\t\t\tthis.currentDoc.terms[term].audio = {oscillator: oscillator, gainNode: gainNode}\r\n\t\t\t} \r\n\t\t\tthis.cacheTurns(this.currentDoc.terms[term], lineLength);\r\n\t\t}\r\n\t},\r\n\t\r\n\tcacheTurns: function(info, lineLength) {\r\n\t\tvar rawFreq = info.rawFreq;\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar doc = this.currentDoc;\r\n\t\t\t\r\n\t\t\tvar term = info.term;\r\n\t\t\tvar color = info.color;\r\n\r\n\t\t\tvar cachedPositions = [];\r\n\t\t\t\r\n\t\t\tvar tokenIds = info.positions;\r\n\t\t\tvar lastTokenId = tokenIds[tokenIds.length-1];\r\n\t\t\t\r\n\t\t\tvar angle = this.startAngle;\r\n\t\t\tvar angleIncrement = this.angleIncrement;\r\n\t\t\tvar prevX = 0;\r\n\t\t\tvar prevY = 0;\r\n\t\t\tvar x = 0;\r\n\t\t\tvar y = 0;\r\n\t\t\tvar prevLength = 0;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < tokenIds.length; i++) {\r\n\t\t\t\tvar o = tokenIds[i];\r\n\t\t\t\t\r\n\t\t\t\tvar length = o / lastTokenId * lineLength;\r\n\t\t\t\tvar segment = length - prevLength;\r\n\t\t\t\t\r\n\t\t\t\tprevX = x;\r\n\t\t\t\tprevY = y;\r\n\t\t\t\t\r\n\t\t\t\tvar newPoint = this.findEndPoint([x, y], segment, angle);\r\n\t\t\t\tx = newPoint[0];\r\n\t\t\t\ty = newPoint[1];\r\n\t\t\t\t\r\n\t\t\t\tvar polygon = this.getPolygonFromLine([prevX, prevY], [x, y], angle, this.LINE_SIZE);\r\n\t\t\t\t\r\n\t\t\t\tcachedPositions.push({tokenId: o, polygon: polygon, over: false});\r\n\t\t\t\t\r\n\t\t\t\tprevLength = length;\r\n\t\t\t\tangle += angleIncrement;\r\n\t\t\t}\r\n\t\t\t\r\n//\t\t\tdoc.terms[term] = {pos: cachedPositions, rawFreq: rawFreq, color: color, done: false};\r\n\t\t\tdoc.terms[term].pos = cachedPositions;\r\n\t\t\tdoc.terms[term].done = false;\r\n\t\t}\r\n\t},\r\n\t\r\n\tfindEndPoint: function(point, length, angle) {\r\n\t\tvar radians = this.degreesToRadians(angle);\r\n\t\tvar x2 = point[0] + (length * Math.cos(radians));\r\n\t\tvar y2 = point[1] + (length * Math.sin(radians));\r\n\t\treturn [x2, y2];\r\n\t},\r\n\t\r\n\tdetermineGraphSizeAndPosition: function() {\t\t\r\n\t\tvar bb = this.findBoundingBoxForGraph();\r\n\r\n\t\t// find the size ratio between the graph and the canvas\r\n\t\tvar width = bb.maxX - bb.minX;\r\n\t\tvar height = bb.maxY - bb.minY;\r\n\t\tvar widthRatio = this.canvas.width / width;\r\n\t\tvar heightRatio = this.canvas.height / height;\r\n\t\tvar ratio = Math.min(widthRatio, heightRatio);\r\n\t\tratio -= 0.05; // create some space around the borders\r\n\t\t\r\n\t\twidth *= ratio;\r\n\t\theight *= ratio;\r\n\t\t\r\n\t\tthis.offset.x = Math.abs(bb.minX * ratio - (this.canvas.width / 2 - width / 2));\r\n\t\tthis.offset.y = Math.abs(bb.minY * ratio - (this.canvas.height / 2 - height / 2));\r\n\t\t\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((this.canvas.width * this.canvas.width) + (this.canvas.height * this.canvas.height)) * ratio;\r\n\t\t\r\n\t\tthis.cacheCurrentDocument();\r\n\t},\r\n\t\r\n\tfindBoundingBoxForGraph: function() {\r\n\t\tvar minX = null;\r\n\t\tvar maxX = null;\r\n\t\tvar minY = null;\r\n\t\tvar maxY = null;\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\tvar bb = this.getBoundingBox(polygon[0], polygon[1]);\r\n\t\t\t\tif (minX == null || bb[0] < minX) minX = bb[0];\r\n\t\t\t\tif (maxX == null || bb[2] > maxX) maxX = bb[2];\r\n\t\t\t\tif (minY == null || bb[1] < minY) minY = bb[1];\r\n\t\t\t\tif (maxY == null || bb[3] > maxY) maxY = bb[3];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn {minX: minX, minY: minY, maxX: maxX, maxY: maxY};\r\n\t},\r\n\t\r\n\tgetBoundingBox: function(polyX, polyY) {\r\n\t\tvar minX = Math.min(polyX[0], polyX[2]);\r\n\t\tvar maxX = Math.max(polyX[0], polyX[2])\r\n\t\tvar minY = Math.min(polyY[0], polyY[2]);\r\n\t\tvar maxY = Math.max(polyY[0], polyY[2]);\r\n\t\treturn [minX, minY, maxX, maxY];\r\n\t},\r\n\t\r\n\tdegreesToRadians: function(d) {\r\n\t\treturn d * (Math.PI / 180);\r\n\t},\r\n\t\r\n\tclickHandler: function(event) {\r\n\t\tvar x = event.layerX - this.offset.x;\r\n\t\tvar y = event.layerY - this.offset.y;\r\n\t\tvar hit = null;\r\n\t\tvar tokenId = 0;\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\t\tvar test = this.isPointInPolygon(polygon[0], polygon[1], x, y);\r\n\t\t\t\t\tif (test) {\r\n\t\t\t\t\t\thit = t;\r\n\t\t\t\t\t\ttokenId = pos[i].tokenId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (hit) {\r\n\t\t\tif (this.externalClickHandler !== undefined) {\r\n\t\t\t\tthis.externalClickHandler({term: hit, tokenId: tokenId});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmoveHandler: function(event) {\r\n\t\tvar x = event.layerX - this.offset.x;\r\n\t\tvar y = event.layerY - this.offset.y;\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t\tthis.dragInfo.lastX = this.dragInfo.x;\r\n\t\t\tthis.dragInfo.lastY = this.dragInfo.y;\r\n\t\t\tthis.dragInfo.x = event.layerX;\r\n\t\t\tthis.dragInfo.y = event.layerY;\r\n\t\t\tvar xDiff = this.dragInfo.x - this.dragInfo.lastX;\r\n\t\t\tvar yDiff = this.dragInfo.y - this.dragInfo.lastY;\r\n\t\t\tthis.offset.x += xDiff;\r\n\t\t\tthis.offset.y += yDiff;\r\n\t\t} else {\r\n\t\t\tthis.mouseOver = false;\r\n\t\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\t\t\tif (!this.mouseOver) {\r\n\t\t\t\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\t\t\t\tvar test = this.isPointInPolygon(polygon[0], polygon[1], x, y);\r\n\t\t\t\t\t\t\tif (test) {\r\n\t\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = true;\r\n\t\t\t\t\t\t\t\tthis.mouseOver = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.mouseOver) {\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tif (!this.progressiveDraw || (this.progressiveDraw && this.progDrawDone)) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [false]), 50);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t\tif (!this.progressiveDraw || (this.progressiveDraw && this.progDrawDone)) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.doDraw(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseDownHandler: function(event) {\r\n\t\tvar x = event.layerX;\r\n\t\tvar y = event.layerY;\r\n\t\tthis.dragInfo = {\r\n\t\t\tlastX: x,\r\n\t\t\tlastY: y,\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\t},\r\n\t\r\n\tmouseUpHandler: function(event) {\r\n\t\tthis.dragInfo = null;\r\n\t},\r\n\t\r\n\tgetPolygonFromLine: function(point1, point2, angle, size) {\r\n\t\tvar perpDown = angle + 90;\r\n\t\tvar perpUp = angle - 90;\r\n\t\t\r\n\t\tvar p1 = this.findEndPoint(point1, size, perpDown);\r\n\t\tvar p2 = this.findEndPoint(point1, size, perpUp);\r\n\t\tvar p3 = this.findEndPoint(point2, size, perpUp);\r\n\t\tvar p4 = this.findEndPoint(point2, size, perpDown);\r\n\t\t\r\n\t\tvar polyX = [p1[0], p2[0], p3[0], p4[0]];\r\n\t\tvar polyY = [p1[1], p2[1], p3[1], p4[1]];\r\n\t\treturn [polyX, polyY];\r\n\t},\r\n\t\r\n\t// from http://alienryderflex.com/polygon/\r\n\tisPointInPolygon: function(polyX, polyY, x, y) {\r\n\t\tvar i = 0;\r\n\t\tvar j = 3; // number of polygon sides minus 1\r\n\t\tvar oddNodes = false;\r\n\t\tfor (i = 0; i < 4; i++) {\r\n\t\t\tif ((polyY[i] < y && polyY[j] >= y) ||\r\n\t\t\t\t(polyY[j] < y && polyY[i] >= y)) {\r\n\t\t\t\tif (polyX[i] + (y - polyY[i]) / (polyY[j] - polyY[i]) * (polyX[j] - polyX[i]) < x) {\r\n\t\t\t\t\toddNodes = !oddNodes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tj = i;\r\n\t\t}\r\n\t\treturn oddNodes;\r\n\t},\r\n\t\r\n\tclearCanvas: function() {\r\n\t\tthis.canvas.width = this.canvas.width;\r\n\t}\r\n};","/*\r\n * Author: Andrew MacDonald\r\n * Licensed for use under the GNU General Public License\r\n * http://creativecommons.org/licenses/GPL/2.0/\r\n */\r\n\r\nfunction Cirrus(config) {\r\n    var that = this;\r\n    this.config = config;\r\n    var canvasId = Ext.id(null, 'cirrusCanvas');\r\n    if (this.config.containerId == null) {\r\n        alert('You must provide a valid container ID!');\r\n        return;\r\n    }\r\n    var containerId = '#'+this.config.containerId;\r\n    var wordController = null;\r\n    var resizeTimer = null;\r\n    \r\n    this.clear = function() {\r\n        this.canvas.width = this.canvas.width;\r\n    };\r\n    \r\n    this.addWords = function(words) {\r\n        wordController.addWords(words);\r\n    };\r\n    \r\n    this.arrangeWords = function() {\r\n        wordController.arrangeWords();\r\n    };\r\n\r\n    this.clearAll = function() {\r\n        wordController.setWords([]);\r\n        wordController.grid = [];\r\n        this.clear();\r\n    };\r\n\r\n    this.resizeWords = function() {\r\n        that.setCanvasDimensions();\r\n        wordController.resetWordCoordinates();\r\n        wordController.calculateSizeAdjustment();\r\n        wordController.resizeWords();\r\n        wordController.arrangeWords();\r\n        resizeTimer = null;\r\n    };\r\n\r\n    this.setCanvasDimensions = function() {\r\n        var container = $(containerId)[0];\r\n        var width = Math.max(container.offsetWidth, container.clientWidth);\r\n        var height = Math.max(container.offsetHeight, container.clientHeight);\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n    };\r\n\r\n    function hex2RGB(hex) {\r\n        hex = hex.charAt(0) == '#' ? hex.substring(1,7) : hex;\r\n        var rgb = [];\r\n        rgb.push(parseInt(hex.substring(0, 2), 16));\r\n        rgb.push(parseInt(hex.substring(2, 4), 16));\r\n        rgb.push(parseInt(hex.substring(4, 6), 16));\r\n        return rgb;\r\n    }\r\n    \r\n    function init() {\r\n        \r\n        if ($('#'+that.config.containerId).length == 0) {\r\n            alert('You must provide a valid container ID!');\r\n            return;\r\n        }\r\n        \r\n        // create the canvas\r\n        that.canvas = document.createElement('canvas');\r\n        that.canvas.setAttribute('id', canvasId);\r\n        that.canvas.setAttribute('tabIndex', 1);\r\n        that.setCanvasDimensions();\r\n        $(containerId).append(that.canvas);\r\n        canvasId = '#'+canvasId;\r\n        \r\n        that.context = that.canvas.getContext('2d');\r\n        var isLocal = false; // should we call the server for words or use local ones?\r\n        that.wordData = new Array(); // the word data to input into the app\r\n        that.useFadeEffect = true; // should we use a fade effect for displaying words?\r\n        that.colors = [[116,116,181], [139,163,83], [189,157,60], [171,75,75], [174,61,155]];\r\n        wordController = new WordController(that);\r\n        \r\n        for (var key in that.config) {\r\n            if (key == 'words') that.wordData = that.config[key];\r\n            if (key == 'layout') {\r\n                if (that.config[key] == 'circle') wordController.layout = wordController.CIRCLE;\r\n                else if (that.config[key] == 'square') wordController.layout = wordController.SQUARE;\r\n            }\r\n            if (key == 'colors') {\r\n                // expects an array of hex colors\r\n                if ($.isArray(that.config[key]) && that.config[key].length > 0) {\r\n                    that.colors = [];\r\n                    for (var c in that.config[key]) {\r\n                        that.colors.push(hex2RGB(that.config[key][c]));\r\n                    }\r\n                }\r\n            }\r\n            if (key == 'background') {\r\n                $(canvasId).css(\"background-color\", that.config[key]);\r\n            }\r\n            if (key == 'fade') {\r\n                if (that.config[key] == 'true') that.useFadeEffect = true;\r\n                else if (that.config[key] == 'false') that.useFadeEffect = false;\r\n            }\r\n            if (key == 'smoothness') {\r\n                wordController.wordsToArrange = Math.max(1, Math.min(20, parseInt(that.config[key]))); // set to value between 1-20\r\n            }\r\n        }\r\n        \r\n        if (isLocal && testData) {\r\n            var cnt = 0;\r\n            for (var key in testData) {\r\n                that.wordData.push({word: key, size: testData[key] / 13, label: key});\r\n                cnt++;\r\n                if (cnt == 100) break;\r\n            }\r\n        }\r\n        \r\n        if (that.wordData.length > 0) {\r\n            that.clear();\r\n            wordController.addWords(that.wordData);\r\n            wordController.arrangeWords();\r\n        }\r\n        \r\n        $(window).resize(function() {\r\n            if (resizeTimer != null) clearTimeout(resizeTimer);\r\n            resizeTimer = setTimeout(that.resizeWords, 1000);\r\n        });\r\n\r\n        $(canvasId).keypress(function(event) {\r\n            if (event.which == 114) wordController.arrangeWords(); // r was pressed\r\n        });\r\n        \r\n        $(canvasId).click(function(event) {\r\n            var matchingWord = wordController.handleWordClick(event);\r\n            if (matchingWord !== undefined) {\r\n\t            if (that.config.clickHandler) {\r\n\t            \tthat.config.clickHandler({term: matchingWord.text, value: matchingWord.value});\r\n\t            }\r\n            }\r\n        });\r\n        \r\n        $(canvasId).mouseover(function(event) {\r\n        \twordController.startUpdates();\r\n        });\r\n        $(canvasId).mouseout(function(event) {\r\n        \twordController.stopUpdates();\r\n        });\r\n        \r\n        $(canvasId).mousemove(function(event) {\r\n            wordController.handleMouseMove(event);\r\n        });\r\n    }\r\n    \r\n    $(document).ready(init);\r\n}","\r\n/**\r\n * The word object.  Stores various properties related to diplaying the word.\r\n * @author Andrew\r\n */\r\nfunction Word(_text, _origSize, _color, _rolloverText, _value) {\r\n    this.height = 0;\t\t\t\t\t// the height of the label\r\n    this.width = 0;\t\t\t\t\t\t// the width of the label\r\n    this.rotation = 0; \t\t\t\t\t// rotation of the label, in radians\r\n    this.relativeSize = 0;\t\t\t\t// the size relative to the largest and smallest word sizes\r\n    this.mask = null;\t\t\t\t\t// a 2 dimensional array containing the local xy co-ordinates of opaque pixels\r\n    this.size = 0;\t\t\t\t\t\t// the largest of either the height or width, used in the circle layout\r\n    \r\n    /* Init */\r\n    this.text = _text;\t\t\t\t\t// the actual word\r\n    this.color = _color;\t\t\t\t// the color of the label\r\n    this.origSize = _origSize;\t\t\t// the original size (used when re-calculating relative sizes of words)\r\n    this.rolloverText = _rolloverText;\t// the text to show on rollover\r\n    this.value = _value || 0;\t\t\t// a value associated with the word (can be anything)\r\n    this.x = 0;\t\t\t\t\t\t\t// the x co-ordinate\r\n    this.y = 0;\t\t\t\t\t\t\t// the y co-ordinate\r\n    this.tx = 0;\t\t\t\t\t\t// the translation value for x\r\n    this.ty = 0;\t\t\t\t\t\t// the translation value for y\r\n    this.fontFamily = 'Arial';\t\t\t// the font family\r\n    this.fontSize = 12;\t\t\t\t\t// the font family\r\n    this.alpha = 1;\t\t\t\t\t\t// alpha of the label\r\n    this.live = false;\t\t\t\t\t// true if the word should be displayed\r\n    this.isOver = false;\t\t\t\t// true if the mouse if over the word\r\n    \r\n    this.draw = function(ctx) {\r\n        ctx.save();\r\n        ctx.fillStyle = 'rgba('+this.color[0]+','+this.color[1]+','+this.color[2]+','+this.alpha+')';\r\n        ctx.textBaseline = 'alphabetic';\r\n        ctx.font = this.fontSize + 'px '+ this.fontFamily;\r\n        ctx.translate(this.x + this.tx, this.y + this.ty);\r\n        ctx.rotate(this.rotation);\r\n        ctx.fillText(this.text, 0, 0);\r\n        ctx.restore();\r\n    };\r\n}","\r\nfunction WordController(parentApp) {\r\n    var that = this;\r\n    \r\n    var app = parentApp;\r\n    \r\n    var myFont = 'Impact';\r\n    \r\n    this.CIRCLE = 0; // circle layout\r\n    \r\n    this.ratio = 1; // the width to height ratio\r\n    \r\n    var _layout = this.CIRCLE; // what layout to use\r\n    this.getLayout = function() {\r\n        return _layout;\r\n    };\r\n    this.setLayout = function(value) {\r\n        _layout = value;\r\n    };\r\n    \r\n    this.HORIZONTAL = 0;\r\n    this.MIXED = 1; // horizontal and vertical\r\n    \r\n    var _wordOrientation = this.MIXED;\r\n    this.getWordOrientation = function() {\r\n        return _wordOrientation;\r\n    };\r\n    this.setWordOrientation = function(value) {\r\n    \t_wordOrientation = value;\r\n    };\r\n    \r\n    this.UPDATE_RATE = 25; // update frequency in milliseconds\r\n    this.COARSENESS = 5; // how many pixels do we skip when creating the mask?\r\n//    if ($.browser.webkit) this.COARSENESS = 3; \r\n    this.grid = new Array(); // a multidimensional array ([x][y]), holding co-ords for words\r\n    var timer_i = 0;\r\n    var timer; // timer used to incrementally call the arrange method\r\n    this.doingArrange = false;\r\n    this.wordsToArrange = 5; // how many words to arrange for each call to the arrange method\r\n    var overWord = null; // what word is the user mousing over?\r\n    var overX = 0; // position of the mouse when over a word\r\n    var overY = 0;\r\n    \r\n    var _words = new Array(); // the list of word objects\r\n    this.getWords = function() {\r\n        return _words;\r\n    }\r\n    this.setWords = function(value) {\r\n        _words = value;\r\n    }\r\n    \r\n    this.sizeAdjustment = 100; // amount to multiply a word's relative size by\r\n    \r\n    this.minFontSize = 12;\r\n    \r\n    // for tracking sizes in word data\r\n    this.largestWordSize = 0;\r\n    this.smallestWordSize = 10000;\r\n    \r\n    var _uniqueWords = new Object(); // stores words as properties, making sure we don't have duplicates\r\n    \r\n    /**\r\n     * Creates a word object and adds it to the list.\r\n     * If the size value is outside the current max/min value, returns true (meaning we have to resize all the words).\r\n     * @param\tword\r\n     * @param\tsize\r\n     * @param\tcolor\r\n     * @param\tlabel\r\n     * @param\tvalue\r\n     * @return\r\n     */\r\n    function addWord(word, size, color, label, value) {\r\n        var sizeChanged = false;\r\n        if (_uniqueWords[word] == null) {\r\n            _uniqueWords[word] = true;\r\n            \r\n            if (size > that.largestWordSize) {\r\n                that.largestWordSize = size;\r\n                sizeChanged = true;\r\n            }\r\n            if (size < that.smallestWordSize) {\r\n                that.smallestWordSize = size * 0.8; // set the smallest size a bit smaller than the actual smallest size; this will insure all words are legible.\r\n                sizeChanged = true;\r\n            }\r\n            var wordObj = new Word(word, size, color, label, value);\r\n            _words.push(wordObj);\r\n        }\r\n        return sizeChanged;\r\n    }\r\n    \r\n    /**\r\n     * Adds an array of objects with the following properties: word, size, color, label, value.\r\n     * @param\twords\r\n     */\r\n    this.addWords = function(newWords) {\r\n        var sizeChanged = false;\r\n        for (var i = 0; i < newWords.length; i++) {\r\n            var wordObj = newWords[i];\r\n            \r\n            var color;\r\n            if (typeof(wordObj.color) == undefined || wordObj.color == null || wordObj.color == '') {\r\n                color = app.colors[Math.floor(Math.random() * (app.colors.length))];\r\n            } else color = wordObj.color;\r\n            \r\n            var size;\r\n            if (typeof(wordObj.size) == undefined || wordObj.size == null || wordObj.size == '') {\r\n                size = Math.floor(Math.random() * 40);\r\n            } else size = parseFloat(wordObj.size);\r\n            \r\n            sizeChanged = addWord(wordObj.word, size, color, wordObj.label, wordObj.value) || sizeChanged;\r\n        }\r\n        sortWords();\r\n        \r\n        this.setRelativeSizes();\r\n        this.calculateSizeAdjustment();\r\n        if (sizeChanged) this.resizeWords();\r\n        else createAllGraphics();\r\n    }\r\n    \r\n    this.resetWordCoordinates = function() {\r\n        app.clear();\r\n        clearTimeout(timer);\r\n        for (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            word.x = 0;\r\n            word.y = 0;\r\n            word.tx = 0;\r\n            word.ty = 0;\r\n        }\r\n    }\r\n    \r\n    this.calculateSizeAdjustment = function() {\r\n    \tthis.ratio = app.canvas.width / app.canvas.height;\r\n        var stageArea = app.canvas.width * app.canvas.height;\r\n        if (stageArea < 100000) this.minFontSize = 8;\r\n        else this.minFontSize = 12;\r\n        var pixelsPerWord = stageArea / _words.length;\r\n        var totalWordsSize = 0;\r\n        for (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            var wordArea = calculateWordArea(word);\r\n            totalWordsSize += wordArea;\r\n        }\r\n        this.sizeAdjustment = stageArea / totalWordsSize;\r\n    }\r\n    \r\n    function calculateWordArea(word) {\r\n        var baseSize = Math.log(word.relativeSize * 10) * Math.LOG10E; // take the relativeSize (0.1 to 1.0), multiply by 10, then get the base-10 log of it\r\n        var height = (baseSize + word.relativeSize) / 2; // find the average between relativeSize and the log\r\n        var width = 0; //(baseSize / 1.5) * word.text.length;\r\n        for (var i = 0; i < word.text.length; i++ ) {\r\n            var letter = word.text.charAt(i);\r\n            if (letter == 'f' || letter == 'i' || letter == 'j' || letter == 'l' || letter == 'r' || letter == 't') width += baseSize / 3;\r\n            else if (letter == 'm' || letter == 'w') width += baseSize / (4 / 3);\r\n            else width += baseSize / 1.9;\r\n        }\r\n        var wordArea = height * width;\r\n        return wordArea;\r\n    }\r\n    \r\n    // based on post from http://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas\r\n    // not really working yet\r\n    function measureTextHeight(label) {\r\n        app.context.fillStyle = 'rgb(255,255,255)';\r\n        app.context.fillRect(label.x, label.y, label.width, label.height);\r\n        label.draw(app.context);\r\n        var imageData = app.context.getImageData(label.x, label.y, label.width, label.height);\r\n        var first = false;\r\n        var last = false;\r\n        var y = label.height;\r\n        var x = 0;\r\n        while (!last && y) {\r\n            y--;\r\n            for (x = 0; x < label.width; x++) {\r\n                var pixel = getPixel(x, y, imageData);\r\n                if (pixel[0] != 255 || pixel[1] != 255 || pixel[2] != 255) {\r\n                    last = y;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        while (y) {\r\n            y--;\r\n            for (x = 0; x < label.width; x++) {\r\n                var pixel = getPixel(x, y, imageData);\r\n                if (pixel[0] != 255 || pixel[1] != 255 || pixel[2] != 255) {\r\n                    first = y;\r\n                    break;\r\n                }\r\n            }\r\n            if (first != y) {\r\n                return last - first;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    \r\n    function measureDimensions(word) {\r\n        app.context.save();\r\n        app.context.textBaseline = 'alphabetic';\r\n        app.context.font = word.fontSize + 'px '+ word.fontFamily;\r\n        word.width = app.context.measureText(word.text).width;\r\n        word.height = Math.ceil(app.context.measureText('m').width * 1.15); // initial estimate (make it bigger for when we actually measure the height)\r\n        app.context.restore();\r\n    }\r\n    \r\n    // returns an array [r, g, b, a]\r\n    function getPixel(x, y, imageData) {\r\n        var index = (x + y * imageData.width) * 4;\r\n        return [imageData.data[index], imageData.data[index+1], imageData.data[index+2], imageData.data[index+3]];\r\n    }\r\n    \r\n    function setPixel(imageData, x, y, r, g, b, a) {\r\n        var index = (x + y * imageData.width) * 4;\r\n        imageData.data[index] = r;\r\n        imageData.data[index+1] = g;\r\n        imageData.data[index+2] = b;\r\n        imageData.data[index+3] = a;\r\n    }\r\n    \r\n    function findNewRelativeSize(word, areaMultiplier) {\r\n        var area = calculateWordArea(word) * areaMultiplier;\r\n        // given the area = (x+6)*(2*x/3*y), solve for x\r\n        var newRelativeSize = (Math.sqrt(6) * Math.sqrt(6 * Math.pow(word.text.length, 2) + area * word.text.length) - 6 * word.text.length) / (2 * word.text.length);\r\n        return newRelativeSize;\r\n    }\r\n    \r\n    /**\r\n     * Determines the relative size for each word.\r\n     * Call after all/new words are added and before createAllGraphics.\r\n     */\r\n    this.setRelativeSizes = function() {\r\n    \tfor (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            word.relativeSize = mapValue(word.origSize, this.smallestWordSize, this.largestWordSize, 0.1, 1);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Re-adds words using new adjusted sizes.\r\n     * Run after the largestWordSize and/or smallestWordSize have changed.\r\n     * Need to run manually, since it's intensive.\r\n     */\r\n    this.resizeWords = function() {\r\n        app.clear();\r\n        createAllGraphics();\r\n        sortWords();\r\n    }\r\n    \r\n    /**\r\n     * Sort the word list by size, largest first.\r\n     */\r\n    function sortWords() {\r\n        _words.sort(function(a, b) {\r\n            if (a.origSize > b.origSize) return -1;\r\n            else if (a.origSize < b.origSize) return 1;\r\n            else return 0;\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Creates the Label that gets displayed on the stage.\r\n     * Randomly selects an angle from possible values.\r\n     * Calculates the mask of the word (used in hit detection).\r\n     * @param\twordObj\r\n     */\r\n\r\n    function createWordGraphics(wordObj) {\r\n        var adjustedSize = findNewRelativeSize(wordObj, that.sizeAdjustment);\r\n        wordObj.fontSize = adjustedSize > that.minFontSize ? adjustedSize : that.minFontSize;\r\n        wordObj.fontFamily = myFont;\r\n        \r\n        measureDimensions(wordObj);\r\n        // these values are needed for accurate x and y co-ordinates after rotating the word\r\n        wordObj.tx = 0;\r\n        wordObj.ty = wordObj.height;\r\n        //~ var trueHeight = measureTextHeight(wordObj);\r\n        //~ console.log(wordObj.height, trueHeight);\r\n        //~ wordObj.height = trueHeight;\r\n        \r\n        var angle = 0;\r\n        \r\n        if (that.getWordOrientation() === that.MIXED) {\r\n\t        if (wordObj.text.match(/\\s/) == null) {\r\n\t\t\t\tif (Math.random() > 0.66) {\r\n\t\t\t\t\tvar tempHeight = wordObj.height;\r\n\t\t\t\t\tvar tempWidth = wordObj.width;\r\n\t\t\t\t\twordObj.height = tempWidth;\r\n\t\t\t\t\twordObj.width = tempHeight;\r\n\t\t\t\t\tif (Math.round(Math.random()) == 0) {\r\n\t\t\t\t\t\tangle = 90;\r\n\t\t\t\t\t\twordObj.ty = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tangle = -90;\r\n\t\t\t\t\t\twordObj.ty = wordObj.height;\r\n\t\t\t\t\t\twordObj.tx = wordObj.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n        \r\n        \r\n\r\n        wordObj.size = Math.max(wordObj.height, wordObj.width);\r\n        wordObj.rotation = degreesToRadians(angle);\r\n        \r\n        // find the pixels that aren't transparent and store them as the mask\r\n        app.context.fillStyle = app.canvas.style.backgroundColor;\r\n        app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n        wordObj.draw(app.context);\r\n        var imageData = app.context.getImageData(wordObj.x, wordObj.y, wordObj.width, wordObj.height);\r\n        var mask = new Array();\r\n        for (var x = 0; x < wordObj.width; x++) {\r\n            var xm = Math.floor(x / that.COARSENESS) * that.COARSENESS;\r\n            if (mask[xm] == null) mask[xm] = {};\r\n            for (var y = 0; y < wordObj.height; y++) {\r\n                var ym = Math.floor(y / that.COARSENESS) * that.COARSENESS;\r\n                var pixel = getPixel(x, y, imageData);\r\n                var pixelColor = 'rgb('+pixel[0]+', '+pixel[1]+', '+pixel[2]+')';\r\n                if (pixelColor != app.canvas.style.backgroundColor) {\r\n                    mask[xm][ym] = true;\r\n                }\r\n                if (mask[xm][ym]) {\r\n                    y = ym + that.COARSENESS; // there's a match, so skip ahead\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n        wordObj.mask = mask;\r\n    }\r\n    \r\n    /**\r\n     * Helper method which runs createWordGraphics for all the words.\r\n     */\r\n    function createAllGraphics() {\r\n    \tfor (var i = 0; i < _words.length; i++) {\r\n            createWordGraphics(_words[i]);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Arrange the words on the stage using the chosen layout scheme.\r\n     */\r\n    this.arrangeWords = function() {\r\n//    \tconsole.profile();\r\n        clearTimeout(timer);\r\n        app.clear(); // reset canvas\r\n        \r\n        this.toggleLoadingText();\r\n\r\n        if (_words.length > 0) {\r\n            \r\n            this.grid = [];\r\n            timer_i = 0; // used as the increment for the word list\r\n      \r\n            function doArrange() {                \r\n                // common variables between the layout schemes\r\n                var x;\r\n                var y;\r\n                var word;\r\n                var breakOut;\r\n                var fail;\r\n                var wordCount = this.wordsToArrange - 1;\r\n                var appCanvasWidth = app.canvas.width;\r\n                var appCanvasHeight = app.canvas.height;\r\n                var halfWidth = appCanvasWidth * 0.5;\r\n                var halfHeight = appCanvasHeight * 0.5;\r\n                var dd = 0.05;\r\n\r\n                do {\r\n                    word = _words[timer_i];\r\n                    if (word !== undefined) {\r\n\t                    var a = Math.random() * Math.PI; // angle?\r\n\t                    var d = Math.random() * (word.size * 0.25); // diameter?\r\n\t                    var da = (Math.random() - 0.5) * 0.5;\r\n\t                    var halfWordWidth = word.width * 0.5;\r\n\t                    var halfWordHeight = word.height * 0.5;\r\n\t\r\n\t                    while (true) {\r\n\t                        x = Math.floor((halfWidth + (Math.cos(a) * d * this.ratio) - halfWordWidth) / this.COARSENESS) * this.COARSENESS;\r\n\t                        y = Math.floor((halfHeight + (Math.sin(a) * d) - halfWordHeight) / this.COARSENESS) * this.COARSENESS;\r\n\t\r\n\t                        fail = false;\r\n\t                        if (x + halfWordWidth >= appCanvasWidth || y + halfWordHeight >= appCanvasHeight) {\r\n\t                            fail = true;\r\n\t                        } else {\r\n\t                        \tfail = hitTest(x, y, word.height, word.width, word.mask);\r\n\t                        }\r\n\t                        if (!fail) {\r\n\t                            break;\r\n\t                        }\r\n\t                        a += da;\r\n\t                        d += dd;\r\n\t                    }\r\n\t\r\n\t                    finalizeWord(x, y, word);\r\n\t                    if (app.useFadeEffect) {\r\n\t                    \tword.alpha = 0;\r\n\t\t                    for (var w = 0; w < timer_i; w++) {\r\n\t\t                        var wrd = _words[w];\r\n\t\t                        if (wrd.alpha < 1) fadeWord(wrd);\r\n\t\t                    }\r\n\t                    } else {\r\n\t                    \tword.alpha = 1;\r\n\t                    \tword.draw(app.context);\r\n\t                    }\r\n                    }\r\n                    timer_i++;\r\n                    if (timer_i >= _words.length) {\r\n                        clearTimeout(timer);\r\n//                        console.profileEnd();\r\n                        this.doingArrange = false;\r\n                        \r\n                        this.toggleLoadingText(false);                               \r\n                        \r\n                        drawWords();\r\n                        \r\n                        break;\r\n                    }\r\n                } while (wordCount--);\r\n            }\r\n            \r\n            /**\r\n             * Test the mask of a word against the overall grid to see if they intersect.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\th\r\n             * @param\tw\r\n             * @param\tmask\r\n             * @return\r\n             */\r\n            function hitTest(x, y, h, w, mask) {\r\n                for (var xt = 0; xt <= w; xt += this.COARSENESS) {\r\n                    for (var yt = 0; yt <= h; yt += this.COARSENESS) {\r\n                        if (mask[xt] && mask[xt][yt] && this.grid[xt + x] != null && this.grid[xt + x][yt + y] != null) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            \r\n            /**\r\n             * Set the new position of the word, and make it visible.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\tword\r\n             * @param   drawIt\r\n             */\r\n            function finalizeWord(x, y, word, drawIt) {\r\n                set_grid(x, y, word);\r\n\r\n                word.x = x;\r\n                word.y = y;\r\n\r\n                word.live = true;\r\n                if (drawIt) {\r\n                \t/*\r\n                    if ($.browser.webkit) {\r\n                        // cover the canvas with a transparent rectangle\r\n                        // forces webkit to show the words\r\n                        app.context.fillStyle = 'rgba(0,0,0,0)';\r\n                        app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n                    }\r\n                    */\r\n                    word.draw(app.context);\r\n                }\r\n            }\r\n            \r\n            function fadeWord(word) {\r\n                word.alpha += 0.25;\r\n//                if ($.browser.webkit) {\r\n                    // cover the canvas with a transparent rectangle\r\n                    // forces webkit to show the words\r\n//                    app.context.fillStyle = 'rgba(0,0,0,0)';\r\n//                    app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n//               }\r\n                word.draw(app.context);\r\n            }\r\n\r\n            /**\r\n             * Mark the spots on the grid where the word is located.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\tword\r\n             */\r\n            function set_grid(x, y, word) {\r\n                for (var xt = 0; xt < word.width; xt += this.COARSENESS) {\r\n                    for (var yt = 0; yt < word.height; yt += this.COARSENESS) {\r\n                        if (word.mask[xt] && word.mask[xt][yt]) {\r\n                            if (!this.grid[xt + x]) this.grid[xt + x] = [];\r\n                            this.grid[xt + x][yt + y] = word;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            doArrange = doArrange.createDelegate(this);\r\n            hitTest = hitTest.createDelegate(this);\r\n            finalizeWord = finalizeWord.createDelegate(this);\r\n            fadeWord = fadeWord.createDelegate(this);\r\n            set_grid = set_grid.createDelegate(this);\r\n            this.doingArrange = true;\r\n            \r\n//            if ($.browser.mozilla) {\r\n//                // FF needs more time to perform each layout run\r\n//                timer = setInterval(doArrange, 250);\r\n//            } else {\r\n                timer = setInterval(doArrange, 50);\r\n//            }\r\n            \r\n        } else {\r\n            alert(\"Error: There are no words to arrange.\");\r\n        }\r\n    }\r\n    \r\n    this.toggleLoadingText = function(show) {\r\n        app.context.save();\r\n        \r\n        if (show) app.context.fillStyle = 'black';\r\n        else app.context.fillStyle = app.canvas.style.backgroundColor;\r\n        \r\n        app.context.textBaseline = 'top';\r\n        app.context.font = '10px Arial';\r\n        var offset = app.context.measureText('Loading').width + 10;\r\n        app.context.fillText('Loading', app.canvas.width - offset, 10);\r\n        \r\n        app.context.restore();\r\n    }\r\n    \r\n    this.startUpdates = function() {\r\n    \ttimer = setInterval(drawWords, that.UPDATE_RATE);\r\n    }\r\n    \r\n    this.stopUpdates = function() {\r\n    \tif (overWord != null) {\r\n\t    \t// remove existing tooltip\r\n\t    \toverWord = null;\r\n\t    \tdrawWords();\r\n    \t}\r\n    \tclearTimeout(timer);\r\n    }\r\n    \r\n    function drawWords() {\r\n        app.clear();\r\n        var i = _words.length;\r\n        while(i--) {\r\n        \tvar word = _words[i];\r\n            word.alpha = 1;\r\n            if (word.live) word.draw(app.context);\r\n        }\r\n        var $canvasEl = $(app.canvas);\r\n        if (overWord != null) {\r\n        \t// add pointer cursor\r\n        \t$canvasEl.css('cursor', 'pointer');\r\n        \t\r\n            // draw the tooltip\r\n            app.context.save();\r\n            app.context.textBaseline = 'alphabetic';\r\n            app.context.font = '12px Arial';\r\n            \r\n            var wordWidth = app.context.measureText(overWord.text).width;\r\n            var valueWidth = app.context.measureText(overWord.value).width;\r\n            var maxWidth = wordWidth > valueWidth ? wordWidth : valueWidth;\r\n            maxWidth += 20;\r\n            \r\n            var x = overX + 15;\r\n            var y = overY + 25;\r\n            var appWidth = $canvasEl.width();\r\n            var appHeight = $canvasEl.height();\r\n            if (x + maxWidth >= appWidth) {\r\n            \tx -= maxWidth;\r\n            }\r\n            if (y + 40 >= appHeight) {\r\n            \ty -= 40;\r\n            }\r\n            \r\n            app.context.fillStyle = 'rgba(255,255,255,0.9)';\r\n            app.context.strokeStyle = 'rgba(100,100,100,0.9)';\r\n            app.context.translate(x, y);\r\n            app.context.fillRect(0, 0, maxWidth, 40);\r\n            app.context.strokeRect(0, 0, maxWidth, 40);\r\n            app.context.fillStyle = 'rgba(0,0,0,0.9)';\r\n            app.context.fillText(overWord.text+':', 8, 18);\r\n            app.context.fillText(overWord.value, 8, 30);\r\n            app.context.restore();\r\n        } else {\r\n        \t$canvasEl.css('cursor', 'default');\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Checks to see if the mouse is currently over a word.\r\n     * @param\tevent\r\n     */\r\n    this.handleMouseMove = function(event) {\r\n        if (!this.doingArrange) {\r\n        \tvar i = _words.length;\r\n            while(i--) {\r\n                _words[i].isOver = false;\r\n            }\r\n            var offset = $(app.canvas).offset();\r\n            var remainder = (event.pageX - offset.left) % this.COARSENESS;\r\n            var x = (event.pageX - offset.left) - remainder;\r\n            remainder = (event.pageY - offset.top) % this.COARSENESS;\r\n            var y = (event.pageY - offset.top) - remainder;\r\n            overWord = this.findWordByCoords(x, y);\r\n            if (overWord != null) {\r\n                overWord.isOver = true;\r\n                overX = x;\r\n                overY = y;\r\n            }\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Checks to see if a word was clicked on, and then sends out the corresponding event.\r\n     * @param\tevent\r\n     * @return\r\n     */\r\n    this.handleWordClick = function(event) {\r\n        var offset = $(app.canvas).offset();\r\n        var remainder = (event.pageX - offset.left) % this.COARSENESS;\r\n        var x = (event.pageX - offset.left) - remainder;\r\n        remainder = (event.pageY - offset.top) % this.COARSENESS;\r\n        var y = (event.pageY - offset.top) - remainder;\r\n        var matchingWord = this.findWordByCoords(x, y);\r\n        \r\n        if (matchingWord != null) {\r\n            return {text: matchingWord.text, value: matchingWord.value};\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Returns the word which occupies the co-ordinates that were passed in.\r\n     * @param\tx\r\n     * @param\ty\r\n     * @return\r\n     */\r\n    this.findWordByCoords = function(x, y) {\r\n        var matchingWord = null;\r\n        if (this.grid[x] !=  null) {\r\n            if (this.grid[x][y] != null) {\r\n                matchingWord = this.grid[x][y];\r\n            } else if (this.grid[x][y + this.COARSENESS] != null) {\r\n                matchingWord = this.grid[x][y + this.COARSENESS];\r\n            }\r\n        }\r\n        if (matchingWord == null && this.grid[x + this.COARSENESS] != null) {\r\n            if (this.grid[x + this.COARSENESS][y] != null) {\r\n                matchingWord = this.grid[x + this.COARSENESS][y];\r\n            } else if (this.grid [x + this.COARSENESS][y + this.COARSENESS] != null) {\r\n                matchingWord = this.grid[x + this.COARSENESS][y + this.COARSENESS];\r\n            }\r\n        }\r\n        \r\n        return matchingWord;\r\n    }\r\n    \r\n    /**\r\n     * Convert an angle in degrees to radians.\r\n     * @param\tdegrees\r\n     * @return\r\n     */\r\n    function degreesToRadians(degrees) {\r\n        var radians = degrees * (Math.PI / 180);\r\n        return radians;\r\n    }\r\n    \r\n    /**\r\n     * Convenience function to map a variable from one coordinate space to another (from processing).\r\n     */\r\n    function mapValue(value, istart, istop, ostart, ostop) {\r\n        return ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\r\n    }\r\n    \r\n}\r\n\r\n// from Ext\r\nFunction.prototype.createDelegate = function(obj, args, appendArgs){\r\n    var method = this;\r\n    return function() {\r\n        var callArgs = args || arguments;\r\n        if (appendArgs === true){\r\n            callArgs = Array.prototype.slice.call(arguments, 0);\r\n            callArgs = callArgs.concat(args);\r\n        }else if (typeof appendArgs==\"number\"){\r\n            callArgs = Array.prototype.slice.call(arguments, 0); // copy arguments first\r\n            var applyArgs = [appendArgs, 0].concat(args); // create method call params\r\n            Array.prototype.splice.apply(callArgs, applyArgs); // splice them in\r\n        }\r\n        return method.apply(obj || window, callArgs);\r\n    };\r\n}","/**\n * Voyant changes & additions:\n * - height setter, height no longer calculated based on content\n * - replaced tree.size with tree.nodeSize\n * - pointer cursor for node\n * - rect now behind text, made opaque to block paths obscuring text\n * - branch length based on text length on per node basis\n * - click handler\n * - zoom fixes\n * - redraw checks for tries before re-running setup\n * - prevent negative height error\n */\n\n/*\n * (This is the new BSD license.) Copyright (c) 2012-2014, Chris Culy All rights\n * reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met: *\n * Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer. * Redistributions in binary\n * form must reproduce the above copyright notice, this list of conditions and\n * the following disclaimer in the documentation and/or other materials provided\n * with the distribution. * Neither the name of the Chris Culy nor the names of\n * its contributors may be used to endorse or promote products from this\n * software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY Chris Culy ``AS IS'' AND ANY OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO\n * EVENT SHALL Chris Culy BE LIABLE FOR ANY, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; OF USE, DATA, OR PROFITS; OR\n * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\n/**\n * @namespace doubletree All of the functionality is in the doubletree namespace\n */\nvar doubletree = {};\n\n(function() {\n\n// TBD what about visWidth? to be fixed visWidth is really width and width\n// is really just the width of one side of the doubletree\n\n/**\n * @class doubletree.DoubleTree This is the class for the DoubleTree\n *        visualization\n */\ndoubletree.DoubleTree = function() {\n\tvar containers = []; // nominally for allowing the same tree in\n\t\t\t\t\t\t\t// multiple places, but not tested and probably\n\t\t\t\t\t\t\t// doesn't work right (e.g. for search)\n\t// defaults. see below for getter/setters\n\tvar visWidth = 600;\n\tvar visHt = 400; // calculated, not settable\n\tvar prefixesOnRight = false; // true for right to left writing systems\n\tvar filters = {\n\t\t\"left\" : [],\n\t\t\"right\" : []\n\t};\n\tvar handlers = {\n\t\t\"alt\" : noOp,\n\t\t\"shift\" : noOp,\n\t\t\"click\" : noOp\n\t};\n\tvar showTokenExtra = true;\n\tvar scaleLabels = true;\n\tvar sortFun = doubletree.sortByStrFld(\"token\");\n\tvar nodeText = doubletree.tokenText; // default\n\tvar tokenExtraText = function(info) {\n\t\treturn doubletree.fieldText(info, \"POS\");\n\t};\n\tvar rectColor = function(info) {\n\t\treturn \"rgba(255,255,255,1)\";\n\t};\n\tvar rectBorderColor = function(info) {\n\t\treturn \"rgba(255,255,255,1)\";\n\t};\n\tvar continuationColor = function(info) {\n\t\treturn \"red\";\n\t};\n\tvar basicStyles = {\n\t\t\"node\" : {\n\t\t\t\"fill\" : \"white\",\n\t\t\t\"stroke\" : \"steelblue\",\n\t\t\t\"stroke-width\" : \"1.5px\"\n\t\t},\n\t\t\"branch\" : {\n\t\t\t\"stroke\" : \"#aaa\",\n\t\t\t\"stroke-width\" : \"1.5px\"\n\t\t}\n\t};\n\n\tvar succeeded = false; // did we succeed in building a DoubleTree? we\n\t\t\t\t\t\t\t// need this flag, since we no longer return\n\t\t\t\t\t\t\t// true/false from setupFromX (since we do\n\t\t\t\t\t\t\t// chaining)\n\n\tvar dispatch = d3.dispatch(\"idsUpdated\");\n\tdispatch.on(\"idsUpdated\", function() {\n\t\tif (this == leftTree) {\n\t\t\trtTree.setIds(leftTree.continuationIDs);\n\t\t\trtTree.updateContinuations();\n\t\t} else if (this == rtTree) {\n\t\t\tleftTree.setIds(rtTree.continuationIDs);\n\t\t\tleftTree.updateContinuations();\n\t\t}\n\t});\n\n\tvar leftTrie, rtTrie, leftTree, rtTree;\n\tvar visibleIDs; // the ids of the results that are showing\n\n\t// tmp, until we can do sizing right. the font sizes are specified in\n\t// doubletree.css and manually copied here\n\tvar kFontSize = 14; // normal\n\tvar kBigFontSize = 1.15 * kFontSize; // for found text and\n\t\t\t\t\t\t\t\t\t\t\t// continuations (was 18) NB:\n\t\t\t\t\t\t\t\t\t\t\t// this is 0.05 bigger than in\n\t\t\t\t\t\t\t\t\t\t\t// doubletree.css\n\tvar kMinFontSize = 8; // smallest that we'll scale to\n\tvar textScale;\n\n\t/** @exports mine as doubletree.DoubleTree */\n\t/** @ignore */\n\tfunction mine(selection) {\n\t\t// generate container and data independent part of chart here, using\n\t\t// `width` and `height` etc\n\n\t\tselection.each(function(d, i) {\n\t\t\t// generate chart here; `d` is the data and `this` is the\n\t\t\t// element\n\t\t\t// really, storing containers. Use updateData and redraw to\n\t\t\t// really do the generation\n\t\t\tcontainers.push(this.node());\n\t\t});\n\n\t}\n\n\t/**\n\t * initialize the visualization in one or more html containers\n\t * <p>\n\t * \n\t * @param containerPattern\n\t *            CSS selector for the containers\n\t */\n\tmine.init = function(containerPattern) {\n\t\td3.select(d3.selectAll(containerPattern)).call(this);\n\t\treturn mine;\n\t};\n\n\t/**\n\t * redraw the visualization\n\t */\n\tmine.redraw = function() {\n\t\tif (leftTrie !== undefined && rtTrie !== undefined) {\n\t\t\tmine.setupFromTries(leftTrie, rtTrie);\n\t\t}\n\n\t\treturn mine;\n\t};\n\n\t/**\n\t * set up the visualization using 2 {@link doubletree.Trie}s\n\t * \n\t * @param leftOne\n\t *            the left {@link doubletree.Trie}\n\t * @param rtOne\n\t *            the right {@link doubletree.Trie}\n\t */\n\tmine.setupFromTries = function(leftOne, rtOne) {\n\t\tleftTrie = leftOne.getUniqRoot();\n\t\trtTrie = rtOne.getUniqRoot();\n\n\t\tvar leftTrieTree = leftTrie.toTree(filters.left);\n\t\tvar rtTrieTree = rtTrie.toTree(filters.right);\n\n\t\tvar copyIDs = true;\n\t\tif (Object.keys(rtTrieTree.pruned).length > 0) {\n\t\t\tnew_pruneTree(rtTrieTree, rtTrieTree.pruned, copyIDs);\n\t\t\tnew_pruneTree(leftTrieTree, rtTrieTree.pruned, copyIDs);\n\t\t\tcopyIDs = false;\n\t\t}\n\n\t\tif (Object.keys(leftTrieTree.pruned).length > 0) {\n\t\t\tnew_pruneTree(leftTrieTree, leftTrieTree.pruned, copyIDs);\n\t\t\tnew_pruneTree(rtTrieTree, leftTrieTree.pruned, copyIDs);\n\t\t}\n\n\t\t// combine the info's from the two trees\n\t\tvar newInfo = {}; // rtTrieTree.info;\n\n\t\tfor ( var k in rtTrieTree.info) {\n\t\t\tif (k != \"continuations\" && k != \"ids\" && k != \"count\") {\n\t\t\t\tnewInfo[k] = rtTrieTree.info[k];\n\t\t\t}\n\t\t}\n\n\t\tnewInfo[\"right continuations\"] = rtTrieTree.info.continuations;\n\t\tnewInfo[\"left continuations\"] = leftTrieTree.info.continuations;\n\n\t\tnewInfo.ids = {};\n\t\taddTo(newInfo.ids, rtTrieTree.info.ids);\n\t\taddTo(newInfo.ids, leftTrieTree.info.ids);\n\t\tnewInfo.count = Object.keys(newInfo.ids).length;\n\t\tvisibleIDs = Object.keys(newInfo.ids);\n\n\t\tif (rtTrieTree.info.origIDs || leftTrieTree.info.origIDs) {\n\t\t\tnewInfo.origIDs = {};\n\t\t\taddTo(newInfo.origIDs, rtTrieTree.info.origIDs);\n\t\t\taddTo(newInfo.origIDs, leftTrieTree.info.origIDs);\n\t\t\tnewInfo.origCount = Object.keys(newInfo.origIDs).length;\n\t\t}\n\n\t\trtTrieTree.info = newInfo;\n\t\tleftTrieTree.info = newInfo;\n\n\t\tvar maxChildren = Math.max(leftTrieTree.maxChildren,\n\t\t\t\trtTrieTree.maxChildren);\n\t\tif (isNaN(maxChildren) || maxChildren == 0) {\n\t\t\tsucceeded = false;\n\t\t\treturn mine;\n\t\t}\n\n\t\tif (scaleLabels) {\n\t\t\ttextScale = d3.scaleLog().range([ kMinFontSize, kFontSize ]);\n\t\t} else {\n\t\t\ttextScale = function() {\n\t\t\t\treturn kFontSize;\n\t\t\t};\n\t\t\ttextScale.domain = function() {\n\t\t\t};\n\t\t}\n\n\t\tvar minCount = Math.min(leftTrieTree.minCount, rtTrieTree.minCount);\n\t\ttextScale.domain([ minCount, leftTrieTree.info.count ]);\n\n\t\t// TBD ?? margin, width, height, duplicated in Tree\n\t\tvar margin = {\n\t\t\ttop : 20,\n\t\t\tright : 20,\n\t\t\tbottom : 20,\n\t\t\tleft : 20\n\t\t};\n\t\tvar width = visWidth - margin.right - margin.left;\n\t\tvar height = visHt - margin.top - margin.bottom;\n\n\t\tcontainers.forEach(function(d, i) {\n\t\t\tvar thisContainer = d;\n\t\t\tvar thisVis;\n\n\t\t\tvar tmp = d3.select(thisContainer).select(\"svg\");\n\t\t\tif (tmp.node() == null) {\n\t\t\t\tthisVis = d3.select(thisContainer).append(\"svg\")\n\t\t\t\t\t.attr(\"width\", width + margin.right + margin.left)\n\t\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t\t\t.attr(\"cursor\", \"move\")\n\t\t\t\t\t.call(d3.zoom().scaleExtent([1,1]).on('zoom', function() {\n\t\t\t\t\t\tvar x = d3.event.transform.x + width/2; // need offset because of initial offset in g element\n\t\t\t\t\t\tvar y = d3.event.transform.y + height/2;\n\t\t\t\t\t\td3.select(thisContainer).select(\"svg > g\").attr(\"transform\", 'translate('+x+','+y+')');\n\t\t\t\t\t}));\n\n\t\t\t\tthisVis.append(\"g\") // container for both trees\n\t\t\t\t\t.attr('transform', 'translate('+width/2+','+height/2+')'); // initial offset\n\n\t\t\t} else {\n\t\t\t\tthisVis = tmp;\n\t\t\t\tthisVis\n\t\t\t\t\t.attr(\"width\", width + margin.right + margin.left)\n\t\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom);\n\t\t\t\tthisVis.selectAll(\"g *\").remove(); // clear\n\t\t\t\t\t\t\t\t\t\t\t\t\t// previous\n\t\t\t}\n\n\t\t\tleftTree = new doubletree.Tree(thisVis.select(\"g\"),\n\t\t\t\t\tvisWidth, visHt, leftTrieTree, true,\n\t\t\t\t\tsortFun, dispatch, textScale, showTokenExtra,\n\t\t\t\t\tnodeText, tokenExtraText, rectColor,\n\t\t\t\t\trectBorderColor, continuationColor, basicStyles);\n\t\t\trtTree = new doubletree.Tree(thisVis.select(\"g\"),\n\t\t\t\t\tvisWidth, visHt, rtTrieTree, false,\n\t\t\t\t\tsortFun, dispatch, textScale, showTokenExtra,\n\t\t\t\t\tnodeText, tokenExtraText, rectColor,\n\t\t\t\t\trectBorderColor, continuationColor, basicStyles);\n\t\t});\n\n\t\tleftTree.handleAltPress = handlers.alt;\n\t\trtTree.handleAltPress = handlers.alt;\n\n\t\tleftTree.handleShiftPress = handlers.shift;\n\t\trtTree.handleShiftPress = handlers.shift;\n\t\t\n\t\tleftTree.handleClick = handlers.click;\n\t\trtTree.handleClick = handlers.click;\n\n\t\tsucceeded = true;\n\t\treturn mine;\n\t};\n\n\t// hitArray is an array of items, prefixArray and suffixArray are arrays\n\t// of arrays of items\n\t/**\n\t * set up the visualization from arrays corresponding to the hit, the\n\t * prefix, and the suffix of a key word in context result.\n\t * <p>\n\t * The ith elements should correspond with each other. Each item\n\t * consists of fields separated by a field delimiter. For example we\n\t * might have word/tag (with / as the delimiter) or word\\tlemma\\tauthor\n\t * (with tab (\\t) as the delimiter) Only certain fields are relevant for\n\t * deciding whether two items are to be considered the same (e.g. we\n\t * might ignore an author field)\n\t * \n\t * @param prefixArray\n\t *            the array of arrays of the prefixes of the hits\n\t * @param hitArray\n\t *            the array of the hits\n\t * @param suffixArray\n\t *            the array of arrays of the suffixes of the hits\n\t * @param idArray\n\t *            the array of ids of the hits (or null, if there are no ids\n\t *            for the hits)\n\t * @param caseSensitive\n\t *            are the hits case sensitive\n\t * @param fieldNames\n\t *            the names of the fields\n\t * @param fieldDelim\n\t *            the field delimiter\n\t * @param distinguishingFieldsArray\n\t *            the fields that determine identity\n\t * @param prefixesOnRight\n\t *            display the prefixes on the right, for right-to-left\n\t *            writing systems. Default is false\n\t */\n\tmine.setupFromArrays = function(prefixArray, hitArray, suffixArray, idArray, caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray) {\n\n\t\tif (undefined == caseSensitive && leftTrie) {\n\t\t\tcaseSensitive = leftTrie.caseSensitive();\n\t\t}\n\t\tif (undefined == fieldNames && leftTrie) {\n\t\t\tfieldNames = leftTrie.fieldNames();\n\t\t}\n\t\tif (undefined == fieldDelim && leftTrie) {\n\t\t\tfieldDelim = leftTrie.fieldDelim();\n\t\t}\n\t\tif (undefined == distinguishingFieldsArray && leftTrie) {\n\t\t\tdistinguishingFieldsArray = leftTrie.distinguishingFieldsArray();\n\t\t}\n\n\t\tleftTrie = new doubletree.Trie(caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\t\trtTrie = new doubletree.Trie(caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\n\t\tvar n = hitArray.length;\n\t\tfor ( var i = 0; i < n; i++) {\n\t\t\tvar thisID = idArray ? idArray[i] : i;\n\t\t\tvar thisHit = hitArray[i];\n\t\t\tvar thesePrefixes = prefixArray[i].slice();\n\t\t\tvar theseSuffixes = suffixArray[i].slice();\n\n\t\t\tthesePrefixes.push(thisHit);\n\t\t\tthesePrefixes.reverse();\n\t\t\ttheseSuffixes.unshift(thisHit);\n\n\t\t\t/*\n\t\t\t * if (prefixesOnRight) { //e.g. for Arabic, Hebrew, N'Ko, ...\n\t\t\t * thesePrefixes.push(thisHit); thesePrefixes.reverse();\n\t\t\t * \n\t\t\t * rtTrie.addNgram( thesePrefixes, thisID);\n\t\t\t * \n\t\t\t * theseSuffixes.unshift(thisHit); leftTrie.addNgram(\n\t\t\t * theseSuffixes, thisID);\n\t\t\t *  } else { thesePrefixes.push(thisHit);\n\t\t\t * thesePrefixes.reverse(); leftTrie.addNgram( thesePrefixes,\n\t\t\t * thisID);\n\t\t\t * \n\t\t\t * theseSuffixes.unshift(thisHit); rtTrie.addNgram(\n\t\t\t * theseSuffixes, thisID); }\n\t\t\t */\n\n\t\t\tif (prefixesOnRight) {\n\t\t\t\trtTrie.addNgram(thesePrefixes, thisID);\n\t\t\t\tleftTrie.addNgram(theseSuffixes, thisID);\n\t\t\t} else {\n\t\t\t\tleftTrie.addNgram(thesePrefixes, thisID);\n\t\t\t\trtTrie.addNgram(theseSuffixes, thisID);\n\t\t\t}\n\t\t}\n\n\t\tmine.setupFromTries(leftTrie, rtTrie);\n\t\treturn mine;\n\t};\n\n\t/**\n\t * @returns just the <em>ids</em> of the data that satisfies the\n\t *          current filters\n\t */\n\tmine.filteredIDs = function() {\n\t\treturn visibleIDs;\n\t};\n\n\t// return how many found\n\t/**\n\t * search the nodes of the visualization for a pattern\n\t * <p>\n\t * The found nodes will get the CSS class foundText\n\t * \n\t * @param searchRE\n\t *            the regular expression to look for\n\t * @returns how many nodes were found\n\t */\n\tmine.search = function(searchRE) {\n\t\tleftTree.search(searchRE);\n\t\trtTree.search(searchRE);\n\n\t\tvar thisVis = d3.select(containers[0]);\n\t\tvar found = thisVis.selectAll(\"text.foundText\");\n\n\t\tif (found.empty()) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar what = found[0].length;\n\n\t\tvar foundRt = thisVis.selectAll(\"text.rtNdText.foundText\");\n\n\t\tif (foundRt.node() != null) {\n\t\t\twhat--; // root node, and we have 2 of those, so subtract one\n\t\t\t\t\t// from the count\n\t\t}\n\t\treturn what;\n\t};\n\n\t/**\n\t * clear the visualization of the search results\n\t * <p>\n\t * the CSS class foundText is removed\n\t */\n\tmine.clearSearch = function() {\n\t\tleftTree.clearSearch();\n\t\trtTree.clearSearch();\n\t\treturn mine;\n\t};\n\n\t/**\n\t * update the showing/hiding of extra information associated with the\n\t * basic item, e.g. part of speech information\n\t * <p>\n\t * Notes:\n\t * <ul>\n\t * <li>This <em>DOES</em> redraw the visualization.</li>\n\t * <li>Safari does not update the visualization correctly by itself, so\n\t * we force it to rebuild the entire visualization, unlike in other\n\t * browsers.</li>\n\t * </ul>\n\t */\n\tmine.updateTokenExtras = function() {\n\t\tleftTree.showTokenExtras(showTokenExtra);\n\t\trtTree.showTokenExtras(showTokenExtra);\n\n\t\t// Safari doesn't update reshowing correctly, so we'll force it to\n\t\t// build this again :( (Chrome works correctly, so it's not a webkit\n\t\t// issue)\n\t\tvar thisVis = d3.select(containers[0]);\n\t\tvar tokExtra = thisVis.select('.tokenExtra[display=\"inline\"]');\n\t\tif (!tokExtra.empty()) {\n\t\t\tvar ht = tokExtra.style(\"height\");\n\t\t\tif (ht == \"0px\") {\n\t\t\t\tmine.redraw();\n\t\t\t}\n\t\t}\n\n\t\treturn mine;\n\t};\n\n\t// ////////// getter/setters\n\t/**\n\t * Getter/setter for the maximum width of the DoubleTree area\n\t * \n\t * @param value\n\t *            the maximum width\n\t */\n\tmine.visWidth = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn visWidth;\n\t\tvisWidth = value;\n\t\treturn mine;\n\t};\n\n\t// ADDED\n\tmine.visHeight = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn visHt;\n\t\tvisHt = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for whether the prefixes are displayed on the right or\n\t * the left.\n\t * <p>\n\t * The default value is false, i.e. the prefixes are displayed on the\n\t * left, as in English. <em>prefixesOnRight</em> should be set to true\n\t * for right-to-left writing systems such as Arabic, Hebrew, N'Ko, etc.\n\t * \n\t * @param value\n\t *            true or false\n\t */\n\tmine.prefixesOnRight = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn prefixesOnRight;\n\t\tprefixesOnRight = value;\n\t\treturn mine;\n\t};\n\n\t// NB: doesn't redraw\n\t/**\n\t * Getter/setter for the filter functions.\n\t * <p>\n\t * The filter functions get an information object as their argument, and\n\t * return true/false. Each position away from the root has its own\n\t * filter, and the left and right sides also have their own filters. The\n\t * filters are specified via an object with \"left\" and \"right\" keys\n\t * whose values are arrays of functions The function at index <em>i</em>\n\t * filters position <em>i + 1</em> away from the root. Default is no\n\t * filtering (via empty arrays)\n\t * <p>\n\t * Note: setting the filters does <em>not</em> redraw the\n\t * visualization. See {@link #redraw}\n\t * \n\t * @param value\n\t *            an object containing the filters\n\t */\n\tmine.filters = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn filters;\n\t\tfilters = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the handlers for alt-click and shift-click on the\n\t * nodes.\n\t * <p>\n\t * The handlers get an information object as their argument. The\n\t * handlers are specified via an object with \"alt\" and \"shift\" keys\n\t * whose values are functions The default is no handlers, i.e.\n\t * <em>NO</em> interaction\n\t * \n\t * @param value\n\t *            an object containing the handlers\n\t */\n\tmine.handlers = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn handlers;\n\t\thandlers = value;\n\t\treturn mine;\n\t};\n\n\t// NB: doesn't redraw\n\t/**\n\t * Getter/setter for showing/hiding extra information associated with\n\t * the main value, e.g. part of speech information.\n\t * <p>\n\t * Note: setting this value does <em>not</em> redraw the\n\t * visualization. See {@link #redraw} Default is true\n\t * \n\t * @param value\n\t *            a boolean specifying whether to show the information or\n\t *            not\n\t */\n\tmine.showTokenExtra = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn showTokenExtra;\n\t\tshowTokenExtra = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for scaling the node labels by their frequency.\n\t * <p>\n\t * Default is true\n\t * \n\t * @param value\n\t *            a boolean specifying whether to scale the labels or not\n\t */\n\tmine.scaleLabels = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn scaleLabels;\n\t\tscaleLabels = value;\n\t\treturn mine;\n\t};\n\n\t// succeeded is read only\n\t/**\n\t * Reports whether the DoubleTree was constructed successfully\n\t * <p>\n\t * \n\t * @returns true if the DoubleTree was constructed successfully and\n\t *          false otherwise\n\t */\n\tmine.succeeded = function() {\n\t\treturn succeeded;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the sort order of sibling\n\t * nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return -1 for precedes, 1 for follows and 0 for don't care The nodes\n\t * are displayed in \"preceding\" (i.e. ascending) order, from top to\n\t * bottom. The default is alphabetical by a \"token\" field if there is\n\t * one: doubletree.sortByStrFld(\"token\")\n\t * \n\t * @param the\n\t *            sort order function\n\t */\n\tmine.sortFun = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn sortFun;\n\t\tsortFun = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the content of the node\n\t * labels.\n\t * <p>\n\t * The function gets an information object as its first argument and a\n\t * boolean indicating whether the node is the root or not as its second\n\t * argument. The function should return a string. The default is\n\t * {@link #tokenText}\n\t * \n\t * @param the\n\t *            content function\n\t */\n\tmine.nodeText = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn nodeText;\n\t\tnodeText = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the content of the \"extra\"\n\t * information for the labels labels\n\t * <p>\n\t * The function gets an information object as its first argument and a\n\t * boolean indicating whether the node is the root or not as its second\n\t * argument. The function should return a string. The default is the POS\n\t * field of the information object\n\t * \n\t * @param the\n\t *            content function\n\t */\n\tmine.tokenExtraText = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn tokenExtraText;\n\t\ttokenExtraText = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the\n\t * background rectangles for the nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the background color function\n\t */\n\tmine.rectColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn rectColor;\n\t\trectColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the borders\n\t * of the background rectangles for the nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the border color function\n\t */\n\tmine.rectBorderColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn rectBorderColor;\n\t\trectBorderColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the text of\n\t * the nodes that are continuations of the clicked node.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the border color function\n\t */\n\tmine.continuationColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn continuationColor;\n\t\tcontinuationColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the styles of the nodes and branches. For now these\n\t * are constant throughout the tree. Takes an object of the form:\n\t * {\"node\":{\"fill\":cssColor, \"stroke\":cssColor,\n\t * \"stroke-width\":cssWidth}, \"branch\":{\"stroke\":cssColor,\n\t * \"stroke-width\":cssWidth}} All of the attributes are optional Defaults\n\t * are: {\"node\":{\"fill\":\"white\", \"stroke\":\"steelblue\",\n\t * \"stroke-width\":\"1.5px\"}, \"branch\":{\"stroke\":\"#777\",\n\t * \"stroke-width\":\"1.5px\"}};\n\t */\n\tmine.basicStyles = function(stylesObj) {\n\t\tif (!arguments.length)\n\t\t\treturn basicStyles;\n\n\t\tObject.keys(basicStyles).forEach(\n\t\t\tfunction(aspect) {\n\t\t\t\tif (aspect in stylesObj) {\n\t\t\t\t\tObject.keys(basicStyles[aspect]).forEach(\n\t\t\t\t\t\tfunction(attr) {\n\t\t\t\t\t\t\tif (attr in stylesObj[aspect]) {\n\t\t\t\t\t\t\t\tbasicStyles[aspect][attr] = stylesObj[aspect][attr];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\treturn mine;\n\t};\n\n\treturn mine;\n};\n\n// ////// tree for doubletree\n/** @private */\ndoubletree.Tree = function(vis, visWidth, visHt, data, toLeft,\n\t\tsortFun, dispatch, textScale, showTokenXtra, nodeTextFun,\n\t\ttokenExtraTextFun, rectColorFun, rectBorderFun, contColorFun,\n\t\tbaseStyles) {\n\tvar showTokenExtra = false || showTokenXtra;\n\tvar continuationIDs = {};\n\tvar clickedNode;\n\tvar nodeText = nodeTextFun;\n\tvar tokenExtraText = tokenExtraTextFun;\n\tvar rectColor = rectColorFun;\n\tvar rectBorderColor = rectBorderFun;\n\tvar continuationColor = contColorFun;\n\tvar basicStyles = baseStyles;\n\n\tvar margin = {\n\t\ttop : 20,\n\t\tright : 20,\n\t\tbottom : 20,\n\t\tleft : 20\n\t}, width = visWidth - margin.right - margin.left, height = visHt - margin.top - margin.bottom, i = 0, duration = 200, root;\n\tvar dx;\n\n\tif (!sortFun) {\n\t\tsortFun = doubletree.sortByStrFld(\"token\");\n\t}\n\n\tvar i = 0;\n\tvar tree = d3.tree()\n\t.size([height, width])\n\t.nodeSize([ 40, 40 ]);\n\t//.sort(sortFun);\n\n\tvar diagonal = d3.linkHorizontal()\n\t\t.x(function(d) { return positionX(d.y); })\n\t\t.y(function(d) { return positionY(d.x); });\n\n\tvis = vis.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\t// //////\n\tthis.readJSONTree = function(json) {\n\t\troot = d3.hierarchy(json);\n\t\troot.x0 = 0;\n\t\troot.y0 = 0;\n\n\t\troot.children.forEach(collapse);\n\t\tthis.update(root);\n\t};\n\n\t// CC had been inside readJSONTree\n\tfunction collapse(d) {\n\t\tif (d.children) {\n\t\t\td._children = d.children;\n\t\t\td._children.forEach(collapse);\n\t\t\td.children = null;\n\t\t}\n\t}\n\n\t// CC new\n\tfunction collapseSiblings(nd) {\n\t\tif (nd.parent) {\n\t\t\tnd.parent.children.forEach(function(d) {\n\t\t\t\tif (d != nd) {\n\t\t\t\t\tcollapse(d);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.update = function(source) {\n\t\t// seems unnecessary\n//\t\tif (!source) {\n//\t\t\tsource = root;\n//\t\t}\n\n\t\t// Compute the new tree layout.\n\t\tvar treeData = tree(root);\n\t\tvar nodes = treeData.descendants();\n\n\t\tvar baseBranchSegmentWidth = 25;\n\t\t// Normalize for fixed-depth.\n\t\tnodes.forEach(function(d) {\n\t\t\tvar textSize = d.textSize;\n\t\t\tif (textSize == undefined) {\n\t\t\t\ttextSize = 0;\n\t\t\t\tvar parent = d.parent;\n\t\t\t\twhile (parent != null) {\n\t\t\t\t\tvar measured = Ext.draw.TextMeasurer.measureText(parent.data.name, 'arial').width;\n\t\t\t\t\ttextSize += measured;\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\t\t\t\td.textSize = textSize; // cache the size so we don't recalculate each time\n\t\t\t}\n\t\t\td.y = (d.depth * baseBranchSegmentWidth) + textSize;\n\t\t});\n\t\t\n\t\t\n\t\t// Update the nodes\u2026\n\t\tvar node = vis.selectAll(\"g.node_\" + toLeft)\n\t\t\t.data(nodes, function(d) {\n\t\t\t\treturn d.id || (d.id = ++i);\n\t\t\t});\n\n\t\t// Enter any new nodes at the parent's previous position.\n\t\tvar nodeEnter = node.enter().append(\"g\").attr(\"class\", \"node node_\" + toLeft).attr(\"cursor\", \"pointer\")\n\t\t\t.attr(\"transform\", function(d) {\n\t\t\t\treturn \"translate(\" + positionX(source.y0) + \",\" + positionY(source.x0) + \")\";\n\t\t\t})\n\t\t\t.on(\"click\", click);\n\n\t\tnodeEnter.append(\"title\").text(function(d) {\n\t\t\tvar what = doubletree.infoToText(d.data.info);\n\t\t\treturn what;\n\t\t});\n\n\t\tnodeEnter.append(\"circle\")\n\t\t\t.attr(\"r\", 1e-6)\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\treturn d._children ? \"#fff\" : basicStyles.node.fill;\n\t\t\t})\n\t\t\t.style(\"stroke\", function(d) {\n\t\t\t\treturn basicStyles.node.stroke;\n\t\t\t});\n\n\t\tvar txtNode = nodeEnter.append(\"text\").attr(\"class\", function(d) {\n\t\t\tif (d.depth == 0) {\n\t\t\t\treturn \"rtNdText\";\n\t\t\t} else {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t}).attr(\"x\", function(d) {\n\t\t\tif (d.children || d._children) {\n\t\t\t\treturn 0;\n\t\t\t} else {\n\t\t\t\treturn toLeft ? 10 : -10;\n\t\t\t}\n\t\t}).attr(\"text-anchor\", function(d) {\n\t\t\tif (!d.parent) {\n\t\t\t\treturn \"middle\";\n\t\t\t}\n\t\t\tif (d.children || d._children) {\n\t\t\t\treturn toLeft ? \"end\" : \"start\";\n\t\t\t} else {\n\t\t\t\treturn toLeft ? \"start\" : \"end\";\n\t\t\t}\n\t\t}).style(\"font-size\", function(d) {\n\t\t\t/*\n\t\t\t * if (d.depth == 0 && toLeft) { return 0; //suppress left side\n\t\t\t * root -- do this because of differences in counts when\n\t\t\t * filtering }\n\t\t\t */\n\t\t\treturn textScale(d.data.info.count) + \"pt\";\n\t\t});\n\n\t\ttxtNode.append(\"tspan\").attr(\"dy\", \".35em\").attr(\"class\", \"tokenText\").text(function(d) {\n\t\t\treturn nodeText(d.data.info, d.depth < 1);\n\t\t}).style(\"fill-opacity\", 1e-6);\n\n\t\ttxtNode.append(\"tspan\").attr(\"dx\", \".35em\").attr(\"class\", \"tokenExtra\").text(function(d) {\n\t\t\treturn tokenExtraText(d.data.info, d.depth < 1);\n\t\t}).style(\"fill-opacity\", 1e-6);\n\n\t\t\n\t\tthis.drawRects();\n\n\t\tvar nodeUpdate = nodeEnter.merge(node);\n\t\t\n\t\t// Transition nodes to their new position.\n\t\tnodeUpdate.transition().duration(duration)\n\t\t\t.attr(\"transform\", function(d) {\n\t\t\t\treturn \"translate(\" + positionX(d.y) + \",\" + positionY(d.x) + \")\";\n\t\t\t});\n\n\t\tnodeUpdate.select(\"circle\")\n\t\t\t// .attr(\"r\", 4.5)\n\t\t\t.attr(\"r\", function(d) {\n\t\t\t\treturn (d.children || d._children) ? 1e-6 : 4.5;\n\t\t\t})\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\treturn d._children ? \"#fff\" : basicStyles.node.fill;\n\t\t\t}) // function(d) { return d._children ? \"lightsteelblue\" : \"#fff\";\n\t\t\t\t// })\n\t\t\t.style(\"stroke-width\", basicStyles.node[\"stroke-width\"]);\n\n\t\tnodeUpdate.selectAll(\"tspan\").style(\"fill-opacity\", 1);\n\n\t\t// Transition exiting nodes to the parent's new position.\n\t\tvar nodeExit = node.exit().transition().duration(duration).attr(\"transform\", function(d) {\n\t\t\treturn \"translate(\" + positionX(source.y) + \",\" + positionY(source.x) + \")\";\n\t\t}).remove();\n\n\t\tnodeExit.select(\"circle\").attr(\"r\", 1e-6);\n\n\t\t// nodeExit.select(\"text\")\n\t\tnodeExit.selectAll(\"tspan\").style(\"fill-opacity\", 1e-6);\n\n\t\t// Update the links\u2026\n\t\tvar link = vis.selectAll(\"path.link_\" + toLeft)\n\t\t\t.data(root.links(), function(d) {\n\t\t\t\tvar id = d.source.id+'-'+d.target.id;\n\t\t\t\treturn id;\n\t\t\t});\n\n\t\t// Enter any new links at the parent's previous position.\n\t\tvar linkEnter = link.enter().insert(\"path\", \"g\").attr(\"class\", \"link link_\" + toLeft)\n\t\t\t.attr(\"d\", function(d) {\n\t\t\t\tvar o = {x: source.x0, y: source.y0};\n\t\t\t\treturn diagonal({source: o, target: o});\n\t\t\t})\n\t\t\t.style(\"fill\", \"none\").style(\"stroke\", basicStyles.branch.stroke).style(\"stroke-width\", basicStyles.branch[\"stroke-width\"]);\n\n\t\tvar linkUpdate = linkEnter.merge(link);\n\t\t\n\t\t// Transition links to their new position.\n\t\tlinkUpdate.transition().duration(duration).attr(\"d\", diagonal);\n\n\t\t// Transition exiting nodes to the parent's new position.\n\t\tvar linkExit = link.exit().transition().duration(duration)\n\t\t\t.attr(\"d\", function(d) {\n\t\t\t\tvar o = {x: source.x0, y: source.y0};\n\t\t\t\treturn diagonal({source: o, target: o});\n\t\t\t})\n\t\t\t.remove();\n\n\t\t// Stash the old positions for transition.\n\t\tnodes.forEach(function(d) {\n\t\t\td.x0 = d.x;\n\t\t\td.y0 = d.y;\n\t\t});\n\n\t\tthis.updateContinuations();\t\t\n\t};\n\t\n\tthis.drawRects = function() {\n\t\tvar which = showTokenExtra ? \"inline\" : \"none\";\n\t\tvis.selectAll(\".tokenExtra\").attr(\"display\", which);\n\n\t\tvar node = vis.selectAll(\"g.node_\" + toLeft);\n\t\t\n\t\tnode.selectAll(\"rect\").remove(); // remove previous rects\n\n\t\tvar nodeRect = node\n\t\t\t\t.insert(\"rect\", \"text\")\n\t\t\t\t.attr(\"class\", \"nodeRect\")\n\t\t\t\t.attr(\"height\", function() {\n\t\t\t\t\tvar height = this.parentElement.getBBox().height;\n\t\t\t\t\tif (height < 6) {\n\t\t\t\t\t\t// end of branch, need to prevent negative height\n\t\t\t\t\t\theight = 6.1;\n\t\t\t\t\t}\n\t\t\t\t\treturn height - 6;\n\t\t\t\t})\n\t\t\t\t.attr(\"y\", function(d) {\n\t\t\t\t\tif (!d.parent) {\n\t\t\t\t\t\treturn -0.5 * this.parentElement.getBBox().height / 2 - 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn -0.5 * this.parentElement.getBBox().height / 2;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"width\", function() {\n\t\t\t\t\treturn this.parentElement.getBBox().width;\n\t\t\t\t})\n\t\t\t\t.attr(\"x\", function(d) {\n\t\t\t\t\tvar parentW = this.parentElement.getBBox().width;\n\t\t\t\t\tif (!d.parent) {\n\t\t\t\t\t\treturn -0.33333 * parentW;\n\t\t\t\t\t}\n\t\t\t\t\tif (!toLeft) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn -0.5 * parentW;\n\t\t\t\t})\n\t\t\t\t// .style(\"stroke-opacity\", 1e-6)\n\t\t\t\t.style(\"stroke-opacity\", 1).style(\"stroke-width\", 1)\n\t\t\t\t.style(\"stroke\", function(d) {\n\t\t\t\t\treturn rectBorderColor(d.data.info);\n\t\t\t\t}).style(\"fill\", function(d) {\n\t\t\t\t\treturn rectColor(d.data.info);\n\t\t\t\t}).style(\"fill-opacity\", function(d) {\n\t\t\t\t\treturn 1;\n//\t\t\t\t\tif (!d.parent && !toLeft) {\n//\t\t\t\t\t\treturn 1e-6;\n//\t\t\t\t\t} else {\n//\t\t\t\t\t\treturn 1;\n//\t\t\t\t\t}\n\t\t\t\t});\n\t};\n\n\tvar that = this;\n\t\n\t// Toggle children on click.\n\tfunction click(d, i) {\n\t\tif (d3.event.altKey) {\n\t\t\tthat.handleAltPress(d, i);\n\t\t\t// that.showTokenExtras(showTokenExtra);\n\t\t\treturn;\n\t\t}\n\t\tif (d3.event.shiftKey) {\n\t\t\tthat.handleShiftPress(d, i);\n\t\t\t// that.showTokenExtras(showTokenExtra);\n\t\t\treturn;\n\t\t}\n\n\t\tthat.handleClick(d, i);\n\t\t\n\t\tif (!d.parent) {\n\t\t\treturn;\n\t\t}\n\t\tif (that.continuationIDs != d.data.info.ids) {\n\t\t\tthat.setIds(d.data.info.ids);\n\t\t\tthat.clickedNode = d.id;\n\t\t\tdispatch.call('idsUpdated', that);\n\t\t}\n\n\t\tcollapseSiblings(d); // CC new\n\t\t/*\n\t\t * if (d.children) { d._children = d.children; d.children = null; }\n\t\t * else { d.children = d._children; d._children = null; }\n\t\t * that.update(d);\n\t\t */\n\t\ttoggleChildren(d, true);\n\t}\n\n\tfunction toggleChildren(d, update) { // we only update the clicked\n\t\t\t\t\t\t\t\t\t\t\t// node, not recursively\n\t\t// collapseSiblings(d); //CC we don't do this here, since after the\n\t\t// top level there's no point\n\n\t\tif (d.children) {\n\t\t\tif (d.children && d.children.length == 1) {\n\t\t\t\ttoggleChildren(d.children[0], true); // need true to make\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// sure we toggle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// all the way down\n\t\t\t}\n\t\t\td._children = d.children;\n\t\t\td.children = null;\n\n\t\t} else {\n\t\t\td.children = d._children;\n\t\t\td._children = null;\n\n\t\t\t// expand all if there is only one path\n\t\t\tif (d.children && d.children.length == 1) {\n\t\t\t\ttoggleChildren(d.children[0], false);\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tthat.update(d);\n\t\t}\n\t}\n\n\tthis.setIds = function(ids) {\n\t\tthat.continuationIDs = ids;\n\t};\n\tthis.updateContinuations = function() {\n\t\tvis.selectAll(\"g.node_\" + toLeft + \" text\")\n\t\t\t.classed(\"continuation\", function(d) {\n\t\t\t\t\tvar isContinuation = overlap(d.data.info.ids, that.continuationIDs || {});\n\t\t\t\t\treturn isContinuation;\n\t\t\t})\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\tif (d3.select(this).classed(\"continuation\")) {\n\t\t\t\t\treturn continuationColor(d.data.info);\n\t\t\t\t}\n\t\t\t\treturn \"#444\"; // default text color\n\t\t\t}); // this is duplicated from above, nodeUpdate\n\t};\n\n\tthis.search = function(searchRE) {\n\t\tvis.selectAll(\"g.node text\").classed(\"foundText\", function(d) {\n\t\t\tvar what = searchRE.test(nodeText(d.data.info));\n\t\t\treturn what;\n\t\t});\n\t};\n\n\tthis.clearSearch = function() {\n\t\tvis.selectAll(\"g.node text\").classed(\"foundText\", false);\n\t};\n\n\tthis.showTokenExtras = function(show) {\n\t\tif (arguments.length == 0) {\n\t\t\treturn showTokenExtra;\n\t\t}\n\t\tshowTokenExtra = show;\n\n\t\tthis.drawRects();\n\t\treturn this;\n\t};\n\n\tthis.setRectColor = function(rectColorFun) {\n\t\tif (arguments.length == 0) {\n\t\t\treturn rectColor;\n\t\t}\n\t\trectColor = rectColorFun;\n\t\tthis.drawRects();\n\t\treturn this;\n\t};\n\n\t// /////////////\n\tfunction positionX(x) {\n\t\treturn toLeft ? -x : x;\n\t}\n\tfunction positionY(y) {\n\t\treturn y;\n\t}\n\n\t// //default modifier handlers\n\tthis.handleAltPress = function() {\n\t};\n\tthis.handleShifttPress = function() {\n\t};\n\tthis.handleClick = function() {\n\t};\n\n\tthis.readJSONTree(data);\n\treturn this;\n};\n\n// /////////////////////////////// tree sorting functions\n/**\n * function to sort the nodes (case insenstive) by a field in the\n * information object\n * \n * @param fld\n *            the field to sort by\n */\ndoubletree.sortByStrFld = function(fld) {\n\tvar field = fld;\n\treturn function(a, b) {\n\t\tvar aUndefined = (undefined == a.data.info[field]);\n\t\tvar bUndefined = (undefined == b.data.info[field]);\n\t\tif (aUndefined && bUndefined) {\n\t\t\treturn 0;\n\t\t} else if (aUndefined) {\n\t\t\treturn -1;\n\t\t} else if (bUndefined) {\n\t\t\treturn 1;\n\t\t}\n\t\tvar aVal = a.data.info[field].join(\" \").toLowerCase();\n\t\tvar bVal = b.data.info[field].join(\" \").toLowerCase();\n\t\tif (aVal < bVal) {\n\t\t\treturn -1;\n\t\t} else if (aVal > bVal) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t};\n};\n/**\n * function to sort the nodes according to the count field in the\n * information object\n */\ndoubletree.sortByCount = function() {\n\treturn function(a, b) {\n\t\treturn b.data.info.count - a.data.info.count;\n\t};\n};\n\n/**\n * function to sort the nodes according to the continuations field in the\n * information object\n */\ndoubletree.sortByContinuations = function() {\n\treturn function(a, b) {\n\t\treturn b.data.info.continuations - a.data.info.continuations;\n\t};\n};\n\n// /////////////////////////////// some tree filtering functions\n/**\n * function to filter the nodes according to a minimum for the count field\n * \n * @param n\n *            the minimum count to include\n */\ndoubletree.filterByMinCount = function(n) {\n\treturn function(inf) {\n\t\treturn inf.count >= n;\n\t};\n};\n\n/**\n * function to filter the nodes according to a maximum for the count field\n * \n * @param n\n *            the maximum count to include\n */\ndoubletree.filterByMaxCount = function(n) {\n\treturn function(inf) {\n\t\treturn inf.count <= n;\n\t};\n};\n\n/**\n * function to filter the nodes according to the \"POS\" field (if it exists)\n * \n * @param n\n *            a string for a regular expression of the POS values to include\n */\ndoubletree.filterByPOS = function(pos) {\n\tvar re = new RegExp(pos);\n\treturn function(inf) {\n\t\treturn inf[\"POS\"] && inf[\"POS\"].filter(function(p) {\n\t\t\treturn p.search(re) > -1;\n\t\t}).length > 0; // end of ng has no POS\n\t};\n};\n\n// /////////////////////////////// formatting functions\n\n// doubletree.nodeText = function(info) {\n// return doubletree.tokenText(info); //default\n// }\n\n// extracts a field\n/**\n * return the value of a field in the provided information object\n * \n * @param info\n *            the information object\n * @param the\n *            field to get\n * @returns the value of the field in the information object\n */\ndoubletree.fieldText = function(info, fieldName) {\n\treturn info[fieldName];\n};\n// extracts the \"token\" field\n/**\n * convenience function to return the value of the \"token\" field (if it\n * exists). The same as doubletree.fieldText(info, \"token\")\n * \n * @param info\n *            the information object\n * @returns the value of the \"token\" field of the information object\n */\ndoubletree.tokenText = function(info) {\n\tvar tokenText = '';\n\tif (info.token !== undefined) {\n\t\ttokenText = info.token;//info.token[0]; // don't return all token values, just the first\n\t}\n\treturn tokenText;\n};\n\n/**\n * converts an information object to a string\n * \n * @param the\n *            information object\n * @returns a string with one key/value pair per line\n */\ndoubletree.infoToText = function(info) {\n\tvar what = \"\";\n\tfor ( var infp in info) {\n\t\tif (infp == \"ids\" || infp == \"origIDs\") {\n\t\t\twhat += infp + \"\\t:\\t\" + Object.keys(info[infp]).join(\",\")\n\t\t\t\t\t+ \"\\n\";\n\t\t} else {\n\t\t\twhat += (infp + \"\\t:\\t\" + info[infp] + \"\\n\");\n\t\t}\n\t}\n\treturn what;\n};\n// //////////////// internal utility functions\n\nfunction old_pruneTree(tree, ids) {\n\n\tif (!tree.children) {\n\t\treturn;\n\t}\n\n\tvar n = tree.children.length;\n\tfor ( var i = 0; i < n; i++) {\n\t\tvar c = tree.children[i];\n\n\t\tif (containedIn(c.info.ids, ids)) {\n\t\t\ttree.children[i] = null;\n\t\t} else {\n\t\t\told_pruneTree(c, ids);\n\t\t}\n\t}\n\ttree.children = tree.children.filter(function(c) {\n\t\treturn c != null;\n\t});\n\n\t// recalculate maxChildren\n\tvar cMax = d3.max(tree.children.map(function(c) {\n\t\treturn c.maxChildren;\n\t}));\n\ttree.maxChildren = Math.max(tree.children.length, cMax);\n}\n\nfunction new_pruneTree(tree, ids, copyIDs) {\n\n\tif (!tree.children) {\n\t\treturn;\n\t}\n\n\t// copy over original ids\n\tif (copyIDs) {\n\t\tif (!tree.info.origIDs) {\n\t\t\ttree.info.origIDs = {};\n\t\t\taddTo(tree.info.origIDs, tree.info.ids);\n\t\t\ttree.info.origCount = Object.keys(tree.info.origIDs).length;\n\t\t} else {\n\t\t\ttree.info.ids = {};\n\t\t\taddTo(tree.info.ids, tree.info.origIDs);\n\t\t\ttree.info.count = Object.keys(tree.info.ids).length;\n\t\t}\n\t}\n\n\t// adjust IDs\n\tvar idNums = Object.keys(ids);\n\tfor ( var i = 0, n = idNums.length; i < n; i++) {\n\t\tvar cid = idNums[i];\n\t\tdelete tree.info.ids[cid];\n\t}\n\ttree.info.count = Object.keys(tree.info.ids).length;\n\n\t// recurse and prune\n\tvar n = tree.children.length;\n\tfor ( var i = 0; i < n; i++) {\n\t\tvar c = tree.children[i];\n\n\t\tif (containedIn(c.info.ids, ids)) {\n\t\t\ttree.children[i] = null;\n\t\t} else {\n\t\t\tnew_pruneTree(c, ids, false);\n\t\t}\n\t}\n\ttree.children = tree.children.filter(function(c) {\n\t\treturn c != null;\n\t});\n\ttree.info.continuations = tree.children.length;\n\n\t// recalculate maxChildren\n\tvar cMax = d3.max(tree.children.map(function(c) {\n\t\treturn c.maxChildren;\n\t}));\n\ttree.maxChildren = Math.max(tree.children.length, cMax);\n}\n\nfunction restoreTree(tree) {\n\n\tif (tree.info.origCount) { // otherwise tree was suppressed, so its ids\n\t\t\t\t\t\t\t\t// never got switched around\n\t\t// restore originals\n\t\ttree.info.ids = {};\n\t\taddTo(tree.info.ids, tree.info.origIDs);\n\t\t// delete tree.info.origIDs;\n\t\ttree.info.count = tree.info.origCount;\n\t\t// delete tree.info.origCount;\n\n\t\tvar n = tree.children.length;\n\t\ttree.info.continuations = n;\n\t\tfor ( var i = 0; i < n; i++) {\n\t\t\tvar c = tree.children[i];\n\t\t\trestoreTree(c);\n\t\t}\n\t}\n\n}\n\n// do the keys in o1 and o2 overlap\nfunction overlap(o1, o2) {\n\tfor ( var k in o1) {\n\t\tif (k in o2) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n// are all the keys in o1 also in o2\nfunction containedIn(o1, o2) {\n\tif (!o1 || !o2) {\n\t\treturn false;\n\t}\n\tfor ( var k in o1) {\n\t\tif (!(k in o2)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n// add key/vals of o2 to o1 and return o1; (top level key-value only, o2\n// values maintained over o1)\n// same as in Trie.js\nfunction addTo(o1, o2) {\n\tfor ( var k in o2) {\n\t\to1[k] = o2[k];\n\t}\n}\n\nfunction noOp() {\n}\n\n// ////////////////\n\n})();","/* (This is the new BSD license.)\n* Copyright (c) 2012-2014, Chris Culy\n* All rights reserved.\n*\n* Redistribution and use in source and binary forms, with or without\n* modification, are permitted provided that the following conditions are met:\n*     * Redistributions of source code must retain the above copyright\n*       notice, this list of conditions and the following disclaimer.\n*     * Redistributions in binary form must reproduce the above copyright\n*       notice, this list of conditions and the following disclaimer in the\n*       documentation and/or other materials provided with the distribution.\n*     * Neither the name of the Chris Culy nor the \n*\t\tnames of its contributors may be used to endorse or promote \n*\t\tproducts from this software without specific prior written permission.\n*\n* THIS SOFTWARE IS PROVIDED BY Chris Culy\n* ``AS IS'' AND ANY OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, \n* THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE \n* ARE DISCLAIMED. IN NO EVENT SHALL Chris Culy\n* BE LIABLE FOR ANY, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR \n* CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE \n* GOODS OR SERVICES; OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER \n* CAUSED AND ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR \n* TORT INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF \n* THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\"use strict\";\nvar doubletree = doubletree || {};\n\n(function(){\n    \n    /**\n     * @class doubletree.Trie\n     * This is the class for the specialized trie that is the data for {@link doubletree.DoubleTree}.\n * The Trie will get pieces of data that contain fields. Some (possibly all) of those fields will be used for distinguishing among items.\n * For example, we might have an \"author\" field, but not use it when distinguishing among items for the Trie.\n * @param caseSensitive are the elements in the first distinguishing field compared in a case sensitive fashion\n * @param fldNames the names of the fields\n * @param fldDelim the field delimiter\n * @distinguishingFldsArray the distinguishing fields\n * @undistinguishedRoot true if the root should be calculated without using the distinguishing fields\n */\ndoubletree.Trie = function(caseSensitive, fldNames, fldDelim, distinguishingFldsArray, undistinguishedRoot) {\n    var endNG = \" \";\n    var rootName = \"_root_\";\n    var noCase = (! caseSensitive) && true;\n    if (! fldNames) {\n        fldNames = [\"item\"];\n    }\n    var fieldNames = fldNames;\n    if (! fieldDelim) {\n        fieldDelim = \"\\t\"; //default\n    }\n    var fieldDelim = fldDelim;\n    if (! distinguishingFieldsArray) {\n        distinguishingFieldsArray = [ fieldNames[0] ];\n    }\n    var distinguishingFieldsArray = distinguishingFldsArray;\n    var undistinguishedRt = undistinguishedRoot;\n    if (undefined == undistinguishedRt) {\n        undistinguishedRt = true; //TBD: check to make sure this doesn't break anything\n    }\n    \n    var trie = new TrieNode(rootName,-1,0);\n    \n    /** @private */\n    function TrieNode(item, id, count) {\n        this.id = id;\n        this.count = count;        \n        this.info = {\"count\":count, \"ids\":{}};\n        \n        if (item == null) {\n            this.item = rootName;        \n        } else {\n            this.item = item;\n            this.info.ids = {};\n            this.info.ids[id] = true;\n            var flds = item.split(fieldDelim);\n            for(var i in flds) {\n                this.info[ fieldNames[i] ] = [ flds[i] ];\n            }\n        }\n        this.nodes = {};\n        \n         /** @private */\n        this.addNgram = function(itemArray, id, count) {\n            if (! count) {\n                count = 1;\n            }\n            var thisItem, thisKey;\n            if (itemArray.length > 0) {\n                thisItem = itemArray.shift();\n                    \n                var theseFlds = thisItem.split(fieldDelim);\n\n                if (undistinguishedRt && this.item == rootName) {\n                    thisKey = \"\";\n                } else {\n                    thisKey = theseFlds.filter(function(f,i) {\n                            return distinguishingFieldsArray.indexOf( fieldNames[i] ) > -1;\n                        })\n                    .map(function(f) {\n                            if (noCase) {\n                                return f.toLocaleLowerCase();\n                            }\n                            return f;\n                        })\n                    .join(fieldDelim);\n                }\n                \n            } else {\n                thisItem = endNG;\n                thisKey = thisItem;\n            }\n            \n            var subTrie;\n            if (thisKey in this.nodes && this.nodes[thisKey] instanceof TrieNode) { //we need the instanceof TrieNode so we can override Object properties -- hope that none are already arrays\n                subTrie = this.nodes[thisKey];\n                subTrie.info.count += count;\n                subTrie.info.ids[id] = true;\n                \n                for(var f in theseFlds) {\n                    var thisFld = theseFlds[f];\n                    if (subTrie.info[ fieldNames[f] ].indexOf( thisFld ) == -1 ){\n                        subTrie.info[ fieldNames[f] ].push(thisFld);\n                    }                \n                }\n                \n                \n            } else {\n                subTrie = new TrieNode(thisItem, id, count);            \n                this.nodes[thisKey] = subTrie;\n            }\n            if (thisItem != endNG) {\n                subTrie.addNgram(itemArray,id, count);\n            }\n        };\n            \n         /** @private */\n        this.getUniqRoot = function() {\n            if (this.item == rootName) {\n                var children = Object.keys(this.nodes);\n                if (children.length == 1) {\n                    return this.nodes[ children[0] ];\n                }\n            }\n        \n            return this;\n        };\n        \n        /** @private */\n        this.toTree = function(filterFuns) {\n            \n            function toTreeHelper(filterFuns, descendentLevel, trieData) {\n                \n                var what = {\"children\":[]};\n                what.name = trieData.item;\n                what.info = {};\n                for(var k in trieData.info) {\n                    if (typeof(trieData.info[k]) === 'Object') {\n                        what.info[k] = {};\n                        for(var k2 in trieData.info[k]) {\n                            what.info[k][k2] = this.info[k][k2];\n                        }\n                    } else {\n                        what.info[k] = trieData.info[k];\n                    }\n                }\n                what.pruned = {};\n                \n                \n                for(var item in trieData.nodes) {\n                    var itemNode = trieData.nodes[item];\n                    var thisFilter = filterFuns[descendentLevel];            \n                    if ( ! thisFilter || (thisFilter && thisFilter(itemNode.info)) ) {\n                        what.children.push( toTreeHelper(filterFuns, descendentLevel +1, itemNode) );\n                        if (itemNode.pruned != {}) {\n                            addTo(what.pruned, itemNode.pruned);\n                        }\n                    } else {\n                        addTo(what.pruned, itemNode.info.ids);\n                    }\n                }\n        \n                what.info.continuations = what.children.length;\n                //this is to record info we need for sizing the tree, since D3 automatically scales to fit, which is not what we want\n                //we also need to keep track of the minimum count (the root always has the max, of course), for scaling\n                if (what.children.length == 0) {\n                   what.children = null; //the trees expect null if there are no children, not the empty array. Odd, but true.\n                   what.maxChildren = 0;\n                   \n                   if (what.name) {\n                    what.maxLen = what.name.length;\n                   } else {\n                    what.maxLen = 0;\n                   }\n                   \n                   what.minCount = what.info.count;\n                   //what.maxChildren = 0; //new\n                   \n                } else {\n                    var cMax = d3.max( what.children.map(function(c) {return c.maxChildren;}) );\n                    what.maxChildren = Math.max(what.children.length, cMax);\n                    \n                    var maxLen = d3.max( what.children.map(function(c) {return c.maxLen;}));\n                    what.maxLen = Math.max(maxLen, what.name.length);\n                    \n                    what.minCount = d3.min( what.children.map(function(c) {return c.minCount;})); //the children are always <= the parent\n                }\n                return what;\n            }\n            \n            if (! filterFuns ) {\n                filterFuns = [];\n            }\n            \n            var trieData = JSON.parse(JSON.stringify(this)); //CuC make a copy of the data, to keep the real trie immutable\n        \n            return toTreeHelper(filterFuns, 0, trieData);\n        };\n    }\n    \n    \n    \n    \n    /**\n     * Add an ngram to the Trie\n     * @param itemArray an array of delimited items (the ngrams)\n     * @param id an id for this ngram \n     * @param count a count for this ngram. Default is 1\n     */\n    this.addNgram = function(itemArray, id, count) {trie.addNgram(itemArray, id, count);};\n    \n    /**\n     * get the unique root of this Trie. Used only by {@link DoubleTree}\n     * @returns a new Trie with a unique item as the root\n     */\n    this.getUniqRoot = function() {\n        var what = new doubletree.Trie((!noCase), fieldNames, fieldDelim, distinguishingFieldsArray);\n        what.trie( trie.getUniqRoot() );\n        return what;\n    };\n    \n    /**\n     * convert the Trie to a tree structure for display. Used only by {@link DoubleTree}\n     * @param filterFuns the filtering functions to apply to the tree see {@link DoubleTree.filters}\n     * @param descendentLevel the current level we are filtering\n     * @returns the tree\n     */\n    this.toTree = function(filterFuns, descendentLevel) {return trie.toTree(filterFuns, descendentLevel);};\n    \n    /**\n     * serialize the Trie as a JSON string\n     * @returns the JSON string representation of the Trie\n     */\n    this.serialize = function() {\n        return JSON.stringify(this);\n    };\n    \n    /**\n     * make this Trie have the values of a previously serialized Trie see {@link #serialize}\n     */\n    this.deserialize = function(serialized) {\n        var obj = JSON.parse(serialized);\n        \n        endNG = obj.endNG();\n        rootName = obj.rootName();\n        noCase = obj.caseSensitive();\n        fieldNames = obj.fieldNames();\n        fieldDelim = obj.fieldDelim();\n        distinguishingFieldsArray = obj.distinguishingFieldsArray();\n        trie = obj.trie();\n        \n    };\n    \n    //getters -- the properties are readonly, set in constructor\n    \n    //private, only used in deserialization\n    /** @private */\n    this.endNG = function() {\n        return endNG;\n    };\n    //private, only used in deserialization\n    /** @private */\n    this.rootName = function() {\n        return rootName;\n    };\n    \n    //private, also a setter, only used in deserialization and getUniqRoot;\n    /** @private */\n    this.trie = function(value) {\n      if (arguments.length > 0) {\n        trie = value;\n      }\n      return trie;\n    };\n    \n    /**\n     * @returns whether this Trie uses case sensitive comparison\n     */\n    this.caseSensitive = function() {\n        return ! noCase;\n    };\n    \n    /**\n     * get the field names in the data\n     * @returns the field names in the data\n     */\n    this.fieldNames = function() {\n        return fieldNames;\n    };\n    \n    /**\n     * get the field delimiter for the data\n     * @returns the field delimiter for the data\n     */\n    this.fieldDelim = function() {\n        return fieldDelim;\n    };\n    \n    /**\n     * get the distinguishing fields for the data\n     * @returns the distinguishing fields for the data\n     */\n    this.distinguishingFieldsArray = function() {\n        return distinguishingFieldsArray;\n    };\n    \n    //add key/vals of o2 to o1 and return o1; (top level key-value only, o2 values maintained over o1)\n    /** @private */\n    function addTo(o1, o2) {\n        for(var k in o2) {\n            o1[k] = o2[k];\n        }\n    }\n\n    \n};  \n\n})();\n","/**\r\n * @param {object} config\r\n * @param {Voyant.panel.TermsRadio} config.parent\r\n * @param {Ext.dom.Element} config.container\r\n * @param {boolean} config.showSlider\r\n */\r\nfunction TermsRadio(config) {\r\n\tthis.parent = config.parent;\r\n\tthis.container = config.container;\r\n\tthis.isSliderVisible = config.showSlider == undefined ? true : config.showSlider;\r\n\t\r\n\tthis.chart = null;\r\n\t\r\n\tthis.absMaxFreq = 0;\r\n\tthis.absMinFreq = 0;\r\n\tthis.allData = [];\r\n\t\r\n\tthis.continueTransition = true;\r\n\tthis.counterSeries = [];\r\n\tthis.displayData = [];\r\n\tthis.dragged = false;\r\n//\tthis.intervalIdArray = [];\r\n\tthis.isTransitioning = false;\r\n\tthis.lastSlippery = null;\r\n\tthis.lastSticky = null;\r\n\tthis.maxFont = 30;\r\n\tthis.minFreq = 0;\r\n\tthis.numDataPoints = 0;\r\n\tthis.numVisPoints = 5;\r\n\tthis.overlayQueue = [];\r\n\tthis.records = 0;\r\n\tthis.recordsLength = 0;\r\n\tthis.reselectTop = false;\r\n\tthis.shiftCount = 0;\r\n\tthis.sliderDragSum = 0;\r\n\tthis.titlesArray = [];\r\n\tthis.transitionCall = 'draw'; //possible calls 'draw', 'redraw', 'left', and 'right'\r\n\tthis.valFraction = 1;\r\n\tthis.win = 0;\r\n\t\r\n\t//window padding dimensions, b - bottom, l - left, r - right, t - top\r\n\tthis.bPadding = 25;\r\n\tthis.lPadding = 40;\r\n\tthis.rPadding = 20;\r\n\tthis.tPadding = 10;\r\n\t\r\n\tthis.sliderHeightRatio = 0.1; // slider/container height ratio\r\n\tthis.sliderHeight = 0; // set in init and resize\r\n\tthis.sliderBPadding = 10;\r\n\t\r\n\t//tracks largest dimensions, used in resizing\r\n\tthis.largestW = 0;\r\n\tthis.largestH = 0;\r\n\t\r\n\tthis.xAxisEl = undefined;\r\n\tthis.xAxis = d3.axisBottom();\r\n\tthis.xScale = d3.scaleLinear();\r\n\tthis.xSliderScale = d3.scaleLinear();\r\n\t\r\n\tthis.yAxisEl = undefined;\r\n\tthis.yAxis = d3.axisLeft();\r\n\tthis.yScale = d3.scaleLinear();\r\n\tthis.ySliderScale = d3.scaleLinear();\r\n\t\r\n\tthis.fontScale = d3.scaleLinear();\r\n\tthis.opacityScale = d3.scaleLinear();\r\n\t\r\n\tthis.container.on('resize', this.doResize, this);\r\n}\r\n\r\nTermsRadio.prototype = {\r\n\tconstructor: TermsRadio\r\n\t\r\n\t,loadRecords: function(records) {\r\n\t\tthis.initData(records);\r\n\t\tthis.prepareData();\r\n\t\t//for shiftcount > 0 exclusively\r\n\t\tvar len = this.shiftCount;\r\n\t\twhile(len-- > 0){\r\n\t\t//for(var j = 0; j < this.shiftCount; j++){\r\n\t\t\tthis.displayData.shift();\r\n\t\t}\r\n\t\tif (this.chart != null) {\r\n\t\t\tthis.redraw();\r\n\t\t} else {\r\n\t\t\tthis.initializeChart();\r\n\t\t}\r\n\t}\r\n\r\n\t,highlightQuery: function(query, sticky) {\r\n\t\tvar docId = null;\r\n\t\tif (this.parent.getApiParam(\"mode\") === 'document') {\r\n\t\t\tdocId = this.parent.getCorpus().getDocument(0).getId();\r\n\t\t}\r\n\t\tvar info = {wordString : query, docId : docId};\r\n\t\tvar paramsBundle = this.buildParamsBundle(info);\r\n\t\tif (sticky) {\r\n\t\t\tthis.manageOverlaySticky(paramsBundle);\r\n\t\t} else {\r\n\t\t\tthis.manageOverlaySlippery(paramsBundle);\r\n\t\t}\r\n\t}\r\n\t\r\n\t,highlightRecord: function(record, sticky) {\r\n\t\tvar info = {wordString : record.get('term'), docId : record.get('docId')};\r\n\t\tvar paramsBundle = this.buildParamsBundle(info);\r\n\t\tif (sticky) {\r\n\t\t\tthis.manageOverlaySticky(paramsBundle);\r\n\t\t} else {\r\n\t\t\tthis.manageOverlaySlippery(paramsBundle);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//\r\n\t//DATA FUNCTIONS\r\n\t//\t\r\n\r\n\t,initData: function (records) { \t\r\n\t\t//console.log(\"fn: initData\")\r\n\t\t//console.profile('profilethis')\r\n\t\tthis.records = records;\r\n\t\t\r\n\t\tthis.recordsLength = this.records.length;\r\n\t\r\n\t\tthis.numVisPoints = parseInt(this.parent.getApiParam('visibleBins'));\r\n\t\tthis.shiftCount = parseInt(this.parent.getApiParam('position'));\r\n\t\t\r\n\t\tif(this.parent.getApiParam('mode') === 'document') {\r\n\t\t\tthis.numDataPoints = this.records[0].get('distributions').length;\r\n\t\t\tvar parentBins = parseInt(this.parent.getApiParam('bins'));\r\n\t\t\tif(this.numDataPoints !== parentBins){\r\n\t\t\t\tthis.numDataPoints = parentBins;\r\n\t\t\t\tthis.loadStore();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.numDataPoints = this.records[0].get('distributions').length;\r\n\t\t}\r\n\t\t\r\n    \tthis.counterSeries = [];\r\n    \tvar transferArray = [];\r\n\t\t\t\r\n    \t//find max frequency value\r\n    \tthis.absMaxFreq = 0;\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.records[p].get('distributions')[k] > this.absMaxFreq) {\r\n\t        \t\tthis.absMaxFreq = this.records[p].get('distributions')[k];\r\n\t        \t}\r\n\t        }\r\n\t\t}\r\n\t\t\t    \r\n\t\t//find the absolute minimum frequency value\r\n\t\t//first start by setting the minimum frequency to the maximum frequency\r\n\t\tthis.absMinFreq = this.absMaxFreq;\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.records[p].get('distributions')[k] <= this.absMinFreq && this.records[p].get('distributions')[k] !== 0) { \r\n\t        \t\tthis.absMinFreq = this.records[p].get('distributions')[k];\r\n\t        \t}\r\n\t        }\r\n\t\t}\r\n\t\t\r\n\t\t//Calculate the lower value of the y axis, must be > 0 \r\n\t\tif( this.absMinFreq < 0) {\r\n\t\t\tthis.absMinFreq = 0;\r\n\t\t}\r\n\t\t\r\n\t\tthis.minFreq = this.absMinFreq * 1.01;\r\n\t\t\r\n\t    //transfer all of the relevant data from 'records' to an array 'allData'\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tvar rec = this.records[p];\r\n\t        \tvar dists = rec.get('distributions')[k];\r\n//\t        \tif (dists > this.minFreq && dists <= this.absMaxFreq) {\r\n\t        \tif (dists > 0) {\r\n\t        \t\ttransferArray.push({\r\n\t        \t\t\tfreq: dists,\r\n\t\t                wordString: rec.get('term'),\r\n\t\t                counter: k,\r\n\t\t                posInSeries: 0, \r\n\t\t                numInSeries: 0,\r\n\t\t                docId: rec.get('docId')\r\n\t\t            });\r\n\t        \t}\r\n//\t        \t} else { //do nothing\r\n//\t        \t}\r\n\t        }\r\n\t        this.counterSeries.push(transferArray);\r\n\t        transferArray = [];\r\n\t    }\r\n\t}\r\n\r\n\t,prepareData: function() {\r\n\t\t//console.log(\"fn: prepareData\")\r\n\t    var frequencySeries = [],\r\n\t    \tcopy1 = [],\r\n\t    \tcopy2 = [],\r\n\t    \tcopy3 = [],\r\n\t    \tcopy4 = [],\r\n\t    \tcheck = 0;\r\n\t\t\r\n\t\tthis.allData = [];\r\n\t\tthis.displayData = [];\r\n\t\t\r\n\t\t//set the number of points to be displayed at once\r\n\t\tif(this.numDataPoints < this.numVisPoints) {\r\n\t\t\tthis.numVisPoints = this.numDataPoints;\r\n\t\t}\r\n\t\t\r\n\t\t//adjust shiftCount if it for some reason is out of the normal range\r\n\t\tif(this.shiftCount + this.numVisPoints > this.numDataPoints){ \r\n\t\t\tthis.shiftCount = this.numDataPoints - this.numVisPoints; \r\n\t\t}\r\n\t\t\r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t\t\tvar check1 = 0; //add a single first data point\r\n\t    \tfor(var p = 0; p < this.counterSeries[k].length; p++ ) {\r\n\t    \t\t\t\r\n    \t\t\tvar check2 = 0; //check will make sure a data point is not added to a series more than once\r\n    \t\t\t\r\n\t    \t\t//add very first point, this is done like this so the for loop can use the .length operator\r\n\t    \t\tif(check1 === 0){\r\n\t\t\t    \tcopy1.push(this.counterSeries[k][p]);\r\n\t\t\t    \tcopy2.push({freq: this.counterSeries[k][p].freq,\r\n\t\t    \t\t\tfrequencyArray: copy1,\r\n\t\t    \t\t\tnumInSeries: 0\r\n\t\t    \t\t});\r\n\t\t    \t\tfrequencySeries.push(copy2);\r\n\t\t    \t\t\r\n\t\t    \t\tcopy1 = [];\r\n\t\t    \t\tcopy2 = [];\r\n\t\t    \t\tcheck1 = 1;\r\n\t\t    \t\tcheck2 = 1;\r\n\t    \t\t}\r\n\t    \t\t\r\n\t    \t\t//checks if a given frequency has an existing 'series' that the data point can be grouped into\r\n\t    \t\tfor( var l = 0; l < frequencySeries[k].length && check2 === 0; l++) {\r\n\t\t\t\t\tif(this.counterSeries[k][p].freq === frequencySeries[k][l].freq) {\r\n\t\t\t\t\t\tvar inSeries = 0; \r\n\t\t\t\t\t\tinSeries = frequencySeries[k][l].numInSeries;\r\n\t\t\t\t\t\tthis.counterSeries[k][p].posInSeries = ++inSeries;\r\n\t\t\t\t\t\tfrequencySeries[k][l].numInSeries = inSeries;\r\n\t\t\t\t\t\tfrequencySeries[k][l].frequencyArray.push(this.counterSeries[k][p]);\r\n\t\t\t\t\t\tcheck2 = 1;\r\n\t\t\t\t\t}\t\r\n\t    \t\t}\r\n\t    \t\t\r\n\t    \t\t//if there is no existing series then create a new one\r\n\t    \t\tif(check2 === 0) {\r\n\t\t\t\t\tcopy4.push(this.counterSeries[k][p]);\r\n\t\t    \t\tfrequencySeries[k].push({freq: this.counterSeries[k][p].freq,\r\n\t\t    \t\t\tfrequencyArray: copy4,\r\n\t\t    \t\t\tnumInSeries: 0\r\n\t\t    \t\t});\r\n\t\t    \t\tcopy4 = [];\r\n\t\t    \t\tcheck2 = 1;\r\n\t\t\t\t}\r\n\t    \t}\t\r\n\t    \t//if counterSeries[k] is empty add or there is no eligible value add an empty array to frequencySeries such that frequencySeries[k] is not undefined\r\n\t    \tif(this.counterSeries[k].length < 1 || check1 === 0) {  \r\n\t    \t\tfrequencySeries.push([]);\r\n    \t\t}\r\n\t    }\r\n\t    \r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t    \tfor( var p = 0; p < frequencySeries[k].length; p++) {\r\n\t    \t\t++frequencySeries[k][p].numInSeries;\r\n\t    \t\tfor( var l = 0; l < frequencySeries[k][p].frequencyArray.length; l++) {\r\n\t    \t\t\tfrequencySeries[k][p].frequencyArray[l].numInSeries = frequencySeries[k][p].numInSeries;\r\n\t    \t\t}\r\n\t    \t}\r\n\t    }\r\n\t    \r\n\t    var allDataSetup = [];\r\n\t    \r\n\t    //add the selected points into the array that will be used to display the data\r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t        this.allData.push({allDataInternal: frequencySeries[k],\r\n\t            outerCounter: k});\r\n\t    }\r\n\t    \r\n    \tvar displaySetup = [],\r\n    \t\ttransferArray = [];\r\n\t\t\r\n\t    //transfer the first x points (= numVisPoints, the number of points to be visualized)\r\n\t    //into an array that will be used to display the data\r\n\t    for( var k = 0; k < this.numVisPoints + this.shiftCount; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.allData[k].allDataInternal[p]) {\r\n\t\t            transferArray.push({freq: this.allData[k].allDataInternal[p].freq,\r\n\t\t                inSeries: this.allData[k].allDataInternal[p].numInSeries,\r\n\t\t                frequencyArray: this.allData[k].allDataInternal[p].frequencyArray,\r\n\t\t                dotObject: [{counter: k, freq: this.allData[k].allDataInternal[p].freq}]\r\n\t\t            });\r\n\t        \t}\r\n\t        }\r\n\t        displaySetup.push(transferArray);\r\n\t        transferArray = [];\r\n\t    }\r\n\t    \r\n\t    //add the selected points into the array that will be used to display the data\r\n\t    for( var k = 0; k < this.numVisPoints + this.shiftCount; k++ ) {\r\n\t        this.displayData.push({displayInternal: displaySetup[k],\r\n\t            outerCounter: k});\r\n\t    }\r\n\t    displaySetup = [];\r\n\t}\r\n\t\r\n\t//TRANSITION FUNCTIONS\r\n\t\r\n\t//disable forward back if moving, disable pause if stopped, disable back if at beginning\r\n\t,manageMvtButtons: function () {\r\n\t\t//console.log('fn: manageMvtButtons')\r\n\t\tthis.parent.queryById(\"play\").setPlaying(this.isTransitioning);\r\n\t\t/*\r\n\t\tif(this.isTransitioning === true) {\r\n\t\t\tthis.toggleRight.setDisabled(true);\r\n\t\t\tthis.toggleLeft.setDisabled(true);\r\n\t\t\tthis.stop.setDisabled(false);\r\n\t\t}\r\n\t\tif(this.isTransitioning === false) {\r\n\t\t\tthis.toggleRight.setDisabled(false);\r\n\t\t\tthis.toggleLeft.setDisabled(false);\r\n\t\t\tthis.stop.setDisabled(true);\r\n\t\t\t\r\n\t\t\tif(this.shiftCount === 0){\r\n\t\t\t\tthis.toggleLeft.setDisabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.toggleLeft.setDisabled(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.shiftCount + this.numVisPoints === this.numDataPoints){\r\n\t\t\t\tthis.toggleRight.setDisabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.toggleRight.setDisabled(false);\r\n\t\t\t}\r\n\t\t}\t\r\n\t\t*/\r\n\t}\r\n\r\n\t//provides the next value to the left     \r\n    ,nextR: function () {\r\n    \t//console.log('fn: nextR')\r\n    \t\r\n    \tvar displaySetup = [];\r\n    \t//this.displayData.shift();\r\n\t\t\r\n    \tfor( var p = 0; p < this.recordsLength; p++ ) {\r\n    \t\tif(this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p]) {\r\n\t            displaySetup.push({freq: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].freq,\r\n\t            \tinSeries: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].numInSeries,\r\n\t            \tfrequencyArray: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].frequencyArray,\r\n\t                dotObject: [{counter: this.numVisPoints + this.shiftCount, freq: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].freq}]\r\n\t            });\r\n    \t\t}\r\n        }\r\n        \r\n\t    this.displayData.push({displayInternal: displaySetup, outerCounter: this.numVisPoints + this.shiftCount});\r\n\t    displaySetup = [];\r\n    }\r\n    \r\n    //verifies that data CAN be moved to the right\r\n    ,toggleRightCheck: function () {\r\n    \t//console.log(\"fn: toggleRightCheck\")\r\n    \tif(this.numVisPoints + this.shiftCount < this.numDataPoints) {\r\n    \t\t//manage transition movements and controls\r\n    \t\tthis.isTransitioning = true;\r\n    \t\tthis.continueTransition = true;\r\n    \t\tthis.manageMvtButtons();\r\n    \t\t\r\n    \t\t//draw\r\n\t        this.nextR();\r\n\t\t\tthis.shiftCount = ++this.shiftCount;\r\n\t\t\tthis.manageXScale();\r\n\t\t\tthis.parent.setApiParams({position: this.shiftCount});\r\n\t\t\tthis.transitionCall = 'right';\r\n\t\t\tthis.animateVis();\r\n\t\t\tthis.displayData.shift();\r\n\t\t} else {\r\n    \t\t//manage transition movements and controls\r\n\t\t\tthis.isTransitioning = false;\r\n\t\t\tthis.continueTransition = false;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t}\r\n    }\r\n    \r\n    //provide the next value\r\n    ,nextL: function () {\r\n    \t//console.log('fn: nextLeft')\r\n    \tvar displaySetup = [];\r\n        \r\n        for( var p = 0; p < this.recordsLength; p++ ) {\r\n        \tif(this.allData[this.shiftCount].allDataInternal[p]) {\r\n        \t\tdisplaySetup.push({freq: this.allData[this.shiftCount].allDataInternal[p].freq,\r\n\t            \tinSeries: this.allData[this.shiftCount].allDataInternal[p].numInSeries,\r\n\t            \tfrequencyArray: this.allData[this.shiftCount].allDataInternal[p].frequencyArray,\r\n\t                dotObject: [{counter: this.shiftCount, freq: this.allData[this.shiftCount].allDataInternal[p].freq}]\r\n\t            });\r\n        \t}\r\n        }\r\n\t    this.displayData.unshift({displayInternal: displaySetup, outerCounter: this.shiftCount});\r\n        displaySetup = [];\r\n    }\r\n    \r\n    /*\r\n    ,toggleLeftCheck: function () {    \t\r\n    \t//console.log(\"fn: toggleLeftCheck\")\r\n    \tif(this.shiftCount > 0) {\r\n    \t\t//manage transition movement and controls\r\n    \t\tthis.isTransitioning = true;\r\n\t\t\tthis.continueTransition = true;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t\t\r\n\t\t\t//draw\r\n\t\t\tthis.shiftCount = --this.shiftCount;\r\n\t\t\tthis.manageXScale();\r\n\t\t\tthis.parent.setApiParams({position: this.shiftCount});\r\n\t        this.nextL();\r\n\t\t\tthis.transitionCall = 'left';\r\n\t        this.animateVis();\r\n\t        this.displayData.pop();\r\n\t\t} else {\r\n\t\t\t//manage transition movements and controls\r\n\t\t\tthis.isTransitioning = false;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t}\r\n    }\r\n    */\r\n    \r\n    ,startScroll: function() {\r\n    \t//console.log(\"fn: startScroll\")\r\n    \tvar me = this;\r\n    \t\r\n    \tif(me.numDataPoints > me.numVisPoints && me.shiftCount === 0){\r\n\t\t\t//manage transition movements and controls\r\n\t\t\tme.isTransitioning = true;\r\n\t\t\tthis.manageMvtButtons();\r\n    \t\t\r\n    \t\t//repeat transition\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tme.toggleRightCheck();\r\n\t\t\t},3000);\r\n\t\t}\r\n    }\r\n    \r\n    //\r\n    //DISPLAY FUNCTIONS\r\n    //\r\n\t\r\n\t\r\n\t// init and draw everything\r\n\t,initializeChart: function() {\r\n\t\tthis.initChart();\r\n\t\t\r\n\t\tthis.drawXAxis();\r\n\t\tthis.drawYAxis();\r\n\t\tthis.drawChart();\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.drawSlider();\r\n\t\t\tthis.drawVerticalSlider();\r\n\t\t\tthis.redrawSliderOverlay();\r\n\t\t}\r\n\t\tthis.transitionCall = 'draw';\r\n\t}\r\n\t\r\n    ,redraw: function() {\r\n\r\n//    \tconsole.log(\"fn: redraw\")\r\n    \tthis.transitionCall = 'redraw';\r\n    \tthis.updateFullPath();\r\n\t\tthis.redrawXAxis();\r\n\t\tthis.redrawYAxis();\r\n\t\tthis.redrawChart();\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.redrawSlider();\r\n\t\t\tthis.redrawVerticalSlider();\r\n\t\t\tthis.redrawSliderOverlay();\r\n\t\t}\r\n\t\tthis.redrawChartOverlay();\r\n    }\r\n    \r\n\t,initChart: function () {\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n    \r\n\t\t//create main SVG Element\r\n\t\tvar chartSVG = Ext.DomHelper.append(this.container.down('div[class$=innerCt]'), '<svg class=\"chart\" width=\"'+w+'\" height=\"'+h+'\"></svg>');\r\n\t    this.chart = d3.select(chartSVG);\r\n\t    \r\n\t    this.setSliderHeight();\r\n\t    \r\n\t\tthis.largestW = w;\r\n\t\tthis.largestH = h - this.getSliderHeight();\r\n\t\t\r\n\t\tvar y = this.tPadding + this.getSliderHeight();\r\n\t    \t    \r\n\t    this.chart.append('clipPath')\r\n\t        .attr('id', 'clip1')\r\n\t      .append('rect')\r\n\t      \t.attr('class', 'clipping-rectangle')\r\n\t        .attr(\"x\", 0)\r\n\t        .attr(\"y\", y)\r\n\t        .attr(\"width\", w)\r\n\t        .attr(\"height\", this.largestH);\r\n\t    \r\n\t    this.chart.append('g')\r\n\t    \t.attr('class','overlay')\r\n\t    \t.attr(\"clip-path\", \"url(#clip1)\");\r\n\t    \r\n\t\t//depending on the size of display set the length that labels can be\r\n\t\tthis.setTitleLength();\r\n\t}\r\n    \r\n\t,doResize: function() {\r\n\t\tif(this.chart) {\r\n\t\t\tvar h = this.container.getHeight(),\r\n\t\t\t\tw = this.container.getWidth();\r\n\r\n\t\t\tthis.setSliderHeight();\r\n\t\t\t\r\n\t\t\tthis.largestH = h - this.getSliderHeight();\r\n\t\t\tthis.largestW = w;\r\n\t\t\t\r\n\t\t\tthis.chart.attr('height', h)\r\n\t\t\t\t.attr('width', w);\r\n\t\t\t\t\r\n\t\t\tthis.setTitleLength();\r\n\t\t\t\r\n\t\t\tthis.chart.select('rect[class=clipping-rectangle]')\r\n\t\t        .attr(\"x\", 0)\r\n\t\t        .attr(\"y\", this.tPadding + this.getSliderHeight())\r\n\t\t        .attr(\"width\", w)\r\n\t\t        .attr(\"height\", this.largestH);\r\n\t\t\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\t}\r\n\t\r\n    ,drawXAxis: function() {\r\n    \tvar me = this;\r\n    \t//svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n    \t\r\n\t\t//initialize x scales\r\n\t\tthis.manageAllXScales();\r\n\t\t\t\r\n    \t//define X axis\r\n\t\tthis.xAxis = d3.axisBottom(me.xScale)\r\n\t\t    .ticks(Math.round(me.numVisPoints))\r\n\t\t    .tickFormat(function(d){\r\n\t\t    \tvar val;\r\n\t\t    \tif(me.parent.getApiParam('mode') === 'document') { \r\n\t\t\t\t\tval = 'Segment ' + (parseInt(d) + 1);\r\n\t\t\t\t}\r\n\t\t\t\tif(me.parent.getApiParam('mode') === 'corpus') {\r\n\t\t\t\t\tval = d + 1 + '. ' + me.titlesArray[d];\r\n\t\t\t\t}\r\n\t\t\t\treturn val;\r\n\t\t    });\r\n\t\t\r\n\t\t//draw the x-axis\r\n\t\tthis.xAxisEl = this.chart.append('g')\r\n    \t\t.attr('class', 'axisX')\r\n    \t\t.attr('transform', 'translate(0,' + (h - this.bPadding) + ')')\r\n    \t\t.call(this.xAxis);\r\n    \t\r\n//    \tthis.xAxisEl.selectAll('text')\r\n//\t\t\t.on('mouseover', function () {\r\n//\t\t\t\td3.select(this)\r\n//\t\t\t\t\t.attr('fill', 'red')\r\n//\t\t\t\t\t.style(\"font-size\", '18px');\r\n//\t\t\t})\r\n//\t\t\t.on('mouseout', function () {\r\n//\t\t\t\td3.select(this)\r\n//\t\t\t\t\t.attr('fill', 'black')\r\n//\t\t\t\t\t.style(\"font-size\", '11px');\r\n//\t\t\t});\r\n\t\tthis.styleXAxis();\r\n    }\r\n    \r\n    ,styleXAxis: function() {\r\n    \tthis.xAxisEl.selectAll('text')\r\n\t        .style('font-family', 'sans-serif')\r\n\t        .style('font-size', '11px');\r\n\r\n\t    this.xAxisEl.selectAll('line')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n\t        \r\n\t    this.xAxisEl.selectAll('path')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n    }\r\n    \r\n    ,redrawXAxis: function() {\r\n    \tthis.chart.selectAll('g[class=axisX]')\r\n\t\t\t.remove();\r\n\t\t\r\n\t\tthis.drawXAxis();\r\n    }\r\n    \r\n    ,drawYAxis: function() {\r\n    \tvar me = this;\r\n    \t\r\n    \t//svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\t\t\r\n\t\t//initialize Y scales\r\n\t\tthis.manageAllYScales();\r\n    \t\r\n    \tvar yTicksScale = d3.scaleLinear()\r\n\t\t\t.domain([200,700])\r\n\t\t\t.range([5,15]);\r\n\t\t\t\r\n\t\tvar numberFormat = d3.format(\".2r\");\r\n\t\tfunction logFormat(d) {\r\n\t\t\tvar x = Math.log(d) / Math.log(10) + 1e-6;\r\n\t\t\treturn Math.abs(x - Math.floor(x)) < 0.7 ? numberFormat(d) : \"\";\r\n\t\t} \r\n\t\t\r\n\t\tthis.yAxis = d3.axisLeft(me.yScale)\r\n\t    \t.ticks(yTicksScale(h))\r\n\t    \t.tickFormat(logFormat)\r\n\t\t\t.tickSize(-w + this.rPadding + this.lPadding);\r\n\t\t\r\n\t\t//draw the y-axis\r\n\t\tthis.yAxisEl = this.chart.append('g')\r\n\t    \t.attr('class', 'axisY')\r\n\t    \t.attr('transform', 'translate(' + this.lPadding + ',0)')\r\n\t    \t.call(this.yAxis);\r\n\t\t\r\n\t    this.yAxisEl.selectAll('text')\r\n\t        .style('font-family', 'sans-serif')\r\n\t        .style('font-size', '11px');\r\n\t    \r\n\t    //controls horizontal grid line-opacity\r\n\t    this.yAxisEl.selectAll('line')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges')\r\n\t        .style('stroke-opacity', 0.05);\r\n\t        \r\n\t    this.yAxisEl.selectAll('path')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n    }\r\n    \r\n    ,redrawYAxis: function() {\r\n    \tthis.chart.selectAll('g[class=axisY]')\r\n\t\t\t.remove();\r\n\t\t\r\n\t\tthis.drawYAxis();\r\n    }\r\n    \r\n    ,drawChart: function() {\r\n    \tvar me = this;\r\n    \t\r\n    \t//create graph text\r\n\t    //attach the nested data to svg:g elements\r\n\t\tvar counterSeriesDiv = this.chart.selectAll('g[class=section]')\r\n\t        .data(me.displayData, function(d) { return d.outerCounter; })\r\n\t      .enter().append('g')\r\n\t        .attr('class', 'section')\r\n\t        .attr(\"clip-path\", \"url(#clip1)\");\r\n\t\t\r\n\t\tvar frequencySeriesDiv = counterSeriesDiv.selectAll('g')\r\n\t\t\t.data(function(d) { return d.displayInternal; })\r\n\t      .enter().append('g')\r\n\t        .attr('class', 'frequencies')\r\n\t        .on('mouseover', function() {\r\n\t\t\t\td3.select(this).style('fill', 'red');\r\n\t\t\t})\r\n\t\t\t.on('mouseout', function() {\r\n\t            d3.select(this).style('fill', 'black');\r\n\t\t\t});\r\n\t             \r\n        //attach the frequency data to data points \r\n\t\tvar dataPoint = frequencySeriesDiv.selectAll('text')\r\n    \t\t.data(function(d) { return d.frequencyArray; })\r\n\t\t  .enter().append('text')\r\n\t        .attr('class', function(d) {\r\n\t        \treturn me.removeFilteredCharacters(d.wordString);\r\n\t        })\r\n\t    \t.attr('x', function (d) {\r\n\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t,x = d.counter + me.callOffset() + startPoint + valueRange; \r\n\t\t\t\treturn me.xScale(x);\r\n\t\t\t})\r\n\t    \t.attr('y', function (d) { \r\n\t\t\t\tvar y = d.freq;\r\n\t\t\t\treturn me.yScale(y);\r\n\t    \t})\r\n\t    \t.attr('text-anchor', 'middle')\r\n\t    \t.attr('transform', function (d) {\r\n\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t,x = d.counter + me.callOffset() + startPoint + valueRange\r\n\t\t\t\t\t,y = d.freq;\r\n\t    \t\treturn 'translate(0, 0) rotate(-20 ' + me.xScale(x) + ' '+ me.yScale(y) + ')';\r\n\t    \t})\r\n\t    \t.style('font-size', function(d) { return me.fontScale(d.freq) + 'px'; })\r\n\t    \t.style('fill-opacity', function(d) { return me.opacityScale(d.freq); })\r\n\t        .text(function(d) { return d.wordString; })\r\n\t        .on('mouseover', function(d) { \r\n\t \t        d3.select(this).style('cursor', 'pointer').style('font-size', function(d) { return (me.fontScale(d.freq) * me.maxFont / me.fontScale(d.freq)) + 'px'; });\r\n\t \t        var paramsBundle = me.buildParamsBundle(d);\r\n\t \t        me.manageOverlaySlippery(paramsBundle);\r\n\t        })\r\n\t        .on('mouseout', function(d) { \r\n\t        \td3.select(this).style('cursor', 'auto').style('font-size', function(d) { return me.fontScale(d.freq) + 'px'; });\r\n\t        \tvar paramsBundle = me.buildParamsBundle(d);\r\n\t        \tme.manageOverlaySlippery(paramsBundle);\r\n\t        })\r\n\t        .on('click', function(d) {\r\n\t        \tvar paramsBundle = me.buildParamsBundle(d);\r\n\t        \tme.manageOverlaySticky(paramsBundle);\r\n\t\t\t})\r\n\t  \t  .append('title')\r\n\t    \t.text(function(d) { return d.wordString; });\r\n    }\r\n    \r\n    ,redrawChart: function() {\r\n    \tthis.chart.selectAll('g[class=section]')\r\n\t\t\t.remove();\r\n\t\t\t\r\n\t\tthis.drawChart();\r\n    }\r\n    \r\n    ,drawVerticalSlider: function() {\r\n//    \tvar h = this.container.getHeight(),\r\n//\t\t\tw = this.container.getWidth();\r\n//    \t\r\n//    \tvar totalTopOffset = (this.tPadding * 2) + this.sliderHeight\r\n//        \t,lengthVer = h - (totalTopOffset + this.bPadding);\r\n//        \r\n//\t    //create vertical minimap rectangle and slider\r\n//\t    var sliderPosScale = d3.scaleLinear()\r\n//\t\t\t.domain([this.absMaxFreq, this.minFreq])\r\n//\t\t\t.range([totalTopOffset, lengthVer]);\r\n//\t    \r\n//\t    var rectVer = this.chart.append('rect')\r\n//\t  \t    .attr('class', 'minimap')\r\n//\t  \t    .attr('x', w - (this.rPadding * 0.66))\r\n//\t  \t    .attr('y', totalTopOffset)\r\n//\t  \t    .attr('rx', 3.33)\r\n//\t  \t    .attr('width', 6.66)\r\n//\t  \t    .attr('height', lengthVer)\r\n//\t  \t    .style('fill','aliceblue')\r\n//\t  \t    .style('stroke','black')\r\n//\t  \t    .style('stroke-width','1')\r\n//\t  \t    .style('fill-opacity','0.75');\r\n//\t    \t\r\n//\t    var sliderVer = this.chart.append('rect')\r\n//\t\t\t.attr('class', 'minimap')\r\n//\t  \t    .attr('x', w - (this.rPadding * 0.66))\r\n//\t  \t    .attr('y', totalTopOffset)\r\n//\t  \t    .attr('rx', 3.33)\r\n//\t  \t    .attr('width', 6.66)\r\n//\t  \t    .attr('height', lengthVer * ((this.absMaxFreq * this.valFraction) - this.minFreq) / this.absMaxFreq)\r\n//\t  \t    .style('fill','CornflowerBlue')\r\n//\t  \t    .style('stroke','black')\r\n//\t  \t    .style('stroke-width','1');\r\n    }\r\n    \r\n    ,redrawVerticalSlider: function() {\r\n    \tthis.chart.selectAll('rect[class=minimap]')\r\n\t\t\t.remove();\r\n\t\t\t\r\n\t\tthis.drawVerticalSlider();\r\n    }\r\n    \r\n    ,drawSlider: function() {\r\n    \tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\t    \r\n\t\t//Create navigation bar\r\n\t\tvar lengthHor = w - (this.rPadding + this.lPadding)\r\n\t\t\t,offsetVis = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / 2) * ( 1 / (this.numDataPoints - 1)))\r\n\t\t\t,offsetVisStart = this.lPadding\r\n\t\t\t,offsetVisEnd = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / (this.numDataPoints - 1)));\r\n\t\t\r\n\t\tvar lineX = this.chart.append('line')\r\n\t\t\t.attr('class', 'slider axis')\r\n\t\t\t.attr('x1', this.lPadding)\r\n\t\t\t.attr('x2', this.container.getWidth() - this.rPadding)\r\n\t\t\t.attr('y1', this.tPadding + this.sliderHeight)\r\n\t\t\t.attr('y2', this.tPadding + this.sliderHeight)\r\n\t\t\t.style('shape-rendering', 'crispEdges')\r\n\t\t\t.style('stroke','black')\r\n\t  \t    .style('stroke-width','1');\r\n\t\t\t\t\t\r\n\t\tvar lineY = this.chart.append('line')\r\n\t\t\t.attr('class', 'slider axis')\r\n\t\t\t.attr('x1', this.lPadding)\r\n\t\t\t.attr('x2', this.lPadding)\r\n\t\t\t.attr('y1', this.tPadding + this.sliderHeight)\r\n\t\t\t.attr('y2', this.tPadding)\r\n\t\t\t.style('shape-rendering', 'crispEdges')\r\n\t\t\t.style('stroke','black')\r\n\t  \t    .style('stroke-width','1');\r\n\t\t\r\n\t    var sliderHorStart = this.chart.append('line')\r\n\t  \t    .attr('class', 'slider')\r\n\t  \t    .attr('id', 'before')\r\n\t  \t    .attr('x1', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t  \t    .attr('x2', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t  \t    .attr('y1', this.tPadding + this.sliderHeight)\r\n\t  \t    .attr('y2', this.tPadding)\r\n\t  \t    .style('stroke', 'black')\r\n\t  \t    .style('stroke-width', '1');\r\n\t    \r\n\t    var sliderHorEnd = this.chart.append('line')\r\n\t  \t    .attr('class', 'slider')\r\n\t  \t    .attr('id', 'after')\r\n\t  \t    .attr('x1', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    .attr('x2', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    .attr('y1', this.tPadding + this.sliderHeight)\r\n\t  \t    .attr('y2', this.tPadding)\r\n\t  \t    .style('stroke', 'black')\r\n\t  \t    .style('stroke-width', '1');\r\n\t  \t    \t  \t    \r\n\t   var greyBoxBefore = this.chart.append('rect')\r\n  \t    \t.attr('class', 'slider')\r\n  \t    \t.attr('id', 'boxBefore')\r\n  \t    \t.attr('x', this.lPadding)\r\n  \t    \t.attr('y', this.tPadding)\r\n  \t    \t.attr('height', this.sliderHeight)\r\n  \t    \t.attr('width', lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1))\r\n  \t    \t.style('fill', 'silver')\r\n  \t    \t.style('fill-opacity', 0.25)\r\n\t    \t.style('cursor', 'move');\r\n\t    \t\t    \r\n\t    var greyBoxAfter = this.chart.append('rect')\r\n\t    \t.attr('class', 'slider')\r\n\t    \t.attr('id', 'boxAfter')\r\n\t    \t.attr('x', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t    \t.attr('y', this.tPadding)\r\n\t    \t.attr('height', this.sliderHeight)\r\n\t    \t.attr('width', lengthHor * (this.numDataPoints - this.numVisPoints - this.shiftCount + this.callOffset()) / (this.numDataPoints - 1))\r\n\t    \t.style('fill', 'silver')\r\n\t    \t.style('fill-opacity', 0.25)\r\n\t    \t.style('cursor', 'move');\r\n\t    \r\n\t    var me = this;\r\n    \tvar drag = d3.drag()\r\n        .on('drag', function(d) {\r\n        \tif(!me.isTransitioning) {\r\n        \t\tthis.drag = true;\r\n        \t\t\r\n\t        \tvar w = me.parent.getWidth()\r\n\t        \t\t,displaceX = parseInt(d3.event.dx)\r\n\t        \t\t,checkBefore\r\n\t        \t\t,checkAfter\r\n\t        \t\t,pos = 0;\r\n\t        \t\t\r\n\t        \t//add up the slider movements as they occur\t\r\n        \t\tme.sliderDragSum += d3.event.dx;\r\n\t        \t\r\n\t        \tme.chart.selectAll('#before')\r\n\t        \t\t.attr('x1', function () { \r\n\t        \t\t\tcheckBefore = parseInt(this.getAttribute('x1'));\r\n\t        \t\t\tpos = parseInt(this.getAttribute('x1')) + displaceX;\r\n\t        \t\t\treturn parseInt(this.getAttribute('x1'));\r\n\t        \t\t});\r\n\t        \t\r\n\t        \tme.chart.selectAll('#after')\r\n\t        \t\t.attr('x1', function () { \r\n\t        \t\t\tcheckAfter = parseInt(this.getAttribute('x1'));\r\n\t        \t\t\treturn parseInt(this.getAttribute('x1'));\r\n\t        \t\t});\r\n\t        \t\r\n\t        \tif(checkBefore + displaceX < me.lPadding || checkAfter + displaceX > w - me.rPadding) {\r\n\t        \t\tdisplaceX = 0;\r\n\t        \t}\r\n\t        \t\r\n\t        \tme.chart.select('#boxBefore')\r\n\t        \t\t.attr('width', function () { return parseInt(this.getAttribute('width')) + displaceX; });\r\n\t        \t\r\n\t        \tme.chart.select('#boxAfter')\r\n\t        \t\t.attr('x', function () { return parseInt(this.getAttribute('x')) + displaceX; })\r\n        \t\t\t.attr('width', function () { return Math.max(0, parseInt(this.getAttribute('width')) - displaceX); });\r\n\t        \t\t\r\n\t        \tme.chart.selectAll('#before')\r\n\t        \t\t.attr('x1', function () { return parseInt(this.getAttribute('x1')) + displaceX; })\r\n\t        \t\t.attr('x2', function () { return parseInt(this.getAttribute('x2')) + displaceX; });\r\n\t        \t\r\n\t        \tme.chart.selectAll('#after')\r\n        \t\t\t.attr('x1', function () { return parseInt(this.getAttribute('x1')) + displaceX; })\r\n        \t\t\t.attr('x2', function () { return parseInt(this.getAttribute('x2')) + displaceX; });\r\n        \t}\r\n        })\r\n        .on('end', function(d) {\r\n        \tif(this.drag){\r\n        \t\tthis.drag = false;\r\n        \t\t\r\n        \t\tvar inverseSliderScale = d3.scaleLinear()\r\n\t\t\t    \t.domain([0, me.container.getWidth() - (me.lPadding + me.rPadding)])\r\n\t\t\t    \t.range([0, me.numDataPoints]);\r\n\t\t\t    \t\r\n\t\t\t\t//calculate the position that everything should transition to\r\n\t        \tvar moveByThis = inverseSliderScale(me.sliderDragSum),\r\n\t        \t\tmoveShiftCount,\r\n\t        \t\toldShiftCount = me.shiftCount;\r\n\t        \t\t\r\n\t    \t\tif(moveByThis > 0) moveShiftCount = Math.floor(moveByThis);\r\n\t    \t\tif(moveByThis < 0) moveShiftCount = Math.ceil(moveByThis);\r\n\t    \t\t\r\n\t    \t\t//update shiftCount re-animate \r\n\t    \t\tme.shiftCount += moveShiftCount;\r\n\t    \t\tif(me.shiftCount < 0) me.shiftCount = 0;\r\n\t    \t\tif(me.shiftCount > me.numDataPoints - 1) me.shiftCount = me.numDataPoints - 1;\r\n\t    \t\t\r\n\t    \t\tif(me.shiftCount !== oldShiftCount) {\r\n\t    \t\t\tme.sliderDragSum = 0;\r\n\t    \t\t\t\r\n\t        \t\tme.parent.setApiParams({position: me.shiftCount});\r\n\t\t\t\t\tme.prepareData();\r\n\t\t\t\t\t\r\n\t\t\t\t\tme.redraw();\r\n\t        \t}\r\n        \t}\r\n        });\r\n\t    \r\n\t    greyBoxBefore.call(drag);\r\n\t    greyBoxAfter.call(drag);\r\n    }\r\n    \r\n    ,removeSlider: function(removeTermLines) {\r\n    \tthis.chart.selectAll('rect[class=slider]')\r\n    \t\t.remove();\r\n\t\r\n    \tthis.chart.selectAll('line[class~=slider]')\r\n\t    \t.remove();\r\n    \t\r\n    \tif (removeTermLines) {\r\n    \t\tthis.chart.selectAll('g[class=slider]')\r\n\t    \t\t.remove();\r\n    \t}\r\n    }\r\n    \r\n    ,redrawSlider: function() {\r\n    \tthis.removeSlider();\r\n    \tthis.drawSlider();\r\n    }\r\n\t\r\n\t,animateVis: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\t//prepare the data for the visualization\r\n\t\t//shiftCount = 0, means the displayData begins with the same value as nestedData\r\n\t\tvar mode = this.parent.getApiParam('mode');\r\n\t\t\r\n\t    //svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\r\n\t\tvar duration = this.getDuration();\r\n\t\t\r\n\t\t//if transitionCall === 'draw': draw the function for the first time\t\t\r\n\t\t//if not: shift displayData to a different subset of allData\r\n\t\t//then display the newly shifted data\t\r\n\t\tif(this.transitionCall === 'left' || this.transitionCall ==='right'){\r\n\t\t\tthis.xAxisEl.transition()\r\n\t            .duration(duration)\r\n\t            .ease(d3.easeLinear)\r\n\t            .call(this.xAxis);\r\n\t            \r\n\t        this.styleXAxis();\r\n\t        \r\n\t        this.drawChart();\r\n\t    \r\n        \t//if call is shift move the dataPoints\t\r\n        \tthis.chart.selectAll('.frequencies').transition()\r\n        \t\t.duration(duration)\r\n\t            .ease(d3.easeLinear)\r\n\t            .selectAll('text')\r\n\t            .attr('x', function (d) {\r\n\t            \tvar startPoint = (0.5 / d.numInSeries) - 0.5,\r\n\t\t\t\t\t\tvalueRange = (d.posInSeries / d.numInSeries * 0.8),\r\n\t\t\t\t\t\tx = d.counter + startPoint + valueRange; \r\n\t\t\t\t\treturn me.xScale(x);\r\n\t\t\t\t})\r\n\t\t\t\t.attr('transform', function (d) {\r\n\t\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t\t,x = d.counter + startPoint + valueRange\r\n\t\t\t\t\t\t,y = d.freq;\r\n\t\t    \t\treturn 'translate(0, 0) rotate(-20 ' + me.xScale(x) + ' '+ me.yScale(y) + ')';\r\n\t\t\t\t});\r\n\t    \t   \r\n        \t//Create navigation bar\r\n\t\t\tvar lengthHor = w - (this.rPadding + this.lPadding)\r\n\t\t\t\t,offsetVis = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / 2) * ( 1 / (this.numDataPoints - 1)))\r\n\t\t\t\t,offsetVisStart = this.lPadding\r\n\t\t\t\t,offsetVisEnd = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / (this.numDataPoints - 1)));\r\n\t\t\t\t\r\n        \tthis.chart.select('#before').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t \t.attr('x1', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t\t\t \t.attr('x2', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t\t  \t    .attr('y1', this.tPadding + this.getSliderHeight())\r\n\t\t  \t    .attr('y2', this.tPadding)\r\n\t\t  \t    .on('end', function () {\r\n\t\t  \t    \tif (me.parent.isMasked()) {\r\n\t\t  \t    \t\tme.parent.unmask();\r\n\t\t  \t    \t}\r\n\t\t  \t    \tif(me.continueTransition) { \r\n\t\t  \t    \t\tsetTimeout(function () {\r\n\t\t  \t    \t\t\tme.callTransition();\r\n\t\t  \t    \t\t},50); \r\n\t\t  \t    \t} else { \r\n\t\t  \t    \t\t//manage transition movements and controls\r\n\t\t  \t    \t\tme.isTransitioning = false;\r\n\t\t  \t\t\t\tme.manageMvtButtons();\r\n\t\t  \t    \t}\r\n\t\t  \t    });\r\n        \t\r\n\t  \t   this.chart.select('#after').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t \t.attr('x1', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t\t\t \t.attr('x2', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t\t  \t    .attr('y1', this.tPadding + this.getSliderHeight())\r\n\t\t  \t    .attr('y2', this.tPadding);\r\n\t\t    \r\n\t  \t   this.chart.select('#boxBefore').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t  \t    \t.attr('x', this.lPadding)\r\n\t  \t    \t.attr('y', this.tPadding)\r\n\t  \t    \t.attr('height', this.getSliderHeight())\r\n\t  \t    \t.attr('width', lengthHor * (this.shiftCount) / (this.numDataPoints - 1));\r\n\t    \r\n\t  \t    this.chart.select('#boxAfter').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t  \t    \t.attr('x', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    \t.attr('y', this.tPadding)\r\n\t  \t    \t.attr('height', this.getSliderHeight())\r\n\t  \t    \t.attr('width', lengthHor * (this.numDataPoints - this.numVisPoints - this.shiftCount) / (this.numDataPoints - 1));\r\n        }\r\n        \r\n        //animates the chart overlay\r\n\t\tthis.redrawChartOverlay();\r\n\t}\r\n\t\r\n\t,callTransition: function () {\r\n\t\tif(this.transitionCall === 'left') this.toggleLeftCheck();\r\n        if(this.transitionCall === 'right') this.toggleRightCheck();\r\n\t}\r\n\t\t\r\n\t//build the params bundle to pass to manageOverlaySticky\r\n\t,buildParamsBundle: function (info) { \r\n\t\t//console.log('fn: builParamsBundle')\r\n\t\tvar type = info.wordString,\r\n\t\t\tparams = {},\r\n\t\t\tparamsBundle = {},\r\n\t\t\tdocId;\r\n\r\n\t\tif ( this.parent.getApiParam('mode') === 'document') { // set position\r\n\t\t\tdocId = info.docId;\r\n\t\t\tvar totalTokens = this.parent.getCorpus().getDocument(docId).get('totalTokens') - 1;\r\n\t\t\tparams.tokenIdStart = parseInt(this.category * totalTokens / this.numDataPoints);\r\n\t\t\tparams.docIdType = docId + ':' + type;\r\n\t\t} else {\r\n\t\t}\r\n\t\t\t\t\r\n\t\tparamsBundle = { params: params, type: type };\r\n\t\t\r\n\t\treturn paramsBundle;\r\n\t}\r\n\t\r\n\t,manageOverlaySlippery: function (paramsBundle) {\r\n\r\n\t\t//console.log('fn: manageOverlaySlippery')\r\n\t\tvar string = paramsBundle.type\r\n\t\t\t,selector = this.removeFilteredCharacters(paramsBundle.type) \r\n\t\t\t,checkOn = 'on'\r\n\t\t\t,index;\r\n\t\t\r\n//\t\tthis.continueTransition = true;\r\n//\r\n//\t\tthis.transitionCall = 'draw';\r\n\t\t\r\n\t\t//check if the word that was selected was already sticky\r\n\t\t//if so checkOn = off and nothing happens\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(--len >= 0){\r\n\t\t\tif(selector === this.overlayQueue[len].selector){ \r\n\t\t    \tcheckOn = 'off';\r\n\t\t    \tindex = len;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//make sure the selected word wasn't just a sticky word that is being deselected\r\n\t\t//thus happens to be scrolled over\r\n\t\tif(selector === this.lastSticky){\r\n\t\t\tcheckOn = 'off';\r\n\t\t\tthis.lastSticky = null;\r\n\t\t}\r\n\t\t\r\n\t\tif(checkOn === 'on') {\r\n\t\t\t//select a slippery word\r\n\t\t\tif(selector !== this.lastSlippery) {\r\n\t\t\t\tvar pathHolder = this.prepareFullPath(string);\r\n\t\t\t\tvar lineObject = {\r\n\t\t\t\t\tword: string, \r\n\t\t\t\t\tselector: selector, \r\n\t\t\t\t\tparams: paramsBundle, \r\n\t\t\t\t\tfullPath: pathHolder.path,\r\n\t\t\t\t\tpathMin: pathHolder.min,\r\n\t\t\t\t\tpathMax: pathHolder.max,\r\n\t\t\t\t\tcolour: 'red'\r\n\t\t\t\t};\t\r\n\t\t\t\tif(this.lastSlippery !== null) {\r\n\t\t\t\t\t//exceptional case where lastSlippery was not properly removed\r\n\t\t\t\t\tthis.chartOverlayOff(this.lastSlippery);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOff(this.lastSlippery);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = null;\r\n\t\t\t\t\t\r\n\t\t\t\t\t//select new slippery word\r\n\t\t\t\t\t//change its colour\r\n\t\t\t\t\tthis.chartOverlayOn(lineObject);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = selector;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//normal case select slippery word\r\n\t\t\t\t\t//change its colour\r\n\t\t\t\t\tthis.chartOverlayOn(lineObject);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = selector;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t//normal case deselect a slippery word\r\n\t\t\t\tthis.chartOverlayOff(selector);\r\n\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\tthis.sliderOverlayOff(this.lastSlippery);\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastSlippery = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//else do nothing \r\n\t\t\t//this means, don't select a word that is already sticky\r\n\t\t}\r\n\t}\r\n\r\n\t,manageOverlaySticky: function (paramsBundle) {\r\n//\t\tconsole.log('fn: manageOverlaySticky')\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tvar term = paramsBundle.type;\r\n\t\t\r\n\t\tthis.transitionCall = 'draw';\r\n\t\t\r\n\t\tif (!this.isTermSelected(term)) {\r\n\t\t\tthis.doTermSelect(term, true);\r\n\t\t} else {\r\n\t\t\tthis.doTermDeselect(term, true);\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetTermIndex: function(term) {\r\n\t\tvar index = -1;\r\n\t\tvar selector = selector = this.removeFilteredCharacters(term);\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(--len >= 0){\r\n\t\t\tif(selector === this.overlayQueue[len].selector){ \r\n\t\t\t\tindex = len;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn index;\r\n\t},\r\n\t\r\n\tisTermSelected: function(term) {\r\n\t\treturn this.getTermIndex(term) !== -1;\r\n\t},\r\n\t\r\n\tdoTermSelect: function(term, legendAdd) {\r\n\t\tvar selector = selector = this.removeFilteredCharacters(term);\r\n\t\t//finish updating API array of selected words\r\n\t\tvar apiArray = this.parent.getApiParam('selectedWords');\r\n\t\tapiArray.push(term);\r\n\t\tthis.parent.setApiParams({selectedWords: apiArray});\r\n\t\t\r\n\t\t//draw the sticky path\r\n\t\tvar color = this.parent.getApplication().getColorForTerm(term, true);\r\n\t\t\r\n\t\tif (legendAdd === true) {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tlegend.getStore().add({name: term, mark: color});\r\n\t\t} else {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tvar record = legend.getStore().findRecord('name', term);\r\n\t\t\tif (record !== null) {\r\n\t\t\t\trecord.set('mark', color);\r\n\t\t\t\tlegend.refresh();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar pathHolder = this.prepareFullPath(term);\r\n\t\tvar lineObject = {\r\n\t\t\tword: term, \r\n\t\t\tselector: selector,\r\n\t\t\tparams: {params: {}, type: term},\r\n\t\t\tfullPath: pathHolder.path,\r\n\t\t\tpathMin: pathHolder.min,\r\n\t\t\tpathMax: pathHolder.max,\r\n\t\t\tcolour: color\r\n\t\t};\r\n\t\t\r\n\t\t//if this was selected a slippery before click event remove line from navigation bar\r\n\t\tif(selector === this.lastSlippery){\r\n\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\tthis.sliderOverlayOff(selector);\r\n\t\t\t}\r\n\t\t\tthis.lastSlippery = null;\r\n\t\t}\r\n\t\t\r\n\t\t//make sure there is no path already present\r\n\t\tthis.chart.select('g[class=frequency-line-' + selector.replace(/'/g, \"\\\\'\") + ']').remove();\r\n\r\n\t\tthis.overlayQueue.push(lineObject);\r\n\t\tthis.chartOverlayOn(lineObject);\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoTermDeselect: function(term, legendRemove) {\r\n\t\tvar selector = this.removeFilteredCharacters(term);\r\n\t\tvar index = this.getTermIndex(term);\r\n\t\t\r\n\t\tif (legendRemove === true) {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tvar index = legend.getStore().findExact('name', term);\r\n\t\t\tlegend.getStore().removeAt(index);\r\n\t\t}\r\n\t\t\r\n\t\tvar updateApi = this.parent.getApiParam('selectedWords');\r\n\t\tfor(var i = 0, len = updateApi.length; i < len; i++) {\r\n\t\t\tif(updateApi[i] === selector) {\r\n\t\t\t\tupdateApi.splice(i, 1);\r\n\t\t\t\tthis.parent.setApiParams({selectedWords: updateApi});\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.chartOverlayOff(selector);\r\n    \tthis.overlayQueue.splice(index, 1);\r\n    \tif (this.isSliderVisible) {\r\n    \t\tthis.sliderOverlayOff(selector);\r\n    \t}\r\n\t\tthis.lastSticky = selector;\r\n\t}\r\n\t\r\n\t,prepareFullPath: function (string) {\r\n\t\tvar linePosArray = [],\r\n\t\t\tpathMin = this.absMaxFreq,\r\n\t\t\tpathMax = this.absMinFreq;\r\n\t\t\r\n\t\tfor(var k = 0, len = this.allData.length; k < len; k++){\r\n\t\t\tfoundB = 0;\r\n\t\t\tfor(var i = 0, lenA = this.allData[k].allDataInternal.length; i < lenA; i++) {\r\n\t\t\t\tfor(var j = 0, lenB = this.allData[k].allDataInternal[i].frequencyArray.length; j < lenB; j++){\r\n\t\t\t\t\tif(this.allData[k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.allData[k].allDataInternal[i].frequencyArray[j].freq;\r\n\t\t\t\t\t\tlinePosArray.push({x: k, y: yVal1});\r\n\t\t\t\t\t\tif(yVal1 < pathMin) pathMin = yVal1;\r\n\t\t\t\t\t\tif(yVal1 > pathMax) pathMax = yVal1;\r\n\t\t\t\t\t\tfoundB = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundB === 0){\r\n\t\t\t\tvar yVal2 = this.minFreq;\r\n\t\t\t\tlinePosArray.push({x: k, y: yVal2});\r\n\t\t\t\tif(yVal2 < pathMin) pathMin = yVal2;\r\n\t\t\t\tif(yVal2 > pathMax) pathMax = yVal2;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {path: linePosArray, min: pathMin, max: pathMax};\r\n\t}\r\n\t\r\n\t,updateFullPath: function () {\r\n//\t\tconsole.log(\"fn: updateFullPath\")\r\n\t\tvar lenA = this.overlayQueue.length;\r\n\t\twhile(lenA-- > 0){\r\n\t\t\tvar pathHolder = this.prepareFullPath(this.overlayQueue[lenA].word);\r\n\t\t\tthis.overlayQueue[lenA].fullPath = pathHolder.path;\r\n\t\t\tthis.overlayQueue[lenA].pathMin = pathHolder.min;\r\n\t\t\tthis.overlayQueue[lenA].pathMax = pathHolder.max;\r\n\t\t}\r\n//\t\tconsole.log(this.overlayQueue)\r\n\t}\r\n\t\r\n\t,buildSliderPath: function (pathArray) {\r\n\t\tvar me = this;\r\n\t\tvar line = d3.line()\r\n\t\t    .x(function(d) { return me.xSliderScale(d.x); })\r\n\t\t    .y(function(d) { return me.ySliderScale(d.y); })\r\n\t\t    .curve(d3.curveNatural);\r\n\t\treturn line(pathArray);\r\n\t}\r\n\t\r\n\t,sliderOverlayOn: function (objectToSelect) {\r\n\t\t//console.log('fn: sliderOverlayOn')\t\t\r\n\t\tthis.transitionSliderOverlay(objectToSelect);\r\n\t\t\r\n\t\t//draw path\r\n\t\tthis.chart.append('g')\r\n\t\t\t.attr('class', 'slider')\r\n\t\t\t.attr('id', 'slider-line-' + objectToSelect.word)\r\n\t\t\t.append('path')\r\n\t\t\t.attr(\"d\", this.buildSliderPath(objectToSelect.fullPath))\r\n\t\t\t.style('stroke', objectToSelect.colour)\r\n\t\t\t.style('stroke-width', 2)\r\n\t\t\t.style('fill', 'none');\r\n\t\t\t\r\n\t\t//redraw slider\r\n\t\tthis.redrawSlider();\r\n\t}\r\n\t\r\n\t,sliderOverlayOff: function (selector) {\r\n\t    this.chart.selectAll('g[id=slider-line-' + selector.replace(/'/g, \"\\\\'\") + ']')\r\n\t    \t.remove();\r\n\t    \r\n\t    //update slider overlay axis\r\n\t\tthis.transitionSliderOverlay();\r\n\t}\r\n\t\r\n\t,redrawSliderOverlay: function() {\t\r\n\t\t//console.log('redrawSliderOverlay')\r\n\t\tfor(var l = 0; l < this.overlayQueue.length; l++){\r\n\t\t\tthis.sliderOverlayOff(this.overlayQueue[l].selector);\r\n\t\t\tthis.sliderOverlayOn(this.overlayQueue[l]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t,transitionSliderOverlay: function(objectToSelect) {\r\n\t\t//console.log('transitionSliderOverlay')\r\n\t\tobjectToSelect = objectToSelect || 0;\r\n\t\t\r\n\t\t//update slider overlay axis\r\n\t\tthis.updateYSliderScale(objectToSelect);\r\n\t\t\r\n\t\t//transition all other paths\r\n\t\tvar lenA = this.overlayQueue.length;\r\n\t\twhile(lenA-- > 0){\r\n\t\t\tthis.chart.selectAll('g#slider-line-' + this.overlayQueue[lenA].selector.replace(/'/g, \"\\\\'\"))\r\n\t\t\t\t.select('path')\r\n\t\t\t\t.transition().duration(300)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t\t.attr(\"d\", this.buildSliderPath(this.overlayQueue[lenA].fullPath));\r\n\t\t}\r\n\t}\r\n\t\r\n\t,preparePath: function (string) {\r\n\t\t//console.log('fn: prepareData')\r\n\t\t\r\n\t\tvar linePosArray = [];\r\n\t\t\r\n\t\t//peek at the next frequency point and the preceding one to end the line on the edge of the graph\r\n\t\tvar foundA\r\n\t\t\t,foundB\r\n\t\t\t,foundC;\r\n\t\t\r\n\t\t//add two positions offscreen to the left for smooth transitions \r\n\t\tfor(var k = 0; k < 3 && this.shiftCount - k > 0; k++) {\r\n\t\t\tfoundA = 0;\r\n\t\t\tfor(var i = 0; i < this.allData[this.shiftCount - (1 + k)].allDataInternal.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray.length; j++){\r\n\t\t\t\t\tif(this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal3 = this.yScale(this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.unshift({x: this.shiftCount - (1 + k), y: yVal3});\r\n\t\t\t\t\t\tfoundA = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundA === 0){\r\n\t\t\t\tvar yVal4 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.unshift({x: this.shiftCount - (1 + k), y: yVal4});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//fill in the middle values\r\n\t\tfor(var k = this.shiftCount, len = this.numVisPoints + this.shiftCount; k < len; k++){\r\n\t\t\tfoundB = 0;\r\n\t\t\tfor(var i = 0, lenA = this.allData[k].allDataInternal.length; i < lenA; i++) {\r\n\t\t\t\tfor(var j = 0, lenB = this.allData[k].allDataInternal[i].frequencyArray.length; j < lenB; j++){\r\n\t\t\t\t\tif(this.allData[k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.yScale(this.allData[k].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.push({x: k, y: yVal1});\r\n\t\t\t\t\t\tfoundB = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundB === 0){\r\n\t\t\t\tvar yVal2 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.push({x: k, y: yVal2});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//add two positions offscreen to the right for smooth transitions \r\n\t\tfor(var k = 0; k < 3 && this.numVisPoints + this.shiftCount + k < this.numDataPoints; k++){\r\n\t\t\tfoundC = 0;\r\n\t\t\tfor(var i = 0; i < this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray.length; j++){\r\n\t\t\t\t\tif(this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.yScale(this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.push({x: this.numVisPoints + this.shiftCount + k, y: yVal1});\r\n\t\t\t\t\t\tfoundC = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundC === 0){\r\n\t\t\t\tvar yVal2 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.push({x: this.numVisPoints + this.shiftCount + k, y: yVal2});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn linePosArray;\r\n\t}\r\n\t\r\n\t//draws the line graph overlay of the frequency info\r\n\t,chartOverlayOn: function(objectToSelect) {\r\n//\t\tconsole.log('fn: chartOverlayOn')\r\n\t\t\r\n\t\tvar me = this;\r\n\t\t\t\t\t\r\n\t\t//change selected word colour\r\n\t\tthis.chart.selectAll('g[class=section]')\r\n\t\t\t.selectAll('g[class=frequencies]')\r\n\t\t\t.selectAll('text[class=' + objectToSelect.selector.replace(/'/g,\"\\\\'\") + ']')\r\n\t\t\t.style('fill', objectToSelect.colour)\r\n\t\t\t.style('fill-opacity', 1);\r\n\t    \t\r\n\t    //if transitionCall === 'draw': draw the function for the first time\t\t\r\n\t\t//if not: shift displayData to a different subset of allData\r\n\t\t//then display the newly shifted data\r\n\t\t\r\n\t\tvar linePosArray = this.preparePath(objectToSelect.word);\r\n\t\t\r\n\t\tvar pos;\r\n\t\t\r\n\t\t//draw path\r\n\t\tvar line = d3.line()\r\n\t\t    .x(function(d) { \r\n\t\t    \tpos = d.x;\r\n\t\t    \treturn me.xScale(d.x + me.callOffset()); })\r\n\t\t    .y(function(d) { return d.y; })\r\n\t\t    .curve(d3.curveNatural);\r\n\t\t\r\n\t\tvar path = this.chart.select('.overlay')\r\n\t\t\t.append('g')\r\n\t\t\t.attr('class', 'frequency-line-' + objectToSelect.selector)\r\n\t\t\t.append('path')\r\n\t\t\t.attr(\"d\", line(linePosArray))\r\n\t\t\t.style('stroke', objectToSelect.colour)\r\n\t\t\t.style('stroke-width', 2)\r\n\t\t\t.style('fill', 'none');\r\n\t\t\t\t\t\r\n\t\tvar posDif = (this.xScale(pos) - this.xScale(pos + this.callOffset()));\r\n\t\t\r\n\t\tif(this.transitionCall === 'left' || this.transitionCall ==='right') {\r\n\t\t\tpath.transition()\r\n\t\t\t\t.duration(me.getDuration())\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t    .attr(\"transform\", \"translate(\" + posDif + \")\");\r\n\t\t}\r\n\t}\r\n\t\r\n\t,chartOverlayOff: function(selector){\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tthis.chart.selectAll('text.' + selector.replace(/'/g, \"\\\\'\"))\r\n\t    \t.style('fill', 'black')\r\n\t    \t.style('fill-opacity', function(d) { return me.opacityScale(d.freq); });\r\n\t    \r\n\t    this.chart.select('g.frequency-line-' + selector.replace(/'/g, \"\\\\'\"))\r\n\t    \t.remove();\r\n\t}\r\n\t\r\n\t//reselect all the sticky words\r\n\t//a screen movement has changed the words positions\r\n\t,redrawChartOverlay: function () {\r\n\t\t//console.log('fn: redrawChartOverlay')\r\n\t\tfor(var i = 0; i < this.overlayQueue.length; i++){\r\n\t\t\tthis.chartOverlayOff(this.overlayQueue[i].selector);\r\n\t\t\tthis.chartOverlayOn(this.overlayQueue[i]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//\r\n\t//SCALE FUNCTIONS\r\n\t//\r\n\t\r\n\t//all these scales need to be updated if this.absMaxFreq or this.valFraction changes\r\n\t,manageAllYScales: function() {\r\n\t\tthis.manageFontScale();\r\n\t\tthis.manageOpacityScale();\r\n\t\tthis.manageYScale();\r\n\t\tthis.manageYSliderScale();\r\n\t}\r\n\t\r\n\t,manageFontScale: function() {\r\n\t\t//console.log('fn: fontScale')\r\n\t\t this.fontScale.domain([this.minFreq, this.absMaxFreq * this.valFraction])\r\n\t    \t.range([10, this.maxFont]);\r\n\t}\r\n\t\r\n\t/*,maxFontScale : function (value) {\r\n\t\tvar scale = d3.scaleLinear()\r\n\t\t\t.domain([600,2000])\r\n\t\t\t.range([15,60]);\r\n\t\treturn scale(value);\r\n\t}*/\r\n\t\r\n\t,manageOpacityScale: function() {\r\n\t\tthis.opacityScale.domain([0, this.absMaxFreq * this.valFraction])\r\n    \t\t.range([0.4, 0.8]);\r\n\t}\r\n\t\r\n\t,manageYScale: function () {\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'linear') this.yScale = d3.scaleLinear();\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'log') this.yScale = d3.scaleLog();\r\n\t\t\r\n\t\tthis.yScale.domain([this.minFreq, this.absMaxFreq * this.valFraction * 1.25])\r\n\t\t\t\t.rangeRound([this.container.getHeight() - this.bPadding, (this.tPadding) + this.getSliderHeight()]);\r\n\t}\r\n\t\r\n\t,manageYSliderScale: function() {\r\n\t\tvar top = this.tPadding\r\n\t\t\t,bottom = this.tPadding + this.getSliderHeight();\r\n\t\t\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'linear') this.ySliderScale = d3.scaleLinear();\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'log') this.ySliderScale = d3.scaleLog();\r\n\t\t\r\n\t\tthis.ySliderScale.domain([this.minFreq, this.absMaxFreq])\r\n\t\t\t\t.rangeRound([bottom, top]);\r\n\t}\r\n\t\r\n\t,updateYSliderScale: function(updateWithObject) {\r\n\t\tupdateWithObject = updateWithObject || 0;\r\n\t\tvar selectedMin = this.minFreq, //setting this to this.absMinFreq effectively deactivates it, to make it work use this.absMaxFreq\r\n\t\t\tselectedMax = 0;\r\n\t    \t\r\n\t    //go through overlayQueue check for min / max\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(len-- > 0){\r\n\t\t\tif(this.overlayQueue[len].pathMin < selectedMin) selectedMin = this.overlayQueue[len].pathMin;\r\n\t\t\tif(this.overlayQueue[len].pathMax > selectedMax) selectedMax = this.overlayQueue[len].pathMax;\r\n\t\t}\r\n\t\tif(updateWithObject != 0 && updateWithObject.pathMin < selectedMin) selectedMin = updateWithObject.pathMin;\r\n\t\tif(updateWithObject != 0 && updateWithObject.pathMax > selectedMax) selectedMax = updateWithObject.pathMax;\r\n\t\t\r\n\t\tthis.ySliderScale.domain([selectedMin, selectedMax]);\r\n\t}\r\n\t\r\n\t,manageAllXScales: function() {\r\n\t\tthis.manageXScale();\r\n\t\tthis.manageXSliderScale();\r\n\t}\r\n\t\r\n\t,manageXScale: function() {\r\n\t\tthis.xScale.domain([this.shiftCount - 0.5, this.numVisPoints + this.shiftCount - 0.5])\r\n\t    \t.range([this.lPadding, this.container.getWidth() - this.rPadding]);\r\n\t}\r\n\t\r\n\t,manageXSliderScale: function() {\r\n\t\tthis.xSliderScale.domain([0, this.numDataPoints - 1])\r\n\t    \t.range([this.lPadding, this.container.getWidth() - this.rPadding]);\r\n\t}\r\n\r\n\t,getSliderHeight: function() {\r\n\t\treturn this.isSliderVisible ? this.sliderHeight+this.sliderBPadding : 0;\r\n\t}\r\n\t\r\n\t,setSliderHeight: function() {\r\n\t\tthis.sliderHeight = Math.max(10, this.container.getHeight()*this.sliderHeightRatio);\r\n\t}\r\n\t\r\n\t,hideSlider: function() {\r\n\t\tthis.isSliderVisible = false;\r\n\t\tthis.removeSlider(true);\r\n\t\tthis.doResize();\r\n\t}\r\n\t\r\n\t,showSlider: function() {\r\n\t\tthis.isSliderVisible = true;\r\n\t\tthis.doResize();\r\n\t}\r\n\t\r\n\t\r\n\t//\r\n\t//MISC. FUNCTIONS\r\n\t//\r\n\r\n\t\r\n\t,setTitleLength: function () {\r\n\t\t//console.log('fn:setTitleLength')\r\n\t\tvar me = this, \r\n\t\t\titem;\r\n\t\tthis.titlesArray = [];\r\n\t\t\r\n\t\tvar scale = d3.scaleLinear()\r\n\t\t\t.domain([350,1250])\r\n\t\t\t.range([10,40]);\r\n\t\t\r\n\t\tvar corpus = this.parent.getCorpus();\r\n\t\tfor (var i = 0, len = corpus.getDocumentsCount(); i < len; i++) {\r\n\t\t\tvar item = corpus.getDocument(i);\r\n\t\t\tvar shortTitle = item.getShortTitle();\t\t\t\r\n\t\t\tif(shortTitle.length <= scale(me.container.getWidth())) {\r\n\t\t\t\tme.titlesArray.push(shortTitle); \r\n\t\t\t} else {\r\n\t\t\t\tvar shorterTitle = shortTitle.substring(0,scale(me.container.getWidth()) - 3);\r\n\t\t\t\tme.titlesArray.push(shorterTitle + '...'); \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t,callOffset: function () {\r\n//\t\tconsole.log('fn: callOffset')\r\n\t\tvar callOffset;\r\n\t\tif(this.transitionCall === 'draw' || this.transitionCall === 'redraw') { \r\n\t\t\tcallOffset = 0; \r\n\t\t}\r\n\t\tif(this.transitionCall === 'left') { \r\n\t\t\tcallOffset = -1;\r\n\t\t}\r\n\t\tif(this.transitionCall === 'right') { \r\n\t\t\tcallOffset = 1;\r\n\t\t}\r\n\t\treturn callOffset;\r\n\t}\r\n\t\r\n\t,removeFilteredCharacters: function (string) {\r\n\t\t//console.log('fn: removeFilteredCharacters')\r\n\t\treturn string || '';\r\n\t\t\r\n\t\tif (string !== undefined) {\r\n\t\t\treturn string.replace(\"'\",\"apostrophe-\")\r\n\t\t\t\t.replace(\"#\",\"pound-\")\r\n\t\t\t\t.replace(\"&\",\"ampersand-\")\r\n\t\t\t\t.replace(\"@\",\"atsign-\")\r\n\t\t\t\t.replace(\"!\",\"exclamation-\")\r\n\t\t\t\t.replace(\"0\",\"num-o\")\r\n\t\t\t\t.replace(\"1\",\"num-a\")\r\n\t\t\t\t.replace(\"2\",\"num-b\")\r\n\t\t\t\t.replace(\"3\",\"num-c\")\r\n\t\t\t\t.replace(\"4\",\"num-d\")\r\n\t\t\t\t.replace(\"5\",\"num-e\")\t\t\r\n\t\t\t\t.replace(\"6\",\"num-f\")\r\n\t\t\t\t.replace(\"7\",\"num-g\")\r\n\t\t\t\t.replace(\"8\",\"num-h\")\r\n\t\t\t\t.replace(\"9\",\"num-i\")\r\n\t\t\t\t.replace(/[^a-zA-Z]+/g,'-'); //then anything else...\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetDuration: function() {\r\n\t\treturn this.numDataPoints*(100-this.parent.getSpeed())\r\n\t}\r\n\t\r\n};","Ext.define('Voyant.util.Api', {\n\tconstructor: function(config) {\n\t\tvar apis = [];\n\t\tif (!this.isApplication) {\n\t\t\tvar app = this.getApplication ? this.getApplication() : Voyant.application;\n\t\t\t\n\t\t\t// try to load from first-level mixins\n\t\t\tif (this.mixins) {\n\t\t\t\tfor (key in this.mixins) {\n\t\t\t\t\tvar clz = Ext.ClassManager.get(key);\n\t\t\t\t\tif (clz && clz.api) {\n\t\t\t\t\t\tapis.splice(0, 0, clz.api)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.addParentApi(apis, Ext.ClassManager.getClass(app)); // gather class params\n\t\t\tif (app.getApiParams) {\n\t\t\t\tapis.push(app.getApiParams()); // now add instance params, last\n\t\t\t}\n\t\t}\n\n\t\tthis.addParentApi(apis, Ext.ClassManager.getClass(this)); // add params from this class and parents\n\n\t\tthis.api = {};\n\t\tapis.forEach(function(a) {\n\t\t\tfor (key in a) {\n\t\t\t\tthis.api[key] = {initial: a[key], value: a[key]} // overwrite previous entries\n\t\t\t}\n\t\t}, this)\n\t\t\n    \tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n\t\tvar xtype = this.getXType ? this.getXType() : undefined;\n    \tfor (var key in queryParams) {\n    \t\tif (this.api[key]) {\n    \t\t\tthis.setApiParam(key, queryParams[key]);\n    \t\t} else if (xtype && key.indexOf(\".\")>0) {\n    \t\t\tvar k = key.substring(key.indexOf(\".\")+1);\n    \t\t\tif (k && k in this.api) {\n    \t\t\t\tthis.setApiParam(k, queryParams[key])\n    \t\t\t}\n    \t\t}\n    \t}\n    \t\n\t\tif (config && Ext.isObject(config.api)) {\n\t    \tfor (var key in config.api) {\n\t    \t\tif (this.api[key]) {\n\t    \t\t\tthis.setApiParam(key, config.api[key]);\n\t    \t\t}\n\t    \t}\n\t    \tdelete config.api; // remove so it doesn't overwrite default api\n\t\t}\n\t\t\n    \t// handle \"type\"  parameter specially for backwards compatibility\n    \tif (queryParams[\"type\"] && (\"query\" in this.api) && !this.getApiParam('query')) {\n    \t\tthis.setApiParam(\"query\", queryParams['type']);\n    \t}\n    \t\n\t},\n\taddParentApi: function(apis, clz) {\n\t\tif (clz.api) {apis.splice(0,0, clz.api)} // add to front\n\t\tif (clz.superclass) {this.addParentApi(apis, clz.superclass.self)}\n\t},\n\tgetApiParam: function(key, defaultValue) {\n\t\treturn this.api[key]!==undefined ? this.api[key].value : defaultValue\n\t},\n\tgetApiParams: function(keys, keepEmpty) {\n\t\tkeys = keys || Object.keys(this.api);\n\t\tvar api = {};\n\t\tif (Ext.isString(keys)) {keys=[keys]}\n\t\tkeys.forEach(function(key) {\n\t\t\tvar val = this.getApiParam(key);\n\t\t\tif (keepEmpty || !Ext.isEmpty(val)) {api[key]=val;}\n\n\t\t}, this);\n\t\treturn api;\n\t},\n\t\n\tgetModifiedApiParams: function() {\n\t\tvar api = {};\n\t\tfor (var key in this.api) {\n\t\t\tif (this.api[key].initial!=this.api[key].value) {\n\t\t\t\tapi[key]=this.api[key].value\n\t\t\t}\n\t\t}\n\t\treturn api\n\t},\n\t\n\tsetApiParams: function(config) {\n\t\tfor (var key in config) {this.setApiParam(key, config[key])}\n\t},\n\t\n\tsetApiParam: function(key, value) {\n\t\tif (this.api && this.api[key]) {this.api[key].value=value;}\n\t}\n});","Ext.define('Voyant.util.Localization', {\n\tstatics: {\n\t\tDEFAULT_LANGUAGE: 'en',\n\t\tLANGUAGE: 'en',\n\t\tAVAILABLE_LANGUAGES: [\"ar\",\"bs\",\"cz\",\"de\",\"en\",\"es\",\"fr\",\"he\",\"hr\",\"it\",\"ja\",\"pt\",\"sr\"],\n\t\ti18n: {\n\t\t}\n\t},\n\t\n\tgetLanguage: function(code) {\n\t\tif (code.length === 2) {\n\t\t\tif (Voyant.util.Localization.AVAILABLE_LANGUAGES.indexOf(code) !== -1) {\n\t\t\t\treturn this.localize(code);\n\t\t\t}\n\t\t} else {\n\t\t\tvar langs = Voyant.util.Localization.AVAILABLE_LANGUAGES.map(function(lang) {\n\t\t\t\treturn {text: this.localize(lang).toLowerCase(), value: lang}\n\t\t\t}, this);\n\t\t\tvar lowerCaseCode = code.toLowerCase();\n\t\t\tvar match = langs.find(function(lang) {\n\t\t\t\treturn lang.text === lowerCaseCode;\n\t\t\t});\n\t\t\tif (match) return match.value;\n\t\t}\n\t},\n\t\n\tlocalize: function(key, config) {\n\t\treturn this._localizeObject(this, key, config);\n\t},\n\t\n\t_localizeObject: function(object, key, config) {\n\n\t\tvar val = this._localizeClass(Ext.ClassManager.getClass(object), key, config);\n\t\tif (val) {return val;}\n\t\tif (object.mixins) { // look at mixins first\n\t\t\tfor (mixin in object.mixins) {\n\t\t\t\tvar val = this._localizeClass(Ext.ClassManager.getClass(object.mixins[mixin]), key, config);\n\t\t\t\tif (val) {return val;}\n\t\t\t}\n\t\t}\n\t\tif (object.superclass) { // then superclasses\n\t\t\tval =  this._localizeObject(object.superclass, key, config);\n\t\t\tif (val) {return val;}\n\t\t}\n\t\treturn config && config['default']!=undefined ? config['default'] : '['+key+']';\n\t},\n\t\n\t_localizeClass: function(clazz, key, config) {\n\t\tif (clazz && clazz.i18n && clazz.i18n[key]) {\n\t\t\tvar use = false;\n\t\t\tif (clazz.i18n[key]) {\n\t\t\t\tuse = clazz.i18n[key];\n\t\t\t}\n\t\t\t/*\n\t\t\tif (config && config.lang && clazz.i18n[key][config.lang]) {\n\t\t\t\tuse = clazz.i18n[key][config.lang];\n\t\t\t}\n\t\t\telse if (clazz.i18n[key][Voyant.util.Localization.LANGUAGE]) {\n\t\t\t\tuse = clazz.i18n[key][Voyant.util.Localization.LANGUAGE];\n\t\t\t}\n\t\t\telse if (clazz.i18n[key][Voyant.util.Localization.DEFAULT_LANGUAGE]) {\n\t\t\t\tuse = clazz.i18n[key][Voyant.util.Localization.DEFAULT_LANGUAGE];\n\t\t\t}\n\t\t\t*/\n\t\t\tif (use) {\n\t\t\t\tif (use.isTemplate) { // template\n\t\t\t\t\treturn use.apply(config);\n\t\t\t\t}\n\t\t\t\treturn use; // string\n\t\t\t}\n\t\t\treturn config && config['default']!=undefined ? config['default'] : '['+key+']'; // no language key found, so just return the key\n\t\t}\n\t\treturn false\n\t},\n\t\n\tgetLanguageToolMenu: function() {\n\t\tvar me = this;\n\t\treturn {\n\t\t\ttype: 'language',\n\t\t\ttooltip: this.localize(\"languageTitle\"),\n\t\t\txtype: 'toolmenu',\n\t        glyph: 'xf1ab@FontAwesome',\n\t\t\thandler: me.showLanguageOptions,\n\t\t\tscope: me\n\t\t} \n\t},\n\n\t\n\tshowLanguageOptions: function() {\n\t\tvar me = this;\n\t\tvar langs = Voyant.util.Localization.AVAILABLE_LANGUAGES.map(function(lang) {\n\t\t\treturn {text: this.localize(lang), value: lang}\n\t\t}, this);\n\t\tlangs.sort(function(a,b) {\n\t\t\treturn a.text.localeCompare(b.text);\n\t\t});\n\t\tlangs.splice(0,0,{text: this.localize('autoRecommended'), value: ''})\n\t\t\n\t\tnew Ext.window.Window({\n\t\t\ttitle: this.localize(\"languageTitle\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tname: 'lang',\n\t\t\t\t\tvalue: this.getApiParam(\"lang\") || \"\",\n\t    \t        queryMode: 'local',\n\t    \t        editable: false,\n\t    \t        fieldLabel: this.localize('chooseLanguage'),\n\t    \t        width: 450,\n\t    \t        labelAlign: 'right',\n\t    \t        labelWidth: 150,\n\t    \t        displayField: 'text',\n\t    \t        valueField: 'value',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text', 'value'],\n\t\t\t\t\t\tdata: langs\n\t\t\t\t\t}\n\t\t\t\t}/*,{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tname: 'rtl',\n\t\t\t\t\tvalue: '',\n\t    \t        queryMode: 'local',\n\t    \t        editable: false,\n\t    \t        fieldLabel: this.localize('rtlLabel'),\n\t    \t        labelAlign: 'right',\n\t    \t        displayField: 'text',\n\t    \t        valueField: 'value',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text', 'value'],\n\t\t\t\t\t\tdata: [{\n\t\t\t\t\t\t\ttext: this.localize('auto'),\n\t\t\t\t\t\t\tvalue: ''\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: this.localize('yes'),\n\t\t\t\t\t\t\tvalue: 'true'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: this.localize('no'),\n\t\t\t\t\t\t\tvalue: 'false'\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t}*/],\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancelTitle\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize(\"confirmTitle\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar form = btn.up('form');\n\t        \t\t\tif (form.isDirty()) {\n\t        \t\t\t\tvar app = me.getApplication();\n\t        \t\t\t\tvar params = app.getModifiedApiParams();\n\t        \t\t\t\tif (app.getCorpus()) {\n\t        \t\t\t\t\tparams.corpus = app.getCorpus().getAliasOrId();\n\t        \t\t\t\t} else {\n\t        \t\t\t\t\tdelete params.panels; // we probably don't need this\n\t        \t\t\t\t}\n\t        \t\t\t\tdelete params.lang;\n//\t        \t\t\t\tdelete params.rtl;\n\t        \t\t\t\tvar values = form.getValues();\n\t        \t\t\t\tif (values.lang) {params.lang = values.lang;}\n//\t        \t\t\t\tif (values.rtl) {params.rtl = values.lang;}\n\t        \t\t\t\tlocation.assign(\"./?\"+Ext.Object.toQueryString(params))\n\t        \t\t\t}\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: me\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n\t}\n\t\n});\n","/**\n * A utility for storing palettes and associations between terms and colors.\n */\nExt.define('Voyant.util.Colors', {\n\n\tconfig: {\n\t\t/**\n\t\t * Palettes for use with terms and documents.\n\t\t * @private\n\t\t */\n\t\tpalettes: undefined,\n\t\t/**\n\t\t * For tracking associations between a term and a color (in rgb format), to ensure consistent coloring across tools.\n\t\t * @private\n\t\t */\n\t\tcolorTermAssociations: undefined\n\t},\n\n\tconstructor: function(config) {\n\t\tthis.setPalettes({\n\t\t\t'default': [[0, 0, 255], [51, 197, 51], [255, 0, 255], [121, 51, 255], [28, 255, 255], [255, 174, 0], [30, 177, 255], [182, 242, 58], [255, 0, 164], [51, 102, 153], [34, 111, 52], [155, 20, 104], [109, 43, 157], [128, 130, 33], [111, 76, 10], [119, 115, 165], [61, 177, 169], [202, 135, 115], [194, 169, 204], [181, 212, 228], [182, 197, 174], [255, 197, 197], [228, 200, 124], [197, 179, 159]]\n\t\t});\n\t\tthis.resetColorTermAssociations();\n\n\t\t// palettes\n\t\tif (d3 !== undefined) {\n\t\t\tvar cat10 = d3.scaleOrdinal(d3.schemeCategory10).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\tvar cat20a = d3.scaleOrdinal(d3.schemeCategory20).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\tvar cat20b = d3.scaleOrdinal(d3.schemeCategory20b).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\tvar cat20c = d3.scaleOrdinal(d3.schemeCategory20c).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\tthis.addColorPalette('d3_cat10', cat10);\n\t\t\tthis.addColorPalette('d3_cat20a', cat20a);\n\t\t\tthis.addColorPalette('d3_cat20b', cat20b);\n\t\t\tthis.addColorPalette('d3_cat20c', cat20c);\n\t\t}\n        \n        var extjs = Ext.create('Ext.chart.theme.Base').getColors().map(function(val) { return this.hexToRgb(val); }, this);\n        this.addColorPalette('extjs', extjs);\n\t},\n\n\tresetColorTermAssociations: function() {\n\t\tthis.setColorTermAssociations(new Ext.util.MixedCollection());\n\t},\n\n\trgbToHex: function(a) {\n\t\treturn \"#\" + ((1 << 24) + (a[0] << 16) + (a[1] << 8) + a[2]).toString(16).slice(1);\n\t},\n\t\n\thexToRgb: function(hex) {\n\t    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n\t    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t    hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n\t        return r + r + g + g + b + b;\n\t    });\n\n\t    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t    return result ? [\n\t        parseInt(result[1], 16),\n\t        parseInt(result[2], 16),\n\t        parseInt(result[3], 16)\n\t    ] : null;\n\t},\n\n\t/**\n\t * Adds a new palette to the list.\n\t * @param key {String} The palette name.\n\t * @param values {Array} The array of colors. Format: [[r,g,b],[r,g,b],....]\n\t */\n\taddColorPalette: function(key, values) {\n\t\tthis.getPalettes()[key] = values;\n\t},\n\n\t/**\n\t * Gets the whole color palette.\n\t * @param {String} [key] The key of the palette to return.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of each color (optional, defaults to rgb values).\n\t * @return {Array} The color palette.\n\t * @private\n\t */\n\tgetColorPalette: function(key, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\t\tif (palette === undefined) {\n\t\t\tpalette = [];\n\t\t}\n\t\tif (returnHex) {\n\t\t\tvar colors = [];\n\t\t\tfor (var i = 0; i < palette.length; i++) {\n\t\t\t\tcolors.push(this.rgbToHex(palette[i]));\n\t\t\t}\n\t\t\treturn colors;\n\t\t} else {\n\t\t\treturn palette;\n\t\t}\n\t},\n\n\t/**\n\t * Gets a particular color from the palette.\n\t * @param {String} key The palette key.\n\t * @param {Integer} index The index of the color to get.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of the color (optional, defaults to rgb values).\n\t * @return {Mixed} The requested color, either a hex string or array of rgb values.\n\t * @private\n\t */\n\tgetColor: function(key, index, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\t\tif (index >= palette.length) {\n\t\t\tindex = index % palette.length;\n\t\t}\n\t\tif (returnHex) {\n\t\t\treturn this.rgbToHex(palette[index]);\n\t\t} else {\n\t\t\treturn palette[index];\n\t\t}\n\t},\n\n\t/**\n\t * Gets the color associated with the term.  Creates a new association if none exists.\n\t * @param {String} key The palette key.\n\t * @param {String} term The term to get the color for.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of the color (optional, defaults to rgb values).\n\t * @return {Mixed} The requested color, either a hex string or array of rgb values.\n\t * @private\n\t */\n\tgetColorForTerm: function(key, term, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\n\t\tif (term.indexOf(':') != -1) {\n\t\t\tterm = term.split(':')[1];\n\t\t}\n\t\tvar color = this.getColorTermAssociations().get(term);\n\t\tif (color == null) {\n\t\t\tvar index = this.getColorTermAssociations().getCount() % palette.length;\n\t\t\tcolor = palette[index];\n\t\t\tthis.getColorTermAssociations().add(term, color);\n\t\t}\n\t\tif (returnHex) {\n\t\t\tcolor = this.rgbToHex(color);\n\t\t}\n\t\treturn color;\n\t},\n\n\t/**\n\t * Set the color assocation for a term.\n\t * @param {String} term The term\n\t * @param {Array} color An array of RGB values\n\t */\n\tsetColorForTerm: function(term, color) {\n\t\tif (Array.isArray(color) === false) {\n\t\t\tcolor = this.hexToRgb(color);\n\t\t}\n\t\tthis.getColorTermAssociations().replace(term, color);\n\t}\n})\n","Ext.define('Voyant.util.Deferrable', {\n\tdeferredStack : [],\n\n\treleaseAllDeferred : function() {\n\t\tthis.deferredStack = [];\n\t},\n\n\tgetDeferredCount : function() {\n\t\treturn this.deferredStack.length;\n\t},\n\t\n\tgetDeferred: function(transferable) {\n\n//\t\tvar deferred = jQuery.Deferred();\n\t\tvar deferred = new Ext.Deferred();\n\t\t\n\t\tvar pomise = deferred\n\t\t// transfer methods to the promise\n//\t\tvar promise = this.getPromiseFromDeferred(deferred);\n\n\t\tif (transferable && transferable.transfer) {\n\t\t\ttransferable.transfer(transferable, deferred.promise)\n\t\t}\n\n\t\tif (!deferred.promise.show && window.show) {deferred.promise.show=show}\n\t\t\n\t\t// make sure that this object can chain an assignment\n\t\t// if (!deferred.promise.assign) {\n\t\t// \tExt.apply(deferred.promise, {assign: new Voyant.util.Assignable().assign});\n\t\t// }\n\n\t\tthis.deferredStack.push(deferred);\n\t\t\n\t\tvar me = this;\n\t\tdeferred.promise.always(function() {\n\t\t\tme.deferredStack.pop();\n\t\t});\n\t\treturn deferred;\n\t},\n\t\n\tgetPromiseFromDeferred: function(dfd) {\n\t\treturn typeof dfd.promise === \"object\" ? dfd.promise : dfd.promise();\n\t},\n\t\n\tgetDeferredNestedPromise: function(promise, args, transferable) {\n\t\tvar callee = arguments.callee.caller; // TODO: is callee.caller in terms of nested functions?\n\t\tvar dfd = Voyant.application.getDeferred(transferable);\n\t\tpromise.then(function(promised) {\n\t\t\tdfd.resolve(callee.apply(promised, args))\n\t\t})/*.fail(function() {\n\t\t\tdfd.reject.apply(this, arguments)\n\t\t})*/;\n\t\treturn dfd.promise;\n\t}\n});\n","Ext.define(\"Voyant.util.DetailedError\", {\n\textend: \"Ext.Error\",\n\tmixins: ['Voyant.util.Localization'],\n\tconfig: {\n\t\tmsg: undefined,\n\t\terror: undefined,\n\t\tdetails: undefined\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t\terror: \"Error\"\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tthis.setMsg(config.msg);\n\t\tthis.setError(config.error);\n\t\tthis.setDetails(config.details);\n\t\tthis.callParent(arguments);\n//\t\tdebugger\n//\t\tthis.show();\n\t},\n\t\n\tshow: function(config) {\n\t\tif (window.showError) {showError.call(this);}\n\t\telse {this.showMsg(config)}\n\t},\n\t\n\tshowMsg: function(config) {\n\t\tconfig = config || {};\n\t\tExt.applyIf(config, {\n\t\t\tmessage: this.getMsg()+\"<p class='error'>\\n\"+this.getError()+\"\u2026 \"+\n\t\t\t\t\"<a href='#' onclick=\\\"window.open('').document.write(unescape('<pre>\"+escape(this.getDetails())+\"</pre>')); return false;\\\">more</a></p>\",\n\t\t\ttitle: this.localize(\"error\"),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.MessageBox.ERROR,\n\t\t    autoScroll: true\n\t\t});\n\t\tExt.Msg.show(config);\n\t}\n})\n","Ext.define(\"Voyant.util.ResponseError\", {\n\textend: \"Voyant.util.DetailedError\",\n\tconfig: {\n\t\tresponse: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.setResponse(config.response);\n\t\tExt.applyIf(config, {\n\t\t\tmsg: config.response.statusText, // hopefully already set by creator\n\t\t\terror: (\"responseText\" in config.response) ? config.response.responseText.split(/(\\r\\n|\\r|\\n)/).shift() : \"\", // show first line of response\n\t\t\tdetails: (\"responseText\" in config.response) ? config.response.responseText : \"\"\n\t\t})\n\t\tthis.callParent(arguments);\n\t}\n\t\n})\n","Ext.define('Voyant.util.SparkLine', {\r\n\t/**\r\n\t * Gets a Google spark line.\r\n\t * \r\n\t * @param {Array} values An array of numerical values.\r\n\t * @param {Integer} stretch The width to stretch the spark line towards (currently unused).\r\n\t * @return {String} The image(s) of the spark line.\r\n\t * @private\r\n\t */\r\n\tgetSparkLine : function(values, stretch) {\r\n\t\tif (values.length < 2) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tvar min = Number.MAX_VALUE;\r\n\t\tvar max = Number.MIN_VALUE;\r\n\t\tvar hasDecimal = false;\r\n\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i] < min) {\r\n\t\t\t\tmin = values[i];\r\n\t\t\t}\r\n\t\t\tif (values[i] > max) {\r\n\t\t\t\tmax = values[i];\r\n\t\t\t}\r\n\t\t\tif (!hasDecimal\r\n\t\t\t\t\t&& values[i].toString().indexOf('.') > -1) {\r\n\t\t\t\thasDecimal = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar dif = (max - min).toString();\r\n\t\tvar multiplier = 1;\r\n\t\tvar divider = 1;\r\n\r\n\t\tvar newvalues = [];\r\n\t\tif (hasDecimal) {\r\n\t\t\tvar multiplier = 100;\r\n\t\t\tvar ind = dif.indexOf(\".\") + 1;\r\n\t\t\tfor ( var i = ind; i < dif.length; i++) {\r\n\t\t\t\tif (dif.charAt(i) == '0') {\r\n\t\t\t\t\tmultiplier *= 10;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\t\tnewvalues[i] = parseInt(values[i] * multiplier);\r\n\t\t\t}\r\n\t\t\tmax = parseInt(max * multiplier);\r\n\t\t\tmin = parseInt(min * multiplier);\r\n\r\n\t\t} else {\r\n\t\t\tvar divider = 1;\r\n\t\t\tfor ( var i = dif.length - 1; i > -1; i--) {\r\n\t\t\t\tif (dif.charAt(i) == '0') {\r\n\t\t\t\t\tdivider *= 10;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (divider != 1) {\r\n\t\t\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\t\t\tnewvalues[i] = values[i] / divider;\r\n\t\t\t\t}\r\n\t\t\t\tmax /= divider;\r\n\t\t\t\tmin /= divider;\r\n\t\t\t} else {\r\n\t\t\t\tnewvalues = values;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar valLen = (max.toString().length > min.toString().length ? max\r\n\t\t\t\t.toString().length\r\n\t\t\t\t: min.toString().length) + 1;\r\n\t\tvar valuesPerImage = Math.floor(1800 / valLen);\r\n\t\tvar baseUrl = 'http://chart.apis.google.com/chart?cht=ls&amp;chco=0077CC&amp;chls=1,0,0&amp;chds='+ min + ',' + max;\r\n\t\tvar images = Math.ceil(values.length / valuesPerImage);\r\n\t\tvar counter = 0;\r\n\t\tvar response = '';\r\n\t\tvar wid;\r\n\t\tif (values.length < 5) {\r\n\t\t\twid = 5;\r\n\t\t} else if (values.length < 10) {\r\n\t\t\twid = 4;\r\n\t\t} else if (values.length < 20) {\r\n\t\t\twid = 3;\r\n\t\t} else if (values.length < 50) {\r\n\t\t\twid = 2;\r\n\t\t} else {\r\n\t\t\twid = 1;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * if (stretch) { wid =\r\n\t\t * Math.ceil(stretch/values.length); if (wid>5) {wid=5;} }\r\n\t\t */\r\n\r\n\t\tfor ( var i = 0; i < images; i++) {\r\n\t\t\tvar vals = newvalues.slice(counter,\r\n\t\t\t\t\tcounter += valuesPerImage);\r\n\t\t\tresponse += \"<img style='margin: 0; padding: 0;' border='0' src='\"\r\n\t\t\t\t\t+ baseUrl\r\n\t\t\t\t\t+ '&amp;chs='\r\n\t\t\t\t\t+ (wid * vals.length)\r\n\t\t\t\t\t+ 'x15&amp;chd=t:'\r\n\t\t\t\t\t+ vals.join(',') + \"' alt='' class='chart-\";\r\n\t\t\tif (images == 1) {\r\n\t\t\t\tresponse += 'full';\r\n\t\t\t} else {\r\n\t\t\t\tif (i > 0 && i + 1 < images) {\r\n\t\t\t\t\tresponse + 'middle';\r\n\t\t\t\t} else if (i == 0) {\r\n\t\t\t\t\tresponse += 'left';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresponse += 'right';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresponse += \"' />\";\r\n\t\t}\r\n\t\treturn response;\r\n\t}\r\n});","Ext.define('Voyant.util.Toolable', {\n\trequires: ['Voyant.util.Localization','Voyant.util.Api'],\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tsuppressTools: false\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tif (this.getApiParam && this.getApiParam(\"suppressTools\")==\"true\") {return;}\n\t\tif (\"header\" in config && config.header===false) {return;}\n\t\tvar me = this;\n\t\tvar moreTools = undefined;\n\t\tvar parent = this.up('component');\n\t\tif (config.moreTools) {\n\t\t\tmoreTools = [];\n\t\t\tconfig.moreTools.forEach(function(xtype) {\n\t\t\t\t if (xtype && xtype!=this.xtype) {\n\t\t\t\t\tmoreTools.push(this.getMenuItemFromXtype(xtype));\n\t\t\t\t }\n\n\t\t\t}, this)\n\t\t}\n\t\telse if (parent && parent.getInitialConfig('moreTools')) {\n\t\t\tmoreTools = [];\n\t\t\t parent.getInitialConfig('moreTools').forEach(function(xtype) {\n\t\t\t\t if (xtype && xtype!=this.xtype) {\n\t\t\t\t\tmoreTools.push(this.getMenuItemFromXtype(xtype));\n\t\t\t\t }\n\n\t\t\t}, this)\n\t\t}\n\t\tif (moreTools && this.getApplication().getMoreTools) {\n\t\t\tmoreTools.push({xtype: 'menuseparator'});\n\t\t}\n\t\tif (this.getApplication().getMoreTools) {\n\t\t\tmoreTools = moreTools || [];\n\t\t\tvar app = this.getApplication();\n\t\t\tvar tools = app.getMoreTools();\n\t\t\ttools.forEach(function(category) {\n\t\t\t\tvar categories = [];\n\t\t\t\tcategory.items.forEach(function(xtype) {\n\t\t\t\t\tcategories.push(this.getMenuItemFromXtype(xtype))\n\t\t\t\t}, this)\n\t\t\t\tmoreTools.push({\n\t\t\t\t\ttext: app.localize(category.i18n),\n\t\t\t\t\tglyph: category.glyph,\n\t\t\t\t\tmenu: {items: categories}\n\t\t\t\t})\n\t\t\t}, this);\n\t\t}\t\t\t\n\n\t\tvar exportItems = undefined;\n\t\tvar toolsMap = {\n//\t\t\t\tmaximize: {\n//\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n//\t\t\t\t\tfn: this.maximizeToolClick\n//\t\t\t\t},\n\t\t\t\tsave: {\n\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t\t\t\t\tfn: this.exportToolClick,\n\t\t\t\t\titems: exportItems\n\t\t\t\t},\n\t\t\t\tplus: moreTools ? {\n\t\t\t\t\tglyph: 'xf17a@FontAwesome',\n\t\t\t\t\titems: moreTools\n\t\t\t\t} : undefined,\n\t\t\t\tgear: this.showOptionsClick || this.getOptions ? {\n\t\t\t\t\tglyph: 'xf205@FontAwesome',\n\t\t\t\t\tfn: this.showOptionsClick ? this.showOptionsClick : function(panel) {\n\t\t\t\t\t\tif (panel.isXType(\"voyanttabpanel\")) {panel = panel.getActiveTab()}\n\t\t\t\t\t\t// we're here because the panel hasn't overridden the click function\n\t\t\t\t\t\tExt.create('Ext.window.Window', {\n\t\t\t\t\t\t\ttitle: panel.localize(\"optionsTitle\"),\n\t\t\t\t\t\t\tmodal: true,\n\t\t\t            \tpanel: panel,\n\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\t\t\titems: panel.getOptions(),\n\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t\t\t\t\tvar api = panel.getApiParams(form.getForm().getFields().collect('name'));\n\t\t\t\t\t\t\t\t\t\tform.getForm().setValues(api);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t            \ttext: panel.localize(\"reset\"),\n\t\t\t\t\t\t\t\t\tglyph: 'xf0e2@FontAwesome',\n\t\t\t\t\t            \tflex: 1,\n\t\t\t\t\t            \tpanel: panel,\n\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t        \t\t\tif (this.mixins && this.mixins[\"Voyant.util.Api\"]) {\n\t\t\t\t\t        \t\t\t\tthis.mixins[\"Voyant.util.Api\"].constructor.apply(this);\n\t\t\t\t\t        \t\t\t\tif (this.getCorpus && this.getCorpus()) {\n\t\t\t\t\t        \t\t\t\t\tthis.fireEvent(\"loadedCorpus\", this, this.getCorpus())\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\tbtn.up('window').close();\n\t\t\t\t\t        \t\t},\n\t\t\t\t\t        \t\tscope: panel\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t},{xtype: 'tbfill'}, {\n\t\t\t\t\t            \ttext: panel.localize(\"cancelTitle\"),\n\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t                glyph: 'xf00d@FontAwesome',\n\t\t\t\t\t        \t\tflex: 1,\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t        \t\t\tbtn.up('window').close();\n\t\t\t\t\t        \t\t}\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t            \ttext: panel.localize(\"confirmTitle\"),\n\t\t\t\t\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t\t\t\t\t            \tflex: 1,\n\t\t\t\t\t            \tpanel: panel,\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t        \t\t\tfunction doGlobalUpdate(key, value) {\n\t\t\t\t\t        \t\t\t\t// set the api value for the app\n\t\t\t\t\t        \t\t\t\tif (app.setApiParam) {\n\t\t\t\t\t        \t\t\t\t\tapp.setApiParam(key, value);\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t\t\n\t\t\t\t\t        \t\t\t\t// tell the panels, including this one\n\t\t\t\t\t        \t\t\t\tvar panels = app.getViewport().query(\"panel,chart\");\n\t\t\t\t\t        \t\t\t\tfor (var i=0; i<panels.length; i++) {\n\t\t\t\t\t        \t\t\t\t\tif (panels[i].setApiParam) {\n\t\t\t\t\t        \t\t\t\t\t\tpanels[i].setApiParam(key, value);\n\t\t\t\t\t        \t\t\t\t\t}\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t\tglobalUpdate = true;\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\t\n\t\t\t\t\t        \t\t\tvar values = btn.up('form').getValues();\n\t\t\t\t\t        \t\t\t\n\t\t\t\t\t        \t\t\t// set api values (all of them, not just global ones)\n\t\t\t\t\t        \t\t\tthis.setApiParams(values);\n\n\t\t\t\t\t        \t\t\tvar app = this.getApplication();\n\t\t\t\t\t        \t\t\tvar corpus = app.getCorpus();\n\t\t\t\t\t        \t\t\t\n\t\t\t\t\t        \t\t\tvar globalUpdate = false;\n\t\t\t\t\t        \t\t\tif (values['stopList'] != undefined && values['stopListGlobal'] != undefined && values.stopListGlobal) {\n\t\t\t\t\t        \t\t\t\tdoGlobalUpdate('stopList', values['stopList']);\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\tif (values['palette'] != undefined) {\n\t\t\t\t\t\t\t\t\t\t\tapp.resetColorTermAssociations();\n\t\t\t\t\t        \t\t\t\tdoGlobalUpdate('palette', values['palette']);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (values['categories'] != undefined) {\n\t\t\t\t\t        \t\t\t\tdoGlobalUpdate('categories', values['categories']);\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\t\n\t\t\t\t\t        \t\t\tif (globalUpdate) {\n\t\t\t\t\t        \t\t\t\t// trigger a reloading of the app\n\t\t\t\t\t        \t\t\t\tif (corpus) {\n\t\t\t\t\t        \t\t\t\t\tapp.dispatchEvent(\"loadedCorpus\", this, corpus);\n\t\t\t\t\t        \t\t\t\t} else {\n\t\t\t\t\t        \t\t\t\t\tapp.dispatchEvent(\"apiParamsUpdated\", this, values);\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\t// fire this even if we have global params since the app dispatch won't reach this tool\n\t\t\t\t\t        \t\t\tif (corpus) {this.fireEvent(\"loadedCorpus\", this, corpus);}\n\t\t\t\t        \t\t\t\telse {this.fireEvent(\"apiParamsUpdated\", this, values);}\n\n\t\t\t\t\t        \t\t\tbtn.up('window').close();\n\t\t\t\t\t        \t\t},\n\t\t\t\t\t        \t\tscope: panel\n\t\t\t\t\t            }]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbodyPadding: 5\n\t\t\t\t\t\t}).show()\n\t\t\t\t\t}\n\t\t\t\t} : undefined,\n\t\t\t\thelp: {\n\t\t\t\t\tglyph: 'xf128@FontAwesome',\n\t\t\t\t\tfn: this.helpToolClick\n\t\t\t\t}\n\t\t}\n\t\tvar tools = [];\n\t\t\n\t\t// check to see if there are tool objects configured\n\t\tif (config.includeTools) {\n\t\t\tfor (var tool in config.includeTools) {\n\t\t\t\tif (typeof config.includeTools[tool] == \"object\") {\n\t\t\t\t\ttools.push(config.includeTools[tool])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tfor (var tool in toolsMap) {\n\t\t\tif (config.includeTools && !config.includeTools[tool] || !toolsMap[tool]) {continue;}\n\t\t\ttools.push({\n\t\t\t\ttype: tool,\n\t\t\t\ttooltip: this.localize(tool+\"Tip\"),\n\t\t\t\tcallback: toolsMap[tool].fn,\n\t\t\t\txtype: 'toolmenu',\n\t\t\t\tglyph: toolsMap[tool].glyph,\n\t\t\t\titems: toolsMap[tool].items\n\t\t\t})\n\t\t}\n\t\t\n\t\tExt.apply(this, {\n\t\t\ttools: tools\n\t\t})\n\t\tthis.on(\"afterrender\", function() {\n\t\t\tvar header = this.getHeader();\n\t\t\tif (header && Ext.os.deviceType==\"Desktop\" && !this.isXType(\"corpuscreator\") && !this.isXType('notebook')) {\n\t\t\t\tvar el = header.getEl();\n\t\t\t\tel.on(\"mouseover\", function() {\n\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n\t\t\t\t\t\ttool.show();\n\t\t\t\t\t})\n\t\t\t\t}, this);\n\t\t\t\tel.on(\"mouseout\", function() {\n\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n\t\t\t\t\t\tvar type = tool.config.type || tool.type; // auto-added tools don't have config.type, e.g. collapse\n\t\t\t\t\t\tif (type && type!='help' && type.indexOf('collapse')==-1) {tool.hide();}\n\t\t\t\t\t})\n\t\t\t\t}, this);\n\t\t\t\theader.getTools().forEach(function(tool,i) {\n\t\t\t\t\tif (tool.config.type!='help') {tool.hide();}\n\t\t\t\t});\n\t\t\t}\n\t\t}, this)\n\t},\n\tgetMenuItemFromXtype: function(xtype) {\n\t\tvar xt = xtype;\n\t\tvar config = this.getApplication().getToolConfigFromToolXtype(xtype);\n\t\tif (config && config.tooltip) {\n\t\t\tdelete config.tooltip // don't use this for now since it causes problems in the menu\n\t\t}\n\t\treturn Ext.apply(Ext.clone(config), {\n\t\t\txtype: 'menuitem',\n\t\t\ttext: config.title,\n\t\t\ttextAlign: 'left',\n\t\t\thandler: function() {this.replacePanel(config.xtype)},\n\t\t\tscope: this\n\t\t})\n\t},\n\tmaximizeToolClick: function(panel) {\n\t\tvar name = Ext.getClass(panel).getName();\n\t\tvar parts = name.split(\".\");\n\t\turl = panel.getBaseUrl()+\"tool/\"+parts[parts.length-1]+\"/\";\n\t\tparams = panel.getModifiedApiParams();\n\t\tif (!params.corpus && panel.getCorpus && panel.getCorpus()) {\n\t\t\tparams.corpus = panel.getCorpus().getId();\n\t\t}\n\t\tif (params) {url += \"?\"+Ext.Object.toQueryString(params);}\n\t\tpanel.openUrl(url);\n\t},\n\texportToolClick: function(panel) {\n\t\tif (panel.isXType('voyanttabpanel')) {panel = panel.getActiveTab()}\n\t\tvar items = window.location.hostname=='beta.voyant-tools.org' ? [{html: \"<p class='keyword' style='text-align: center; font-weight: bold; padding: 4px;'>Please note that this is the beta server and you should not count on corpora persisting (for bookmarks, embedding, etc.).\"}] : [];\n\t\tvar exportViewItems = [{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'embed',\n       \t\tboxLabel: panel.localize('exportViewHtmlEmbed')\n       \t},{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'biblio',\n       \t\tboxLabel: panel.localize('exportViewBiblio')\n       \t},{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'spyral',\n       \t\tboxLabel: panel.localize(\"exportViewSpyral\")\n       \t}];\n\t\tif (panel.isXType('notebook')) {\n\t\t\texportViewItems.splice(2, 1); // remove redundant spyral export for spyral notebooks\n\t\t}\n\t\tif (panel.getExtraExportItems) {\n\t\t\tpanel.getExtraExportItems().forEach(function(item) {\n\t\t\t\tExt.applyIf(item, {\n\t\t\t\t\txtype: 'radio',\n\t\t\t\t\tname: 'export'\n\t\t\t\t})\n\t\t\t\texportViewItems.push(item)\n\t\t\t})\n\t\t}\n\t\titems.push({\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'url',\n\t       \t\tboxLabel: \"<a href='\"+panel.getExportUrl.call(panel)+\"' target='_blank'>\"+panel.localize('exportViewUrl')+\"</a>\",\n\t       \t\tchecked: true,\n\t       \t\tlisteners: {\n\t       \t\t\tafterrender: function() {\n\t       \t\t\t\tthis.boxLabelEl.on(\"click\", function() {\n\t       \t\t\t\t\tthis.up('window').close()\n\t       \t\t\t\t}, this)\n\t       \t\t\t}\n\t       \t\t}\n\t\t},{\n\t       xtype: 'fieldset',\n\t       collapsible: true,\n\t       collapsed: true,\n\t       title: panel.localize('exportViewFieldset'),\n\t       items: exportViewItems\n\t\t})\n\t\tif (panel.isXType('grid')) {\n\t\t\tvar exportitems = [{\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'gridCurrentHtml',\n\t       \t\tboxLabel: panel.localize('exportGridCurrentHtml')\n    \t   },{\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'gridCurrentTsv',\n\t       \t\tboxLabel: panel.localize('exportGridCurrentTsv')\n    \t  \t}];\n\t\t\tif (!panel.getExportGridAll || panel.getExportGridAll()!=false) {\n\t\t\t\texportitems.push({\n\t\t       \t\txtype: 'radio',\n\t\t       \t\tname: 'export',\n\t\t       \t\tinputValue: 'gridAllJson',\n\t\t       \t\tboxLabel: panel.localize('exportGridAllJson')\n\t    \t   },{\n\t\t       \t\txtype: 'radio',\n\t\t       \t\tname: 'export',\n\t\t       \t\tinputValue: 'gridAllTsv',\n\t\t       \t\tboxLabel: panel.localize('exportGridAllTsv')\n\t    \t   })\n\t\t\t}\n\t\t\titems.push({\n\t\t       xtype: 'fieldset',\n\t\t       collapsible: true,\n\t\t       collapsed: true,\n\t\t       title: panel.localize('exportGridCurrent'),\n\t    \t   items: exportitems\n\t\t\t})\n\t\t}\n\t\tif ((!panel.getExportVisualization || panel.getExportVisualization()) && panel.isXType(\"grid\")==false && (panel.down(\"chart\") || panel.getTargetEl().dom.querySelector(\"canvas\") || panel.getTargetEl().dom.querySelector(\"svg\"))) {\n\t\t\tvar formats = [{\n\t\t\t\txtype: 'radio',\n\t\t\t\tname: 'export',\n\t\t\t\tinputValue: 'png',\n\t\t\t\tboxLabel: panel.localize('exportPng')\n\t\t\t},{\n\t\t\t\txtype: 'slider',\n\t\t\t\twidth: 200,\n\t\t\t\tvalue: 1,\n\t\t\t\tminValue: .5,\n\t\t\t\tmaxValue: 10,\n\t\t\t\tincrement: .5,\n\t\t\t\tlabelAlign: 'right',\n\t\t\t\tdecimalPrecision: 1,\n\t\t\t\titemId: 'scale',\n\t\t\t\tfieldLabel: new Ext.Template(panel.localize(\"scaleLabel\")).apply([1]),\n\t\t\t\tlisteners: {\n\t\t\t\t\tchange: function(slider, newVal) {\n\t\t\t\t\t\tthis.setFieldLabel(new Ext.Template(panel.localize(\"scaleLabel\")).apply([newVal]))\n\t\t\t\t\t},\n\t\t\t\t\tchangecomplete: function(slider) {\n\t\t\t\t\t\tslider.previousSibling().setValue(true); // make sure PNG is selected\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}];\n\t\t\tif (panel.getTargetEl().dom.querySelector(\"svg\")) {\n\t\t\t\tformats.push({\n\t\t\t\t\txtype: 'radio',\n\t\t\t\t\tname: 'export',\n\t\t\t\t\tinputValue: 'svg',\n\t\t\t\t\tboxLabel: panel.localize('exportSvg')\n\t\t\t\t})\n\t\t\t}\n\t\t\titems.push({\n\t\t\t       xtype: 'fieldset',\n\t\t\t       collapsible: true,\n\t\t\t       collapsed: true,\n\t\t\t       title: panel.localize('exportVizTitle'),\n\t\t    \t   items: formats\n\t    \t});\n\t\t}\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: panel.localize(\"exportTitle\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\titems: items,\n\t\t\t\tbuttons: [{\n\t            \ttext: panel.localize(\"exportTitle\"),\n\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t            \tflex: 1,\n\t            \tpanel: panel,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar form = btn.up('form');\n\t        \t\t\tvar fn = 'export'+Ext.String.capitalize(form.getValues()['export']);\n\t        \t\t\tif (Ext.isFunction(panel[fn])) {\n\t        \t\t\t\tpanel[fn].call(panel, panel, form)\n\t        \t\t\t}\n\t        \t\t\telse {\n\t        \t\t\t\tExt.Msg.show({\n\t        \t\t\t\t    title: panel.localize('exportError'),\n\t        \t\t\t\t    message: panel.localize('exportNoFunction'),\n\t        \t\t\t\t    buttons: Ext.Msg.OK,\n\t        \t\t\t\t    icon: Ext.Msg.ERROR\n\t        \t\t\t\t});\n\t        \t\t\t}\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: panel\n\t            }, {\n\t            \ttext: panel.localize(\"cancelTitle\"),\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t}]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n\t},\n\texportSvg: function(img) {\n\t\tvar svg = this.getTargetEl().dom.querySelector(\"svg\");\n\t\tif (svg) {\n\t\t\tvar html = d3.select(svg)\n\t\t\t\t.attr(\"version\", 1.1)\n\t\t\t\t.attr(\"xmlns\", \"http://www.w3.org/2000/svg\")\n\t\t\t\t.node().parentNode.innerHTML\n\t\t\tExt.Msg.show({\n\t\t\t    title: this.localize('exportSvgTitle'),\n\t\t\t    message: '<img src=\"'+'data:image/svg+xml;base64,'+ btoa(unescape(encodeURIComponent(html)))+'\" style=\"float: right; max-width: 200px; max-height: 200px; border: thin dotted #ccc;\"/>'+this.localize('exportSvgMessage'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.INFO,\n\t\t\t    prompt: true,\n\t\t        multiline: true,\n\t\t        value: html\n\t\t\t});\t\t\n\t\t}\n\t},\n\texportPngData: function(img) {\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportPngTitle'),\n\t\t    message: '<img class=\"thumb\" src=\"'+img+'\" style=\"float: right; max-width: 200px; max-height: 200px; border: thin dotted #ccc;\"/>'+this.localize('exportPngMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: '<img src=\"'+img+'\" />'\n\t\t});\n\t},\n\texportPng: function(panel, form) {\n\t\tvar scale = 1;\n\t\tif (form) {\n\t\t\tform.mask(panel.localize('loading'));\n\n\t\t\tvar slider = form.queryById(\"scale\");\n\t\t\tif (slider && slider.getValue) {\n\t\t\t\tscale = slider.getValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar canvasSurface = this.down('draw') || this.down('chart');\n\t\tif (canvasSurface && (canvasSurface.isChart || canvasSurface.isCanvas)) {\n\n\t\t\t// first part taken from EXTJ Draw.getImage()\n\t\t\t// http://docs.sencha.com/extjs/6.2.0/classic/src/Container.js-2.html#Ext.draw.Container-method-getImage\n\t\t\t// reproduced here because we want to scale the image in the canvas, not the final image\n\t\t\tvar size = canvasSurface.innerElement.getSize(),\n            \t\tsurfaces = Array.prototype.slice.call(canvasSurface.items.items),\n            \t\tzIndexes = canvasSurface.surfaceZIndexes,\n            \t\timage, imageElement,\n            \t\ti, j, surface, zIndex;\n \n\t        // Sort the surfaces by zIndex using insertion sort. \n\t        for (j = 1; j < surfaces.length; j++) {\n\t            surface = surfaces[j];\n\t            zIndex = zIndexes[surface.type];\n\t            i = j - 1;\n\t            while (i >= 0 && zIndexes[surfaces[i].type] > zIndex) {\n\t                surfaces[i + 1] = surfaces[i];\n\t                i--;\n\t            }\n\t            surfaces[i + 1] = surface;\n\t        }\n\t        \n\t        // next part taken from EXTJS Canvas Flatten\n\t        // http://docs.sencha.com/extjs/6.2.0/classic/src/Canvas.js-1.html#line897\n\t        // reproduced here because we want to scale the image when drawing to the new canvas\n\t        \n\t        var targetCanvas = document.createElement('canvas'),\n            className = Ext.getClassName(surfaces[0]),\n            ratio = surfaces[0].devicePixelRatio * scale,\n            ctx = targetCanvas.getContext('2d'),\n            surface, canvas, rect, i, j, xy;\n\n\t        targetCanvas.width = Math.ceil(size.width * ratio);\n\t        targetCanvas.height = Math.ceil(size.height * ratio);\n\t\n\t        \n\t        for (i = 0; i < surfaces.length; i++) {\n\t            surface = surfaces[i];\n\t            if (Ext.getClassName(surface) !== className) {\n\t                continue;\n\t            }\n\t            rect = surface.getRect();\n\t            surfaceSize = surface.el.getSize();\n\t            for (j = 0; j < surface.canvases.length; j++) {\n\t                canvas = surface.canvases[j];\n\t                xy = canvas.getOffsetsTo(canvas.getParent());\n\t                ctx.drawImage(canvas.dom, (rect[0] + xy[0]) * ratio, (rect[1] + xy[1]) * ratio, surfaceSize.width*ratio,surfaceSize.height*ratio);\n\t            }\n\t        }\n\t        if (form && form.isVisible()) {form.unmask();}\n\t        \n\t        // now we're ready\n\t\t\treturn this.exportPngData(targetCanvas.toDataURL());\n\t\t}\n\t\t\n//\t\tvar chart = this.down('chart'); // first try finding a chart\n//\t\tif (chart) {\n//\t\t\treturn this.exportPngData(this.down('chart').getImage().data);\n//\t\t}\n//\n\t\tvar targetEl = this.getTargetEl().dom,\n\t\t\tcanvas = targetEl.querySelector(\"canvas\"); // next try finding a canvas\n\t\tif (canvas) {\n\t\t\tif (scale==1) {\n\t\t\t\tvar data = canvas.toDataURL(\"image/png\");\n\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\treturn this.exportPngData(data);\n\t\t\t}\n\t        var targetCanvas = document.createElement('canvas'),\n            ctx = targetCanvas.getContext('2d');\n\t        targetCanvas.width = Math.ceil(canvas.width * scale);\n\t        targetCanvas.height = Math.ceil(canvas.height * scale);\n\n\t\t\t  var image = new Image;\n\t\t\t  image.src = canvas.toDataURL(\"image/png\");\n\t\t\t  image.panel = this;\n\t\t\t  image.onload = function() {\n\t\t\t\t  ctx.drawImage(image, 0, 0, targetCanvas.width, targetCanvas.height);\n\t\t\t\t  img = targetCanvas.toDataURL(\"image/png\");\n\t\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\t  this.panel.exportPngData.call(this.panel, img);\n\t\t\t  };\t\n\t\t\t  return;\n\t\t}\n\t\t\n\t\tvar svg = targetEl.querySelector(\"svg\"); // finally try finding an SVG\n\t\tif (svg) {\n\t\t\tvar width = targetEl.offsetWidth*scale,\n\t\t\t\theight = targetEl.offsetHeight*scale;\n\t\t\tvar clone = svg.cloneNode(true); // we don't want to scale, etc. the original\n\t\t\tclone.setAttribute(\"version\", 1.1)\n\t\t\tclone.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\")\n\t\t\tclone.setAttribute(\"width\", width)\n\t\t\tclone.setAttribute(\"height\", height)\n\n\t\t\tvar svgChildren = [];\n\t\t\twhile (clone.children.length > 0) {\n\t\t\t\tsvgChildren.push(clone.removeChild(clone.children[0]));\n\t\t\t};\n\n\t\t\tvar g = document.createElement('g');\n\t\t\tg.setAttribute(\"style\", \"transform-box: fill-box;\");\n\t\t\tg.setAttribute(\"transform\", \"scale(\"+scale+\")\")\n\t\t\tclone.appendChild(g);\n\n\t\t\tsvgChildren.forEach(function(item) {\n\t\t\t\tg.appendChild(item);\n\t\t\t})\n\n\t\t\tvar html = clone.outerHTML,\n\t\t\t\timg = 'data:image/svg+xml;base64,'+ btoa(unescape(encodeURIComponent(html)));\n\n\t\t\tvar canvas = Ext.DomHelper.createDom({tag:'canvas',width: width,height:height}),\n\t\t\t\tcontext = canvas.getContext(\"2d\");\n\t\t\t  \n\t\t\tvar image = new Image;\n\t\t\timage.src = img;\n\t\t\timage.panel = this;\n\t\t\timage.onload = function() {\n\t\t\t\tcontext.drawImage(image, 0, 0);\n\t\t\t\timg = canvas.toDataURL(\"image/png\");\n\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\treturn this.panel.exportPngData.call(this.panel, img);\n\t\t\t};\n\t\t\t// image.onerror = function(ev) {\n\t\t\t// \tconsole.log(ev)\n\t\t\t// }\n\t\t}\n\t},\n\texportUrl: function() {\n\t\tthis.openUrl(this.getExportUrl());\n\t},\n\texportEmbed: function() {\n\t\tvar asTool = this.isXType('voyantheader')==false;\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportViewEmbedTitle'),\n\t\t    message: this.localize('exportViewEmbedMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: \"\u003c!--\tExported from Voyant Tools (voyant-tools.org).\\n\"+\n\t        \t\"The iframe src attribute below uses a relative protocol to better function with both\\n\"+\n\t        \t\"http and https sites, but if you're embedding this into a local web page (file protocol)\\n\"+\n\t        \t\"you should add an explicit protocol (https if you're using voyant-tools.org, otherwise\\n\"+\n\t        \t\"it depends on this server.\\n\"+\n\t        \t\"Feel free to change the height and width values or other styling below: --\u003e\\n\"+\n\t        \t\"<iframe style='width: \"+(asTool ? this.getWidth()+\"px\" : \"100%\")+\"; height: \"+(asTool ? this.getHeight()+\"px\" : \"800px\")+\";' src='\"+this.getExportUrl(asTool)+\"'></iframe>\"\n\t\t});\n\t},\n\texportBiblio: function() {\n\t\tvar date = new Date();\n\t\tvar url = this.getExportUrl()\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportBiblioTitle'),\n\t\t    message: '<fieldset><legend>MLA</legend>'+\n\t    \t'<div class=\"x-selectable\">Sinclair, St\u00e9fan and Geoffrey Rockwell. '+(this.isXType('voyantheader') ? '' : '\"'+this.localize('title')+'.\" ')+\n\t    \t'<i>Voyant Tools</i>. '+Ext.Date.format(date,'Y')+'. Web. '+Ext.Date.format(date,'j M Y')+'. &lt;'+url+'&gt;.</div></fieldset>'+\n\t    \t'<br >'+\n\t    \t'<fieldset><legend>Chicago</legend>'+\n\t    \t'<div class=\"x-selectable\">St\u00e9fan Sinclair and Geoffrey Rockwell, '+(this.isXType('voyantheader') ? '' : '\"'+this.localize('title')+'\", ')+\n\t    \t'<i>Voyant Tools</i>, accessed '+Ext.Date.format(date,'F j, Y')+', '+url+'.</div></fieldset>'+\n\t    \t'<br >'+\n\t    \t'<fieldset><legend>APA</legend>'+\n\t    \t'<div class=\"x-selectable\">Sinclair, S. &amp; G. Rockwell. ('+Ext.Date.format(date,'Y')+\"). \"+(this.isXType('voyantheader') ? '' : this.localize('title')+'. ')+\n\t    \t'<i>Voyant Tools</i>. Retrieved '+Ext.Date.format(date,'F j, Y')+', from '+url+'</div></fieldset>',\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO\n\t\t})\n\t},\n\texportSpyral: function() {\n\t\tlet toolForUrl = Ext.getClassName(this).split(\".\").pop();\n\t\tlet api = this.getApplication().getModifiedApiParams();\n\t\tif (this.isXType('voyantheader')==false) {\n\t\t\tdelete api.panels; // not needed for individual tools\n\t\t\t// add (and overwrite if need be) this tool's api\n\t\t\tExt.apply(api, this.getModifiedApiParams());\n\t\t\tdelete api.corpus;\n\t\t}\n\t\tlet isDebug = api && \"debug\" in api;\n\t\tdelete api.view;\n\t\tdelete api.debug;\n\t\tlet enc = function(str) {\n\t\t\treturn btoa(encodeURIComponent(str)).replace(/=/g, \"%3D\");\n\t\t}\n\t\tlet input = \"['<h1>Spyral Notebook Imported from Voyant Tools</h1>',\"+\n\t\t\t\"'<p>The proceeding code loads your corpus and tool. You can use this as a base to create your own notebook. Don\\\\'t forget to save your changes by clicking on the cloud icon!</p>','\"+\n\t\t\t'loadCorpus(\"'+this.getApplication().getCorpus().getAliasOrId()+'\").tool(\"'+\n\t\t\t(toolForUrl==\"VoyantHeader\" ? \"\" : toolForUrl)+'\"'+(Object.keys(api).length>0 ? (\",\"+Ext.encode(api)) : \"\")+ \");']\"\n\t\tthis.openUrl(this.getApplication().getBaseUrl()+\"spyral/?run=true&\"+(isDebug ? \"debug=true&\" : \"\")+\"inputJsonArrayOfEncodedBase64=\"+enc(input));\n\t},\n\texportGridCurrentJson: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar fields = store.getFields();\n\t\tvar value = \"<table>\\n\\t<thead>\\n\\t\\t<tr>\\n\";\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns().filter(function(col) { return col.dataIndex && col.dataIndex.trim().length > 0 });\n\t\tvalues = [];\n\n\t\tfunction jsonCollector(row) {\n\t\t\tvar val = {};\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tval[column.text] = row.get(column.dataIndex);\n\t\t\t});\n\t\t\tvalues.push(val);\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(jsonCollector);\n\t\t} else {\n\t\t\tstore.each(jsonCollector);\n\t\t}\n\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataJsonMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: Ext.encode(values)\n\t\t});\n\t},\n\texportGridCurrentTsv: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar fields = store.getFields();\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns().filter(function(col) { return col.dataIndex && col.dataIndex.trim().length > 0 });\n\t\tvar fields = [];\n\t\tvisibleColumns.forEach(function(column) {\n\t\t\tfields.push(column.text);\n\t\t})\n\t\tvar value = fields.join(\"\\t\")+\"\\n\";\n\n\t\tfunction tsvCollector(row) {\n\t\t\tcells = [];\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tvar val = row.get(column.dataIndex);\n\t\t\t\tif (Ext.isString(val)) {\n\t\t\t\t\tval = val.replace(/\\s+/g, ' '); // get rid of multiple whitespace (including newlines and tabs)\n\t\t\t\t}\n\t\t\t\tcells.push(val)\n\t\t\t});\n\t\t\tvalue += cells.join(\"\\t\") + \"\\n\";\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(tsvCollector);\n\t\t} else {\n\t\t\tstore.each(tsvCollector);\n\t\t}\n\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataTsvMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: value\n\t\t});\n\t},\n\texportGridCurrentHtml: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar fields = store.getFields();\n\t\tvar value = \"<table>\\n\\t<thead>\\n\\t\\t<tr>\\n\";\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns().filter(function(col) { return col.dataIndex && col.dataIndex.trim().length > 0 });\n\t\tvisibleColumns.forEach(function(column) {\n\t\t\tvalue+=\"\\t\\t\\t<td>\"+column.text+\"</td>\\n\";\n\t\t});\n\n\t\tvalue+=\"\\t\\t</tr>\\n\\t</thead>\\n\\t<tbody>\\n\";\n\n\t\tfunction htmlCollector(row) {\n\t\t\tvalue += \"\\t\\t<tr>\\n\";\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tvar val = row.get(column.dataIndex);\n\t\t\t\tif (Ext.isString(val)) {\n\t\t\t\t\tval = val.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&lg;');\n\t\t\t\t}\n\t\t\t\tvalue += \"\\t\\t\\t<td>\" + val + \"</td>\\n\";\n\t\t\t});\n\t\t\tvalue += \"\\t\\t</tr>\\n\";\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(htmlCollector);\n\t\t} else {\n\t\t\tstore.each(htmlCollector);\n\t\t}\n\n\t\tvalue+=\"\\t</tbody>\\n</table>\";\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataHtmlMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: value\n\t\t});\n\t},\n\texportGridAllJson: function(grid, form) {\n\t\tExt.Msg.confirm(this.localize('exportAllTitle'), this.localize('exportAllJsonWarning'), function(btn) {\n\t\t\tif (btn=='yes') {\n\t\t\t\tvar params = {limit: 0, start: 0};\n\t\t\t\tExt.applyIf(params, grid.getStore().getProxy().getExtraParams());\n\t\t\t\tthis.openUrl(this.getTromboneUrl()+\"?\"+Ext.Object.toQueryString(params));\n\t\t\t}\n\t\t}, this)\n\t},\n\texportGridAllTsv: function(grid, form) {\n\t\tExt.Msg.confirm(this.localize('exportAllTitle'), this.localize('exportAllTsvWarning'), function(btn) {\n\t\t\tif (btn=='yes') {\n\t\t\t\tvar params = {limit: 0, start: 0, template: this.getXType()+\"2tsv\"};\n\t\t\t\tExt.applyIf(params, grid.getStore().getProxy().getExtraParams());\n\t\t\t\tthis.openUrl(this.getTromboneUrl()+\"?\"+Ext.Object.toQueryString(params));\n\t\t\t}\n\t\t}, this)\n\t},\n\tgetExportUrl: function(asTool) {\n\t\t// start with the application api\n\t\tvar api = this.getApplication().getModifiedApiParams();\n\t\tvar toolForUrl = Ext.getClassName(this).split(\".\").pop();\n\t\tif (this.isXType('voyantheader')==false) {\n\t\t\tdelete api.panels; // not needed for individual tools\n\t\t\t// add (and overwrite if need be) this tool's api\n\t\t\tExt.apply(api, this.getModifiedApiParams());\n\t\t\tif (!asTool) {api.view=toolForUrl;}\n\t\t}\n\t\tif (!api.corpus) {\n\t\t\tapi.corpus = this.getApplication().getCorpus().getAliasOrId();\n\t\t}\n\t\treturn this.getApplication().getBaseUrl()+(asTool ? \"tool/\"+toolForUrl+\"/\" : \"\")+'?'+Ext.Object.toQueryString(api);\n\t},\n\thelpToolClick: function(panel) {\n\t\tif (panel.isXType('voyanttabpanel')) {panel = panel.getActiveTab()}\n\t\tvar help = panel.localize('help', {\"default\": false}) || panel.localize('helpTip');\n\t\tif (help==panel._localizeClass(Ext.ClassManager.get(\"Voyant.util.Toolable\"), \"helpTip\")) {\n\t\t\tpanel.openUrl( panel.getBaseUrl()+\"docs/#!/guide/\" + panel.getXType());\n\t\t}\n\t\telse {\n\t\t\tExt.Msg.alert(panel.localize('title'), help +\"<p><a href='\"+panel.getBaseUrl()+\n\t\t\t\t\t\"docs/\"+ (panel.isXType('voyantheader') ? '' : \"#!/guide/\"+panel.getXType()) +\"' target='voyantdocs'>\"+panel.localize(\"moreHelp\")+\"</a></p>\")\n\t\t}\n\t},\n\treplacePanel: function(xtype) {\n\t\tvar corpus = this.getApplication().getCorpus();\n\t\tvar config = this.getInitialConfig();\n\t\tvar parent;\n\t\tif (this.isXType('voyantheader') && this.getApplication().getViewComponent) {\n\t\t\tparent = this.getApplication().getViewComponent();\n\t\t\tparent.removeAll(true);\n\t\t\tvar newTool = parent.add({xtype: xtype});\n\t\t\tif (corpus) {\n\t\t\t\tthis.getApplication().dispatchEvent(\"loadedCorpus\", parent, corpus);\n\t\t\t}\n\t\t\t\n\t\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n\t\t\tvar url = this.getApplication().getBaseUrl();\n\t\t\turl += '?corpus='+corpus.getAliasOrId();\n\t\t\turl += '&view='+xtype;\n\t\t\tfor (var key in queryParams) {\n\t\t\t\tif (key !== 'corpus' && key !== 'view') {\n\t\t\t\t\turl += '&'+key+'='+queryParams[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.history.pushState({\n\t\t\t\tcorpus: corpus.getAliasOrId(),\n\t\t\t\tview: xtype\n\t\t\t}, '', url);\n\t\t}\n\t\telse {\n\t\t\tparent = this.isXType('voyantheader') && this.getApplication().getViewComponent ? this.getApplication().getViewComponent() : this.up(\"component\");\n\t\t\tparent.remove(this, true);\n\t\t\tvar newTool = parent.add({xtype: xtype});\n\t\t\tif (parent.isXType(\"voyanttabpanel\")) {\n\t\t\t\tparent.setActiveTab(newTool)\n\t\t\t}\n\t\t\tif (corpus) {\n\t\t\t\tnewTool.fireEvent(\"loadedCorpus\", newTool, corpus)\n\t\t\t}\n\t\t}\n\t\tthis.getApplication().dispatchEvent('panelChange', this)\n\t}\n});\n\n// from http://www.sencha.com/forum/showthread.php?281658-add-dropdown-menu-to-panel-tool&p=1054579&viewfull=1#post1054579\n// and http://www.sencha.com/forum/showthread.php?281953-Glyphs-in-panel-tool&p=1068934&viewfull=1#post1068934\n\nExt.define('Voyant.util.ToolMenu', {\n    extend: 'Ext.panel.Tool',\n    alias: 'widget.toolmenu',\n    renderTpl: ['<div class=\"x-menu-tool-hover\">' + '</div>'+\n            '<tpl if=\"glyph\">' + \n            '<span id=\"{id}-toolEl\" class=\"{baseCls}-glyph {childElCls}\" role=\"presentation\" style=\"font-family: {glyphFontFamily}; '+\n            \t'<tpl if=\"Ext.os.name==\\'iOS\\'\">'+ // FIXME: this is an awful hack..\n            \t\t'margin-right: 15px; '+\n            \t'</tpl>'+\n            '\">&#{glyph}</span>' + \n            '<tpl else>' + \n            '<img id=\"{id}-toolEl\" src=\"{blank}\" class=\"{baseCls}-img {baseCls}-{type}' + '{childElCls}\" role=\"presentation\"/>' + \n            '</tpl>'],\n    privates: {\n        onClick: function() {\n        \t\n            var me = this,\n            returnValue = me.callParent(arguments);\n\n\n            if (returnValue && me.items) {\n                if (!me.toolMenu) {\n                    me.toolMenu = new Ext.menu.Menu({\n                        items: me.items\n                    });\n                }\n                me.toolMenu.showAt(0, 0);\n                me.toolMenu.showAt(me.getX() + me.getWidth() - me.toolMenu.getWidth(), me.getY() + me.getHeight() + 10);\n            }\n\n\n            return returnValue;\n        },\n        onDestroy: function() {\n            Ext.destroyMembers(this, 'toolMenu'); //destructor\n            this.callParent();\n        }\n    },   \n\tinitComponent: function() {\n\t    var me = this;\n\t    me.callParent(arguments);\n\t\n\t    var glyph, glyphParts, glyphFontFamily;\n\t    glyph = me.glyph || 'xf12e@FontAwesome';\n\t\n\t    if (glyph) {\n\t        if (typeof glyph === 'string') {\n\t            glyphParts = glyph.split('@');\n\t            glyph = glyphParts[0];\n\t            glyphFontFamily = glyphParts[1];\n\t        } else if (typeof glyph === 'object' && glyph.glyphConfig) {\n\t            glyphParts = glyph.glyphConfig.split('@');\n\t            glyph = glyphParts[0];\n\t            glyphFontFamily = glyphParts[1];\n\t        }\n\t\n\t\n\t        Ext.applyIf(me.renderData, {\n\t            baseCls: me.baseCls,\n\t            blank: Ext.BLANK_IMAGE_URL,\n\t            type: me.type,\n\t            glyph: glyph,\n\t            glyphFontFamily: glyphFontFamily\n\t        });\n\t    }\n\t}\n\n});\n","Ext.define(\"Voyant.util.Transferable\", {\n\ttransferable: ['transfer'],\n\ttransfer: function(source, destination) {\n\t\tif (source.transferable) {\n\t\t\tfor (var i=0;i<source.transferable.length;i++) {\n\t\t\t\tvar member = source.transferable[i];\n\t\t\t\tdestination[member] = Ext.bind(source[member], destination);\n\t\t\t}\n\t\t}\n\t\tif (source.mixins) {\n\t\t\tfor (mixin in source.mixins) {\n\t\t\t\tthis.transfer(source.mixins[mixin], destination)\n\t\t\t}\n\t\t}\n\t}\n})","Ext.define(\"Voyant.util.Variants\", {\n\textend: 'Ext.Base',\n\tconstructor: function(variants) {\n\t\tthis.variants = variants;\n\t\tthis.map = {};\n\t\tthis.variants.forEach(function(variant, index) {\n\t\t\tvariant.forEach(function(v) {\n\t\t\t\tthis.map[v]=index;\n\t\t\t}, this)\n\t\t}, this)\n\t},\n\tgetVariants: function(terms) {\n\t\tvar variants = [];\n\t\tif (Ext.isString(terms)) {terms = [terms]}\n\t\tif (Ext.isArray(terms)) {\n\t\t\tterms.forEach(function(term) {\n\t\t\t\tif (this.map[term]!=undefined) {\n\t\t\t\t\tvariants.push.apply(variants, this.variants[this.map[term]]);\n\t\t\t\t}\n\t\t\t}, this)\n\t\t}\n\t\treturn variants\n\t}\n})","Ext.define(\"Voyant.util.Downloadable\", {\n\tmixins: ['Voyant.util.Localization'],\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tdocumentFormat: undefined,\n\t\t\tdocumentFilename: undefined\n\t\t}\n\t},\n\n\tdownloadFromCorpusId: function(corpusId) {\n\t\tvar panel = this;\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: this.localize('exportTitle'),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\titems: {xtype: 'downloadoptions'},\n\t\t\t\tlisteners: {\n\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t// make sure defaults are set based on panel's API\n\t\t\t\t\t\tform.getForm().setValues(panel.getApiParams(['documentFilename','documentFormat']));\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancelButton\"),\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t\t            ui: 'default-toolbar',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize('downloadButton'),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar values = btn.up('form').getValues();\n\t        \t\t\tpanel.setApiParams(values);\n\t        \t\t\tpanel.openDownloadCorpus(corpusId);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n\t},\n\t\n    openDownloadCorpus: function(corpusId) {\n\t\tvar url = this.getTromboneUrl()+\"?corpus=\"+corpusId+\"&tool=corpus.CorpusExporter&outputFormat=zip\"+\n\t\t\t\"&zipFilename=DownloadedVoyantCorpus-\"+corpusId+\".zip\"+\n\t\t\t(this.getApiParam(\"documentFormat\") ? \"&documentFormat=\"+this.getApiParam(\"documentFormat\") : '')+\n\t\t\t(this.getApiParam(\"documentFilename\") ? \"&documentFilename=\"+this.getApiParam(\"documentFilename\") : '')\n\t\tthis.openUrl(url)\n    }\n})","Ext.define('Voyant.util.Storage', {\n\tMAX_LENGTH: 950000, // keep it under 1 megabyte\n\t\n\tstoreResource: function(id, data) {\n\t\tvar dataString = Ext.encode(data);\n\t\t\n\t\tif (dataString.length > this.MAX_LENGTH) {\n\t\t\t// split into chunks\n\t\t\tvar dfd = new Ext.Deferred();\n\t\t\t\n\t\t\tvar numChunks = Math.ceil(dataString.length / this.MAX_LENGTH);\n\t\t\t\n\t\t\tvar chunkIds = [];\n\t\t\tfor (var i = 0; i < numChunks; i++) {\n\t\t\t\tchunkIds.push(id+'-chunk'+i);\n\t\t\t}\n\t\t\tthis._doStore(id+'-hasChunks', Ext.encode(chunkIds)).then(function() {\n\t\t\t\tvar chunkCount = 0;\n\t\t\t\tvar currIndex = 0;\n\t\t\t\tfor (var i = 0; i < numChunks; i++) {\n\t\t\t\t\tvar chunkString = dataString.substr(currIndex, this.MAX_LENGTH);\n\t\t\t\t\t\n\t\t\t\t\tthis._doStore(chunkIds[i], chunkString).then(function() {\n\t\t\t\t\t\tchunkCount++;\n\t\t\t\t\t\tif (chunkCount == numChunks) {\n\t\t\t\t\t\t\tdfd.resolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tdfd.reject();\n\t\t\t\t\t}, null, this);\n\t\t\t\t\t\n\t\t\t\t\tcurrIndex += this.MAX_LENGTH;\n\t\t\t\t}\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t}, null, this);\n\t\t\t\n\t\t\treturn dfd.promise;\n\t\t} else {\n\t\t\treturn this._doStore(id, dataString);\n\t\t}\n\t},\n\t\n\t_doStore: function(id, dataString) {\n\t\tvar dfd = new Ext.Deferred();\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                resourceId: id,\n                storeResource: dataString\n            }\n        }).then(function(response) {\n            dfd.resolve();\n        }, function(response) {\n            dfd.reject();\n        });\n\t\t\n\t\treturn dfd.promise;\n\t},\n\t\n\tgetStoredResource: function(id) {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                verifyResourceId: id+'-hasChunks'\n            }\n        }).then(function(response) {\n        \tvar json = Ext.decode(response.responseText);\n        \tif (json && json.storedResource && json.storedResource.id && json.storedResource.id != '') {\n            \t// chunks\n            \tthis._doGetStored(json.storedResource.id, false).then(function(chunkIds) {\n            \t\tvar fullData = '';\n                    var dataChunks = {};\n\t            \tfor (var i = 0; i < chunkIds.length; i++) {\n\t            \t\tthis._doGetStored(chunkIds[i], true).then(function(response) {\n\t            \t\t\tvar chunkId = response[0];\n\t            \t\t\tvar value = response[1];\n\t            \t\t\tdataChunks[chunkId] = value;\n\t            \t\t\t\n\t            \t\t\tvar done = true;\n\t            \t\t\tfor (var j = chunkIds.length-1; j >= 0; j--) {\n\t            \t\t\t\tif (dataChunks[chunkIds[j]] === undefined) {\n\t            \t\t\t\t\tdone = false;\n\t            \t\t\t\t\tbreak;\n\t            \t\t\t\t}\n\t            \t\t\t}\n\t            \t\t\t\n\t            \t\t\tif (done) {\n\t            \t\t\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t            \t\t\t\t\tfullData += dataChunks[chunkIds[j]];\n\t            \t\t\t\t}\n\t            \t\t\t\tdfd.resolve(Ext.decode(fullData));\n\t            \t\t\t}\n\t            \t\t}, function() {\n\t                        dfd.reject();\n\t                    }, null, this);\n\t            \t}\n            \t}, function() {\n            \t\tdfd.reject();\n            \t}, null, this);\n        \t} else {\n            \t// no chunks\n\t\t\t\tthis._doGetStored(id, false).then(function(value) {\n\t\t\t\t\tdfd.resolve(value);\n\t\t\t\t}, function() {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t}, null, this);\n        \t}\n        }, function() {\n        \tdfd.reject();\n        }, null, this);\n\t\t\n\t\treturn dfd.promise;\n\t},\n\t\n\t_doGetStored: function(id, isChunk) {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                retrieveResourceId: id,\n                failQuietly: true\n            }\n        }).then(function(response) {\n        \tvar json = Ext.decode(response.responseText);\n        \tvar id = json.storedResource.id;\n        \tvar value = json.storedResource.resource;\n        \tif (value.length == 0) {\n        \t\tdfd.reject();\n        \t} else {\n\t        \tif (isChunk != true) {\n\t        \t\tvalue = Ext.decode(value);\n\t        \t\tdfd.resolve(value);\n\t        \t} else {\n\t        \t\tdfd.resolve([id, value]);\n\t        \t}\n        \t}\n        }, function() {\n        \tdfd.reject();\n        }, null, this);\n\t\t\n\t\treturn dfd.promise;\n\t}\n});\n","/*\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\nExt.define(\"Voyant.util.DiacriticsRemover\", {\n    diacriticsMap: {},\n    \n    constructor: function() {\n        var defaultDiacriticsRemovalMap = [\n            {'base':'A', 'letters':'\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'},\n            {'base':'AA','letters':'\\uA732'},\n            {'base':'AE','letters':'\\u00C6\\u01FC\\u01E2'},\n            {'base':'AO','letters':'\\uA734'},\n            {'base':'AU','letters':'\\uA736'},\n            {'base':'AV','letters':'\\uA738\\uA73A'},\n            {'base':'AY','letters':'\\uA73C'},\n            {'base':'B', 'letters':'\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'},\n            {'base':'C', 'letters':'\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'},\n            {'base':'D', 'letters':'\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\\u00D0'},\n            {'base':'DZ','letters':'\\u01F1\\u01C4'},\n            {'base':'Dz','letters':'\\u01F2\\u01C5'},\n            {'base':'E', 'letters':'\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'},\n            {'base':'F', 'letters':'\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'},\n            {'base':'G', 'letters':'\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'},\n            {'base':'H', 'letters':'\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'},\n            {'base':'I', 'letters':'\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'},\n            {'base':'J', 'letters':'\\u004A\\u24BF\\uFF2A\\u0134\\u0248'},\n            {'base':'K', 'letters':'\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'},\n            {'base':'L', 'letters':'\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'},\n            {'base':'LJ','letters':'\\u01C7'},\n            {'base':'Lj','letters':'\\u01C8'},\n            {'base':'M', 'letters':'\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'},\n            {'base':'N', 'letters':'\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'},\n            {'base':'NJ','letters':'\\u01CA'},\n            {'base':'Nj','letters':'\\u01CB'},\n            {'base':'O', 'letters':'\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'},\n            {'base':'OI','letters':'\\u01A2'},\n            {'base':'OO','letters':'\\uA74E'},\n            {'base':'OU','letters':'\\u0222'},\n            {'base':'OE','letters':'\\u008C\\u0152'},\n            {'base':'oe','letters':'\\u009C\\u0153'},\n            {'base':'P', 'letters':'\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'},\n            {'base':'Q', 'letters':'\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'},\n            {'base':'R', 'letters':'\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'},\n            {'base':'S', 'letters':'\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'},\n            {'base':'T', 'letters':'\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'},\n            {'base':'TZ','letters':'\\uA728'},\n            {'base':'U', 'letters':'\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'},\n            {'base':'V', 'letters':'\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'},\n            {'base':'VY','letters':'\\uA760'},\n            {'base':'W', 'letters':'\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'},\n            {'base':'X', 'letters':'\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'},\n            {'base':'Y', 'letters':'\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'},\n            {'base':'Z', 'letters':'\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'},\n            {'base':'a', 'letters':'\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'},\n            {'base':'aa','letters':'\\uA733'},\n            {'base':'ae','letters':'\\u00E6\\u01FD\\u01E3'},\n            {'base':'ao','letters':'\\uA735'},\n            {'base':'au','letters':'\\uA737'},\n            {'base':'av','letters':'\\uA739\\uA73B'},\n            {'base':'ay','letters':'\\uA73D'},\n            {'base':'b', 'letters':'\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'},\n            {'base':'c', 'letters':'\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'},\n            {'base':'d', 'letters':'\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'},\n            {'base':'dz','letters':'\\u01F3\\u01C6'},\n            {'base':'e', 'letters':'\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'},\n            {'base':'f', 'letters':'\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'},\n            {'base':'g', 'letters':'\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'},\n            {'base':'h', 'letters':'\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'},\n            {'base':'hv','letters':'\\u0195'},\n            {'base':'i', 'letters':'\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'},\n            {'base':'j', 'letters':'\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'},\n            {'base':'k', 'letters':'\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'},\n            {'base':'l', 'letters':'\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'},\n            {'base':'lj','letters':'\\u01C9'},\n            {'base':'m', 'letters':'\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'},\n            {'base':'n', 'letters':'\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'},\n            {'base':'nj','letters':'\\u01CC'},\n            {'base':'o', 'letters':'\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'},\n            {'base':'oi','letters':'\\u01A3'},\n            {'base':'ou','letters':'\\u0223'},\n            {'base':'oo','letters':'\\uA74F'},\n            {'base':'p','letters':'\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'},\n            {'base':'q','letters':'\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'},\n            {'base':'r','letters':'\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'},\n            {'base':'s','letters':'\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'},\n            {'base':'t','letters':'\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'},\n            {'base':'tz','letters':'\\uA729'},\n            {'base':'u','letters': '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'},\n            {'base':'v','letters':'\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'},\n            {'base':'vy','letters':'\\uA761'},\n            {'base':'w','letters':'\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'},\n            {'base':'x','letters':'\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'},\n            {'base':'y','letters':'\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'},\n            {'base':'z','letters':'\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'}\n        ];\n        \n        this.diacriticsMap = {};\n        for (var i=0; i < defaultDiacriticsRemovalMap .length; i++){\n            var letters = defaultDiacriticsRemovalMap [i].letters;\n            for (var j=0; j < letters.length ; j++){\n                this.diacriticsMap[letters[j]] = defaultDiacriticsRemovalMap [i].base;\n            }\n        }\n    },\n    \n    // \"what?\" version ... http://jsperf.com/diacritics/12\n    removeDiacritics: function(str) {\n        return str.replace(/[^\\u0000-\\u007E]/g, function(a){\n            return this.diacriticsMap[a] || a; \n        }.bind(this));\n    }\n\n});","Ext.define(\"Voyant.notebook.util.Embed\", {\n\ttransferable: ['embed'],\n\tembed: function() { // this is for instances\n\t\tembed.apply(this, arguments);\n\t},\n\tconstructor: function(config) {\n\t\tvar me = this;\n\t},\n\tstatics: {\n\t\ti18n: {},\n\t\tapi: {\n\t\t\tembeddedParameters: undefined,\n\t\t\tembeddedConfig: undefined\n\t\t},\n\t\tembed: function(cmp, config) {\n\t\t\tif (this.then) {\n\t\t\t\tthis.then(function(embedded) {\n\t\t\t\t\tembed.call(embedded, cmp, config)\n\t\t\t\t})\n\t\t\t} else if (Ext.isArray(cmp)) {\n\t\t\t\tVoyant.notebook.util.Show.SINGLE_LINE_MODE=true;\n\t\t\t\tshow(\"<table><tr>\");\n\t\t\t\tcmp.forEach(function(embeddable) {\n\t\t\t\t\tshow(\"<td>\");\n\t\t\t\t\tif (Ext.isArray(embeddable)) {\n\t\t\t\t\t\tif (embeddable[0].embeddable) {\n\t\t\t\t\t\t\tembeddable[0].embed.apply(embeddable[0], embeddable.slice(1))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tembed.apply(this, embeddable)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tembed.apply(this, embeddable);\n\t\t\t\t\t}\n\t\t\t\t\tshow(\"</td>\")\n\t\t\t\t\t\n\t\t\t\t})\n//\t\t\t\tfor (var i=0; i<arguments.length; i++) {\n//\t\t\t\t\tvar unit = arguments[i];\n//\t\t\t\t\tshow(\"<td>\")\n//\t\t\t\t\tunit[0].embed.call(unit[0], unit[1], unit[2]);\n//\t\t\t\t\tshow(\"</td>\")\n//\t\t\t\t}\n\t\t\t\tshow(\"</tr></table>\")\n\t\t\t\tVoyant.notebook.util.Show.SINGLE_LINE_MODE=false;\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\t// use the default (first) embeddable panel if no panel is specified\n\t\t\t\tif (this.embeddable && (!cmp || Ext.isObject(cmp))) {\n\t\t\t\t\t// if the first argument is an object, use it as config instead\n\t\t\t\t\tif (Ext.isObject(cmp)) {config = cmp;}\n\t\t\t\t\tcmp = this.embeddable[0];\n\t\t\t\t}\n\t\t\t\tif (Ext.isString(cmp)) {\n\t\t\t\t\tcmp = Ext.ClassManager.getByAlias('widget.'+cmp.toLowerCase()) || Ext.ClassManager.get(cmp);\n\t\t\t\t}\n\t\t\t\tvar isEmbedded = false;\n\t\t\t\tif (Ext.isFunction(cmp)) {\n\t\t\t\t\tvar name = cmp.getName();\n\t\t\t\t\tif (this.embeddable && Ext.Array.each(this.embeddable, function(item) {\n\t\t\t\t\t\t\tif (item==name) {\n\t\t\t\t\t\t\t\tconfig = config || {};\n\t\t\t\t\t\t\t\tvar embeddedParams = {};\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tfor (key in Ext.ClassManager.get(Ext.getClassName(cmp)).api) {\n\t\t\t\t\t\t\t\t\tif (key in config) {\n\t\t\t\t\t\t\t\t\t\tembeddedParams[key] = config[key]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!embeddedParams.corpus) {\n\t\t\t\t\t\t\t\t\tif (Ext.getClassName(this)=='Voyant.data.model.Corpus') {\n\t\t\t\t\t\t\t\t\t\tembeddedParams.corpus = this.getId();\n\t\t\t\t\t\t\t\t\t} else if (this.getCorpus) {\n\t\t\t\t\t\t\t\t\t\tvar corpus = this.getCorpus();\n\t\t\t\t\t\t\t\t\t\tif (corpus) {\n\t\t\t\t\t\t\t\t\t\t\tembeddedParams.corpus = this.getCorpus().getId();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tExt.applyIf(config, {\n\t\t\t\t\t\t\t\t\tstyle: 'width: '+(config.width || '90%') + (Ext.isNumber(config.width) ? 'px' : '')+\n\t\t\t\t\t\t\t\t\t\t'; height: '+(config.height  || '400px') + (Ext.isNumber(config.height) ? 'px' : '')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdelete config.width;\n\t\t\t\t\t\t\t\tdelete config.height;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tvar corpus = embeddedParams.corpus;\n\t\t\t\t\t\t\t\tdelete embeddedParams.corpus;\n\t\t\t\t\t\t\t\t\n\t\t    \t    \t    \tExt.applyIf(embeddedParams, Voyant.application.getModifiedApiParams());\n\t\t\t\t\t\t\t\t\n\t\t    \t    \t    \t\n\t\t\t\t\t\t\t\tvar embeddedConfigParamEncodded = Ext.encode(embeddedParams);\n\t\t\t\t\t\t\t\tvar embeddedConfigParam = encodeURIComponent(embeddedConfigParamEncodded);\n\n\t\t\t\t\t\t\t\tvar iframeId = Ext.id();\n\t\t\t\t\t\t\t\tvar url = Voyant.application.getBaseUrlFull()+\"tool/\"+name.substring(name.lastIndexOf(\".\")+1)+'/?';\n\t\t\t\t\t\t\t\tif (true || embeddedConfigParam.length>1800) {\n\t\t\t\t\t\t\t\t\tshow('<iframe style=\"'+config.style+'\" id=\"'+iframeId+'\" name=\"'+iframeId+'\"></iframe>');\n\t\t\t\t\t\t\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\t\t\t    \t    \tExt.Ajax.request({\n\t\t\t\t\t    \t    \t    url: Voyant.application.getTromboneUrl(),\n\t\t\t\t\t    \t    \t    params: {\n\t\t\t\t\t    \t        \t\ttool: 'resource.StoredResource',\n\t\t\t\t\t    \t        \t\tstoreResource: embeddedConfigParam\n\t\t\t\t\t    \t    \t    }\n\t\t\t\t\t    \t    \t}).then(function(response) {\n\t\t\t\t    \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t\t\t\t    \t    \t    \tvar params = {\n\t\t\t\t    \t    \t    \t\tminimal: true,\n\t\t\t\t    \t    \t    \t\tembeddedApiId: json.storedResource.id\n\t\t\t\t    \t    \t    \t}\n\t\t\t\t    \t    \t    \tif (corpus) {\n\t\t\t\t    \t    \t    \t\tparams.corpus = corpus;\n\t\t\t\t    \t    \t    \t}\n\t\t\t\t    \t    \t    \tExt.applyIf(params, Voyant.application.getModifiedApiParams());\n\t\t\t\t    \t    \t    \tdocument.getElementById(iframeId).setAttribute(\"src\",url+Ext.Object.toQueryString(params));\n\t\t\t\t\t\t\t\t\t\tdfd.resolve();\n\t\t\t\t\t    \t    \t}).otherwise(function(response) {\n\t\t\t\t\t    \t    \t\tshowError(response);\n\t\t\t\t\t    \t    \t\tdfd.reject();\n\t\t\t\t\t    \t    \t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tshow('<iframe src=\"'+url+embeddedConfigParam+'\" style=\"'+config.style+'\" id=\"'+iframeId+'\" name=\"'+iframeId+'\"></iframe>');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tisEmbedded = true;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this)===true) {\n\t\t\t\t\t\tVoyant.notebook.util.Embed.showWidgetNotRecognized.call(this);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isEmbedded) {\n\t\t\t\t\t\tvar embedded = Ext.create(cmp, config);\n\t\t\t\t\t\tembedded.embed(config);\n\t\t\t\t\t\tisEmbedded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!isEmbedded) {\n\t\t\t\t\t\n\t\t\t\t\tVoyant.notebook.util.Embed.showWidgetNotRecognized.call(this);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshowWidgetNotRecognized: function() {\n\t\t\tvar msg = Voyant.notebook.util.Embed.i18n.widgetNotRecognized;\n\t\t\tif (this.embeddable) {\n\t\t\t\tmsg += Voyant.notebook.util.Embed.i18n.tryWidget+'<ul>'+this.embeddable.map(function(cmp) {\n\t\t\t\t\tvar widget = cmp.substring(cmp.lastIndexOf(\".\")+1).toLowerCase()\n\t\t\t\t\treturn \"\\\"<a href='../../docs/#!/guide/\"+widget+\"' target='voyantdocs'>\"+widget+\"</a>\\\"\"\n\t\t\t\t}).join(\", \")+\"</ul>\"\n\t\t\t}\n\t\t\tshowError(msg)\n\t\t}\n\n\t}\n})\n\nembed = Voyant.notebook.util.Embed.embed","Ext.define('Voyant.data.model.AnalysisToken', {\n    extend: 'Ext.data.Model',\n    idProperty: 'term',\n    fields: [\n         {name: 'term'},\n         {name: 'rawFreq', type: 'int'},\n         {name: 'relativeFreq', type: 'number'},\n         {name: 'cluster', type: 'int'},\n         {name: 'clusterCenter', type: 'boolean'},\n         {name: 'vector'}\n    ]\n});","Ext.define('Voyant.data.model.Context', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'position', 'type': 'int'},\n             {name: 'docId'},\n             {name: 'left'},\n             {name: 'keyword'},\n             {name: 'term'},\n             {name: 'right'}\n        ],\n\n        getDocIndex: function() {return this.get(\"docIndex\")},\n        getLeft: function() {return this.get(\"left\")},\n        getMiddle: function() {return this.get(\"middle\")},\n        getHighlightedMiddle: function() {return \"<span class='keyword'>\"+this.getMiddle()+\"</span>\"},\n        getRight: function() {return this.get(\"right\")},\n        getPosition: function() {return this.get(\"position\")},\n        getHighlightedContext: function() {return this.getLeft()+this.getHighlightedMiddle()+this.getRight();}\n\t\n});","Ext.define('Voyant.data.model.CorpusFacet', {\n    extend: 'Ext.data.Model',\n    idProperty: 'label',\n    fields: [\n             {name: 'facet'},\n             {name: 'label'},\n             {name: 'inDocumentsCount', type: 'int'}\n    ],\n    getLabel: function() {\n    \treturn this.get('label')\n    },\n    getFacet: function() {\n    \treturn this.get('facet')\n    },\n\tgetInDocumentsCount: function() {\n\t\treturn this.get('inDocumentsCount')\n\t}\n});","Ext.define('Voyant.data.model.CorpusCollocate', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'contextTerm'},\n             {name: 'contextTermRawFreq', type: 'int'}\n    ],\n    \n    getTerm: function() {return this.getKeyword()},\n    getRawFreq: function() {return this.getKeywordRawFreq()},\n    getKeyword: function() {return this.get('term');},\n    getKeywordRawFreq: function() {return this.get('rawFreq');},\n    getContextTerm: function() {return this.get('contextTerm');},\n    getContextTermRawFreq: function() {return this.get('contextTermRawFreq');}\n});","/*\n * Corpus Term\n */\nExt.define('Voyant.data.model.CorpusTerm', {\n    extend: 'Ext.data.Model',\n    idProperty: 'term', // should be unique\n    fields: [\n             {name: 'id'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'inDocumentsCount', type: 'int'},\n             {name: 'relativeFreq', type: 'float'},\n             {name: 'relativePeakedness', type: 'float'},\n             {name: 'relativeSkewness', type: 'float'},\n             {name: 'comparisonRelativeFreqDifference', type: 'float'},\n             {name: 'distributions'},\n             {name: 'typeTokenRatio-lexical', type: 'float', calculate:  function(data) {\n        \t \treturn data['typesCount-lexical']/data['tokensCount-lexical'];\n             }}\n    ],\n    \n    /**\n     * Get the term.\n     * @returns {String} Returns the term.\n     */\n    getTerm: function() {\n    \treturn this.get('term');\n    },\n    \n    /**\n     * Get the term's raw frequency.\n     * @returns {Number} Returns the term's frequency.\n     */\n\tgetRawFreq: function() {\n\t\treturn parseInt(this.get('rawFreq'));\n\t},\n\t\n\tgetInDocumentsCount: function() {\n\t\treturn parseInt(this.get('inDocumentsCount'));\n\t},\n\t\n\tgetDistributions: function() {\n\t\treturn this.get('distributions');\n\t},\n\t\n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getTerm()+\": \"+this.getRawFreq();\n\t}\n});","Ext.define('Voyant.data.model.CorpusNgram', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'length', type: 'int'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'distributions'}\n        ],\n    getTerm: function() {return this.get('term');}\n});","Ext.define('Voyant.data.model.Dimension', {\n    extend: 'Ext.data.Model',\n    fields: [\n        {name: 'percentage', type: 'number'}\n    ]\n});","Ext.define('Voyant.data.model.Document', {\n    extend: 'Ext.data.Model',\n    //requires: ['Voyant.data.store.DocumentTerms'],\n    fields: [\n             {name: 'corpus'},\n\t\t\t {name: 'id'},\n\t\t\t {name: 'author'},\n             {name: 'pubDate'},\n             {name: 'publisher'},\n             {name: 'pubPlace'},\n             {name: 'keyword'},\n             {name: 'collection'},\n             {name: 'index', type: 'int'},\n             {name: 'tokensCount-lexical', type: 'int'},\n             {name: 'typesCount-lexical', type: 'int'},\n             {name: 'typeTokenRatio-lexical', type: 'float', calculate:  function(data) {\n        \t \treturn data['typesCount-lexical']/data['tokensCount-lexical'];\n             }},\n             {name: 'lastTokenStartOffset-lexical', type: 'int'},\n             {name: 'title'},\n             {name: 'language', convert: function(data) {return Ext.isEmpty(data) ? '' : data;}},\n             {name: 'sentencesCount', type: 'int'},\n             {name: 'averageWordsPerSentence', type: 'float', calculate:  function(data) {\n        \t \treturn data['sentencesCount'] ? data['tokensCount-lexical'] / data['sentencesCount'] : 0;\n\t\t\t }},\n\t\t\t {name: 'css', type: 'string'}\n    ],\n    \n    getLexicalTokensCount: function() {\n    \treturn this.get('tokensCount-lexical')\n    },\n    \n    getLexicalTypeTokenRatio: function() {\n    \treturn this.get('typeTokenRatio-lexical')\n    },\n    \n    loadDocumentTerms: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tconfig = config || {};\n\t\t\tif (Ext.isNumber(config)) {\n\t\t\t\tconfig = {limit: config};\n\t\t\t}\n\t\t\tExt.applyIf(config, {\n\t\t\t\tlimit: 0\n\t\t\t})\n\t\t\tvar documentTerms = this.getDocumentTerms();\n\t\t\tdocumentTerms.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(documentTerms)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n    \t\n    },\n    \n    loadTokens: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tconfig = config || {};\n\t\t\tif (Ext.isNumber(config)) {\n\t\t\t\tconfig = {limit: config};\n\t\t\t}\n\t\t\tExt.applyIf(config, {\n\t\t\t\tlimit: 0\n\t\t\t})\n\t\t\tvar tokens = this.getTokens({});\n\t\t\ttokens.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(tokens)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n    \t\n    },\n    \n    getTokens: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t    \tExt.applyIf(config, {\n\t    \t\tproxy: {}\n\t    \t});\n\t    \tExt.applyIf(config.proxy, {\n\t    \t\textraParams: {}\n\t    \t})\n\t    \tExt.applyIf(config.proxy.extraParams, {\n\t    \t\tdocIndex: this.get('index')\n\t    \t})\n\t    \tExt.apply(config, {\n\t    \t\tdocId: this.get('id')\n\t    \t});\n\t    \treturn this.get('corpus').getTokens(config);\n\t\t}\n    },\n\n    getDocumentTerms: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t    \tExt.applyIf(config, {\n\t    \t\tproxy: {}\n\t    \t});\n\t    \tExt.applyIf(config.proxy, {\n\t    \t\textraParams: {}\n\t    \t})\n\t    \tExt.applyIf(config.proxy.extraParams, {\n\t    \t\tdocIndex: this.get('index')\n\t    \t})\n\t    \tif (config.corpus) {\n\t    \t\treturn config.corpus.getDocumentTerms(config);\n\t    \t}\n\t    \treturn this.get('corpus').getDocumentTerms(config); // FIXME: when does this happen?\n\t\t}\n    },\n    \n    getIndex: function() {\n    \treturn this.get('index');\n    },\n    \n    getId: function() {\n    \treturn this.get('id');\n    },\n    \n    getFullLabel: function() {\n    \tvar author = this.getAuthor();\n    \treturn this.getTitle() + (author ? \"(\"+author+\")\" : ''); // TODO: complete full label\n    },\n    \n    getTitle: function() {\n    \tvar title = this.get('title');\n    \tif (title === undefined) title = '';\n    \ttitle = Ext.isArray(title) ? title.join(\"; \") : title;\n    \ttitle = title.trim().replace(/\\s+/g, ' '); // remove excess whitespace\n    \treturn title;\n    },\n    \n    getTruncated: function(string, max) {\n  \t\tif (string.length > max) {\n\t\t\t\t// maybe a file or URL?\n\t\t\t\tvar slash = string.lastIndexOf(\"/\");\n\t\t\t\tif (slash>-1) {\n\t\t\t\t\tstring = string.substr(slash+1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (string.length>max) {\n\t\t\t\t\tvar space = string.indexOf(\" \", max-5);\n\t\t\t\t\tif (space < 0 || space > max) {\n\t\t\t\t\t\tspace = max;\n\t\t\t\t\t}\n\t\t\t\t\tstring = string.substring(0, space) + \"\u2026\";\n\t\t\t\t}\n\t\t}\n  \t\treturn string;\n    \t\n    },\n    \n    getShortTitle: function() {\n     \tvar title = this.getTitle();\n     \ttitle = title.replace(/\\.(html?|txt|xml|docx?|pdf|rtf|\\/)$/,'');\n     \ttitle = title.replace(/^(the|a|le|l'|un|une)\\s/,'');\n     \treturn this.getTruncated(title, 25);\n    },\n    \n    getTinyTitle: function() {\n    \treturn this.getTruncated(this.getShortTitle(), 10);\n    },\n    \n    getShortLabel: function() {\n    \tvar author = this.getAuthor(25);\n    \treturn (parseInt(this.getIndex())+1) + ') <i>' + this.getShortTitle() + \"</i>\" +(author ? \" (\"+author+\")\" : '')\n    },\n    \n    getTinyLabel: function() {\n    \treturn (parseInt(this.getIndex())+1) + ') ' + this.getTinyTitle();\n    },\n    \n    getPubDate: function() {\n    \treturn this.get(\"pubDate\");\n    },\n    \n    getPublisher: function() {\n    \treturn this.get(\"publisher\");\n    },\n    \n    getPubPlace: function() {\n    \treturn this.get(\"pubPlace\");\n    },\n    \n    getKeyword: function() {\n    \treturn this.getMultiple(\"keyword\");\n    },\n    \n    getCollection: function() {\n    \treturn this.getMultiple(\"collection\");\n    },\n    \n    getAuthor: function(max) {\n    \treturn this.getMultiple(\"author\");\n    },\n    \n    getMultiple: function(field, max) {\n    \tvar val = this.get(field) || \"\";\n    \tval = Ext.isArray(val) ? val.join(\"; \") : val;\n    \tval = val.trim().replace(/\\s+/g, ' ');\n    \treturn max ? this.getTruncated(val, max) : val;\n    },\n    \n    getCorpusId: function() {\n    \treturn this.get('corpus').getAliasOrId();\n    },\n    \n    isPlainText: function() {\n    \tif (this.get(\"extra.Content-Type\") && new RegExp(\"plain\",\"i\").test(this.get(\"extra.Content-Type\"))) {\n    \t\treturn true\n    \t}\n    \treturn false;\n    },\n    \n    getAverageWordsPerSentence: function() {\n    \treturn this.get(\"averageWordsPerSentence\");\n    },\n    \n    show: function() {\n    \tshow(this.getFullLabel())\n    },\n    \n    getCorpus: function() {\n    \treturn this.get('corpus');\n    },\n    \n    \n    getText: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t    \tconfig = config || {};\n\t    \tExt.apply(config, {\n        \t\ttool: 'corpus.DocumentTokens',\n        \t\tcorpus: this.getCorpusId()\n\t    \t})\n\t    \tthis.getTokens(config).then(function(tokens) {\n\t    \t\tdfd.resolve(tokens);\n\t    \t});\n\t    \treturn dfd.promise\n\t\t}\n    },\n    \n    getPlainText: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t    \tExt.apply(config, {\n    \t\t\toutputFormat: \"text\",\n    \t\t\ttemplate: \"docTokens2text\",\n    \t\t\tnoOthers: true\n\t    \t});\n\t\t\treturn this.getText();\n\t\t}\n    \t\n    },\n    \n    getLemmasArray: function(config) {\n    \tconfig = config || {};\n    \tconfig.docId = this.getId();\n\t\treturn this.getCorpus().getLemmasArray(config);\n//\t\tif (this.then) {\n//\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n//\t\t} else {\n//\t    \tconfig = config || {};\n//\t    \tExt.apply(config, {\n//    \t\t\tdocId: this.getId()\n//\t    \t});\n//\t\t\treturn this.getCorpus().getLemmasArray(config);\n//\t\t}\n    },\n    \n    getEntities: function(config) {\n    \tconfig = config || {};\n    \tExt.applyIf(config, {\n    \t\tproxy: {}\n    \t});\n    \tExt.applyIf(config.proxy, {\n    \t\textraParams: {}\n    \t})\n    \tExt.applyIf(config.proxy.extraParams, {\n    \t\tdocIndex: this.get('index')\n    \t})\n\t\treturn Ext.create(\"Voyant.data.store.DocumentEntities\", Ext.apply(config, {corpus: this.getCorpus(), docId: this.getId()}));\n    },\n    \n    loadEntities: function(config) {\n\t\tvar me = this;\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tthis.getEntities().load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(records)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation.error.response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n\t},\n\t\n\tgetCSS: function() {\n\t\treturn this.get('css') || this.get('parent_css');\n\t}\n    \n});","Ext.define('Voyant.data.model.DocumentEntity', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'type'},\n             {name: 'positions'}\n        ],\n    getTerm: function() {return this.get('term');},\n    getDocIndex: function() {return this.get('docIndex')},\n    getRawFreq: function() {return this.get('rawFreq')},\n    getPositions: function() {return this.get('positions')}\n});","Ext.define('Voyant.data.model.DocumentQueryMatch', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'count', 'type': 'int'},\n             {name: 'query'},\n             {name: 'distributions'}\n        ],\n    getCount: function() {return this.get('count')},\n    getDistributions: function() {return this.get(\"distributions\")},\n    getDocIds: function() {return this.get(\"docIds\")}\n});","Ext.define('Voyant.data.model.DocumentTerm', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'term'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'docId'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'relativeFreq', type: 'float'},\n             {name: 'tfidf', type: 'float'},\n             {name: 'zscore', type: 'float'},\n             {name: 'zscoreRatio', type: 'float'},\n             {name: 'distributions'}\n        ],\n    getTerm: function() {return this.get('term');},\n    getDocIndex: function() {return this.get('docIndex')},\n    getRawFreq: function() {return this.get('rawFreq')},\n    getRelativeFreq: function() {return this.get('relativeFreq')},\n    getDistributions: function() {return this.get('distributions')}\n});","Ext.define('Voyant.data.model.PrincipalComponent', {\n    extend: 'Ext.data.Model',\n    fields: [\n        {name: 'eigenValue', type: 'number'},\n        {name: 'eigenVectors'}\n    ]\n});","/*\n * Related Term\n */\nExt.define('Voyant.data.model.RelatedTerm', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'source'},\n             {name: 'target'},\n             {name: 'rawFreq', type: 'int'}\n    ],\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getSource: function() {\n    \treturn this.get('source');\n    },\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getTarget: function() {\n    \treturn this.get('target');\n    },\n    \n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getSource()+\"-\"+this.getTarget();\n\t}\n});","Ext.define('Voyant.data.model.StatisticalAnalysis', {\n    extend: 'Ext.data.Model',\n    requires: ['Voyant.data.model.PrincipalComponent', 'Voyant.data.model.Dimension', 'Voyant.data.model.AnalysisToken'],\n    fields: [\n         {name: 'id'}\n//         ,{name: 'dimensions', reference: 'Voyant.data.model.Dimension'}\n//         ,{name: 'tokens', reference: 'Voyant.data.model.AnalysisToken'}\n    ]\n    \n\t// alternative access methods to \"reference\" or \"hasMany\"\n\t,getPrincipalComponents: function() {\n\t\tvar pcs = [];\n\t\tthis.data.principalComponents.forEach(function(pc) {\n\t\t\tpcs.push(Ext.create('Voyant.data.model.PrincipalComponent', pc));\n\t\t});\n\t\treturn pcs;\n\t}\n\t,getDimensions: function() {\n\t\tvar dimensions = [];\n\t\tthis.data.dimensions.forEach(function(dim) {\n\t\t\tdimensions.push(Ext.create('Voyant.data.model.Dimension', {percentage: dim}));\n\t\t});\n\t\treturn dimensions;\n\t}\n\t,getTokens: function() {\n\t\tvar tokens = [];\n\t\tthis.data.tokens.forEach(function(tok) {\n\t\t\ttokens.push(Ext.create('Voyant.data.model.AnalysisToken', tok));\n\t\t});\n\t\treturn tokens;\n\t}\n\n\n//    ,hasMany: [{\n//    \tname: 'dimensions', model: 'Voyant.data.model.Dimension'\n//    },{\n//    \tname: 'tokens', model: 'Voyant.data.model.AnalysisToken'\n//    }]\n});","Ext.define('Voyant.data.model.Token', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'docId'},\n             {name: 'docIndex', type: 'int'},\n             {name: 'token'},\n             {name: 'rawFreq'},\n             {name: 'tokenType'},\n             {name: 'position', type: 'int'},\n             {name: 'startOffset', type: 'int'},\n             {name: 'endOffset', type: 'int'}\n        ],\n    statics: {\n    \tgetInfoFromElement: function(arg) {\n    \t\tif (arg && arg.getId) {\n    \t\t\tvar parts = arg.getId().split(\"_\");\n    \t\t\treturn {\n    \t\t\t\tdocIndex: parseInt(parts[1]),\n    \t\t\t\tposition: parseInt(parts[2])\n    \t\t\t};\n    \t\t}\n    \t}\n    },\n\tisWord: function() {\n\t\treturn this.getTokenType()=='lexical'; // maybe something else later?\n\t},\n\tisStopword: function() {\n\t\treturn this.get(\"stopword\")==\"true\";\n\t},\n\tgetTokenType: function() {\n\t\treturn this.get(\"tokenType\");\n\t},\n\tgetId: function() {\n\t\treturn [\"\",this.getDocIndex(),this.getPosition()].join(\"_\");\n\t},\n\tgetDocIndex: function() {\n\t\treturn this.get(\"docIndex\");\n\t},\n\tgetDocId: function() {\n\t\treturn this.get(\"docId\");\n\t},\n\tgetTerm: function() {\n\t\treturn this.get(\"term\");\n\t},\n\tgetTermWithLineSpacing: function(isPlainText) {\n\t\tvar term = this.getTerm().replace(/<\\/?\\w+\\b.*?>/g, \"<br /><br />\").replace(/>\\s+</g,\"><\").replace(/<br \\/><br \\/>(<br \\/>)+/g,\"<br \\/><br \\/>\");\n\t\tif (isPlainText) {term = term.replace(/(\\r\\n|\\r|\\n)\\s*/g,\"<br />\");};\n\t\treturn term;\n\t},\n\tgetPosition: function() {\n\t\treturn this.get(\"position\");\n\t},\n\tgetDocumentRawFreq: function() {\n\t\treturn this.get(\"rawFreq\");\n\t}\n});","/*\n * Related Term\n */\nExt.define('Voyant.data.model.TermCorrelation', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'source'},\n             {name: 'target'},\n             {name: 'correlation', type: 'float'},\n             {name: 'significance', type: 'float'},\n             {name: 'source-term', calculate: function(data) {return data.source.term}},\n             {name: 'target-term', calculate: function(data) {return data.target.term}},\n             {name: 'source-distributions', calculate: function(data) {return data.source.distributions}},\n             {name: 'target-distributions', calculate: function(data) {return data.target.distributions}}\n    ],\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getSource: function() {\n    \treturn this.get('source');\n    },\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getTarget: function() {\n    \treturn this.get('target');\n    },\n    \n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getSource()+\"-\"+this.getTarget();\n\t}\n});","Ext.define('Voyant.data.store.VoyantStore', {\r\n\tmixins: ['Voyant.util.Localization','Voyant.notebook.util.Embed'],\r\n\tconfig: {\r\n\t\tcorpus: undefined,\r\n\t\tparentPanel: undefined\r\n\t},\r\n\tconstructor: function(config, extras) {\r\n\t\tvar me = this;\r\n\t\tconfig = config || {};\r\n\t\tExt.applyIf(config, {\r\n\t\t\tremoteSort: true,\r\n\t\t\tautoLoad: false,\r\n//\t\t\tlisteners: {\r\n//\t\t\t\tbeforeload: function(store, operation) {\r\n//\t\t\t\t\tvar parent = this.getParentPanel();\r\n//\t\t\t\t\tif (parent !== undefined) {\r\n//\t\t\t\t\t\tvar params = parent.getApiParams();\r\n//\t\t\t\t\t\toperation = operation ? (operation===1 ? {} : operation) : {};\r\n//\t\t\t\t\t\toperation.params = operation.params || {};\r\n//\t\t\t\t\t\tfor (var key in params) {\r\n//\t\t\t\t\t\t\toperation.params[key] = params[key];\r\n//\t\t\t\t\t\t}\r\n//\t\t\t\t\t}\r\n//\t\t\t\t}\r\n//\t\t\t},\r\n//\t\t\tscope: this,\r\n\t\t\t// define buffered configuration even if ignored when this isn't a buffered store\r\n\t\t\tpagePurgeCount : 0, // don't purge any data\r\n\t\t\tpageSize : 100, // each request is more intenstive, so do fewer of them then default\r\n\t\t\tleadingBufferZone : 200 // stay two pages ahead\r\n\t\t});\r\n\t\tconfig.proxy = config.proxy || {};\r\n\t\tExt.applyIf(config.proxy, {\r\n\t\t\ttype: 'ajax',\r\n\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\tactionMethods: {read: 'POST'},\r\n\t\t\treader: {\r\n\t\t\t\ttype: 'json',\r\n\t\t\t\trootProperty: extras['proxy.reader.rootProperty'],\r\n\t\t\t\ttotalProperty: extras['proxy.reader.totalProperty'],\r\n\t\t\t\tmetaProperty: extras['proxy.reader.metaProperty'] || 'metaData'\r\n\t\t\t},\r\n\t\t\tsimpleSortMode: true,\r\n\t\t\tlisteners: {\r\n\t\t\t\texception: function(proxy, request, operation) {\r\n\t\t\t\t\tif (me.parentPanel && me.parentPanel.showError) {\r\n\t\t\t\t\t\t// FIXME: this should probably send the request, not the operation\r\n\t\t\t\t\t\tme.parentPanel.showError(operation)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tconfig.proxy.extraParams = config.proxy.extraParams || {};\r\n\t\tExt.applyIf(config.proxy.extraParams, {\r\n\t\t\ttool: extras['proxy.extraParams.tool']\r\n\t\t});\r\n\t\t\r\n\t\tif (config.parentPanel !== undefined) {\r\n\t\t\tExt.applyIf(config.proxy.extraParams, {\r\n\t\t\t\tforTool: config.parentPanel.xtype\r\n\t\t\t});\r\n\t\t\tthis.setParentPanel(config.parentPanel);\r\n\t\t\tconfig.parentPanel.on(\"loadedCorpus\", function(src, corpus) {\r\n\t\t\t\tthis.setCorpus(corpus);\r\n\t\t\t}, this);\r\n\t\t\tconfig.listeners = config.listeners || {};\r\n\t\t\tconfig.listeners.beforeload = {\r\n\t\t\t\t\tfn: function(store, operation) {\r\n\t\t\t\t\t\tvar parent = this.getParentPanel(), proxy = store.getProxy();\r\n\t\t\t\t\t\tif (parent !== undefined) {\r\n\r\n\t\t\t\t\t\t\tvar params = parent.getApiParams();\r\n\t\t\t\t\t\t\toperation = operation ? (operation===1 ? {} : operation) : {};\r\n\t\t\t\t\t\t\toperation.params = operation.params || {};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// unset any previously set extra params (only applies with proxy and buffered store)\r\n\t\t\t\t\t\t\tif (proxy && this.isBufferedStore) {\r\n\t\t\t\t\t\t\t\tExt.Array.from(this.previouslySetExtraParams).forEach(function(key) {\r\n\t\t\t\t\t\t\t\t\tproxy.setExtraParam(key, undefined);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.previouslySetExtraParams = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (var key in params) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t/* TODO NOT SURE ABOUT THIS\r\n\t\t\t\t\t\t\t\t// don't sent stopList when there's a query\r\n\t\t\t\t\t\t\t\tif (key==\"stopList\" && \"query\" in params && params.query) {continue;}\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (proxy && this.isBufferedStore) { // also set proxy for automatic buffering calls\r\n\t\t\t\t\t\t\t\t\tthis.previouslySetExtraParams.push(key);\r\n\t\t\t\t\t\t\t\t\tproxy.setExtraParam(key, params[key]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\toperation.params[key] = params[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tExt.apply(this, config);\r\n\t},\r\n\tsetCorpus: function(corpus) {\r\n\t\tif (corpus && this.getProxy && this.getProxy()) {\r\n\t\t\tthis.getProxy().setExtraParam('corpus', Ext.isString(corpus) ? corpus : corpus.getId());\r\n\t\t}\r\n\t\tthis.callParent(arguments);\r\n\t},\r\n\tgetString: function(config) {\r\n\t\tvar count = this.getCount();\r\n\t\treturn \"This store contains \"+this.getCount()+\" items\"+(count>0 ? \" with these fields: \"+this.getAt(0).getFields().map(function(field) {return field.getName()}).join(\", \") : \"\")+\".\"\r\n\t},\r\n\t\r\n\tembed: function(cmp, config) {\r\n\t\tif (!config && Ext.isObject(cmp)) {\r\n\t\t\tconfig = cmp;\r\n\t\t\tcmp = this.embeddable[0];\r\n\t\t}\r\n\t\tconfig = config || {};\r\n\t\t\r\n\t\tvar data = [];\r\n\t\tthis.each(function(record) {\r\n\t\t\tdata.push(record.data);\r\n\t\t}, this);\r\n\t\t\r\n\t\tExt.apply(config, {\r\n\t\t\tstoreJson: JSON.stringify({\r\n\t\t\t\tstoreClass: Ext.getClassName(this),\r\n\t\t\t\tstoreData: data\r\n\t\t\t})\r\n\t\t});\r\n\t\t\r\n\t\tembed.call(this, cmp, config);\r\n\t}\r\n\t\r\n});","Ext.define('Voyant.data.store.CAAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n\tembeddable: ['Voyant.panel.ScatterPlot'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CA',\n\t\t\t'proxy.reader.rootProperty': 'correspondenceAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'correspondenceAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.CAAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CAAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.ContextsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Context',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentContexts',\n\t\t\t'proxy.reader.rootProperty': 'documentContexts.contexts',\n\t\t\t'proxy.reader.totalProperty': 'documentContexts.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.Contexts', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.ContextsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.ContextsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.ContextsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.ContextsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.ContextsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusCollocatesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.CorpusCollocate',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusCollocates',\n\t\t\t'proxy.reader.rootProperty': 'corpusCollocates.collocates',\n\t\t\t'proxy.reader.totalProperty': 'corpusCollocates.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusCollocates', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusCollocatesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusCollocatesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusCollocatesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusCollocatesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusCollocatesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusFacetsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: Voyant.data.model.CorpusFacet,\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusFacets',\n\t\t\t'proxy.reader.rootProperty': 'corpusFacets.facets',\n\t\t\t'proxy.reader.totalProperty': 'corpusFacets.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusFacets', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusFacetsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.CorpusTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: Voyant.data.model.CorpusTerm,\n//    statics: {\n//    \ti18n: {\n//    \t\tgetString: \"This store has {0} terms with a total of {1} occurrences.\"\n//    \t}\n//    },\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusTerms',\n\t\t\t'proxy.reader.rootProperty': 'corpusTerms.terms',\n\t\t\t'proxy.reader.totalProperty': 'corpusTerms.total'\n\t\t}])\n\t},\n\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t}\n\n});\n\n/*\n * Corpus Terms store.\n */\nExt.define('Voyant.data.store.CorpusTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusTermsMixin'],\n    model: Voyant.data.model.CorpusTerm,\n\t\n\t/**\n\t * @method each\n\t * Iterate over each {@link Voyant.data.model.CorpusTerm corpus term} in this store.\n\t * \n\t * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\n\t * \t\tcorpusTerms.each(function(corpusTerm) {\n\t * \t\t\tcorpusTerm.show();\n\t * \t\t});\n\t * \t});\n\t * \n\t * @param {function} function The function to call for each corpus term.\n\t */\n\t\n\t/**\n\t * @method show\n\t * Shows a one line summary of the corpus terms.\n\t * \n\t * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\n\t * \t\tcorpusTerms.show();\n\t * \t});\n\t */\n\t\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n\t\n});\n\nExt.define('Voyant.data.store.CorpusTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusTermsMixin'],\n    model: Voyant.data.model.CorpusTerm,\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentQueryMatchesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentQueryMatch',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentsFinder',\n\t\t\t'proxy.reader.rootProperty': 'documentsFinder.queries',\n\t\t\t'proxy.reader.totalProperty': undefined,\n\t\t\t'proxy.reader.metaProperty': 'documentsFinder.corpus'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentQueryMatches', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentQueryMatchesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentQueryMatchesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentQueryMatchesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentQueryMatchesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentQueryMatchesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentTerm',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentTerms',\n\t\t\t'proxy.reader.rootProperty': 'documentTerms.terms',\n\t\t\t'proxy.reader.totalProperty': 'documentTerms.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentEntitiesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentEntity',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentEntities',\n\t\t\t'proxy.reader.rootProperty': 'documentEntities.entities',\n\t\t\t'proxy.reader.totalProperty': 'documentEntities.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentEntities', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentEntitiesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentEntitiesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentEntitiesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentEntitiesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentEntitiesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Document',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n\tsorters: {\n        property: 'index',\n        direction: 'ASC'\n\t},\n\tremoteSort: true,\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentsMetadata',\n\t\t\t'proxy.reader.rootProperty': 'documentsMetadata.documents',\n\t\t\t'proxy.reader.totalProperty': 'documentsMetadata.total'\n\t\t}])\n\t},\n\tlisteners: {\n\t\t load: function(store, records, successful, opts) {\n\t\t\t if (successful) {\n\t\t\t\t var corpus = store.getCorpus();\n\t\t\t\t records.forEach(function(record) {\n\t\t\t\t\t record.set('corpus', corpus);\n\t\t\t\t });\n\t\t\t }\n\t\t }\n\t},\n\tgetDocument: function(config) {\n\t\treturn Ext.isNumber(config) ? this.getAt(config) : this.getById(config);\n\t}\n\t\n});\n\nExt.define('Voyant.data.store.Documents', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentsMixin'],\n    model: 'Voyant.data.model.Document',\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentsMixin'],\n    model: 'Voyant.data.model.Document',\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.PCAAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n\tembeddable: ['Voyant.panel.ScatterPlot'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.PCA',\n\t\t\t'proxy.reader.rootProperty': 'pcaAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'pcaAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.PCAAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.PCAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.PCAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.PCAAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.PCAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.PCAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.DocSimAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentSimilarity',\n\t\t\t'proxy.reader.rootProperty': 'documentSimilarity',\n\t\t\t'proxy.reader.totalProperty': 'documentSimilarity.total'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.DocSimAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocSimAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocSimAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocSimAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocSimAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocSimAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusNgramsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.CorpusNgram',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusNgrams',\n\t\t\t'proxy.reader.rootProperty': 'corpusNgrams.ngrams',\n\t\t\t'proxy.reader.totalProperty': 'corpusNgrams.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusNgrams', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusNgramsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusNgramsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusNgramsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusNgramsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusNgramsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.RelatedTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.RelatedTerm',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.SemanticGraph',\n\t\t\t'proxy.reader.rootProperty': 'semanticGraph.edges',\n\t\t\t'proxy.reader.totalProperty': 'semanticGraph.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.RelatedTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.RelatedTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.RelatedTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.RelatedTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.RelatedTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.RelatedTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TermCorrelationsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.TermCorrelation',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusTermCorrelations',\n\t\t\t'proxy.extraParams.withDistributions': 'true',\n\t\t\t'proxy.reader.rootProperty': 'termCorrelations.correlations',\n\t\t\t'proxy.reader.totalProperty': 'termCorrelations.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.TermCorrelations', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TermCorrelationsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TermCorrelationsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TermCorrelationsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TermCorrelationsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TermCorrelationsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TokensMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Token',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentTokens',\n\t\t\t'proxy.reader.rootProperty': 'documentTokens.tokens',\n\t\t\t'proxy.reader.totalProperty': 'documentTokens.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.Tokens', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TokensMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TokensMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TokensBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TokensMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TokensMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TSNEAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n\tembeddable: ['Voyant.panel.ScatterPlot'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.TSNE',\n\t\t\t'proxy.reader.rootProperty': 'tsneAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'tsneAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t\tconfig.proxy.extraParams.noCache = 1;\n\t}\n});\n\nExt.define('Voyant.data.store.TSNEAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TSNEAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TSNEAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TSNEAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TSNEAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TSNEAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.model.NotebookFacet', {\n    extend: 'Ext.data.Model',\n    idProperty: 'label',\n    fields: [\n             {name: 'facet'},\n             {name: 'label'},\n             {name: 'inDocumentsCount', type: 'int'}\n    ],\n    getLabel: function() {\n    \treturn this.get('label')\n    },\n    getFacet: function() {\n    \treturn this.get('facet')\n    },\n\tgetInDocumentsCount: function() {\n\t\treturn this.get('inDocumentsCount')\n\t}\n});\n\nExt.define('Voyant.data.store.NotebookFacetsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: Voyant.data.model.NotebookFacet,\n\tconstructor : function(config) {\n\t\tif (config.facet) {\n\t\t\tif (config.proxy === undefined) {\n\t\t\t\tconfig.proxy = {};\n\t\t\t}\n\t\t\tif (config.proxy.extraParams === undefined) {\n\t\t\t\tconfig.proxy.extraParams = {};\n\t\t\t}\n\t\t\tconfig.proxy.extraParams.facet = config.facet;\n\t\t\tconfig.proxy.extraParams.noCache = 1;\n\t\t\tdelete config.facet;\n\t\t}\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'notebook.CatalogueFacets',\n\t\t\t'proxy.reader.rootProperty': 'catalogue.facets',\n\t\t\t'proxy.reader.totalProperty': 'catalogue.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.NotebookFacets', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.NotebookFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.NotebookFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.NotebookFacetsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.NotebookFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.NotebookFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","/*\n * @class VoyantTable\n * A VoyantTable can facilitate working with tabular data structures, as well as\n * displaying results (especially with {@link #embed} and {@link show}). \n * Here's a simple example showing the Zipf-Law distribution of the top 20 frequency terms.\n * \n * \tnew Corpus(\"austen\").loadCorpusTerms(20).then(function(corpusTerms) {\n * \t\tvar table = new VoyantTable({rowKey: 0}); // use first column as row key\n * \t\tcorpusTerms.each(function(corpusTerm) {\n *\t\t\ttable.addRow([corpusTerm.getTerm(), corpusTerm.getRawFreq()]);\n * \t\t});\n * \t\ttable.embed(\"voyantchart\"); // graph table as line chart\n * \t});\n */\nExt.define('Voyant.data.table.Table', {\n\talternateClassName: [\"VoyantTable\"],\n\tmixins: ['Voyant.notebook.util.Embed'],\n\tembeddable: ['Voyant.widget.VoyantTableTransform','Voyant.widget.VoyantChart','Voyant.widget.CodeEditor'],\n\tconfig: {\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\trows: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\theaders: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\trowsMap: {},\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\theadersMap: {},\n\t\t\n\t\t/**\n\t\t * Specifies that a specific header should serve as row key.\n\t\t * \n\t\t */\n\t\trowKey: undefined,\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tmodel: undefined\n\t},\n\t\n\tclone: function() {\n\t\tvar table = new VoyantTable();\n\t\ttable.setRows(Ext.clone(this.getRows()));\n\t\ttable.setHeaders(Ext.clone(this.getHeaders()))\n\t\ttable.setRowsMap(Ext.clone(this.getRowsMap()))\n\t\ttable.setHeadersMap(Ext.clone(this.getHeadersMap()))\n\t\ttable.setRowKey(Ext.clone(this.getRowKey()))\n\t\treturn table;\n\t},\n\n\tconstructor: function(config, opts) {\n\n\t\tconfig = config || {};\n\t\tif (config.fromBlock) {\n\t\t\tvar data = Voyant.notebook.Notebook.getDataFromBlock(config.fromBlock);\n\t\t\tif (data) {\n\t\t\t\tdata = data.trim();\n\t\t\t\tconfig.rows = [];\n\t\t\t\tdata.split(/\\n+/).forEach(function(line,i) {\n\t\t\t\t\tvar cells = line.split(\"\\t\");\n\t\t\t\t\tif (i==0 && !config.noHeaders) {\n\t\t\t\t\t\tconfig.headers = cells\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.rows.push(cells)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t} else if (config.count && Ext.isArray(config.count)) {\n\t\t\t// create counts\n\t\t\tvar freqs = {};\n\t\t\tconfig.count.forEach(function(item) {freqs[item] = freqs[item] ? freqs[item]+1 : 1;});\n\t\t\t// sort counts\n\t\t\tvar counts = [];\n\t\t\tfor (var key in freqs) {counts.push([key, freqs[key]])}\n\t\t\tcounts.sort(function(a,b) {return b[1] - a[1]});\n\t\t\tif (config.limit && counts.length>config.limit) {\n\t\t\t\tcounts.splice(config.limit);\n\t\t\t}\n\t\t\tif (config.orientation && config.orientation==\"horizontal\") {\n\t\t\t\tconfig.headers = counts.map(function(item) {return item[0]});\n\t\t\t\tconfig.rows = [counts.map(function(item) {return item[1]})];\n\t\t\t} else {\n\t\t\t\tconfig.headers = config.headers ? config.headers : [\"Item\",\"Count\"];\n\t\t\t\tconfig.rows = counts;\n\t\t\t}\n\t\t} else if (config.isStore || config.store) {\n\t\t\tvar store = config.store ? config.store : config;\n\t\t\tif (opts && opts.headers) {\n\t\t\t\tconfig.headers = opts.headers;\n\t\t\t} else {\n\t\t\t\t// store.getModel() doesn't seem to work (for CorpusTerms at least)\n\t\t\t\t// so instead we'll try looking at the first record to get headers\n\t\t\t\tvar record = store.getAt(0);\n\t\t\t\tif (record) { // don't know what to do if this fails?\n\t\t\t\t\tconfig.headers = record.getFields().map(function(field) {return field.getName()});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// now we get rows\n\t\t\tconfig.rows = [];\n\t\t\tstore.each(function(record) {\n\t\t\t\tvar data = record.getData();\n\t\t\t\tvar cells = config.headers.map(function(header) {return data[header]}); // only from headers\n\t\t\t\tconfig.rows.push(cells);\n\t\t\t}, this);\n\t\t}\n\n\t\t// not sure why config isn't working\n\t\tif (!config.rows && Ext.isArray(config)) {\n\t\t\tconfig.rows = config;\n\t\t}\n\t\tif (!this.getHeaders()) {\n\t\t\tif (!config.headers && !config.noHeaders && config.rows) {\n\t\t\t\tthis.setHeaders(config.rows.shift())\n\t\t\t} else {\n\t\t\t\tthis.setHeaders(Ext.Array.from(config.headers));\n\t\t\t}\n\t\t}\n\t\tthis.setRows(Ext.Array.from(config.rows));\n\t\tthis.setRowKey(config.rowKey ? config.rowKey : this.getHeaders()[0]);\n\n\t\t// if we have no headers, use the index as header\n\t\tif (this.getHeaders().length==0) {\n\t\t\tvar firstRow = this.getRow(0, false);\n\t\t\tif (firstRow) {\n\t\t\t\tthis.setHeaders(firstRow.map(function(cell, i) {return i}));\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar headersMap = {};\n\t\tthis.getHeaders().forEach(function(header, i) {\n\t\t\theadersMap[header] = i;\n\t\t});\n\t\tthis.setHeadersMap(headersMap);\n\t\t\n\t\tthis.reMapRows();\n\t\t\n\t\tthis.callParent();\n\t},\n\taddRow: function(row) {\n\t\tif (Ext.isArray(row))\n\t\tif (Ext.isObject(row)) {\n\t\t\tvar len = this.getRows().length;\n\t\t\tfor (var key in row) {\n\t\t\t\tthis.updateCell(len, key, row[key])\n\t\t\t}\n\t\t\t\n\t\t} else if (Ext.isArray(row)) {\n\t\t\tthis.getRows().push(row);\n\t\t\tvar header = this.getColumnIndex(this.getRowKey());\n\t\t\tif (header!==undefined && row[header]!==undefined) {\n\t\t\t\tthis.getRowsMap()[row[header]] = this.getRows().length-1;\n\t\t\t}\n\t\t}\n\t},\n\teachRecord: function(fn, scope) {\n\t\tvar item, i=0, len=this.getRows().length;\n\t\tfor (; i<len; i++) {\n            item = this.getRecord(i);\n\t\t\tif (fn.call(scope || item, item, i, len) === false) {\n                break;\n            }\t\t\t\n\t\t}\n\t},\n\teachRow: function(fn, asMap, scope) {\n\t\tvar item, i=0, len=this.getRows().length;\n\t\tfor (; i<len; i++) {\n            item = this.getRow(i, asMap);\n\t\t\tif (fn.call(scope || item, item, i, len) === false) {\n                break;\n            }\t\t\t\n\t\t}\n\t},\n\tgetRow: function(index, asMap) {\n\t\tvar r = this.getRowIndex(index);\n\t\tif (asMap) {\n\t\t\tvar row = {};\n\t\t\tvar headers = this.getHeaders();\n\t\t\tExt.Array.from(this.getRows()[r]).forEach(function(item, i) {\n\t\t\t\trow[headers[i] || i] = item;\n\t\t\t}, this);\n\t\t\treturn row;\n\t\t} else {\n\t\t\treturn this.getRows()[r];\n\t\t}\n\t},\n\tgetRecord: function(index) {\n\t\tif (this.model) {return new this.model(this.getRow(index, true))}\n\t},\n\tmapRows: function(fn, asMap, scope) {\n\t\tvar rows = [];\n\t\tthis.eachRow(function(row, i) {\n//\t\t\tif (Object.keys(row).length>0) {\n\t\t\t\trows.push(fn.call(scope || this, row, i))\n//\t\t\t}\n\t\t}, asMap, this)\n\t\treturn rows;\n\t},\n\t\n\t/**\n\t * Update the cell value at the specified row and column.\n\t * \n\t * This will create the row and column as needed. If there's an existing value in the cell,\n\t * it will be added to the new value, unless the `replace` argument is set to true.\n\t * \n\t * @param {Number/String} row The cell's row.\n\t * @param {Number/String} column The cell's column.\n\t * @param {Mixed} value The cell's value.\n\t * @param {boolean} [replace] Replace the current value (if it exists), otherwise\n\t * the value is added to any current value (which is the default behaviour).\n\t */\n\tupdateCell: function(row, column, value, replace) {\n\t\tvar rows = this.getRows();\n\t\tvar r = Ext.isNumber(row) ? row : this.getRowIndex(row);\n\t\tvar c = this.getColumnIndex(column);\n\t\tif (rows[r]===undefined) {rows[r]=[]}\n\t\tif (rows[r][c]===undefined || replace) {rows[r][c]=value}\n\t\telse {rows[r][c]+=value}\n\t\t// add to rowsMap if this is the header\n\t\tif (this.getHeaders()[c]===this.getRowKey()) {\n\t\t\tthis.getRowsMap()[column] = r;\n\t\t}\n\t},\n\t\n\tgetRowIndex: function(key) {\n\t\tif (Ext.isNumber(key)) {return key;}\n\t\tif (Ext.isString(key)) {\n\t\t\tvar rowsMap = this.getRowsMap();\n\t\t\tif (!(key in rowsMap)) {\n\t\t\t\trowsMap[key] = this.getRows().length;\n\t\t\t\tthis.getRows().push(new Array(this.getHeaders().length))\n\t\t\t}\n\t\t\treturn rowsMap[key];\n\t\t}\n\t},\n\t\n\tgetColumnIndex: function(column) {\n\t\tvar headers = this.getHeaders();\n\t\tif (Ext.isNumber(column)) {\n\t\t\tif (headers[column]===undefined) {\n\t\t\t\theaders[column]=column;\n\t\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\t\trow.splice(column, 0, undefined);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn column;\n\t\t} else if (Ext.isString(column)) {\n\t\t\tif (!(column in this.getHeadersMap())) {\n\t\t\t\t// we don't have this column yet, so create it and expand rows\n\t\t\t\tthis.getHeaders().push(column);\n\t\t\t\tthis.getHeadersMap()[column] = this.getHeaders().length-1\n\t\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\t\trow.push(undefined)\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.getHeadersMap()[column]\n\t\t}\n\t},\n\t\n\tgetColumnHeader: function(column) {\n\t\tvar c = this.getColumnIndex(column);\n\t\treturn this.getHeaders()[c];\n\t},\n\t\n\t/**\n\t * Compute the sum of the values in the column.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnSum: function(column) {\n\t\treturn Ext.Array.sum(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Compute the sum of the values in the column.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMean: function(column) {\n\t\treturn Ext.Array.mean(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Get the largest value in the array.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMax: function(column) {\n\t\treturn Ext.Array.max(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Get the smallest value in the array.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMin: function(column) {\n\t\treturn Ext.Array.min(this.getColumnValues(column, true));\n\t},\n\t\n\tgetColumnValues: function(column, clean) {\n\t\tvar c = this.getColumnIndex(column), vals = [];\n\t\tthis.eachRow(function(row) {\n\t\t\tvals.push(row[c]);\n\t\t});\n\t\tif (clean) {return Ext.Array.clean(vals)}\n\t\telse {return vals;}\n\t},\n\t\n\t/**\n\t * @private\n\t */\n\treMapRows: function() {\n\t\tvar rowKey = this.getRowKey();\n\t\tvar rowsMap = {}\n\t\tthis.eachRow(function(row, i) {\n\t\t\tif (rowKey in row) {\n\t\t\t\trowsMap[row[rowKey]] = i;\n\t\t\t}\n\t\t}, true);\n\t\tthis.setRowsMap(rowsMap)\n\t},\n\t\n\tsortByColumn: function(columns) {\n\t\tvar rows = this.getRows(),\n\t\t\tsortColumnsIndices = Ext.Array.from(columns).map(function(column) {\n\t\t\t\tif (Ext.isObject(column)) {\n\t\t\t\t\tfor (key in column) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tindex: this.getColumnIndex(key),\n\t\t\t\t\t\t\tdirection: column[key].indexOf(\"asc\")>-1 ? 'asc' : 'desc'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tindex: this.getColumnIndex(column),\n\t\t\t\t\t\tdirection: \"desc\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\t\trows.sort(function(a, b) {\n\t\t\tfor (var i=0, len=sortColumnsIndices.length; i<len; i++) {\n\t\t\t\tvar header = sortColumnsIndices[i].index\n\t\t\t\tif (a[header]!=b[header]) {\n\t\t\t\t\tif (sortColumnsIndices[i].direction=='asc') {return a[header] > b[header] ? 1 : -1}\n\t\t\t\t\telse {return a[header] > b[header] ? -1 : 1}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.reMapRows();\n\t\treturn this;\n\t},\n\t\n\tloadCorrespondenceAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.CA', 'Voyant.data.store.CAAnalysis', config);\n\t},\n\t\n\tloadPrincipalComponentAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.PCA', 'Voyant.data.store.PCAAnalysis', config);\n\t},\n\t\n\tloadTSNEAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.TSNE', 'Voyant.data.store.TSNEAnalysis', config);\t\t\n\t},\n\t\n\t_doAnalysisLoad: function(tool, storeType, config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tExt.apply(config, {\n\t\t        columnHeaders: true,\n\t\t        rowHeaders: true,\n\t\t        tool: tool,\n\t\t        analysisInput: this.toTsv(),\n\t\t        inputFormat: 'tsv'\n\t\t\t});\n\t\t\tvar store = Ext.create(storeType, {noCorpus: true});\n\t\t\tstore.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(store, records)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation.error.response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n\t},\n\t\n\tembed: function(cmp, config) {\n\t\tif (!config && Ext.isObject(cmp)) {\n\t\t\tconfig = cmp;\n\t\t\tcmp = this.embeddable[0];\n\t\t}\n\t\tconfig = config || {};\n\t\t\n\t\tvar columnHeaders = Ext.Array.from(config.headers || this.getHeaders()).map(function(header) {return this.getColumnHeader(header);}, this);\n\t\t\n\t\tvar json = {\n\t\t\t\trowkey: this.getRowKey(),\n\t\t\t\tconfig: config,\n\t\t\t\theaders: columnHeaders\n\t\t};\n\t\tif (\"headers\" in config) {\n\t\t\tvar columnIndices = Ext.Array.from(config.headers).map(function(header) {return this.getColumnIndex(header);}, this);\n\t\t\tvar rows = [];\n\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\trows.push(columnIndices.map(function(i) {\n\t\t\t\t\treturn row[i]\n\t\t\t\t}))\n\t\t\t})\n\t\t\tExt.apply(json, {\n\t\t\t\trows: rows\n\t\t\t})\n\t\t} else {\n\t\t\tExt.apply(json, {\n\t\t\t\trows: this.getRows()\n\t\t\t})\n\t\t}\n\t\tExt.apply(config, {\n\t\t\ttableJson: JSON.stringify(json)\n\t\t});\n\t\tdelete config.axes;\n\t\tdelete config.series;\n\t\t\n\t\tembed.call(this, cmp, config);\n\t\t\n\t},\n\t\n\ttoTsv: function(config) {\n\t\tvar tsv = this.getHeaders().join(\"\\t\");\n\t\tthis.getRows().forEach(function(row, i) {\n\t\t\tif (config && Ext.isNumber(config) && i>config) {return;}\n\t\t\ttsv += \"\\n\"+row.map(function(cell) {\n\t\t\t\treturn Ext.isString(cell) ? cell.replace(/(\\n|\\t)/g, \"\") : cell;\n\t\t\t}).join(\"\\t\");\n\t\t})\n\t\treturn tsv;\n\t},\n\t\n\tgetString: function(config) {\n\t\tconfig = config || {};\n\t\tvar table = \"<table class='voyant-table' style='\"+(config.width ? ' width: '+config.width : '')+\"' id='\"+(config.id ? config.id : Ext.id())+\"'>\";\n\t\tvar headers = this.getHeaders();\n\t\tif (headers.length) {\n\t\t\ttable+=\"<thead><tr>\";\n\t\t\tfor (var i=0, len = headers.length; i<len; i++) {\n\t\t\t\ttable+=\"<th>\"+headers[i]+\"</th>\";\n\t\t\t}\n\t\t\ttable+=\"</tr></thead>\";\n\t\t}\n\t\ttable+=\"<tbody>\";\n\t\tfor (var i=0, len = Ext.isNumber(config) ? config : this.getRows().length; i<len; i++) {\n\t\t\tvar row = this.getRow(i);\n\t\t\tif (row && Ext.isArray(row)) {\n\t\t\t\ttable+=\"<tr>\";\n\t\t\t\trow.forEach(function(cell) {\n\t\t\t\t\ttable+=\"<td>\"+cell+\"</td>\";\n\t\t\t\t})\n\t\t\t\ttable+=\"</tr>\";\n\t\t\t}\n\t\t}\n\t\ttable+=\"</tbody></table>\";\n\t\treturn table;\n\t}\n});","/*\n * @class NetworkGraph\n * \n * A NetworkGraph can facilitate working with network graph data structures, as well as\n * displaying results (especially with {@link #embed} and {@link show}). \n * Here's a simple example showing the Zipf-Law distribution of the top 20 frequency terms.\n * \n * \tnew Corpus(\"austen\").loadCorpusTerms(20).then(function(corpusTerms) {\n * \t\tvar table = new VoyantTable({rowKey: 0}); // use first column as row key\n * \t\tcorpusTerms.each(function(corpusTerm) {\n *\t\t\ttable.addRow([corpusTerm.getTerm(), corpusTerm.getRawFreq()]);\n * \t\t});\n * \t\ttable.embed(\"voyantchart\"); // graph table as line chart\n * \t});\n */\nExt.define('Voyant.data.util.NetworkGraph', {\n\talternateClassName: [\"NetworkGraph\"],\n\tmixins: ['Voyant.notebook.util.Embed'],\n\tembeddable: [\"Voyant.widget.VoyantNetworkGraph\"],\n\tconfig: {\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tedges: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tnodes: []\n\n\t},\n\n\tconstructor: function(config, opts) {\n\t\tconfig = config || {};\n\t\tthis.setEdges(Ext.Array.from(config.edges));\n\t\tthis.setNodes(Ext.Array.from(config.nodes));\n\t\tthis.callParent([config]);\n\t},\n\taddEdge: function(src, target, value) {\n\t\tthis.getEdges().push(Ext.isObject(src) ? src : {source: src, target: target, value: value});\n\t},\n\tgetNode: function(term) {\n\t\treturn Ext.Array.binarySearch(this.getNodes(), term, undefined, undefined, function(lhs, rhs) {\n\t\t\treturn (lhs.term < rhs.term) ? -1 : ((lhs.term > rhs.term) ? 1 : 0);\n\t\t})\n\t},\n\tembed: function(cmp, config) {\n\t\tif (!config && Ext.isObject(cmp)) {\n\t\t\tconfig = cmp;\n\t\t\tcmp = this.embeddable[0];\n\t\t}\n\t\tconfig = config || {};\n\t\tvar json = {\n\t\t\t\tedges: this.getEdges(),\n\t\t\t\tnodes: this.getNodes(),\n\t\t\t\tconfig: config\n\t\t};\n\t\tif (config.limit && json.edges.length>config.limit) {\n\t\t\tjson.edges = json.edges.slice(0, config.limit);\n\t\t\tvar terms = {};\n\t\t\tjson.edges.forEach(function(edge) {\n\t\t\t\tterms[\"_\"+edge.source] = true;\n\t\t\t\tterms[\"_\"+edge.target] = true;\n\t\t\t})\n\t\t\tvar nodes = [];\n\t\t\tjson.nodes.forEach(function(node) {\n\t\t\t\tif (\"_\"+node.term in terms) {\n\t\t\t\t\tnodes.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\tjson.nodes = nodes;\n\t\t}\n\t\tExt.apply(config, {\n\t\t\tjsonData: JSON.stringify(json)\n\t\t})\n\t\tembed.call(this, cmp, config);\n\t},\n\t\n\tgetString: function(config) {\n\t\tconfig = config || {};\n\t\treturn this.getEdges().map(function(edge) {edge.source+\"-\"+edge.target}).join(\"; \");\n\t}\n});","Ext.define('Voyant.data.util.Geonames', {\n    mixins: ['Voyant.util.Localization'],\n    statics: {\n    \t\ti18n: {\n    \t\t}\n    },\n\n\tconfig: {\n\t\tdata: {},\n\t\tqueries: undefined,\n\t\tcorpus: undefined,\n\t\tisIncrementalLoadingOccurrences: false,\n\t\tpreviousParams: {}\n\t},\n\tconstructor: function(config, opts) {\n\t\tconfig = config || {};\n\t\tthis.callParent([config]);\n\t\tthis.setCorpus(config.corpus);\n\t},\n\tload: function(params, dfd) {\n\t\tthis.setPreviousParams(params);\n\t\tdfd = dfd || Voyant.application.getDeferred(this);\n\t\tvar me = this, localParams = {\n\t\t\tcorpus: this.getCorpus().getAliasOrId(),\n\t\t\tqueries: this.getQueries(),\n\t\t\ttool: 'corpus.Dreamscape',\n\t\t\tlimit: 200\n\t\t};\n\t\tExt.apply(localParams, params || {});\n\t\t\n\t\tif (!params.noOverwrite) {\n\t\t\tme.setData({});\n\t\t}\n\n\t\tExt.Ajax.request({\n\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\tparams: localParams,\n\t\t\tscope: this\n\t\t}).then(function(response) {\n\t\t\tvar data = Ext.JSON.decode(response.responseText);\n\t\t\tif (data && data.dreamscape && data.dreamscape.progress) {\n\t\t\t\tnew Voyant.widget.ProgressMonitor({\n\t\t\t\t\tprogress: data.dreamscape.progress,\n\t\t\t\t\tmaxMillisSinceStart: 1000*60*60, // an hour (!)\n\t\t\t\t\ttool: 'corpus.Dreamscape',\n\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\tme.load.call(me, params, dfd);\n\t\t\t\t\t},\n\t\t\t\t\tfailure: function(responseOrProgress) {\n\t\t\t\t\t\tVoyant.application.showResponseError(me.localize(\"failedToFetchGeonames\"), responseOrProgress);\n\t\t\t\t\t},\n\t\t\t\t\tscope: me\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (data && data.dreamscape && !data.dreamscape.progress) {\n\t\t\t\tif (!params.noOverwrite) {\n\t\t\t\t\tme.setData(data.dreamscape);\n\t\t\t\t}\n\t\t\t\tdfd.resolve(data);\n\t\t\t}\n\t\t}, function(response) {\n\t\t\tVoyant.application.showResponseError(me.localize('failedToFetchGeonames'), response);\n\t\t});\n\t\treturn dfd.promise;\n\t},\n\tgetCitiesCount: function() {\n\t\treturn Object.keys(this.getData().locations.locations).length;\n\t},\n\tgetTotalCitiesCount: function() {\n\t\treturn this.getData().locations.total;\n\t},\n\thasMoreCities: function() {\n\t\treturn this.getCitiesCount()<this.getTotalCitiesCount();\n\t},\n\teachCity: function(fn, scope, max) {\n\t\tvar locations = this.getData().locations.locations, orderedLocations = [];\n\t\tfor (var id in locations) { // create a sortable list with id\n\t\t\torderedLocations.push(Ext.apply(locations[id], {id: id}))\n\t\t}\n\t\torderedLocations.sort(function(c1, c2) { // order by rawFreq (count)\n\t\t\treturn c1.rawFreq == c2.rawFreq ? c1.label - c2.label : c2.rawFreq - c1.rawFreq;\n\t\t});\n\t\tif (max && orderedLocations.length>max) {orderedLocations = orderedLocations.slice(0,max)}\n\t\torderedLocations.forEach(function(location) {fn.call(scope, location);});\n\t},\n\tgetConnectionsCount: function() {\n\t\treturn this.getData().connections.connections.length;\n\t},\n\tgetTotalConnectionsCount: function() {\n\t\treturn this.getData().connections.total;\n\t},\n\teachConnection: function(fn, scope, max) {\n\t\tvar connections = this.getData().connections.connections,\n\t\t\tlocations = this.getData().locations.locations;\n\t\t\torderedConnections = [];\n\t\tfor (var i=0, len=connections.length; i<len; i++) {\n\t\t\tfn.call(scope, {\n\t\t\t\tsource: Ext.apply({id: connections[i].source}, locations[connections[i].source]),\n\t\t\t\ttarget: Ext.apply({id: connections[i].target}, locations[connections[i].target]),\n\t\t\t\trawFreq: connections[i].rawFreq\n\t\t\t});\n\t\t\tif (i>max) {break;}\n\t\t}\n\t},\n\tgetConnectionOccurrence: function(index) {\n\t\tif (!this.getData().locations) {return undefined;}\n\t\tvar connectionOccurrencesData = this.getData().connectionOccurrences,\n\t\t\tconnectionOccurrences = connectionOccurrencesData.connectionOccurrences;\n\t\t\tlocations = this.getData().locations.locations;\n\t\tif (!this.getIsIncrementalLoadingOccurrences() && connectionOccurrences.length<connectionOccurrencesData.total && index+100>connectionOccurrences.length) {\n\t\t\tthis.setIsIncrementalLoadingOccurrences(true);\n\t\t\tvar me = this;\n\t\t\tvar params = {};\n\t\t\tExt.apply(params, this.getPreviousParams);\n\t\t\tExt.apply(params, {\n\t\t\t\tstart: connectionOccurrences.length,\n\t\t\t\tnoOverwrite: true,\n\t\t\t\tsuppressLocations: true,\n\t\t\t\tsuppressConnections: true\n\t\t\t});\n\t\t\tthis.load(params).then(function(data) {\n\t\t\t\tme.setIsIncrementalLoadingOccurrences(false);\n\t\t\t\tme.getData().connectionOccurrences.connectionOccurrences = connectionOccurrences.concat(data.dreamscape.connectionOccurrences.connectionOccurrences);\n\t\t\t})\n\t\t}\n\t\tif (connectionOccurrences && connectionOccurrences[index]) {\n\t\t\tvar occurrence = connectionOccurrences[index];\n\t\t\toccurrence.index = index;\n\t\t\tExt.apply(occurrence.source, locations[occurrence.source.location]);\n\t\t\tExt.apply(occurrence.target, locations[occurrence.target.location]);\n\t\t\treturn occurrence;\n\t\t}\n\t\treturn null;\n\t},\n    getAllConnectionOccurrences: function(sourceId, targetId) {\n    \tdebugger\n        // TODO return all occurences of connection with given source and target, including those not loaded yet\n        var occurences = [];\n        for (var i = 0; i < this.getTotalConnectionsCount(); i++) {\n            var occurence = this.getConnectionOccurrence(i);\n            if (occurence && occurence.target.id == targetId && occurence.source.id == sourceId) {\n                occurences.push(occurence);\n            }\n        }\n        return occurences\n    }\n});","/*\r\n * @class Corpus\r\n * Corpus is possibly the most important class since in most cases you'll first create/load a corpus and then\r\n * interact with data derived from the corpus. In the simplest scenario you can create/load a corpus with a\r\n * corpus ID, a text string, a URL, or an array of text strings or URLs (see the {@link #constructor} and \r\n * {@link #input} config for a bit more information).\r\n * \r\n * \tnew Corpus(\"austen\"); // load an existing corpus\r\n * \r\n * \tnew Corpus(\"Hello Voyant!\"); // load a corpus with the specified text string\r\n * \r\n * \tnew Corpus(\"http://hermeneuti.ca/\"); // load a corpus with a URL\r\n * \r\n * It's important to understand that the constructor actually returns a promise for a corpus, since the corpus\r\n * data is loaded asynchronously. All documented methods below handle the promise properly.\r\n * \r\n * \tnew Corpus(\"Hello Voyant!\").show(); // the show method is called when the promise is filled\r\n * \r\n * You can also handle the promise yourself using {@link Ext.promise.Promise#then then}.\r\n * \r\n * \tnew Corpus(\"Hello Voyant!\").then(function(corpus) {\r\n * \t\tcorpus.show(); // essentially the same as above (but more work:)\r\n * \t});\r\n * \r\n * There are many parameters that can be specified when creating a corpus:\r\n * \r\n * - **sources**: {@link #corpus}, {@link #input}\r\n * - **formats**:\r\n * \t- **Text**: {@link #inputRemoveFrom}, {@link #inputRemoveFromAfter}, {@link #inputRemoveUntil}, {@link #inputRemoveUntilAfter}\r\n * \t- **XML**: {@link #xmlAuthorXpath}, {@link #xmlCollectionXpath}, {@link #xmlContentXpath}, {@link #xmlExtraMetadataXpath}, {@link #xmlKeywordXpath}, {@link #xmlPubPlaceXpath}, {@link #xmlPublisherXpath}, {@link #xmlTitleXpath}\r\n * \t- **Tables**: {@link #tableAuthor}, {@link #tableContent}, {@link #tableDocuments}, {@link #tableNoHeadersRow}, {@link #tableTitle}\r\n * - **other**: {@link #inputFormat}, {@link #subTitle}, {@link #title}, {@link #tokenization}\r\n */\r\nExt.define('Voyant.data.model.Corpus', {\r\n\talternateClassName: [\"Corpus\"],\r\n    mixins: ['Voyant.notebook.util.Embed','Voyant.util.Transferable','Voyant.util.Localization'],\r\n    transferable: ['loadCorpusTerms','loadTokens','getPlainText','getText','getWords','getString','getLemmasArray'],\r\n//    transferable: ['getSize','getId','getDocument','getDocuments','getCorpusTerms','getDocumentsCount','getWordTokensCount','getWordTypesCount','getDocumentTerms'],\r\n    embeddable: ['Voyant.panel.Summary','Voyant.panel.Cirrus','Voyant.panel.Documents','Voyant.panel.CorpusTerms','Voyant.panel.Reader','Voyant.panel.Trends','Voyant.panel.TermsRadio','Voyant.panel.DocumentTerms','Voyant.panel.TermsBerry','Voyant.panel.CollocatesGraph','Voyant.panel.Contexts','Voyant.panel.WordTree','Voyant.panel.Veliza','Voyant.panel.ScatterPlot','Voyant.panel.Topics'],\r\n\trequires: ['Voyant.util.ResponseError','Voyant.data.store.CorpusTerms','Voyant.data.store.Documents'/*,'Voyant.panel.Documents'*/],\r\n    extend: 'Ext.data.Model',\r\n    config: {\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} corpus The ID of a previously created corpus.\r\n    \t * \r\n    \t * A corpus ID can be used to try to retrieve a corpus that has been previously created.\r\n    \t * Typically the corpus ID is used as a first string argument, with an optional second\r\n    \t * argument for other parameters (especially those to recreate the corpus if needed).\r\n    \t * \r\n    \t * \t\tnew Corpus(\"goldbug\");\r\n    \t * \r\n    \t * \t\tnew Corpus(\"goldbug\", {\r\n    \t *\t\t\t// if corpus ID \"goldbug\" isn't found, use the input\r\n    \t * \t\t\tinput: \"https://gist.githubusercontent.com/sgsinclair/84c9da05e9e142af30779cc91440e8c1/raw/goldbug.txt\",\r\n    \t * \t\t\tinputRemoveUntil: 'THE GOLD-BUG',\r\n    \t * \t\t\tinputRemoveFrom: 'FOUR BEASTS IN ONE'\r\n    \t * \t\t});\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String/String[]} input Input sources for the corpus.\r\n    \t * \r\n    \t * The input sources can be either normal text or URLs (starting with `http`).\r\n    \t * \r\n    \t * Typically input sources are specified as a string or an array in the first argument, with an optional second argument for other parameters.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"Hello Voyant!\"); // one document with this string\r\n    \t * \r\n    \t * \t\tnew Corpus([\"Hello Voyant!\", \"How are you?\"]); // two documents with these strings\r\n    \t * \r\n    \t * \t\tnew Corpus(\"http://hermeneuti.ca/\"); // one document from URL\r\n    \t * \r\n    \t * \t\tnew Corpus([\"http://hermeneuti.ca/\", \"https://en.wikipedia.org/wiki/Voyant_Tools\"]); // two documents from URLs\r\n    \t * \r\n    \t * \t\tnew Corpus(\"Hello Voyant!\", \"http://hermeneuti.ca/\"]); // two documents, one from string and one from URL\r\n    \t * \r\n    \t * \t\tnew Corpus(\"https://gist.githubusercontent.com/sgsinclair/84c9da05e9e142af30779cc91440e8c1/raw/goldbug.txt\", {\r\n    \t * \t\t\tinputRemoveUntil: 'THE GOLD-BUG',\r\n    \t * \t\t\tinputRemoveFrom: 'FOUR BEASTS IN ONE'\r\n    \t * \t\t});\r\n    \t * \r\n    \t * \t\t// use a corpus ID but also specify an input source if the corpus can't be found\r\n    \t * \t\tnew Corpus(\"goldbug\", {\r\n    \t * \t\t\tinput: \"https://gist.githubusercontent.com/sgsinclair/84c9da05e9e142af30779cc91440e8c1/raw/goldbug.txt\",\r\n    \t * \t\t\tinputRemoveUntil: 'THE GOLD-BUG',\r\n    \t * \t\t\tinputRemoveFrom: 'FOUR BEASTS IN ONE'\r\n    \t * \t\t});\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} inputFormat The input format of the corpus (the default is to auto-detect).\r\n    \t * \r\n    \t * The auto-detect format is usually reliable and inputFormat should only be used if the default\r\n    \t * behaviour isn't desired. Most of the relevant values are used for XML documents:\r\n    \t * \r\n    \t * - **DTOC**: Dynamic Table of Contexts XML format\r\n    \t * - **HTML**: Hypertext Markup Language\r\n    \t * - **RSS**: Really Simple Syndication XML format\r\n    \t * - **TEI**: Text Encoding Initiative XML format\r\n    \t * - **TEICORPUS**: Text Encoding Initiative Corpus XML format\r\n    \t * - **TEXT**: plain text\r\n    \t * - **XML**: treat the document as XML (sometimes overridding auto-detect of XML vocabularies like RSS and TEI)\r\n    \t * \r\n    \t * Other formats include **PDF**, **MSWORD**, **XLSX**, **RTF**, **ODT**, and **ZIP** (but again, these rarely need to be specified).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} tableDocuments Determine what is a document in a table (the entire table, by row, by column); only used for table-based documents.\r\n    \t * \r\n    \t * Possible values are:\r\n    \t * \r\n    \t * - **undefined or blank** (default): the entire table is one document\r\n    \t * - **rows**: each row of the table is a separate document\r\n    \t * - **columns**: each column of the table is a separate document\r\n    \t * \r\n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} tableContent Determine how to extract body content from the table; only used for table-based documents.\r\n    \t * \r\n    \t * Columns are referred to by numbers, the first is column 1 (not 0).\r\n    \t * You can specify separate columns by using a comma or you can combined the contents of columns/cells by using a plus sign.\r\n    \t * \r\n    \t * Some examples:\r\n    \t * \r\n    \t * - **1**: use column 1\r\n    \t * - **1,2**: use columns 1 and 2 separately\r\n    \t * - **1+2,3**: combine columns 1 and two and use column 3 separately\r\n    \t * \r\n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} tableAuthor Determine how to extract the author from each document; only used for table-based documents.\r\n    \t * \r\n    \t * Columns are referred to by numbers, the first is column 1 (not 0).\r\n    \t * You can specify separate columns by using a comma or you can combined the contents of columns/cells by using a plus sign.\r\n    \t * \r\n    \t * Some examples:\r\n    \t * \r\n    \t * - **1**: use column 1\r\n    \t * - **1,2**: use columns 1 and 2 separately\r\n    \t * - **1+2,3**: combine columns 1 and two and use column 3 separately\r\n    \t * \r\n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} tableTitle Determine how to extract the title from each document; only used for table-based documents.\r\n    \t * \r\n    \t * Columns are referred to by numbers, the first is column 1 (not 0).\r\n    \t * You can specify separate columns by using a comma or you can combined the contents of columns/cells by using a plus sign.\r\n    \t * \r\n    \t * Some examples:\r\n    \t * \r\n    \t * - **1**: use column 1\r\n    \t * - **1,2**: use columns 1 and 2 separately\r\n    \t * - **1+2,3**: combine columns 1 and two and use column 3 separately\r\n    \t * \r\n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} tableContent Determine how to extract body content from the table; only used for table-based documents.\r\n    \t * \r\n    \t * Columns are referred to by numbers, the first is column 1 (not 0).\r\n    \t * You can specify separate columns by using a comma or you can combined the contents of columns/cells by using a plus sign.\r\n    \t * \r\n    \t * Some examples:\r\n    \t * \r\n    \t * - **1**: use column 1\r\n    \t * - **1,2**: use columns 1 and 2 separately\r\n    \t * - **1+2,3**: combine columns 1 and two and use column 3 separately\r\n    \t * \r\n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} tableNoHeadersRow Determine if the table has a first row of headers; only used for table-based documents.\r\n    \t * \r\n    \t * Provide a value of \"true\" if there is no header row, otherwise leave it blank or undefined (default).\r\n    \t * \r\n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} tokenization The tokenization strategy to use\r\n    \t * \r\n    \t * This should usually be undefined, unless specific behaviour is required. These are the valid values:\r\n    \t * \r\n    \t * - **undefined or blank**: use the default tokenization (which uses Unicode rules for word segmentation)\r\n    \t * - **wordBoundaries**: use any Unicode character word boundaries for tokenization\r\n    \t * - **whitespace**: tokenize by whitespace only (punctuation and other characters will be kept with words)\r\n    \t * \r\n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tokenization).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} xmlContentXpath The XPath expression that defines the location of document content (the body); only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><head>Hello world!</head><body>This is Voyant!</body></doc>\", {\r\n    \t * \t\t\t xmlContentXpath: \"//body\"\r\n    \t * \t\t}); // document would be: \"This is Voyant!\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} xmlTitleXpath The XPath expression that defines the location of each document's title; only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><title>Hello world!</title><body>This is Voyant!</body></doc>\", {\r\n    \t * \t\t\t xmlTitleXpath: \"//title\"\r\n    \t * \t\t}); // title would be: \"Hello world!\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n\r\n    \t/**\r\n    \t * @cfg {String} xmlAuthorXpath The XPath expression that defines the location of each document's author; only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><author>St\u00e9fan Sinclair</author><body>This is Voyant!</body></doc>\", {\r\n    \t * \t\t\t xmlAuthorXpath: \"//author\"\r\n    \t * \t\t}); // author would be: \"St\u00e9fan Sinclair\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} xmlPubPlaceXpath The XPath expression that defines the location of each document's publication place; only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><pubPlace>Montreal</pubPlace><body>This is Voyant!</body></doc>\", {\r\n    \t * \t\t\t xmlPubPlaceXpath: \"//pubPlace\"\r\n    \t * \t\t}); // publication place would be: \"Montreal\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n\r\n    \t/**\r\n    \t * @cfg {String} xmlPublisherXpath The XPath expression that defines the location of each document's publisher; only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><publisher>The Owl</publisher><body>This is Voyant!</body></doc>\", {\r\n    \t * \t\t\t xmlPublisherXpath: \"//publisher\"\r\n    \t * \t\t}); // publisher would be: \"The Owl\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n\r\n    \t/**\r\n    \t * @cfg {String} xmlKeywordXpath The XPath expression that defines the location of each document's keywords; only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><keyword>text analysis</keyword><body>This is Voyant!</body></doc>\", {\r\n    \t * \t\t\t xmlKeywordXpath: \"//keyword\"\r\n    \t * \t\t}); // publisher would be: \"text analysis\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} xmlCollectionXpath The XPath expression that defines the location of each document's collection name; only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><collection>documentation</collection><body>This is Voyant!</body></doc>\", {\r\n    \t * \t\t\t xmlCollectionXpath: \"//collection\"\r\n    \t * \t\t}); // publisher would be: \"documentation\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} xmlGroupByXpath The XPath expression that defines the location of each document's collection name; only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><sp s='Juliet'>Hello!</sp><sp s='Romeo'>Hi!</sp><sp s='Juliet'>Bye!</sp></doc>\", {\r\n    \t * \t\t\t xmlDocumentsXPath: '//sp',\r\n    \t *           xmlGroupByXpath: \"//@s\"\r\n    \t * \t\t}); // two docs: \"Hello! Bye!\" (Juliet) and \"Hi!\" (Romeo)\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} xmlExtraMetadataXpath A value that defines the location of other metadata; only used for XML-based documents.\r\n    \t * \r\n    \t * \t\tnew Corpus(\"<doc><tool>Voyant</tool><phase>1</phase><body>This is Voyant!</body></doc>\", {\r\n    \t * \t\t\t xmlExtraMetadataXpath: \"tool=//tool\\nphase=//phase\"\r\n    \t * \t\t}); // tool would be \"Voyant\" and phase would be \"1\"\r\n    \t * \r\n    \t * Note that `xmlExtraMetadataXpath` is a bit different from the other XPath expressions in that it's\r\n    \t * possible to define multiple values (each on its own line) in the form of name=xpath.\r\n    \t * \r\n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} xmlExtractorTemplate Pass the XML document through the XSL template located at the specified URL before extraction (this is ignored in XML-based documents).\r\n    \t * \r\n    \t * This is an advanced parameter that allows you to define a URL of an XSL template that can\r\n    \t * be called *before* text extraction (in other words, the other XML-based parameters apply\r\n    \t * after this template has been processed).\r\n    \t */\r\n\r\n    \t/**\r\n    \t * @cfg {String} inputRemoveUntil Omit text up until the start of the matching regular expression (this is ignored in XML-based documents).\r\n    \t * \r\n    \t * \t\tnew Corpus(\"Hello world! This is Voyant!\", {\r\n    \t * \t\t\t inputRemoveUntil: \"This\"\r\n    \t * \t\t}); // document would be: \"This is Voyant!\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with Text](#!/guide/corpuscreator-section-text).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} inputRemoveUntilAfter Omit text up until the end of the matching regular expression (this is ignored in XML-based documents).\r\n    \t * \r\n    \t * \t\tnew Corpus(\"Hello world! This is Voyant!\", {\r\n    \t * \t\t\t inputRemoveUntilAfter: \"world!\"\r\n    \t * \t\t}); // document would be: \"This is Voyant!\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with Text](#!/guide/corpuscreator-section-text).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} inputRemoveFrom Omit text from the start of the matching regular expression (this is ignored in XML-based documents).\r\n    \t * \r\n    \t * \t\tnew Corpus(\"Hello world! This is Voyant!\", {\r\n    \t * \t\t\t inputRemoveFrom: \"This\"\r\n    \t * \t\t}); // document would be: \"Hello world!\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with Text](#!/guide/corpuscreator-section-text).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} inputRemoveFromAfter Omit text from the end of the matching regular expression (this is ignored in XML-based documents).\r\n    \t * \r\n    \t * \t\tnew Corpus(\"Hello world! This is Voyant!\", {\r\n    \t * \t\t\t inputRemoveFromAfter: \"world!\"\r\n    \t * \t\t}); // document would be: \"Hello world!\"\r\n    \t * \r\n    \t * See also [Creating a Corpus with Text](#!/guide/corpuscreator-section-text).\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} subTitle A sub-title for the corpus.\r\n    \t * \r\n    \t * This is currently not used, except in the Dynamic Table of Contexts skin. Still, it may be worth specifying a subtitle for later use.\r\n    \t */\r\n    \t\r\n    \t/**\r\n    \t * @cfg {String} title A title for the corpus.\r\n    \t * \r\n    \t * This is currently not used, except in the Dynamic Table of Contexts skin. Still, it may be worth specifying a title for later use.\r\n    \t */\r\n    \t \r\n    \t /**\r\n    \t * @cfg {String} curatorTsv a simple TSV of paths and labels for the DToC interface\r\n    \t *\r\n    \t * The DToC skin allows curation of XML tags and attributes in order to constrain the entries shown in the interface or to provide friendlier labels. This assumes plain text unicode input with one definition per line where the simple XPath expression is separated by a tab from a label.\r\n    \t *\r\n    \t *   \t p    \t paragraph\r\n    \t *   \t ref[@target*=\"religion\"]    \t religion\r\n    \t *\r\n    \t  * For more information see the DToC documentation on [Curating Tags](http://cwrc.ca/Documentation/public/index.html#DITA_Files-Various_Applications/DToC/CuratingTags.html)\r\n    \t */\r\n    \t \r\n    \t\r\n    \t\r\n    \tdocumentsStore: undefined\r\n    },\r\n    statics: {\r\n    \ti18n: {}\r\n    },\r\n    fields: [\r\n         {name: 'documentsCount', type: 'int'},\r\n         {name: 'lexicalTokensCount', type: 'int'},\r\n         {name: 'lexicalTypesCount', type: 'int'},\r\n         {name: 'createdTime', type: 'int'},\r\n         {name: 'createdDate', type: 'date', dateFormat: 'c'},\r\n         {name: 'title', type: 'string'},\r\n         {name: 'subTitle', type: 'string'},\r\n         {name: 'languagueCodes', type: 'string'}\r\n    ],\r\n    \r\n\t/**\r\n     * Create a promise for a new Corpus with relevant data loaded.\r\n     * \r\n     * The typical usage in Spyral is to call {@link #assign} in a first code block:\r\n     * \r\n     * \t\tnew Corpus(\"Hello Voyant!\").assign(\"corpus\");\r\n     * \r\n     * Then use the named variable in a subsequent code block:\r\n     * \r\n     * \t  corpus.show();\r\n     * \r\n     * Alternatively, the returned promise can be chained with {@link Ext.promise.Promise#then then}\r\n     * and a function argument that receives the Corpus as an argument.\r\n     * \r\n     * \tvar corpus;\r\n     * \tnew Corpus(\"Hello Voyant!\").then(function(data) {\r\n     * \t\tcorpus = data;\r\n     * \t\tcorpus.show();\r\n     * \t});\r\n     * \r\n     * The following scenarios are possible for the config argument:\r\n     * \r\n     * - a string that looks like a corpus ID (not a URL and no spaces): treated as a {@link #corpus} config\r\n     * - a string that doesn't look like a corpus ID: treated as an {@link #input} config\r\n     * - an array of strings: treated as an array of {@link #input} config values\r\n     * - an object: treated a normal config object\r\n     * \r\n     * As such, these two constructions do the same thing:\r\n     * \r\n     * \tnew Corpus(\"Hello World!\");\r\n     * \tnew Corpus({input: \"Hello World!\"});\r\n\t * @param  {String|String[]|Object} source The source document(s) as a text string, a URL, an array of text strings and URLs, or a config object.\r\n     * @param {String|String[]|Object} [config] An additional config to use with the source.\r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return a Corpus but a promise to return a Corpus when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * Corpus as an argument, as per the example above).\r\n\t */\r\n\tconstructor : function(source, config) {\r\n\t\tsource = source || {};\r\n\t\tconfig = config || {};\r\n\t\t\t\t\r\n\t\tthis.callParent([]); // only send config, not source\r\n\t\t\r\n\t\tvar dfd = Voyant.application.getDeferred(this);\r\n\t\t\r\n\t\tif (Ext.isString(source)) { // a string could be a corpus ID or an input string (text or URL)\r\n\t\t\tif (/\\s/.test(source)==false && source.indexOf(\":\")==-1) { // looks like a corpus ID\r\n\t\t\t\tExt.apply(config, {\r\n\t\t\t\t\tcorpus: source\r\n\t\t\t\t});\r\n\t\t\t} else { // looks like input (text or URL)\r\n\t\t\t\tExt.apply(config, {\r\n\t\t\t\t\tinput: source\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (Ext.isArray(source)) { // assume we have an array of texts or URLs\r\n\t\t\tExt.apply(config, {\r\n\t\t\t\tinput: source\r\n\t\t\t});\r\n\t\t} else if (Ext.isObject(source)) { // copy the source to the config\r\n\t\t\tExt.apply(config, source);\r\n\t\t} else {\r\n\t\t\tVoyant.application.showError(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof source)+\") \"+source);\r\n\t\t\tExt.defer(function() {\r\n\t\t\t\tdfd.reject(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof source)+\") \"+source)\r\n\t\t\t}, 50, this);\r\n\t\t\treturn dfd.promise;\r\n\t\t}\r\n\t\t\r\n\t\tif (Ext.isObject(config)) {\r\n\t\t\t\r\n\t\t\tif (!config.corpus && !config.input && !config.inlineData) {\r\n\t\t\t\tVoyant.application.showError(this.localize(\"noCorpusOrInput\")+\": \"+config);\r\n\t\t\t\tExt.defer(function() {\r\n\t\t\t\t\tdfd.reject(this.localize(\"noCorpusOrInput\")+\": \"+config)\r\n\t\t\t\t}, 50, this);\r\n\t\t\t\treturn dfd.promise;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tExt.apply(config, {tool: 'corpus.CorpusMetadata'})\r\n\r\n\t\t\tvar me = this;\r\n\t\t\tvar promise = Ext.Ajax.request({\r\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\t\tparams: config\r\n\t\t\t}).then(function(response) {\r\n\t\t\t\tme.set(Ext.JSON.decode(response.responseText).corpus.metadata);\r\n\t\t\t\t// removed calls to set title and subtitle which should now be in metadata\r\n\t\t\t\tif (config.title || config.subTitle) {\r\n\t\t\t\t\tme.set('title', config.title);\r\n\t\t\t\t\tme.set('subTitle', config.subTitle);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// (removed calls for title and subtitle which should now be part of metadata\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn me;\r\n\t\t\t}, function(response){\r\n\t\t\t\tVoyant.application.showResponseError(me.localize('failedCreateCorpus'), response);\r\n\t\t\t}).then(function(corpus) {\r\n\t\t\t\tif (corpus.getDocumentsCount()==0) {\r\n\t\t\t\t\tVoyant.application.showError(me.localize(\"thisCorpus\")+\" \"+me.localize(\"isEmpty\")+\".\");\r\n\t\t\t\t}\r\n\t\t\t\tif (!('docsLimit' in config) || (config.docsLimit!==false && config.docsLimit>0)) {\r\n\t\t\t\t\tme.getDocuments().load({\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tlimit: ('docsLimit' in config) ? config.docsLimit : me.getDocumentsCount()\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t\t\tme.setDocumentsStore(this);\r\n\t\t\t\t\t\t\t\tdfd.resolve(corpus)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdfd.reject(operation)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdfd.resolve(corpus)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn dfd.promise\r\n\t\t} else {\r\n\t\t\tVoyant.application.showError(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof config)+\") \"+config);\r\n\t\t\tExt.defer(function() {\r\n\t\t\t\tdfd.reject(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof config)+\") \"+config)\r\n\t\t\t}, 50, this);\r\n\t\t\treturn dfd.promise;\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetId: function() {\r\n\t\t// overrides the getId() function from the model to handle promises\r\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('id');\t\t\r\n\t},\r\n\t\r\n\t\r\n\tgetAliasOrId: function() {\r\n\t\t// overrides the getId() function from the model to handle promises\r\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : (this.get('alias') || this.get('id'));\t\t\r\n\t},\r\n\t\r\n\t/**\r\n     * Create a promise for {@link Voyant.data.store.CorpusTerms Corpus Terms}.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the {@link Voyant.data.store.CorpusTerms Corpus Terms} as an argument.\r\n     * \r\n     * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\r\n     * \t\tcorpusTerms.show();\r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of corpus terms to load (see {@link Voyant.data.store.CorpusTerms#limit})\r\n     * - otherwise this is a regular config object\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return corpus terms but a promise to return a corpus terms when they're finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * corpus terms as an argument, as per the example above).\r\n\t */\r\n\tloadCorpusTerms: function(config) {\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\r\n\t\t} else {\r\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (Ext.isNumber(config)) {\r\n\t\t\t\tconfig = {limit: config};\r\n\t\t\t}\r\n\t\t\tExt.applyIf(config, {\r\n\t\t\t\tlimit: 0\r\n\t\t\t})\r\n\t\t\tvar corpusTerms = this.getCorpusTerms();\r\n\t\t\tcorpusTerms.load({\r\n\t\t\t\tparams: config,\r\n\t\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\tdfd.resolve(corpusTerms)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdfd.reject(operation)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn dfd.promise\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n     * Create a promise for {@link Voyant.data.store.Tokens Tokens}.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the {@link Voyant.data.store.Tokens Tokens} as an argument.\r\n     * \r\n     * \tnew Corpus(\"Hello Voyant!\").loadTokens().then(function(tokens) {\r\n     * \t\ttokens.show();\r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of corpus terms to load (see {@link Voyant.data.store.CorpusTerms#limit})\r\n     * - otherwise this is a regular config object\r\n     * \t- **limit**: the maximum number of tokens to return (default is no limit)\r\n     * \t- **perDocLimit**: the maximum number of tokens to return per document\r\n     * \t- **start**: where to start (when pageing, default is 0)\r\n     * \t- **noOthers**: determine if only word tokens are returned (default is false)\r\n     * \t- **withPosLemmas**: try to populate pos (part-of-speech) tags and lemmas (only works in English for now)\r\n     * \t- **docIndex**: a comma-separated list of integers of document indices\r\n     * \t- **docId**: a comma-separated list of document IDs\r\n     * \t- **stopList**: the ID of an existing stopList resource or an array of words to skip\r\n     * \t- **whitelist**: the ID of an existing whitelist resource or an array of words to keep\r\n     * \r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return tokens but a promise to return tokens when they're finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * tokens as an argument, as per the example above).\r\n\t */\r\n\tloadTokens: function(config) {\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\r\n\t\t} else {\r\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (Ext.isNumber(config)) {\r\n\t\t\t\tconfig = {limit: config};\r\n\t\t\t}\r\n\t\t\tExt.applyIf(config, {\r\n\t\t\t\tlimit: 0\r\n\t\t\t})\r\n\t\t\tvar tokens = this.getTokens();\r\n\t\t\ttokens.load({\r\n\t\t\t\tparams: config,\r\n\t\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\tdfd.resolve(tokens)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdfd.reject(operation)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn dfd.promise\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetCorpusTerms: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.CorpusTerms\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetTokens: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.Tokens\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\teach: function(fn, scope) {\r\n\t\tthis.getDocuments().each(function(doc, i) {\r\n\t\t\tfn.call(scope || doc, doc, i);\r\n\t\t})\r\n\t},\r\n\t\r\n\tmap: function(fn, scope) {\r\n\t\treturn this.getDocuments().getRange().map(function(doc, i) {\r\n\t\t\treturn fn.call(scope || doc, doc, i)\r\n\t\t}, scope || this)\r\n\t},\r\n\t\r\n\tgetCorpusCollocates: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.CorpusCollocates\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocumentQueryMatches: function(config) {\r\n\t\t// not expected to be called before corpus is defined\r\n\t\treturn Ext.create(\"Voyant.data.store.DocumentQueryMatches\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocumentTerms: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.DocumentTerms\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocumentEntities: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.DocumentEntities\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tloadContexts: function(config) {\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\r\n\t\t} else {\r\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (Ext.isNumber(config)) {\r\n\t\t\t\tconfig = {limit: config};\r\n\t\t\t}\r\n\t\t\tExt.applyIf(config, {\r\n\t\t\t\tlimit: 0\r\n\t\t\t})\r\n\t\t\tvar contexts = this.getContexts();\r\n\t\t\tcontexts.load({\r\n\t\t\t\tparams: config,\r\n\t\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\tdfd.resolve(contexts)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdfd.reject(operation)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn dfd.promise\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\r\n\tgetContexts: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.Contexts\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocuments: function(config) {\r\n\t\treturn this.getDocumentsStore() ? this.getDocumentsStore() : Ext.create(\"Voyant.data.store.Documents\", Ext.apply(config || {}, {corpus: this}));\r\n\t\t//this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.getDocumentsStore();\r\n\t},\r\n\t\r\n\tgetDocument: function(config) {\r\n\t\tif (this.getDocumentsStore()) {\r\n\t\t\tif (config instanceof Voyant.data.model.Document) {\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\t\t\telse if (Ext.isNumeric(config)) {\r\n\t\t\t\treturn this.getDocumentsStore().getAt(parseInt(config))\r\n\t\t\t}\r\n\t\t\telse if (Ext.isString(config)) {\r\n\t\t\t\treturn this.getDocumentsStore().getById(config)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.getDocumentsStore().getDocument(config);\r\n\t},\r\n\t\r\n\tgetDocumentsCount: function() {\r\n\t\treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('documentsCount');\r\n\t},\r\n\t\r\n\tgetWordTokensCount: function() {\r\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('lexicalTokensCount');\r\n\t},\r\n\t\r\n\tgetWordTypesCount: function() {\r\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('lexicalTypesCount');\r\n\t},\r\n\t\r\n\tgetCreatedTime: function() {\r\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('createdTime');\t\t\r\n\t},\r\n\t\r\n\trequiresPassword: function() {\r\n\t\tvar noPasswordAccess = this.getNoPasswordAccess();\r\n\t\treturn noPasswordAccess=='NONE' || noPasswordAccess=='NONCONSUMPTIVE';\r\n\t},\r\n\t\r\n\tgetNoPasswordAccess: function() {\r\n\t\t// overrides the getId() function from the model to handle promises\r\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('noPasswordAccess');\t\t\r\n\t},\r\n\t\r\n\tgetTitle: function() {\r\n\t\treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('title');\t\t\r\n\t},\r\n\t\r\n\tgetSubTitle: function() {\r\n\t\treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('subTitle');\t\t\r\n\t},\r\n\t\r\n\tgetRelatedWords : function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.RelatedTerms\", Ext.apply(config || {}, {corpus: this}))\r\n\t},\r\n\t\r\n\tloadRelatedWords : function(config) {\r\n\t\tvar me = this;\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\r\n\t\t} else {\r\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (Ext.isNumber(config)) {\r\n\t\t\t\tconfig = {limit: config};\r\n\t\t\t}\r\n\t\t\tExt.applyIf(config, {\r\n\t\t\t\tlimit: 0\r\n\t\t\t})\r\n\t\t\tvar relatedTerms = this.getRelatedWords();\r\n\t\t\trelatedTerms.load({\r\n\t\t\t\tparams: config,\r\n\t\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\tdfd.resolve(records)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdfd.reject(operation.error.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn dfd.promise\r\n\t\t}\r\n\t},\r\n\t\t\r\n\t/**\r\n     * Create a promise for a text representation of all the document bodies in the corpus.\r\n     * \r\n     * This does NOT necessarily return the full original document, but rather the body or main\r\n     * content, as extracted by Voyant. You can also request a {@link #plainText} version with\r\n     * the tags stripped.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the text as an argument.\r\n     * \r\n     * \tnew Corpus(\"http://hermeneuti.ca\").getText().then(function(text) {\r\n     * \t\tshow(text.replace(/</g, \"&lt;\")); // show the markup \r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object that can contain the following:\r\n     * \t - `limit`: a limit on the total number of words (by default there's no limit)\r\n     * \t - `perDocLimit`: a limit on the number of words to fetch for each document (by default there's no limit)\r\n     * \t - `start`: start at this word index for each document\r\n     * \t - `stopList`: the ID of an existing stopList resource or an array of words to skip\r\n     * \t - `whitelist`: the ID of an existing whitelist resource or an array of words to keep\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return text but a promise to return text when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * text as an argument, as per the example above).\r\n\t */\r\n\tgetText: function(config) {\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments, this);\r\n\t\t} else {\r\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\r\n\t    \tconfig = config || {};\r\n\t    \tif (Ext.isNumber(config)) {\r\n\t    \t\tconfig = {limit: config}\r\n\t    \t} else if (Ext.isString(config)) {\r\n\t    \t\tconfig = {limit: parseInt(config)}\r\n\t    \t};\r\n\t    \tExt.applyIf(config, {\r\n        \t\tlimit: 0,\r\n    \t\t\toutputFormat: \"text\",\r\n    \t\t\ttemplate: \"docTokens2text\"\r\n\t    \t});\r\n\t    \tExt.apply(config, {\r\n        \t\ttool: 'corpus.DocumentTokens',\r\n        \t\tcorpus: this.getAliasOrId()\r\n\t    \t});\r\n        \tExt.Ajax.request({\r\n        \t    url: Voyant.application.getTromboneUrl(),\r\n        \t    params: config,\r\n        \t    success: function(response, opts) {\r\n        \t    \tvar text = response.responseText.trim();\r\n        \t    \tif (config.transformCase) {\r\n        \t    \t\tif (config.transformCase.indexOf(\"lower\")>-1) {\r\n        \t    \t\t\ttext = text.toLowerCase();\r\n        \t    \t\t} else if (config.transformCase.indexOf(\"upper\")>-1) {\r\n        \t    \t\t\ttext = text.toUpperCase();\r\n        \t    \t\t}\r\n        \t    \t}\r\n        \t    \tdfd.resolve(text);\r\n        \t    },\r\n        \t    failure: function(response, opts) {\r\n        \t    \tdfd.reject(response);\r\n        \t    },\r\n        \t    scope: this\r\n        \t})\r\n\t    \treturn dfd.promise\r\n\t\t}\r\n    },\r\n    \r\n\t/**\r\n     * Create a promise for a plain text representation of all the text in the corpus.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the text as an argument.\r\n     * \r\n     * \tnew Corpus(\"http://hermeneuti.ca\").getPlainText().then(function(text) {\r\n     * \t\tshow(text.trim().replace(/\\s+/g, \" \").substr(-150)); // show the end \r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return text but a promise to return text when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * text as an argument, as per the example above).\r\n\t */\r\n    getPlainText: function(config) {\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\r\n\t\t} else {\r\n\t    \tconfig = config || {};\r\n\t    \tif (Ext.isNumber(config)) {\r\n\t    \t\tconfig = {limit: config}\r\n\t    \t} else if (Ext.isString(config)) {\r\n\t    \t\tconfig = {limit: parseInt(config)}\r\n\t    \t}\r\n\t    \tExt.apply(config, {\r\n    \t\t\ttemplate: \"docTokens2plainText\"\r\n\t    \t});\r\n\t\t\treturn this.getText(config);\r\n\t\t}\r\n    \t\r\n    },\r\n\r\n\t/**\r\n     * Create a promise for a string containing just the words from the corpus.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the text as an argument.\r\n     * \r\n     * \tnew Corpus(\"http://hermeneuti.ca\").getWords().then(function(words) {\r\n     * \t\tshow(words); // show the words \r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * words as a string argument, as per the example above).\r\n\t */\r\n    getWords: function(config) {\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\r\n\t\t} else {\r\n\t    \tconfig = config || {};\r\n\t    \tif (Ext.isNumber(config)) {\r\n\t    \t\tconfig = {limit: config}\r\n\t    \t} else if (Ext.isString(config)) {\r\n\t    \t\tconfig = {limit: parseInt(config)}\r\n\t    \t};\r\n\t    \tExt.applyIf(config, {\r\n    \t\t\ttemplate: \"docTokens2words\"\r\n\t    \t});\r\n\t\t\treturn this.getText(config);\r\n\t\t}\r\n    \t\r\n    },\r\n\t\r\n\t/**\r\n     * Create a promise for a string containing just the words from the corpus.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the text as an argument.\r\n     * \r\n     * \tnew Corpus(\"http://hermeneuti.ca\").getWords().then(function(words) {\r\n     * \t\tshow(words); // show the words \r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * words as a string argument, as per the example above).\r\n\t */\r\n    getWordsArray: function(config) {\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\r\n\t\t} else {\r\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\r\n\t    \tthis.getWords(config).then(function(text) {\r\n\t\t\t\tdfd.resolve(text.split(\" \"));\r\n\t\t\t})\r\n\t\t\treturn dfd.promise\r\n\t\t}\r\n    \t\r\n    },\r\n    \r\n\t/**\r\n     * Create a promise for an array of lemmas from the corpus (only works for English).\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the lemmas as an argument.\r\n     * \r\n\t * \tnew Corpus(\"Hello world, I like Spyral notebooks!\", {language: \"en\"}).getLemmasArray().then(function(lemmas) {\r\n\t\t\tshow(lemmas.join(\", \"))\r\n\t *  });\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * words as a string argument, as per the example above).\r\n\t */\r\n    getLemmasArray: function(config) {\r\n    \tconfig = config || {};\r\n\t\tif (this.then) {\r\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\r\n\t\t} else {\r\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\r\n\t\t\tExt.applyIf(config, {\r\n\t\t\t\ttemplate: \"docTokens2lemmas\",\r\n\t\t\t\twithPosLemmas: true,\r\n\t\t\t\tnoOthers: true\r\n\t\t\t})\r\n\t    \tthis.getWords(config).then(function(text) {\r\n\t    \t\tvar lemmas = text.split(\" \").map(function(word) {return word.substring(0, word.indexOf(\"/\"))})\r\n\t\t\t\tdfd.resolve(lemmas);\r\n\t\t\t})\r\n\t\t\treturn dfd.promise\r\n\t\t}\r\n    \t\r\n    },\r\n    \r\n    /**\r\n\t * Shows a one-line summary of this corpus.\r\n\t * \r\n\t * \tnew Corpus(\"Hello World!\").show(true);\r\n\t * \r\n\t * @method show\r\n\t * @param {boolean} [withID] Includes the corpus ID in parentheses at the end, if true.\r\n\t */\r\n\t\r\n\t/**\r\n\t * @method embed\r\n\t * Embed the current corpus in the specified tool.\r\n\t * \r\n\t * Because embed knows about promises, you don't need to handle promises when calling embed on a corpus.\r\n\t * \r\n\t * \tnew Corpus(\"Hello Voyant!\").embed(); // use summary as a default\r\n\t * \tnew Corpus(\"Hello Voyant!\").embed(\"corpusterms\"); // specify corpus terms tool\r\n\t * \tnew Corpus(\"Hello Voyant!\").embed(\"cirrus\", {width: \"300px\"}); // with config\r\n\t *  \r\n\t * @param {String} [tool] Specify which tool to use for embedding this corpus.\r\n\t * The following are recognized tool values: {@link Voyant.panel.Summary summary} (default), {@link Voyant.panel.Cirrus cirrus}, {@link Voyant.panel.Documents documents}, {@link Voyant.panel.CorpusTerms corpusterms}.\r\n\t * @param {Object} [config] Additional configuration options to pass to the tool.\r\n\t * In addition to the configuration options available from each tool listed in the tool param (see above), options include:\r\n\t * \r\n\t * - **width**: a CSS width value for the embedded tool (e.g. \"500px\", \"80em\", \"50%\")\r\n\t * - **height**: a CSS height value for the embedded tool (e.g. \"300px\", \"10em\", \"30%\")\r\n\t */\r\n    getString: function(config) {\r\n\t\tvar size = this.getDocumentsCount();\r\n\t\tvar message = this.localize('thisCorpus');\r\n\t\tif (size==0) {message += ' '+this.localize('isEmpty')+'.';}\r\n\t\telse {\r\n\t\t\tmessage+=' ';\r\n\t\t\tif (size>1) {\r\n\t\t\t\tmessage+=new Ext.XTemplate(this.localize('hasNdocuments')).apply({count: Ext.util.Format.number(size,\"0,000\")});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tmessage+=this.localize('has1document');\r\n\t\t\t}\r\n\t\t\tmessage+=' '+new Ext.XTemplate(this.localize('widthNwordsAndNTypes')).apply({words: Ext.util.Format.number(this.getWordTokensCount(),\"0,000\"), types: Ext.util.Format.number(this.getWordTypesCount(),\"0,000\")})+'.'\r\n\t\t\tmessage+=\" \"+this.localize('created')+\" \";\r\n\t\t\tvar createdDate = this.get('createdDate');\r\n\t\t\tvar now = new Date();\r\n\t\t\tif (Ext.Array.each([\r\n\t\t    \t\t\t\t['year', Ext.Date.YEAR],\r\n\t\t    \t\t\t\t['month', Ext.Date.MONTH],\r\n\t\t    \t\t\t\t['day', Ext.Date.DAY],\r\n\t\t    \t\t\t\t['hour', Ext.Date.HOUR],\r\n\t\t    \t\t\t\t['minute', Ext.Date.MINUTE],\r\n\t\t    \t\t\t\t['second', Ext.Date.SECOND]\r\n\t\t    \t], function(time) {\r\n        \t\t\tif (Ext.Date.diff(createdDate, now, time[1])>(time[0]=='second' ? 1 : 0)) {\r\n        \t\t\t\tvar count = Ext.Date.diff(createdDate, now, time[1]);\r\n        \t\t\t\tmessage+=\"<span class='info-tip' data-qtip='\"+Ext.Date.format(createdDate, \"Y-m-d, H:i:s\")+\"'>\";\r\n        \t\t\t\tif (count==1) {message+=new Ext.XTemplate(this.localize(time[0]+'Ago')).apply({count: count, date: createdDate})}\r\n        \t\t\t\telse {message+=new Ext.XTemplate(this.localize(time[0]+'sAgo')).apply({count: count, date: createdDate})}\r\n        \t\t\t\tmessage+=\"</span>\";\r\n        \t\t\t\treturn false\r\n        \t\t\t}\r\n\t\t\t\t}, this\r\n\t\t\t)===true) { // if array returns true, none of the conditions matched, so say now\r\n\t\t\t\tmessage+=this.localize('now');\r\n\t\t\t}\r\n\t\t\tmessage+='.';\r\n\t\t\t\r\n\t\t\tmessage+='';\r\n\t\t}\r\n\t\tif (config===true) {message+=' ('+this.getId()+\")\";}\r\n\t\treturn message;\r\n    }\r\n    \r\n    \r\n\r\n});","Ext.define('Voyant.widget.CodeEditor', {\n\textend: 'Ext.panel.Panel',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.notebook.util.Embed'],\n\talias: 'widget.codeeditor',\n    statics: {\n    \ti18n: {},\n\t\tapi: {\n\t\t\ttableJson: undefined,\n\t\t\tcontent: '',\n\t\t\tmode: 'ace/mode/text',\n\t\t\twidth: undefined\n\t\t}\n    },\n\tconstructor: function(config) {\n    \tconfig = config || {};\n\t\tvar me = this;\n    \tme.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tme.buildFromParams();\n    \tExt.apply(me, {\n    \t\titems: {\n    \t\t\txtype: 'notebookcodeeditor',\n    \t\t\tcontent: config.content ? config.content : this.getApiParam('content'),\n    \t\t\tmode: config.mode ? config.mode : this.getApiParam(\"mode\")\n    \t\t}\n    \t})\n        me.callParent(arguments);\n\t},\n\tinitComponent: function(config) {\n    \tvar me = this, config = config || {};\n    \tme.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tme.callParent(arguments);\n\t},\n\t\n\tbuildFromParams: function() {\n\t\tvar me = this, tableJson = this.getApiParam('tableJson');\n\t\tif (tableJson) {\n\t\t\tvar json = Ext.decode(tableJson);\n\t\t\tvar text = json.headers.join(\"\\t\") + \"\\n\"+\n\t\t\t\tjson.rows.map(function(row) {return row.join(\"\\t\")}).join(\"\\n\");\n\t\t\tthis.setApiParam('content', text);\n\t\t}\n\t}\n})","Ext.define('Voyant.widget.CorpusSelector', {\n    extend: 'Ext.form.field.ComboBox',\n    mixins: ['Voyant.util.Localization', 'Voyant.util.Api'],\n    alias: 'widget.corpusselector',\n    statics: {\n\t    \ti18n: {\n\t    \t},\n\t    \tapi: {\n\t    \t\topenMenu: undefined\n\t    \t}\n    },\n    \n    constructor: function(config) {\n        config = config || {};\n        \n        // need to call here to get openMenu\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\n\t    \tvar data = [['shakespeare',\"Shakespeare's Plays\"],['austen',\"Austen's Novels\"]];\t\n\t    \t// check API and server option for open menu values\n\t    \tif (this.getApiParam(\"openMenu\")) {\n\t\t\t\tdata = this.getStoreItemsFromDefinition(this.getApiParam(\"openMenu\"));\n\t\t} else if (Voyant.application && Voyant.application.getOpenMenu && Voyant.application.getOpenMenu()) {\n\t\t\tvar arg = Voyant.application.getOpenMenu();\n\t\t\targ = decodeURIComponent(arg);\n\t\t\targ = arg.replace(/\\+/g,' ');\n\t\t\tif (arg.charAt(0)=='\"' && arg.charAt(arg.length-1)=='\"') {\n\t\t\t\targ = arg.substring(1, arg.length-1);\n\t\t\t}\n\t\t\tdata = this.getStoreItemsFromDefinition(arg);\n\t    \t}\n\t\n\t    \tExt.applyIf(config, {\n\t    \t\tfieldLabel: this.localize('chooseCorpus'),\n\t            labelWidth: 125,\n\t            labelAlign: 'right',\n\t            name:'corpus',\n\t            queryMode:'local',\n\t            store: data\n\t    \t});\n        this.callParent([config]);\n    },\n\n    \tinitComponent: function(config) {\n    \t\tconfig = config || {};\n        this.callParent([config]);\n    },\n    \n    getStoreItemsFromDefinition: function(definition) {\n\t    \tvar data = [], items = definition.split(\";\");\n\t    \tfor (var i=0; i<items.length; i++) {\n\t    \t\tvar nameValue = items[i].split(\":\");\n\t    \t\tif (nameValue[0]) {\n\t        \t\tdata.push([nameValue[0],nameValue[1] ? nameValue[1] : nameValue[0]]);\n\t    \t\t}\n\t    \t}\n\t    \treturn data;\n    }\n})","Ext.define('Voyant.widget.ListEditor', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.listeditor',\n    layout: 'hbox',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    initComponent: function(config) {\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam(this.name);\n    \tvar data = value ? [{name: value, value: value}] : [];\n    \t\n    \tdata.splice(0, 0, {name : this.localize('none'),   value: ''},  {name : this.localize('new'),   value: 'new'})\n    \tExt.apply(me, {\n\t    \t\titems: [{\n\t    \t        xtype: 'combo',\n\t    \t        queryMode: 'local',\n\t    \t        value: value,\n\t    \t        triggerAction: 'all',\n\t    \t        editable: true,\n\t    \t        fieldLabel: this.localize(this.name+'Label'),\n\t    \t        labelAlign: 'right',\n\t    \t        name: this.name,\n\t    \t        displayField: 'name',\n\t    \t        valueField: 'value',\n\t    \t        store: {\n\t    \t            fields: ['name', 'value'],\n\t    \t            data: data\n\t    \t        }\n\t    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t    \t\t\txtype: 'button',\n\t    \t\t\ttext: this.localize('editList'),\n\t\t            ui: 'default-toolbar',\n\t    \t\t\thandler: this.editList,\n\t    \t\t\tscope: this\n\t    \t\t}]\n    \t})\n        me.callParent(arguments);\n    },\n    \n    editList: function() {\n    \tvar win = this.up('window');\n    \tvar panel = win.panel;\n    \tvar value = this.down('combo').getValue();\n    \tExt.Ajax.request({\n    \t    url: panel.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.KeywordsManager',\n        \t\tlist: value\n    \t    },\n    \t    success: function(response){\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar keywords = json.keywords.keywords.sort().join(\"\\n\");\n    \t\t\tExt.Msg.show({\n\t    \t\t    title: this.localize('editListTitle'),\n\t    \t\t    message: this.localize('editListMessage'),\n\t    \t\t    buttons: Ext.Msg.OKCANCEL,\n\t    \t\t    buttonText: {\n\t    \t\t        ok: this.localize('ok'),\n\t    \t\t        cancel: this.localize('cancel')\n\t    \t\t    },\n\t    \t\t    icon: Ext.Msg.INFO,\n\t    \t\t    prompt: true,\n\t    \t        multiline: true,\n\t    \t        value: keywords,\n\t    \t        original: keywords,\n\t    \t        fn: function(btn,value,list) {\n\t    \t        \tif (btn=='ok' && list.original!=value) {\n\t    \t        \t\tvar combo = this.down('combo')\n\t    \t        \t\tif (Ext.String.trim(value).length==0) {\n\t    \t        \t\t\tcombo.setValue('empty');\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t    \t        \t    \tExt.Ajax.request({\n\t    \t        \t    \t    url: panel.getTromboneUrl(),\n\t    \t        \t    \t    params: {\n\t    \t        \t        \t\ttool: 'resource.StoredResource',\n\t    \t        \t    \t\t\tstoreResource: value\n\t    \t        \t    \t    },\n\t    \t        \t    \t    combo: combo,\n\t    \t        \t    \t    success: function(response, req) {\n\t    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t    \t        \t    \t    \tvar store = req.combo.getStore();\n\t    \t        \t    \t    \tvar value = 'keywords-'+json.storedResource.id;\n\t    \t        \t    \t    \tstore.add({name: value, value: value});\n\t    \t        \t    \t    \treq.combo.setValue(value)\n\t    \t        \t    \t    \treq.combo.updateLayout()\n\t    \t        \t    \t    },\n\t    \t        \t    \t    scope: this\n\t    \t        \t    \t})\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        },\n\t    \t        scope: this\n    \t\t\t})\n    \t    },\n    \t    scope: this\n    \t});\n    }\n})","Ext.define('Voyant.widget.StopListOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.stoplistoption',\n    layout: 'hbox',\n    statics: {\n    \t\tstoplists: {\n    \t\t    ar: \"stop.ar.arabic-lucene.txt\",\n    \t\t\tbg: \"stop.bu.bulgarian-lucene.txt\",\n    \t\t\tbr: \"stop.br.breton-lucene.txt\",\n    \t\t\tca: \"stop.ca.catalan-lucene.txt\",\n    \t\t\tckb: \"stop.ckb-turkish-lucene.txt\",\n    \t\t\tcn: \"stop.cn.chinese-lawrence.txt\",\n    \t\t\tcz: \"stop.cz.czech-lucene.txt\",\n    \t\t\tde: \"stop.de.german.txt\",\n    \t\t\tel: \"stop.el.greek-lucene.txt\",\n    \t\t\ten: \"stop.en.taporware.txt\",\n    \t\t\tes: \"stop.es.spanish.txt\",\n    \t\t\teu: \"stop.eu.basque-lucene.txt\",\n    \t\t\tfa: \"stop.fa.farsi-lucene.txt\",\n    \t\t\tfr: \"stop.fr.veronis.txt\",\n    \t\t\tga: \"stop.ga-irish-lucene.txt\",\n    \t\t\tgl: \"stop.ga.galician-lucene.txt\",\n    \t\t\tgrc: \"stop.grc.ancient-greek.txt\",\n    \t\t\thi: \"stop.hi.hindi-lucene.txt\",\n    \t\t\thu: \"stop.hu.hungarian.txt\",\n    \t\t\thy: \"stop.hy.armenian-lucene.txt\",\n    \t\t\tid: \"stop.id.indonesian-lucene.txt\",\n    \t\t\tit: \"stop.it.italian.txt\",\n    \t\t\tja: \"stop.ja.japanese-lucene.txt\",\n    \t\t\tla: \"stop.la.latin.txt\",\n    \t\t\tlv: \"stop.lv.latvian-lucene.txt\",\n    \t\t\tlt: \"stop.lt.lithuanian-lucene.txt\",\n    \t\t\tmu: \"stop.mu.multi.txt\",\n    \t\t\tnl: \"stop.nl.dutch.txt\",\n    \t\t\tno: \"stop.no.norwegian.txt\",\n    \t\t\tpt: \"stop.pt.brazilian.txt\",\n    \t\t\tro: \"stop.ro.romanian-lucene.txt\",\n    \t\t\tru: \"stop.ru.russian.txt\",\n    \t\t\tse: \"stop.se.swedish-long.txt\",\n    \t\t\tth: \"stop.th.thai-lucene.txt\",\n    \t\t\ttr: \"stop.tr.turkish-lucene.txt\"\n    \t\t},\n\t    \ti18n: {\n\t    \t\t\n\t    \t}\n    },\n    initComponent: function(config) {\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam('stopList');\n    \tvar data = [];\n    \tfor (id in Voyant.widget.StopListOption.stoplists) {\n    \t\tdata.push({name: this.localize(id), value: Voyant.widget.StopListOption.stoplists[id]})\n    \t}\n    \tdata.sort(function(a,b) { // sort by label\n    \t\treturn a.name < b.name ? -1 : 1;\n    \t})\n    \tdata.splice(0, 0, {name : this.localize('auto'),   value: 'auto'}, {name : this.localize('none'),   value: ''},  {name : this.localize('new'),   value: 'new'})\n    \tExt.apply(me, {\n\t    \t\titems: [{\n\t    \t        xtype: 'combo',\n\t    \t        queryMode: 'local',\n\t    \t        value: value,\n\t    \t        triggerAction: 'all',\n\t    \t        editable: true,\n\t    \t        fieldLabel: this.localize('label'),\n\t    \t        labelAlign: 'right',\n\t    \t        name: 'stopList',\n\t    \t        displayField: 'name',\n\t    \t        valueField: 'value',\n\t    \t        store: {\n\t    \t            fields: ['name', 'value'],\n\t    \t            data: data\n\t    \t        }\n\t    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t    \t\t\txtype: 'button',\n\t    \t\t\ttext: this.localize('editList'),\n\t\t            ui: 'default-toolbar',\n\t    \t\t\thandler: this.editList,\n\t    \t\t\tscope: this\n\t    \t\t}, {width: 10}, {\n\t    \t\t\txtype: 'checkbox',\n\t    \t\t\tname: 'stopListGlobal',\n\t    \t\t\tchecked: true,\n\t    \t\t\tboxLabel: this.localize('applyGlobally')\n\t    \t\t}]\n    \t})\n        me.callParent(arguments);\n    },\n    \n    editList: function() {\n    \tvar win = this.up('window');\n    \tvar panel = win.panel;\n    \tvar value = this.down('combo').getValue();\n    \tvar corpusId = panel.getApplication && panel.getApplication().getCorpus ? panel.getApplication().getCorpus().getId() : undefined;\n    \tif (value=='auto' && !corpusId) {\n    \t\tExt.Msg.show({\n\t\t\t    title: this.localize('noEditAutoTitle'),\n\t\t\t    message: this.localize('noEditAutoMessage'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n    \t\treturn\n    \t}\n    \tExt.Ajax.request({\n    \t    url: panel.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.KeywordsManager',\n    \t\t\tstopList: value,\n    \t\t\tcorpus: corpusId\n    \t    },\n    \t    success: function(response){\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar keywords = json.keywords.keywords.sort().join(\"\\n\");\n    \t\t\tExt.Msg.show({\n\t    \t\t    title: this.localize('editStopListTitle'),\n\t    \t\t    message: this.localize('editStopListMessage'),\n\t    \t\t    buttons: Ext.Msg.OKCANCEL,\n\t    \t\t    buttonText: {\n\t    \t\t        ok: this.localize('ok'),\n\t    \t\t        cancel: this.localize('cancel')\n\t    \t\t    },\n\t    \t\t    icon: Ext.Msg.INFO,\n\t    \t\t    prompt: true,\n\t    \t        multiline: true,\n\t    \t        value: keywords,\n\t    \t        original: keywords,\n\t    \t        fn: function(btn,value,stoplist) {\n\t    \t        \t// force lowercase for simple stopword list since it's lexical (this may change if the widget is used elsewhere)\t    \t        \tvalue = value.toLowerCase();\n\t    \t        \tvalue = value.toLowerCase();\n\t    \t        \tif (btn=='ok' && stoplist.original!=value) {\n\t    \t        \t\tvar combo = this.down('combo')\n\t    \t        \t\tif (Ext.String.trim(value).length==0) {\n\t    \t        \t\t\tcombo.setValue('empty');\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t    \t        \t    \tExt.Ajax.request({\n\t    \t        \t    \t    url: panel.getTromboneUrl(),\n\t    \t        \t    \t    params: {\n\t    \t        \t        \t\ttool: 'resource.StoredResource',\n\t    \t        \t    \t\t\tstoreResource: value,\n\t    \t        \t    \t\t\tcorpus: corpusId\n\t    \t        \t    \t    },\n\t    \t        \t    \t    combo: combo,\n\t    \t        \t    \t    success: function(response, req) {\n\t    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t    \t        \t    \t    \tvar store = req.combo.getStore();\n\t    \t        \t    \t    \tvar value = 'keywords-'+json.storedResource.id;\n\t    \t        \t    \t    \tstore.add({name: value, value: value});\n\t    \t        \t    \t    \treq.combo.setValue(value)\n\t    \t        \t    \t    \treq.combo.updateLayout()\n\t    \t        \t    \t    },\n\t    \t        \t    \t    scope: this\n\t    \t        \t    \t})\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        },\n\t    \t        scope: this\n    \t\t\t})\n    \t    },\n    \t    scope: this\n    \t});\n    }\n})","Ext.define('Voyant.widget.QuerySearchField', {\n    extend: 'Ext.form.field.Tag',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.querysearchfield',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined,\n\t\ttokenType: 'lexical',\n\t\tisDocsMode: false,\n\t\tinDocumentsCountOnly: undefined,\n\t\tstopList: undefined,\n\t\tshowAggregateInDocumentsCount: false,\n\t\tclearOnQuery: false,\n\t\tparentPanel: undefined,\n\t\tcurrentOriginalRawQueryPlan: undefined\n\t},\n\thasCorpusLoadedListener: false,\n\tisClearing: false, // flag for clearOnQuery\n    \n    constructor: function(config) {\n    \t\n    \tconfig = config || {};\n    \tvar itemTpl = config.itemTpl ? config.itemTpl : (config.inDocumentsCountOnly ?\n    \t\t\t('<tpl><tpl if=\"term.charAt(0)==\\'@\\'\">{term}</tpl><tpl if=\"term.charAt(0)!=\\'@\\'\">{term} ({inDocumentsCount})</tpl></tpl>') :\n    \t\t\t('<tpl><tpl if=\"term.charAt(0)==\\'@\\'\">{term}</tpl><tpl if=\"term.charAt(0)!=\\'@\\'\">{term} ({rawFreq})</tpl></tpl>'))\n    \tExt.applyIf(config, {\n    \t\tminWidth: 100,\n    \t\tmaxWidth: 200,\n    \t\tmatchFieldWidth : false,\n    \t\tminChars: 2,\n    \t    displayField: 'term',\n    \t    valueField: 'term',\n    \t    filterPickList: true,\n    \t    createNewOnEnter: true,\n    \t    createNewOnBlur: false,\n    \t    autoSelect: false,\n//    \t    emptyText: this.localize('querySearch'),\n    \t    tpl: [\n    \t    \t'<ul class=\"x-list-plain\"><tpl for=\".\">',\n    \t    \t'<li role=\"option\" class=\"x-boundlist-item\" style=\"white-space: nowrap;\">'+itemTpl+'</li>',\n    \t    \t'</tpl></ul>'\n    \t    ],\n    \t    triggers: {\n    \t        help: {\n    \t            weight: 2,\n    \t            cls: 'fa-trigger form-fa-help-trigger',\n    \t            handler: function() {\n    \t            \tExt.Msg.show({\n    \t            \t    title: this.localize('querySearch'),\n    \t            \t    message: this.getIsDocsMode() ? this.localize('querySearchDocsModeTip') : this.localize('querySearchTip'),\n    \t            \t    buttons: Ext.OK,\n    \t            \t    icon: Ext.Msg.INFO\n    \t            \t});\n    \t            },\n    \t            scope: 'this'\n    \t        }\n    \t   }\n    \t})\n    \tif (config.showAggregateInDocumentsCount) {\n    \t\tconfig.triggers.count = {\n\t            cls: 'fa-trigger',\n\t            handler: 'onHelpClick',\n\t            scope: 'this',\n\t            hidden: true\n    \t\t}\n    \t}\n    \tif (config.clearOnQuery) {\n    \t\tthis.setClearOnQuery(config.clearOnQuery);\n    \t}\n        this.callParent(arguments);\n    },\n    initComponent: function(config) {\n\n    \tvar me = this;\n\n    \tme.on(\"beforequery\", function(queryPlan) {\n\n    \t\tif (queryPlan.query) {\n    \t\t\tqueryPlan.query = queryPlan.query.trim();\n    \t\t\t\n    \t\t\t// set it in the raw state because we use it in the load event to add categories\n    \t\t\tvar originalRawQueryPlan = queryPlan.query.toLowerCase();\n    \t\t\tthis.setCurrentOriginalRawQueryPlan(queryPlan.query)\n    \t\t\t\n    \t\t\tif (queryPlan.query.charAt(0)!=\"@\") {\n\t    \t\t\tif (queryPlan.query.charAt(0)==\"^\") {\n\t    \t\t\t\tqueryPlan.query=queryPlan.query.substring(1)\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length==0; // cancel if it's just that character\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(0)==\"*\") { // convert leading wildcard to regex\n\t    \t\t\t\tqueryPlan.query = \".\"+queryPlan.query;\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(queryPlan.query.length-1)=='*' || queryPlan.query.charAt(queryPlan.query.length-1)=='|') {\n\t    \t\t\t\tqueryPlan.query=queryPlan.query.substring(0,queryPlan.query.length-1)\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length==0; // cancel if it's just that character\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(0)==\".\") {\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length< (/\\W/.test(queryPlan.query.charAt(1)) ? 5 : 4) // cancel if we only have 3 or fewer after .\n\t    \t\t\t}\n\t    \t\t\ttry {\n\t                    new RegExp(queryPlan.query);\n\t\t            }\n\t\t            catch(e) {\n\t\t            \tqueryPlan.cancel = true;\n\t\t            }\n\t\t            if (queryPlan.query.indexOf('\"')>-1) { // deal with unfinished phrases\n\t\t            \tif (queryPlan.query.indexOf(\" \")==-1) {queryPlan.cancel=true} // no space in phrase\n\t\t            \tif ((queryPlan.query.match(/\"/) || []).length!=2) {queryPlan.cancel=true;} // not balanced quotes\n\t\t            }\n\t\t            if (queryPlan.query.indexOf(\"*\")>-1) {\n\t\t            \t// skip for multiword or pipes\n\t\t            \tif (queryPlan.query.indexOf(\" \")==-1 && queryPlan.query.indexOf(\"|\")==-1) {\n\t\t            \t\tqueryPlan.query += \",^\"+queryPlan.query;\n\t\t            \t}\n\t\t            } else {\n\t\t            \tqueryPlan.query = queryPlan.query+\"*\"+ (queryPlan.query.indexOf(\" \")==-1  && queryPlan.query.indexOf(\"|\")==-1 ? \",\"+\"^\"+queryPlan.query+\"*\" : \"\")\n\t\t            }\n    \t\t\t} else if (queryPlan.query==\"@\") { // no letters yet\n    \t\t\t\tqueryPlan.cancel = true;\n    \t\t\t}\n\t            \n\t            var parent = me.getParentPanel();\n\t            if (queryPlan.cancel==false && parent) {\n\t            \tvar originalRawQueryPlanWithoutAt = originalRawQueryPlan.charAt(0)==\"@\" ? originalRawQueryPlan.substring(1) : originalRawQueryPlan;\n\t\t            for (var cat in parent.getApplication().getCategoriesManager().getCategories()) {\n\t\t            \tif (cat.toLowerCase().indexOf(originalRawQueryPlanWithoutAt)>-1) {\n\t\t            \t\tqueryPlan.query = \"@\"+cat+(originalRawQueryPlan.charAt(0)==\"@\" ? \"\" : \",\"+queryPlan.query);\n\t\t            \t}\n\t\t            }\t\n\t            }\n    \t\t}\n\t            \n\t            \n    \t}, this);\n    \t\n    \tme.on(\"change\", function(tags, queries) {\n    \t\t\n    \t\tif (!me.isClearing) {\n\t    \t\tqueries = queries.map(function(query) {return query.replace(/^(\\^?)\\*/, \"$1.*\")});\n\t    \t\tme.up('panel').fireEvent(\"query\", me, queries);\n\t    \t\tif (me.getClearOnQuery()) {\n\t    \t\t\tme.isClearing = true;\n\t    \t\t\tme.removeValue(me.getValueRecords());\n\t    \t\t}\n\t    \t\tif (me.triggers.count) {\n\t    \t\t\tme.triggers.count.show();\n\t    \t\t\tme.triggers.count.getEl().setHtml('0');\n\t    \t\t\tif (queries.length>0) {\n\t    \t\t\t\tme.getCorpus().getCorpusTerms().load({\n\t    \t\t\t\t\tparams: {\n\t    \t\t\t\t\t\tquery: queries.map(function(q) {return '('+q+')'}).join(\"|\"),\n\t\t\t\t    \t\t\ttokenType: me.getTokenType(),\n\t\t\t\t    \t\t\tstopList: me.getStopList(),\n\t\t\t\t    \t\t\tinDocumentsCountOnly: true\n\t    \t\t\t\t\t},\n\t    \t\t\t\t\tcallback: function(records, operation, success) {\n\t    \t\t\t\t\t\tif (success && records && records.length==1) {\n\t    \t\t\t\t\t\t\tme.triggers.count.getEl().setHtml(records[0].getInDocumentsCount())\n\t    \t\t\t\t\t\t}\n\t    \t\t\t\t\t}\n\t    \t\t\t\t})\n\t    \t\t\t} else {\n\t    \t\t\t\tme.triggers.count.hide();\n\t    \t\t\t}\n\t    \t\t}\n    \t\t} else {\n    \t\t\tme.isClearing = false;\n    \t\t}\n    \t});\n\n    \t// we need to make sure the panel is a voyantpanel\n    \t// so that we get loadedCorpus event after a call to Voyant.util.Toolable.replacePanel\n    \tvar parentPanel = me.findParentBy(function(clz) {\n    \t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t});\n    \tif (parentPanel != null) {\n    \t\tthis.setParentPanel(parentPanel);\n    \t\tif (parentPanel.getCorpus && parentPanel.getCorpus()) {\n    \t\t\tme.on(\"afterrender\", function(c) {\n    \t\t\t\tthis.doSetCorpus(parentPanel.getCorpus());\t\n    \t\t\t})\n    \t\t\tme.hasCorpusLoadedListener = true;    \t\t\t\n    \t\t} else {\n\t    \t    \tparentPanel.on(\"loadedCorpus\", function(src, corpus) {\n\t    \t    \t\tme.doSetCorpus(corpus);\n\t    \t    \t}, me);\n\t    \t    \tme.hasCorpusLoadedListener = true;    \t\t\t\n    \t\t}\n    \t}\n    \t\n    \tme.on(\"afterrender\", function(c) {\n    \t\t\n    \t\tif (me.hasCorpusLoadedListener === false) {\n    \t\t\tif (!me.getCorpus()) {\n    \t    \t\tparentPanel = me.findParentBy(function(clz) {\n    \t    \t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n        \t\t\t});\n    \t    \t\tif (parentPanel == null) {\n    \t    \t\t\tparentPanel = me.up('window').panel;\n    \t    \t\t}\n    \t    \t\tvar corpus = parentPanel.getApplication().getCorpus();\n    \t\t\t\tif (corpus !== undefined) {\n    \t\t\t\t\tme.doSetCorpus(corpus);\n    \t\t\t\t} else {\n    \t\t\t\t\tparentPanel.on(\"loadedCorpus\", function(src, corpus) {\n    \t\t\t\t\t\tme.doSetCorpus(corpus);\n    \t\t\t    \t}, me);\n    \t\t\t\t\tme.hasCorpusLoadedListener = true;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n\t\t\t\n    \t\tif (me.triggers && me.triggers.help) {\n    \t\t\tExt.tip.QuickTipManager.register({\n    \t\t\t\ttarget: me.triggers.help.getEl(),\n    \t\t\t\ttext: me.getIsDocsMode() ? me.localize('querySearchDocsModeTip') : me.localize('querySearchTip')\n\t\t\t\t});\n\t\t\t}\n    \t\tif (me.triggers && me.triggers.count) {\n    \t\t\tExt.tip.QuickTipManager.register({\n    \t\t\t\ttarget: me.triggers.count.getEl(),\n    \t\t\t\ttext: me.localize('aggregateInDocumentsCount')\n\t\t\t\t});\n\t\t\t}\n    \t});\n    \t\n    \tme.on(\"beforedestroy\", function(c) {\n    \t\t\n    \t\tif (me.triggers && me.triggers.help) {\n    \t\t\tExt.tip.QuickTipManager.unregister(me.triggers.help.getEl());\n    \t\t}\n    \t\tif (me.triggers && me.triggers.count) {\n    \t\t\tExt.tip.QuickTipManager.unregister(me.triggers.count.getEl());\n    \t\t}\n    \t});\n    \t\n    \tme.callParent(arguments);\n    },\n    \n    doSetCorpus: function(corpus) {\n\t\t\n    \tif (corpus != null) {\n\t    \tthis.setCorpus(corpus);\n\t\t\tvar stopList = this.getStopList();\n\t\t\tif (stopList==undefined) {\n\t    \t\tif (this.getApiParam) {this.setStopList(this.getApiParam(\"stopList\"))}\n\t    \t\telse {\n\t    \t\t\tvar parent = this.up(\"panel\");\n\t    \t\t\twhile (parent) {\n\t    \t\t\t\tif (parent && parent.getApiParam) {\n\t\t    \t\t\t\tthis.setStopList(parent.getApiParam(\"stopList\"))\n\t\t    \t\t\t\tbreak;\n\t\t    \t\t\t}\n\t    \t\t\t\tparent = parent.up(\"panel\");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t}\n\n\t\t\tvar categories = this.getApiParam ? this.getApiParam(\"categories\") : undefined;\n\t\t\tif (!categories) {\n    \t\t\tvar parent = this.up(\"panel\");\n    \t\t\twhile (parent) {\n    \t\t\t\tif (parent && parent.getApiParam) {\n    \t\t\t\t\tcategories = parent.getApiParam('categories');\n\t    \t\t\t\tbreak;\n\t    \t\t\t}\n    \t\t\t\tparent = parent.up(\"panel\");\n    \t\t\t}\n\t\t\t}\n\t\t\tvar store = corpus.getCorpusTerms({\t\t\t\t\n\t\t\t\tcorpus: corpus.getAliasOrId(),\n\t\t\t\tproxy: {\n\t\t\t\t\textraParams: {\n\t\t\t    \t\t\tlimit: 10,\n\t\t\t    \t\t\ttokenType: this.tokenType,\n\t\t\t    \t\t\tstopList: this.getStopList(),\n\t\t\t    \t\t\tinDocumentsCountOnly: this.getInDocumentsCountOnly(),\n\t\t\t    \t\t\tcategories: categories\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n//\t\t\tstore.on(\"load\", function() {\n//\t\t\t\tthis.fireEvent.apply(this, [\"load\"].concat(Array.prototype.slice.call(arguments)));\n//\t\t\t}, this);\n\n\t\t\tthis.setStore(store);\n    \t}\n    }\n    \n});\n","Ext.define('Voyant.widget.TotalPropertyStatus', {\n    extend: 'Ext.Component',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.totalpropertystatus',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n    initComponent: function() {\n        var me = this;\n        Ext.applyIf(me, {\n            tpl: this.localize('totalPropertyStatus'),\n            itemId: 'totalpropertystatus',\n            style: 'margin-right:5px',\n            listeners: {\n            \tafterrender: function(cmp) {\n            \t\tvar grid = cmp.up('grid')\n            \t\tif (grid) {\n            \t\t\tvar store = grid.getStore();\n            \t\t\tcmp.updateStatus(store.getTotalCount()); // make sure we set this in case of lazy render\n            \t\t\tgrid.getStore().on(\"totalcountchange\", cmp.updateStatus, cmp) // bind changes to update\n            \t\t}\n            \t}\n            }\n        })\n        me.callParent(arguments);\n    },\n    updateStatus: function(count) {\n    \tthis.update({count: count})\n    }\n});\n","Ext.define('Voyant.widget.DocumentSelector', {\r\n    mixins: ['Voyant.util.Localization'],\r\n    alias: 'widget.documentselector',\r\n\tglyph: 'xf10c@FontAwesome',\r\n\tstatics: {\r\n\t\ti18n: {\r\n\t\t}\r\n\t},\r\n\r\n\tconfig: {\r\n\t\tdocs: undefined,\r\n\t\tcorpus: undefined,\r\n\t\tsingleSelect: false\r\n\t},\r\n\t\r\n    initComponent: function() {\r\n\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tthis.setSingleSelect(this.config.singleSelect == undefined ? this.getSingleSelect() : this.config.singleSelect);\r\n\t\t\r\n\t\tExt.apply(me, {\r\n\t\t\ttext: this.localize('documents'),\r\n\t\t\tmenu: {\r\n\t\t\t\twidth: 250,\r\n\t\t\t\tfbar: [{\r\n\t\t\t\t\txtype: 'checkbox',\r\n\t\t\t\t\thidden: this.getSingleSelect(),\r\n\t\t\t\t\tboxLabel: this.localize(\"all\"),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchange: {\r\n\t\t\t\t\t\t\tfn: function(item, checked) {\r\n\t\t\t\t\t\t\t\tthis.getMenu().items.each(function(item) {\r\n\t\t\t\t\t\t\t\t\titem.setChecked(checked);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},{xtype:'tbfill'},{\r\n\t\t    \t\txtype: 'button',\r\n\t\t    \t\ttext: this.localize('ok'),\r\n\t\t\t\t\thidden: this.getSingleSelect(),\r\n\t    \t    \tscale: 'small',\r\n\t\t    \t\thandler: function(button, e) {\r\n\t\t    \t\t\tvar docs = [];\r\n\t\t    \t\t\tthis.getMenu().items.each(function(item) {\r\n\t\t    \t\t\t\tif (item.checked) {\r\n\t\t\t    \t\t\t\tdocs.push(item.docId);\r\n\t\t    \t\t\t\t}\r\n\t\t    \t\t\t}, this);\r\n\t\t    \t\t\t\r\n\t\t    \t\t\t// tell parent tool\r\n\t\t\t\t\t\tvar panel = button.findParentBy(function(clz) {\r\n\t\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (panel) {\r\n\t\t\t    \t\t\tpanel.fireEvent('documentsSelected', button, docs);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t    \t\t\t// hide the opened menu\r\n\t\t    \t\t\tbutton.findParentBy(function(clz) {\r\n\t\t    \t\t\t\tif (clz.isXType(\"button\") && clz.hasVisibleMenu()) {\r\n\t\t    \t\t\t\t\tclz.hideMenu();\r\n\t\t    \t\t\t\t\treturn true;\r\n\t\t    \t\t\t\t}\r\n\t\t    \t\t\t\treturn false;\r\n\t\t    \t\t\t});\r\n\t\t    \t\t},\r\n\t\t    \t\tscope: this\r\n\t\t    \t},{\r\n\t\t    \t\txtype: 'button',\r\n\t\t    \t\ttext: this.localize('cancel'),\r\n\t    \t    \tscale: 'small',\r\n\t\t    \t\thandler: function(b, e) {\r\n\t\t    \t\t\tthis.findParentBy(function(clz) {\r\n\t\t    \t\t\t\tif (clz.isXType(\"button\") && clz.hasVisibleMenu()) {\r\n\t\t    \t\t\t\t\tclz.hideMenu();\r\n\t\t    \t\t\t\t\treturn true;\r\n\t\t    \t\t\t\t}\r\n\t\t    \t\t\t\treturn false;\r\n\t\t    \t\t\t}, this);\r\n\t\t    \t\t\tthis.hideMenu();\r\n\t\t    \t\t},\r\n\t\t    \t\tscope: this\r\n\t\t    \t}]\r\n\t\t\t},\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(selector) {\r\n\t\t\t\t\tselector.on(\"loadedCorpus\", function(src, corpus) {\r\n\t\t\t\t\t\tthis.setCorpus(corpus);\r\n\t\t\t\t\t\tif (corpus.getDocumentsCount()==1) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tselector.populate(corpus.getDocumentsStore().getRange(), true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, selector);\r\n\t\t\t\t\tvar panel = selector.findParentBy(function(clz) {\r\n\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (panel) {\r\n\t\t\t\t\t\tpanel.on(\"loadedCorpus\", function(src, corpus) {\r\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", src, corpus);\r\n\t\t\t\t\t\t}, selector);\r\n\t\t\t\t\t\tif (panel.getCorpus && panel.getCorpus()) {selector.fireEvent(\"loadedCorpus\", selector, panel.getCorpus());}\r\n\t\t\t\t\t\telse if (panel.getStore && panel.getStore() && panel.getStore().getCorpus && panel.getStore().getCorpus()) {\r\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", selector, panel.getStore().getCorpus());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n    },\r\n    \r\n    populate: function(docs, replace) {\r\n    \tthis.setDocs(docs);\r\n    \t\r\n    \tvar menu = this.getMenu();\r\n    \tif (replace) {\r\n    \t\tmenu.removeAll();\r\n    \t}\r\n    \t\r\n    \tvar isSingleSelect = this.getSingleSelect();\r\n    \t\r\n    \tvar groupId = 'docGroup'+Ext.id();\r\n    \tdocs.forEach(function(doc, index) {\r\n    \t\tmenu.add({\r\n    \t\t\txtype: 'menucheckitem',\r\n    \t\t\ttext: doc.getShortTitle(),\r\n    \t\t\tdocId: doc.get('id'),\r\n    \t\t\tchecked: isSingleSelect && index == 0 || !isSingleSelect,\r\n    \t\t\tgroup: isSingleSelect ? groupId : undefined,\r\n    \t\t\tcheckHandler: function(item, checked) {\r\n    \t\t\t\tif (this.getSingleSelect() && checked) {\r\n    \t\t\t\t\tvar panel = this.findParentBy(function(clz) {\r\n    \t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\r\n    \t\t\t\t\t});\r\n    \t\t\t\t\tif (panel) {\r\n\t    \t\t\t\t\tpanel.fireEvent('documentSelected', this, doc);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t});\r\n    \t}, this);\r\n    \t\r\n    }\r\n});\r\n\r\nExt.define('Voyant.widget.DocumentSelectorButton', {\r\n    extend: 'Ext.button.Button',\r\n    alias: 'widget.documentselectorbutton',\r\n    mixins: ['Voyant.widget.DocumentSelector'],\r\n    initComponent: function() {\r\n    \tthis.mixins[\"Voyant.widget.DocumentSelector\"].initComponent.apply(this, arguments);\r\n\t\tthis.callParent();\r\n    }\r\n})\r\n    \r\nExt.define('Voyant.widget.DocumentSelectorMenuItem', {\r\n    extend: 'Ext.menu.Item',\r\n    alias: 'widget.documentselectormenuitem',\r\n    mixins: ['Voyant.widget.DocumentSelector'],\r\n    initComponent: function() {\r\n    \tthis.mixins[\"Voyant.widget.DocumentSelector\"].initComponent.apply(this, arguments);\r\n\t\tthis.callParent();\r\n    }\r\n})\r\n","Ext.define('Voyant.widget.CorpusDocumentSelector', {\n    extend: 'Ext.button.Button',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.corpusdocumentselector',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined,\n\t\tsingleSelect: false\n\t},\n\t\n    initComponent: function() {\n\t\tvar me = this;\n\t\t\n\t\tthis.setSingleSelect(this.config.singleSelect == undefined ? this.getSingleSelect() : this.config.singleSelect);\n\t\t\n\t\tExt.apply(me, {\n\t\t\ttext: this.localize('scale'),\n\t\t\tglyph: 'xf059@FontAwesome',\n\t\t\tmenu: {\n\t\t\t\titems: [{\n\t\t\t\t\ttext: this.localize(\"corpus\"),\n\t\t\t\t\tglyph: 'xf111@FontAwesome',\n\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\tvar panel = this.findParentBy(function(clz) {\n\t\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (panel) {\n\t\t\t\t\t\t\tbutton.nextSibling().menu.items.each(function(item) {\n\t\t\t\t\t\t\t\titem.setChecked(false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpanel.fireEvent(\"corpusSelected\", this, this.getCorpus());\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t},{\n\t\t\t\t\txtype: 'documentselectormenuitem',\n\t\t\t\t\tsingleSelect: this.getSingleSelect()\n\t\t\t\t}]\n\t\t\t},\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(selector) {\n\t\t\t\t\tselector.on(\"loadedCorpus\", function(src, corpus) {\n\t\t\t\t\t\tthis.setCorpus(corpus);\n\t\t\t\t\t\tif (corpus.getDocumentsCount()==1) {\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, selector);\n\t\t\t\t\tvar panel = selector.findParentBy(function(clz) {\n\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t\t\t\t});\n\t\t\t\t\tif (panel) {\n\t\t\t\t\t\tpanel.on(\"loadedCorpus\", function(src, corpus) {\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", src, corpus);\n\t\t\t\t\t\t}, selector);\n\t\t\t\t\t\tif (panel.getCorpus && panel.getCorpus()) {selector.fireEvent(\"loadedCorpus\", selector, panel.getCorpus())}\n\t\t\t\t\t\telse if (panel.getStore && panel.getStore() && panel.getStore().getCorpus && panel.getStore().getCorpus()) {\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", selector, panel.getStore().getCorpus());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tme.callParent(arguments);\t\n    }\n});","Ext.define('Voyant.widget.DownloadFilenameBuilder', {\n    extend: 'Ext.form.FieldContainer', //'Ext.container.Container',\n    mixins: ['Voyant.util.Localization', 'Ext.form.field.Field'],\n    alias: 'widget.downloadfilenamebuilder',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t    name: 'documentFilename',\n\t    itemId: 'documentFilename',\n\t\tfields: ['pubDate', 'title', 'author'],\n\t\tvalue: ['pubDate', 'title'],\n\t\twidth: 400\n\t},\n\t\n\n    initComponent: function(config) {\n    \tconfig = config || {};\n        var me = this;\n        \n        me.initField();\n\n        me.on('afterrender', function() {\n        \tthis.items.eachKey(function(key) {\n        \t\tnew Ext.dd.DropZone(this.items.get(key).getTargetEl(), {\n        \t\t\tddGroup: 'downloadfilename',\n        \t\t\tgetTargetFromEvent: function(e) {\n        \t\t\t\tvar target = e.getTarget();\n        \t\t\t\t// check that we're not dropping on another source\n        \t\t\t\treturn target.className && target.className.indexOf('dragsource')>-1 ? target.parentNode : target;\n        \t        },\n        \t        onNodeDrop : function(target, dd, e, data){\n        \t        \ttarget.appendChild(dd.el.dom);\n        \t            return true;\n        \t        }\n        \t\t});\n        \t}, this)\n        \t\n        \tthis.getFields().map(function(item) {\n        \t\titem = Ext.isString(item) ? {\n            \t\ttag: 'span',\n            \t\thtml: this.localize(item+\"Label\"),\n            \t\tvalue: item\n        \t\t} : item;\n        \t\tvar container = this.queryById(Ext.Array.contains(this.getValue(), item.value) ? 'enabled' : 'available')\n\t\t\t\tvar el = Ext.dom.Helper.append(container.getTargetEl(), Ext.apply(item, {cls: 'dragsource'}));\n    \t\t\tExt.create('Ext.dd.DragSource', el, {\n    \t\t\t\tddGroup: 'downloadfilename'\n                });\n        \t}, this)\n        }, me);\n        me.callParent(arguments);\n    }, \n    defaults: {\n    \txtype: 'container',\n    \twidth: '100%'\n    },\n    items: [{\n    \titemId: 'enabled',\n    \tcls: 'dropzone dropzone-enabled'\n    }, {\n    \titemId: 'available',\n    \tcls: 'dropzone dropzone-disabled'\n    }],\n    \n    \n    getValue: function() {\n    \treturn this.rendered ? this.getTargetEl().query('.dropzone-enabled .dragsource').map(function(source) {return source.getAttribute('value')}) : this.value;\n    },\n    \n    setValue: function(val) {\n    \tif (this.rendered) {\n        \tthis.getTargetEl().query(\".dragsource\", false).forEach(function(source) {\n        \t\tvar enabled = Ext.Array.contains(this.value, source.getAttribute('value'))\n        \t\tif (enabled && source.parent().hasCls('dropzone-disabled')) {\n        \t\t\tthis.queryById('enabled').getTargetEl().appendChild(source.dom);\n        \t\t} else if (!enabled && source.parent().hasCls('dropzone-enabled')) {\n        \t\t\tthis.queryById('available').getTargetEl().appendChild(source.dom);\n        \t\t}\n        \t}, this)\n    \t} else {\n    \t\tthis.value = val;\n    \t}\n    }\n    \n    \n});\n","Ext.define('Voyant.widget.DownloadFileFormat', {\n    extend: 'Ext.form.CheckboxGroup', //'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.downloadfileformat',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n    initComponent: function(config) {\n    \tconfig = config || {};\n        var me = this;\n        \n        Ext.apply(this, {\n        \tlabelAlign: config.labelAlign ? config.labelAlign : 'right'\n        })\n\n        Ext.applyIf(this, {\n        \tfieldLabel: this.localize('fieldLabel'),\n        \titems: [\n\t            {boxLabel: this.localize('original'), name: 'documentFormat', inputValue: 'SOURCE'},\n\t            {boxLabel: this.localize('voyantXml'), name: 'documentFormat', inputValue: 'VOYANT'},\n                {boxLabel: this.localize('plainText'), name: 'documentFormat', inputValue: 'TXT'}\n        \t],\n        \twidth: 450\n        })\n        me.on('afterrender', function() {\n        \tthis.query('checkbox').forEach(function(cmp) {\n        \t\tvar tooltip = this.localize(cmp.inputValue+\"Tip\");\n        \t\tif (tooltip.indexOf(cmp.inputValue+\"Tip\")==-1) {\n\t\t        \tExt.tip.QuickTipManager.register({\n\t\t                 target:cmp.getEl(),\n\t\t                 text: tooltip\n\t\t             });\n        \t\t}\n        \t}, this)\n        }, this)\n        me.on('beforedestroy', function() {\n        \tthis.query('checkbox').forEach(function(cmp) {\n        \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n        \t}, this);\n        }, this);\n\n        me.callParent(arguments);\n    }\n});\n","Ext.define('Voyant.widget.DownloadOptions', {\n    extend: 'Ext.form.FieldSet',\n    mixins: ['Voyant.util.Localization'],\n    requires: ['Voyant.widget.DownloadFileFormat', 'Voyant.widget.DownloadFilenameBuilder'],\n    alias: 'widget.downloadoptions',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\titems: [{xtype: 'downloadfileformat'}, {xtype: 'downloadfilenamebuilder'}]\n\t},\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n        Ext.apply(this, {\n        \ttitle: config.title ? config.title : this.localize('title')\n        })\n        me.callParent(arguments);\n    }\n});\n","Ext.define('Voyant.widget.FontFamilyOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.fontfamilyoption',\n    statics: {\n    \ti18n: {\n    \t},\n    \tfonts: [{name: \"Georgia\", value: 'Georgia, serif'},\n\t            {name: \"Palatino\", value: '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif'},\n\t            {name: \"Times New Roman\", value: '\"Times New Roman\", Times, serif'},\n\t            {name: \"Arial\", value: 'Arial, Helvetica, sans-serif'},\n\t            {name: \"Arial Black\", value: '\"Arial Black\", Gadget, sans-serif'},\n\t            {name: \"Comic Sans MS\", value: '\"Comic Sans MS\", cursive, sans-serif'},\n\t            {name: \"Impact\", value: 'Impact, Charcoal, sans-serif'},\n\t            {name: \"Lato\", value: 'LatoWeb'},\n\t            {name: \"Lucida\", value: '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif'},\n\t            {name: \"Tahoma/Geneva\", value: 'Tahoma, Geneva, sans-serif'},\n\t            {name: \"Trebuchet MS/Helvetica\", value: '\"Trebuchet MS\", Helvetica, sans-serif'},\n\t            {name: \"Verdana/Geneva\", value: 'Verdana, Geneva, sans-serif'},\n\t            {name: \"Courrier New\", value: '\"Courier New\", Courier, monospace'},\n\t            {name: \"Lucida/Monaco\", value: '\"Lucida Console\", Monaco, monospace'}]\n    },\n    name: 'fontFamily',\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam('fontFamily');\n    \tvar data = Ext.ClassManager.getClass(this).fonts;\n\n    \tif (!Ext.Array.contains(data.map(function(item) {return item.value}), value)) {\n        \tdata.splice(0, 0, {name : value, value: value});//\n    \t}\n    \t\n    \tExt.apply(me, {\n    \t\titems: {\n    \t\t\txtype: 'combo',\n    \t        queryMode: 'local',\n    \t        name: 'fontFamily',\n    \t        value: value,\n    \t        triggerAction: 'all',\n    \t        editable: true,\n    \t        fieldLabel: this.localize('label'),\n    \t        labelAlign: 'right',\n    \t        displayField: 'name',\n    \t        valueField: 'value',\n    \t        store: {\n    \t            fields: ['name', 'value'],\n    \t            data: data\n    \t        },\n    \t        width: 400\n    \t\t}\n    \t})\n        me.callParent(arguments);\n    }\n})","Ext.define('Voyant.widget.ColorPaletteOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.colorpaletteoption',\n    layout: 'hbox',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    \n    paletteTpl: new Ext.XTemplate(\n\t\t'<tpl for=\".\">',\n\t\t\t'<div class=\"color\" style=\"background-color: rgb({color});\"></div>',\n\t\t'</tpl>'\n\t),\n\tpaletteStore: new Ext.data.ArrayStore({\n        fields: ['id', 'color'],\n        listeners: {\n        \tupdate: function(store, record, op, mod, details) {\n        \t},\n        \tscope: this\n        } \n    }),\n    \n    editPaletteWin: null,\n    spectrum: null,\n    \n    initComponent: function(config) {\n    \tvar me = this;\n\n    \tvar app = this.up('window').panel.getApplication();\n    \tvar data = [];\n    \tfor (var key in app.getPalettes()) {\n    \t\tdata.push({name: key, value: key});\n    \t}\n    \tvar value = app.getApiParam('palette');\n    \t\n    \tExt.apply(me, {\n\t    \t\titems: [{\n\t    \t        xtype: 'combo',\n\t    \t        queryMode: 'local',\n\t    \t        value: value,\n\t    \t        triggerAction: 'all',\n\t    \t        editable: true,\n\t    \t        fieldLabel: me.localize('palette'),\n\t    \t        labelAlign: 'right',\n\t    \t        name: 'palette',\n\t    \t        displayField: 'name',\n\t    \t        valueField: 'value',\n\t    \t        store: {\n\t    \t            fields: ['name', 'value'],\n\t    \t            data: data\n\t    \t        }\n\t    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t    \t\t\txtype: 'button',\n\t    \t\t\ttext: this.localize('editList'),\n\t\t            ui: 'default-toolbar',\n\t    \t\t\thandler: this.editPalette,\n\t    \t\t\tscope: this\n\t    \t\t}\n//\t    \t\t, {width: 10}, {\n//\t    \t\t\txtype: 'checkbox',\n//\t    \t\t\tname: 'paletteGlobal',\n//\t    \t\t\tchecked: true,\n//\t    \t\t\tboxLabel: this.localize('applyGlobally')\n//\t    \t\t}\n\t    \t\t]\n    \t});\n        me.callParent(arguments);\n    },\n    \n    editPalette: function() {\n    \tvar value = this.down('combo').getValue();\n    \tthis.loadPalette(value);\n    \t\n    \tthis.editPaletteWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: this.localize('paletteEditor'),\n\t\t\tmodal: true,\n\t\t\theight: 300,\n\t\t\twidth: 425,\n\t\t\tpadding: 5,\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems:[{\n\t\t\t\tflex: 1,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\theight: 24,\n\t\t\t\t\tmargin: '0 0 5 0',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: this.localize('add'),\n\t\t\t\t\t\tmargin: '0 5 0 0',\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tvar color = this.spectrum.spectrum('get').toRgb();\n\t\t\t\t\t\t\tvar dv = this.editPaletteWin.down('dataview');\n\t\t\t\t\t\t\tthis.paletteStore.add([ [Ext.id(), [color.r, color.g, color.b]] ]);\n\t\t\t\t\t\t\tdv.refresh();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: this.localize('remove'),\n\t\t\t\t\t\tmargin: '0 5 0 0',\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tvar dv = this.editPaletteWin.down('dataview');\n\t\t\t\t\t\t\tvar sel = dv.getSelectionModel().getSelection()[0];\n\t\t\t\t\t\t\tif (sel != null) {\n\t\t\t\t\t\t\t\tthis.paletteStore.remove(sel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdv.refresh();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: this.localize('clear'),\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tthis.paletteStore.removeAll();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\txtype: 'dataview',\n\t\t\t\t\tflex: 1,\n\t\t\t\t\tscrollable: 'y',\n\t\t        \tstore: this.paletteStore,\n\t\t        \ttpl: this.paletteTpl,\n\t\t        \titemSelector: 'div.color',\n\t\t        \toverItemCls: 'over',\n\t\t        \tselectedItemCls: 'selected',\n\t\t        \tselectionModel: {\n\t\t        \t\tmode: 'SINGLE'\n\t\t        \t},\n\t\t        \tlisteners: {\n\t\t        \t\tselectionchange: function(viewmodel, selected, opts) {\n\t\t        \t\t\tif (selected[0] != null) {\n\t\t\t\t\t\t\t\tvar color = selected[0].get('color');\n\t\t\t\t\t\t\t\tvar parentPanel = this.up('window').panel;\n\t\t\t\t\t\t\t\tvar hex = parentPanel.getApplication().rgbToHex(color);\n\t\t\t\t\t\t\t\tthis.spectrum.spectrum('set', hex);\n\t\t\t\t\t\t\t}\n\t\t        \t\t},\n\t\t        \t\tscope: this\n\t\t        \t}\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\titemId: 'colorEditor',\n\t\t\t\twidth: 200,\n\t\t\t\tmargin: '0 0 0 5',\n\t\t\t\thtml: '<input type=\"text\" style=\"display: none;\" />'\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: this.localize('saveNewPalette'),\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tthis.savePalette();\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: this.localize('cancel'),\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tclose: function(panel) {\n\t\t\t\t\tif (this.spectrum) {\n\t\t\t\t\t\tthis.spectrum.spectrum('destroy');\n\t\t\t\t\t\tthis.spectrum = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n    \t}).show();\n    \t\n    \tthis.initSpectrum();\n    },\n    \n    setColorForSelected: function(color) {\n    \tif (this.spectrum !== null) { // need check due to https://github.com/bgrins/spectrum/issues/387\n\t\t\tvar rgb = color.toRgb();\n\t\t\tvar rgbA = [rgb.r, rgb.g, rgb.b];\n\t\t\tvar dv = this.editPaletteWin.down('dataview');\n\t\t\tvar sel = dv.getSelectionModel().getSelection()[0];\n\t\t\tif (sel != null) {\n\t\t\t\tsel.set('color', rgbA);\n\t\t\t}\n    \t}\n\t},\n    \n\tinitSpectrum: function() {\n\t\tif (this.spectrum === null) {\n\t\t\tvar editor = this.editPaletteWin.down('#colorEditor');\n\t\t\tvar input = editor.el.down('input');\n\t\t\tthis.spectrum = $(input.dom).spectrum({\n\t\t\t\tflat: true,\n\t\t\t\tshowInput: true,\n\t\t\t\tshowButtons: false,\n\t\t\t\tpreferredFormat: 'hex',\n\t\t\t\tchange: this.setColorForSelected.bind(this),\n\t\t\t\tmove: this.setColorForSelected.bind(this)\n\t\t\t});\n\t\t}\n\t},\n\t\n    loadPalette: function(paletteId) {\n    \tvar parentPanel = this.up('window').panel;\n    \t\n    \tvar palette = parentPanel.getApplication().getColorPalette(paletteId);\n    \tvar paletteData = [];\n    \tpalette.forEach(function(c) {\n    \t\tpaletteData.push([Ext.id(), c]);\n    \t}, this);\n    \tthis.paletteStore.loadData(paletteData);\n    },\n    \n    savePalette: function() {\n    \tvar value = [];\n    \tthis.paletteStore.each(function(c) {\n    \t\tvalue.push(c.get('color'));\n    \t});\n    \tvar valueString = Ext.encode(value);\n    \tvar parentPanel = this.up('window').panel;\n    \tvar corpusId = parentPanel.getCorpus().getId();\n    \tExt.Ajax.request({\n    \t    url: parentPanel.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.StoredResource',\n    \t\t\tstoreResource: valueString,\n    \t\t\tcorpus: corpusId\n    \t    },\n    \t    success: function(response, req) {\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar id = json.storedResource.id;\n    \t    \tvar combo = this.down('combo');\n    \t    \tvar store = combo.getStore();\n    \t    \tstore.add({name: id, value: id});\n    \t    \tcombo.setValue(id);\n    \t    \tcombo.updateLayout();\n    \t    \t\n    \t    \tparentPanel.getApplication().addColorPalette(id, value);\n    \t    },\n    \t    scope: this\n    \t});\n    }\n});","Ext.define('Voyant.widget.VoyantChart', {\n    extend: 'Ext.chart.CartesianChart',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.notebook.util.Embed'],\n    alias: 'widget.voyantchart',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttableJson: undefined\n    \t}\n    },\n    constructor: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n    \tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tthis.callParent(arguments)\n    \t\n    },\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tthis.on(\"afterrender\", function() {\n        \tif (config && \"tableJson\" in config) {\n        \t\tExt.apply(this, this.getConfigFromTableJson(config.tableJson));\n        \t}\n        \telse if (this.getApiParam('tableJson')) {\n        \t\tvar chart = this.getConfigFromTableJson();\n        \t\tthis.setAxes(chart.axes);\n        \t\tthis.setSeries(chart.series);\n        \t\tthis.setLegend(chart.legend);\n        \t\tthis.setStore(chart.store);\n        \t\tthis.redraw();\n        \t}\n    \t}, this)\n    \tthis.callParent(arguments)\n    },\n    \n    getConfigFromTableJson: function(jsonString) {\n    \tjsonString = jsonString || this.getApiParam('tableJson');\n    \tif (!jsonString) {return {}};\n    \t\n\t\tvar json = JSON.parse(jsonString);\n\t\t\n\t\tjson.headers = json.headers.map(function(header) {return header})\n\t\t// if we have only one column add a second column with a counter (as category)\n\t\tif (json.headers.length==1) {\n\t\t\tjson.headers.push(1);\n\t\t\tjson.rowKey = 1;\n\t\t\tjson.rows.forEach(function(row, i) {if (row) {row.push(i)}})\n\t\t}\n\t\t\n\t\t// data\n\t\tvar data = [];\n\t\tif (!json.rowKey) {json.rowKey=json.headers[0];}\n\t\tjson.rows.forEach(function(row, i) {\n\t\t\tif (row) {\n\t\t\t\tvar map = {};\n\t\t\t\tmap[json.rowKey] = i;\n\t\t\t\trow = row.forEach(function(cell, j) {\n\t\t\t\t\tmap[json.headers[j]] = cell\n\t\t\t\t})\n\t\t\t\tdata.push(map);\n\t\t\t}\n\t\t})\n\n\t\t// start chart\n\t\tif (!json.config) {json.config = {}}\n\t\tvar chart = {\n\t\t\tstore: {\n\t\t        fields: Object.keys(data[0]),\n\t\t        data: data\n\t\t\t},\n\t        axes: Ext.isArray(json.config.axes) ? json.config.axes : [{},{}],\n\t        series: [],\n    \t\tlegend: json.config.noLegend || Object.keys(data[0]).length<3 ? undefined : {docked:'top'}\n\n\t\t}\n\n\t\t// axes\n\t\tif (!json.config.axes) {json.config.axes = [{},{}]}\n\t\tchart.axes.forEach(function(axis, i) {\n\t\t\tif (Ext.isObject(json.config.axes)) {\n\t\t\t\tExt.apply(axis, json.config.axes);\n\t\t\t} else if (Ext.isArray(json.config.axes)) {\n\t\t\t\tExt.apply(axis, json.config.axes[i]);\n\t\t\t}\n\t\t\tExt.applyIf(axis, {\n\t        \ttype: i==0 ? 'numeric' : 'category',\n\t        \tposition: i==0 ? 'left' : 'bottom',\n\t        \tlabel: i==0 ? {} : {rotation: {degrees:-30}}\n\t        });\n\t\t})\n\n\t\t// series\n\t\tfor (var i=0, len=json.headers.length; i<len;i++) {\n\t\t\tif (json.headers[i]==json.rowKey) {continue;} // don't chart the row key, that's the x axis \n\t\t\tvar cfg = {};\n\t\t\tif (json.config.series) {\n\t\t\t\tif (Ext.isObject(json.config.series)) {\n\t\t\t\t\tExt.apply(cfg, json.config.series);\n\t\t\t\t} else if (Ext.isArray(json.config.series)) {\n\t\t\t\t\tExt.apply(cfg, json.config.series[chart.series.length]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tExt.applyIf(cfg, {\n\t\t        type: 'line',\n\t\t        xField: json.rowKey,\n\t\t        yField: json.headers[i],\n\t\t        marker: {\n\t\t        \tradius: 2\n\t\t        },\n\t\t        highlightCfg: {\n\t                scaling: 2\n\t            },\n\t            tooltip: {\n\t            \ttrackMouse: true,\n\t            \trenderer: function (tooltip, record, item) {\n\t                    tooltip.setHtml(record.get(item.series.getYField())+\": \"+record.get(item.series.getYField()));\n\t                }\n\t            }\n\t\t\t});\n\t\t\tchart.series.push(cfg);\n\t\t}\n\t\t\n\t\treturn chart;\n    \t\n    }\n\n})","Ext.define('Voyant.widget.LiveSearchGrid', {\n    extend: 'Ext.grid.Panel',\n    \n    /**\n     * @private\n     * search value initialization\n     */\n    searchValue: null,\n    \n    /**\n     * @private\n     * The matched positions from the most recent search\n     */\n    matches: [],\n    \n    /**\n     * @private\n     * The current index matched.\n     */\n    currentIndex: null,\n    \n    /**\n     * @private\n     * The generated regular expression used for searching.\n     */\n    searchRegExp: null,\n    \n    /**\n     * @private\n     * Case sensitive mode.\n     */\n    caseSensitive: false,\n    \n    /**\n     * @private\n     * Regular expression mode.\n     */\n    regExpMode: false,\n    \n    /**\n     * @cfg {String} matchCls\n     * The matched string css classe.\n     */\n    matchCls: 'keyword',\n    \n    // Component initialization override: adds the top and bottom toolbars and setup headers renderer.\n    initComponent: function() {\n        var me = this;\n        me.callParent(arguments);\n    },\n    \n    // detects html tag\n    tagsRe: /<[^>]*>/gm,\n    \n    // DEL ASCII code\n    tagsProtect: '\\x0f',\n    \n    /**\n     * Finds all strings that matches the searched value in each grid cells.\n     * @private\n     */\n     onTextFieldChange: function(field, val) {\n         var me = this,\n             count = 0,\n             view = me.view,\n             cellSelector = view.cellSelector,\n             innerSelector = view.innerSelector,\n             columns = me.visibleColumnManager.getColumns();\n\n         view.refresh();\n\n         me.searchValue = val;\n         me.matches = [];\n         me.currentIndex = null;\n\n         if (me.searchValue !== null) {\n             me.searchRegExp = new RegExp(val, 'g' + (me.caseSensitive ? '' : 'i'));\n\n             me.store.each(function(record, idx) {\n                var node = view.getNode(record);\n\n                if (node) {\n                    Ext.Array.forEach(columns, function(column) {\n                    \t\n                        var cell = Ext.fly(node).down(column.getCellInnerSelector(), true),\n                            matches, cellHTML,\n                            seen;\n\n                        if (cell && column.isXType('widgetcolumn')==false) {\n                            matches = cell.innerHTML.match(me.tagsRe);\n                            cellHTML = cell.innerHTML.replace(me.tagsRe, me.tagsProtect);\n\n                            // populate indexes array, set currentIndex, and replace wrap matched string in a span\n                            cellHTML = cellHTML.replace(me.searchRegExp, function(m) {\n                                ++count;\n                                if (!seen) {\n                                    me.matches.push({\n                                        record: record,\n                                        column: column\n                                    });\n                                    seen = true;\n                                }\n                                return '<span class=\"' + me.matchCls + '\">' + m + '</span>';\n                            }, me);\n                            // restore protected tags\n                            Ext.each(matches, function(match) {\n                                cellHTML = cellHTML.replace(me.tagsProtect, match);\n                            });\n                            // update cell html\n                            cell.innerHTML = cellHTML;\n                        }\n                    });\n                }\n             }, me);\n\n             // results found\n             if (count) {\n                me.currentIndex = 0;\n                me.gotoCurrent();\n             }\n         }\n\n         // no results found\n         if (me.currentIndex === null) {\n             me.getSelectionModel().deselectAll();\n         }\n         field.focus();\n     },\n\n    privates: {\n        gotoCurrent: function() {\n            var pos = this.matches[this.currentIndex];\n            this.getNavigationModel().setPosition(pos.record, pos.column);\n            this.getSelectionModel().select(pos.record);\n        }\n    }\n});\n","Ext.define('Voyant.widget.ProgressMonitor', {\n\textend: \"Ext.Base\",\n\tmixins: ['Voyant.util.Localization'],\n\tmsgbox: undefined,\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tprogress: undefined,\n\t\tscope: undefined,\n\t\tsuccess: undefined,\n\t\tfailure: undefined,\n\t\targs: undefined,\n\t\ttool: undefined,\n\t\tdelay: 1000,\n\t\tmaxMillisSinceStart: undefined\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n\t\tif (!config || !config.progress || !config.progress.id) {\n\t\t\treturn Voyant.application.showError(this.localize(\"noProgress\"))\n\t\t}\n\t\tthis.initConfig(config);\n\t\tthis.callParent(arguments);\n\t\tthis.update();\n\t},\n\n\tupdate: function() {\n\t\tvar progress = this.getProgress(), scope = this.getScope();\n\t\tvar msg = scope.localize ? scope.localize(progress.code) : this.localize(progress.code);\n\t\tif (msg==\"[\"+progress.code+\"]\") {msg=progress.message}\n\t\tmsg+=\" (\"+(parseInt(progress.completion*100))+\"%)\";\n\t\tvar text = this.localize(progress.status.toLowerCase());\n\t\tif (!this.msgbox || this.msgbox.msg.html!=msg || !this.msgbox.progressBar || this.msgbox.progressBar.getText()!=text) {\n\t\t\tthis.msgbox = Ext.Msg.wait(msg, this.localize(\"progress\"), {\n\t\t\t\ttext: text\n\t\t\t});\n\t\t}\n\t\tif (progress.status==\"LAUNCH\" || progress.status==\"RUNNING\") {\n\t\t\tvar me = this;\n\t\t\tExt.defer(function() {\n\t\t\t\tExt.Ajax.request({\n\t\t\t\t     url: Voyant.application.getTromboneUrl(),\n\t\t\t\t     params: {\n\t\t\t\t    \t \ttool: \"progress.ProgressMonitor\",\n\t\t\t\t    \t \tid: progress.id,\n\t\t\t\t    \t \tmaxMillisSinceStart: me.getMaxMillisSinceStart()\n\t\t\t\t     }\n\t\t\t\t }).then(function(response, opt) {\n\t\t\t\t\t var data = Ext.decode(response.responseText);\n\t\t\t\t\t if (data && data.progress.progress) {\n\t\t\t\t\t\t me.setProgress(data.progress.progress);\n\t\t\t\t\t\t me.update();\n\t\t\t\t\t } else {\n\t\t\t\t\t\t me.finish(false, me.localize(\"badProgress\"))\n\t\t\t\t\t }\n\t\t\t\t }, function(response, opt) {\n\t\t\t\t\t me.finish(false, response);\n\t\t\t\t });\n\t\t\t}, this.getDelay(), this)\n\t\t} else {\n\t\t\tthis.finish(progress.status==\"FINISHED\", msg);\n\t\t}\n\t\tif (this.getDelay()<5000) {this.setDelay(this.getDelay()+500)} // longer delay, up to 5 secs\n\t},\n\t\n\tfinish: function(success, response) {\n\t\tvar callback = success ? this.getSuccess() : this.getFailure();\n\t\tvar args = this.getArgs(), progress = this.getProgress(), scope = this.getScope();\n\t\tthis.close();\n\t\tif (callback && callback.apply) {\n\t\t\tcallback.apply(scope, [success ? args : response || progress]);\n\t\t} else {\n\t\t\tVoyant.application.showError(response);\n\t\t}\n\t},\n\t\n\tclose: function() {\n\t\tif (this.msgbox) {\n\t\t\tthis.msgbox.close();\n\t\t}\n\t\tthis.destroy();\n\t}\n\n})","Ext.define('Voyant.widget.VoyantTableTransform', {\n\textend: 'Ext.panel.Panel',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.notebook.util.Embed'],\n\talias: 'widget.voyanttabletransform',\n    statics: {\n    \ti18n: {},\n\t\tapi: {\n\t\t\ttableHtml: undefined,\n\t\t\ttableJson: undefined,\n\t\t\twidth: undefined,\n\t\t\tapi: undefined\n\t\t}\n    },\n    html: '',\n    config: {\n    \thiddenColumns: undefined\n    },\n\tconstructor: function(config) {\n    \tconfig = config || {};\n\t\tvar me = this;\n        me.callParent(arguments);\n\t},\n\tinitComponent: function(config) {\n    \tvar me = this, config = config || {};\n    \tme.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tif (this.config.api && this.config.api.tableJson) {\n    \t\tthis.setApiParam(\"tableJson\", this.config.api.tableJson);\n    \t}\n\t\tme.on('afterrender', function() {\n\t    \tme.buildFromParams();\n\t\t\tvar table = this.getTargetEl().down('table');\n\t\t\tif (table) {\n\t\t\t\tvar parent = table.parent();\n\t\t\t\tvar grid = new Ext.ux.grid.TransformGrid(table, {\n\t\t\t\t\twidth: this.getApiParam('width') || parent.getWidth(),\n\t\t\t\t\theight: this.getApiParam('height') || 20+(table.query('tr').length*24) // based on grid heights in crisp\n\t\t\t\t});\n\t\t\t\tgrid.render(parent);\n\t\t\t\tif (this.getHiddenColumns()) {\n\t\t\t\t\tvar hides = {}; // map for speed\n\t\t\t\t\tExt.Array.from(this.getHiddenColumns()).forEach(function(header) {hides[header]=true})\n\t\t\t\t\tgrid.getColumns().forEach(function(column) {\n\t\t\t\t\t\tif (column.text in hides) {column.hide()}\n\t\t\t\t\t});\n\t\t\t\t\tExt.defer(function() {\n\t\t\t\t\t\tgrid.setWidth(grid.getEl().dom.parentNode.offsetWidth); // resize\n\t\t\t\t\t},10)\n\t\t\t\t}\n\t\t\t}\n\t\t}, me);\n\t\t\n    \tme.callParent(arguments);\n\t},\n\t\n\tbuildFromParams: function() {\n\t\tvar me = this, tableHtml = this.getApiParam('tableHtml'), tableJson = this.getApiParam('tableJson');\n\t\tif (tableHtml) {\n\t\t\tthis.setHtml(tableHtml);\n\t\t} else if (tableJson) {\n\t\t\tvar html = \"<table><thead><tr>\", json = JSON.parse(tableJson);\n\t\t\t\n\t\t\tif (json.headers) {\n\t\t\t\tjson.headers.forEach(function(header) {\n\t\t\t\t\thtml+=\"<th>\"+header+\"</th>\"\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tjson.rows[0].forEach(function(cell, i) {\n\t\t\t\t\thtml+=\"<th>\"+(i+1)+\"</th>\";\n\t\t\t\t})\n\t\t\t}\n\t\t\thtml+=\"</tr></thead><tbody>\";\n\t\t\tjson.rows.forEach(function(row) {\n\t\t\t\thtml+=\"<tr>\";\n\t\t\t\trow.forEach(function(cell) {\n\t\t\t\t\thtml+=\"<td>\"+cell+\"</td>\"\n\t\t\t\t})\n\t\t\t\thtml+=\"</tr>\";\n\t\t\t})\n\t\t\thtml+=\"</tbody></table>\";\n\t\t\tthis.setHtml(html);\n\t\t\tif (json.config && json.config.hidden) {this.setHiddenColumns(json.config.hidden)}\n\t\t}\n\t\t\n\t}\n\n})\n\n\n\n/**\n * A Grid which creates itself from an existing HTML table element.\n */\nExt.define('Ext.ux.grid.TransformGrid', {\n    extend: 'Ext.grid.Panel',\n\n    /**\n     * Creates the grid from HTML table element.\n     * @param {String/HTMLElement/Ext.Element} table The table element from which this grid will be created -\n     * The table MUST have some type of size defined for the grid to fill. The container will be\n     * automatically set to position relative if it isn't already.\n     * @param {Object} [config] A config object that sets properties on this grid and has two additional (optional)\n     * properties: fields and columns which allow for customizing data fields and columns for this grid.\n     */\n    constructor: function(table, config) {\n        config = Ext.apply({}, config);\n        this.table = Ext.get(table);\n\n        var configFields = config.fields || [],\n            configColumns = config.columns || [],\n            fields = [],\n            cols = [],\n            headers = table.query(\"thead th\"),\n            i = 0,\n            len = headers.length,\n            data = table.dom,\n            width,\n            height,\n            store,\n            col,\n            text,\n            name;\n\n        for (; i < len; ++i) {\n            col = headers[i];\n\n            text = col.innerHTML;\n            name = 'tcol-' + i;\n\n            fields.push(Ext.applyIf(configFields[i] || {}, {\n                name: name,\n                mapping: 'td:nth(' + (i + 1) + ')/@innerHTML'\n            }));\n\n            cols.push(Ext.applyIf(configColumns[i] || {}, {\n                text: text,\n                dataIndex: name,\n                //width: col.offsetWidth,\n                flex: 1,\n                tooltip: col.title,\n                sortable: true\n            }));\n        }\n\n        if (config.width) {\n            width = config.width;\n        } else {\n            width = table.getWidth() + 1;\n        }\n\n        if (config.height) {\n            height = config.height;\n        }\n\n        Ext.applyIf(config, {\n            store: {\n                data: data,\n                fields: fields,\n                proxy: {\n                    type: 'memory',\n                    reader: {\n                        record: 'tbody tr',\n                        type: 'xml'\n                    }\n                }\n            },\n            columns: cols,\n            width: width,\n            height: height\n        });\n        this.callParent([config]);\n        \n        if (config.remove !== false) {\n            // Don't use table.remove() as that destroys the row/cell data in the table in\n            // IE6-7 so it cannot be read by the data reader.\n            data.parentNode.removeChild(data);\n        }\n    },\n\n    doDestroy: function() {\n        this.table.remove();\n        this.tabl = null;\n        this.callParent();\n    }\n});\n","Ext.define('Voyant.widget.CategoriesOption', {\r\n\textend: 'Ext.container.Container',\r\n\tmixins: ['Voyant.util.Localization'],\r\n\talias: 'widget.categoriesoption',\r\n\tstatics: {\r\n\t\ti18n: {\r\n\t\t}\r\n\t},\r\n\tconfig: {\r\n\t\tbuilderWin: undefined\r\n\t},\r\n\tinitComponent: function() {\r\n\t\tvar value = this.up('window').panel.getApiParam('categories');\r\n    \tvar data = value ? [{name: value, value: value}] : [];\r\n\t\t\r\n\t\tExt.apply(this, {\r\n    \t\tlayout: 'hbox',\r\n    \t\titems: [{\r\n    \t\t\txtype: 'combo',\r\n    \t\t\tqueryMode: 'local',\r\n    \t\t\ttriggerAction: 'all',\r\n    \t\t\tfieldLabel: this.localize('categories'),\r\n    \t\t\tlabelAlign: 'right',\r\n    \t\t\tdisplayField: 'name',\r\n    \t\t\tvalueField: 'value',\r\n    \t\t\tstore: {\r\n    \t\t\t\tfields: ['name', 'value'],\r\n    \t\t\t\tdata: data\r\n    \t\t\t},\r\n    \t\t\tname: 'categories',\r\n    \t\t\tvalue: value\r\n    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\r\n    \t\t\txtype: 'button',\r\n    \t\t\ttext: this.localize('edit'),\r\n    \t\t\tui: 'default-toolbar',\r\n    \t\t\thandler: function() {\r\n    \t\t\t\tif (this.getBuilderWin() === undefined) {\r\n    \t\t\t\t\tvar panel = this.up('window').panel;\r\n    \t\t\t\t\tvar win = Ext.create('Voyant.widget.CategoriesBuilder', {\r\n    \t\t\t\t\t\tpanel: panel,\r\n    \t\t\t\t\t\theight: panel.getApplication().getViewport().getHeight()*0.75,\r\n    \t\t\t\t\t\twidth: panel.getApplication().getViewport().getWidth()*0.75\r\n    \t\t\t\t\t});\r\n    \t\t\t\t\twin.on('close', function(win) {\r\n    \t\t\t\t\t\tvar id = win.getCategoriesId();\r\n    \t\t\t\t\t\tif (id !== undefined) {\r\n\t    \t\t\t\t\t\tvar combo = this.down('combo');\r\n\t\t\t\t\t\t\t\tvar name = id;\r\n\t\t\t\t\t\t\t\tcombo.getStore().add({name: name, value: id});\r\n\t\t\t\t\t\t\t\tcombo.setValue(id);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.up('window').panel.setApiParam('categories', id);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}, this);\r\n    \t\t\t\t\tthis.setBuilderWin(win);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tvar categoriesId = this.down('combo').getValue();\r\n    \t\t\t\tthis.getBuilderWin().setCategoriesId(categoriesId);\r\n\t\t\t\t\tthis.getBuilderWin().show();\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t}]\r\n    \t});\r\n\t\t\r\n\t\tthis.callParent(arguments);\r\n\t}\r\n});\r\n\r\nExt.define('Voyant.widget.CategoriesBuilder', {\r\n    extend: 'Ext.window.Window',\r\n    requires: ['Voyant.widget.FontFamilyOption'],\r\n    mixins: ['Voyant.util.Localization','Voyant.util.Api'],\r\n    alias: 'widget.categoriesbuilder',\r\n    statics: {\r\n    \ti18n: {\r\n    \t\ttitle: 'Categories Builder',\r\n    \t\tterms: 'Terms',\r\n    \t\tterm: 'Term',\r\n    \t\trawFreq: 'Count',\r\n    \t\trelativeFreq: 'Relative',\r\n    \t\tcategories: 'Categories',\r\n    \t\taddCategory: 'Add Category',\r\n    \t\tremoveCategory: 'Remove Category',\r\n    \t\tremoveTerms: 'Remove Selected Terms',\r\n    \t\tcategoryName: 'Category Name',\r\n    \t\tadd: 'Add',\r\n    \t\tcancel: 'Cancel',\r\n    \t\texists: 'Category already exists',\r\n    \t\tconfirmRemove: 'Are you sure you want to remove the category?',\r\n    \t\tsave: 'Save',\r\n    \t\tfeatures: 'Features',\r\n\t\t\tcategory: 'Category',\r\n\t\t\tincreaseCategory: 'Increase Category Priority',\r\n\t\t\tdecreaseCategory: 'Decrease Category Priority',\r\n    \t\t\r\n    \t\tcolor: 'Color',\r\n    \t\tfont: 'Font',\r\n    \t\torientation: 'Orientation'\r\n    \t},\r\n    \tapi: {\r\n    \t\tstopList: 'auto',\r\n    \t\tquery: undefined\r\n    \t},\r\n    \tfeatures: {\r\n        \tcolor: {\r\n        \t\txtype: 'colorfield',\r\n        \t\tformat: '#hex6'\r\n//        \t\t,listeners: {\r\n//        \t\t\trender: function(field) {\r\n//        \t\t\t\tfield.on('change', function(field, color) {\r\n//        \t\t\t\t\tfield.inputEl.setStyle('background-color', color);\r\n//        \t\t\t\t});\r\n//        \t\t\t}\r\n//        \t\t}\r\n        \t},\r\n        \tfont: {\r\n        \t\txtype: 'combobox',\r\n        \t\tqueryMode: 'local',\r\n        \t\tdisplayField: 'name',\r\n        \t\tvalueField: 'value',\r\n        \t\tstore: {\r\n        \t\t\tfields: ['name', 'value'],\r\n        \t\t\tdata: Voyant.widget.FontFamilyOption.fonts\r\n        \t\t}\r\n        \t},\r\n        \torientation: {\r\n        \t\txtype: 'combobox',\r\n        \t\tqueryMode: 'local',\r\n        \t\tdisplayField: 'name',\r\n        \t\tvalueField: 'value',\r\n        \t\tstore: {\r\n        \t\t\tfields: ['name', 'value'],\r\n        \t\t\tdata: [{name: 'Horizontal', value: 0}, {name: 'Vertical', value: 90}]\r\n        \t\t}\r\n        \t}\r\n        }\r\n    },\r\n    config: {\r\n    \tcorpus: undefined,\r\n    \tbuilderWin: undefined,\r\n    \taddCategoryWin: undefined,\r\n    \tcategoriesId: undefined\r\n    },\r\n    \r\n    // window defaults\r\n    closeAction: 'hide',\r\n    modal: true,\r\n\theight: 250,\r\n\twidth: 500,\r\n\r\n    constructor: function(config) {\r\n    \tconfig = config || {};\r\n    \t\r\n    \tif (config.panel) {\r\n    \t\tthis.panel = config.panel;\r\n\t\t\tthis.app = this.panel.getApplication();\r\n\t\t\tthis.categoriesManager = this.app.getCategoriesManager();\r\n    \t} else {\r\n    \t\tif (window.console) {\r\n    \t\t\tconsole.warn('can\\'t find panel!');\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tExt.apply(this, {\r\n    \t\theader: false,\r\n    \t\tlayout: 'fit',\r\n    \t\tonEsc: Ext.emptyFn,\r\n    \t\titems: {\r\n\t    \t\txtype: 'tabpanel',\r\n\t    \t\ttitle: this.localize('title'),\r\n\t    \t\ttabBarHeaderPosition: 1,\r\n\t    \t\titems: [{\r\n\t\t    \t\tlayout: 'border',\r\n\t\t    \t\ttitle: this.localize('categories'),\r\n\t\t    \t\titems: [{\r\n\t\t    \t\t\ttitle: this.localize('terms'),\r\n\t\t    \t\t\tsplit: true,\r\n\t\t    \t\t\twidth: 250,\r\n\t\t    \t\t\tregion: 'west',\r\n\t\t    \t\t\tlayout: 'fit',\r\n\t\t    \t\t\titems: {\r\n\t\t    \t\t\t\titemId: 'terms',\r\n\t\t    \t\t\t\txtype: 'grid',\r\n\t\t    \t\t\t\tstore: Ext.create('Voyant.data.store.CorpusTermsBuffered', {\r\n\t\t    \t\t        \tparentPanel: this\r\n\t\t    \t\t        }),\r\n\t\t    \t\t\t\tviewConfig: {\r\n\t\t    \t\t\t\t\tplugins: {\r\n\t\t    \t\t\t\t\t\tptype: 'gridviewdragdrop',\r\n\t\t    \t\t\t\t\t\tddGroup: 'terms',\r\n\t\t    \t\t\t\t\t\tcopy: true,\r\n\t\t    \t\t\t\t\t\tenableDrop: false, // can't drop on grid with buffered store\r\n\t\t    \t\t\t\t\t\tdragZone: {\r\n\t\t    \t\t\t\t\t\t\tgetDragText: function() {\r\n\t\t    \t\t\t\t\t\t\t\tvar text = '';\r\n\t\t    \t\t\t\t\t\t\t\tthis.dragData.records.forEach(function(d) {\r\n\t\t    \t\t\t\t\t\t\t\t\ttext += d.get('term')+', ';\r\n\t\t    \t\t\t\t\t\t\t\t});\r\n\t\t    \t\t\t\t\t\t\t\ttext = text.substr(0, text.length-2);\r\n\t\t    \t\t\t\t\t\t\t\tif (text.length > 20) {\r\n\t\t    \t\t\t\t\t\t\t\t\ttext = text.substr(0, 20) + '...';\r\n\t\t    \t\t\t\t\t\t\t\t}\r\n\t\t    \t\t\t\t\t\t\t\treturn text;\r\n\t\t    \t\t\t\t\t\t\t}\r\n\t\t    \t\t\t\t\t\t}\r\n\t\t    \t\t\t\t\t}\r\n\t\t    \t\t\t\t},\r\n\t\t    \t\t\t\tselModel: {\r\n\t\t    \t    \t\t\tmode: 'MULTI'\r\n\t\t    \t    \t\t},\r\n\t\t    \t\t\t\tcolumns: [{\r\n\t\t\t\t    \t\t\ttext: this.localize('term'),\r\n\t\t\t\t        \t\tdataIndex: 'term',\r\n\t\t\t\t        \t\tflex: 1,\r\n\t\t\t\t                sortable: true\r\n\t\t\t\t            },{\r\n\t\t\t\t            \ttext: this.localize('rawFreq'),\r\n\t\t\t\t            \tdataIndex: 'rawFreq',\r\n\t\t\t\t                width: 'autoSize',\r\n\t\t\t\t            \tsortable: true\r\n\t\t\t\t            },{\r\n\t\t\t\t            \ttext: this.localize('relativeFreq'),\r\n\t\t\t\t            \tdataIndex: 'relativeFreq',\r\n\t\t\t\t            \trenderer: function(val) {\r\n\t\t\t\t            \t\treturn Ext.util.Format.number(val*1000000, \"0,000\");\r\n\t\t\t\t            \t},\r\n\t\t\t\t                width: 'autoSize',\r\n\t\t\t\t                hidden: true,\r\n\t\t\t\t            \tsortable: true\r\n\t\t\t\t            }],\r\n\t\t\t\t            dockedItems: [{\r\n\t\t\t\t                dock: 'bottom',\r\n\t\t\t\t                xtype: 'toolbar',\r\n\t\t\t\t                overflowHandler: 'scroller',\r\n\t\t\t\t                items: [{\r\n\t\t\t\t                    xtype: 'querysearchfield'\r\n\t\t\t\t                }]\r\n\t\t\t\t            }],\r\n\t\t\t\t            listeners: {\r\n\t\t\t\t            \tquery: function(src, query) {\r\n\t\t\t\t            \t\tthis.setApiParam('query', query);\r\n\t\t\t\t            \t\tvar store = this.queryById('terms').getStore();\r\n\t\t\t\t            \t\tstore.removeAll();\r\n\t\t\t\t            \t\tstore.load();\r\n\t\t\t\t            \t},\r\n\t\t\t\t            \tscope: this\r\n\t\t\t\t            }\r\n\t\t    \t\t\t}\r\n\t\t    \t\t},{\r\n\t\t    \t\t\ttitle: this.localize('categories'),\r\n\t\t    \t\t\titemId: 'categories',\r\n\t\t    \t\t\tregion: 'center',\r\n\t\t    \t\t\txtype: 'panel',\r\n\t\t    \t\t\tlayout: {\r\n\t\t    \t\t\t\ttype: 'hbox',\r\n\t\t    \t\t\t\talign: 'stretch'\r\n\t\t    \t\t\t},\r\n\t\t    \t\t\tscrollable: 'x',\r\n\t\t    \t\t\tdockedItems: [{\r\n\t\t                    dock: 'bottom',\r\n\t\t                    xtype: 'toolbar',\r\n\t\t                    overflowHandler: 'scroller',\r\n\t\t                    items: [{\r\n\t\t                    \ttext: this.localize('addCategory'),\r\n\t\t                    \thandler: function() {\r\n\t\t                    \t\tthis.getAddCategoryWin().show();\r\n\t\t                    \t},\r\n\t\t                    \tscope: this\r\n\t\t                    },{\r\n\t\t                    \ttext: this.localize('removeTerms'),\r\n\t\t                    \thandler: function() {\r\n\t\t                    \t\tthis.queryById('categories').query('grid').forEach(function(grid) {\r\n\t\t\t\t\t\t\t\t\t\tvar sels = grid.getSelection();\r\n\t\t\t\t\t\t\t\t\t\tsels.forEach(function(sel) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.categoriesManager.removeTerm(grid.category, sel.getTerm());\r\n\t\t\t\t\t\t\t\t\t\t}, this);\r\n\t\t                    \t\t\tgrid.getStore().remove(sels);\r\n\t\t                    \t\t}, this);\r\n\t\t                    \t},\r\n\t\t                    \tscope: this\r\n\t\t                    }]\r\n\t\t    \t\t\t}],\r\n\t\t    \t\t\titems: []\r\n\t\t    \t\t}]\r\n\t    \t\t},{\r\n\t    \t\t\tlayout: 'fit',\r\n\t    \t\t\titemId: 'features',\r\n\t    \t\t\ttitle: this.localize('features'),\r\n\t    \t\t\txtype: 'grid',\r\n\t    \t\t\tscrollable: 'y',\r\n\t    \t\t\tstore: Ext.create('Ext.data.JsonStore', {\r\n\t\t    \t\t\tfields: ['category']\r\n\t\t    \t\t}),\r\n\t    \t\t\tcolumns: [{\r\n\t    \t\t\t\ttext: this.localize('category'),\r\n\t    \t\t\t\tdataIndex: 'category',\r\n\t    \t\t\t\tsortable: false,\r\n\t    \t\t\t\thideable: false,\r\n\t    \t\t\t\tflex: 1\r\n\t    \t\t\t}]\r\n\t    \t\t}]\r\n    \t\t},\r\n    \t\tbuttons: [{\r\n\t\t\t\ttext: this.localize('cancel'),\r\n\t\t\t\thandler: function(btn) {\r\n\t\t\t\t\tthis.setCategoriesId(undefined);\r\n\t\t\t\t\tbtn.up('window').close();\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t},{\r\n\t\t\t\ttext: this.localize('save'),\r\n\t\t\t\thandler: function(btn) {\r\n\t\t\t\t\tthis.processFeatures();\r\n\t\t\t\t\tthis.setColorTermsFromCategoryFeatures();\r\n\t\t\t\t\tthis.app.saveCategoryData().then(function(id) {\r\n\t\t\t\t\t\tthis.setCategoriesId(id);\r\n\t\t\t\t\t\tbtn.up('window').close();\r\n\t\t\t\t\t}.bind(this), function() {\r\n\t\t\t\t\t\tthis.setCategoriesId(undefined);\r\n\t\t\t\t\t\tbtn.up('window').close();\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t}],\r\n\t\t\tlisteners: {\r\n\t\t\t\tshow: function() {\r\n\t\t\t\t\t// check to see if the widget value is different from the API\r\n\t\t\t\t\tif (this.getCategoriesId() && this.getCategoriesId()!=this.getApiParam(\"categories\")) {\r\n\t\t    \t\t\tthis.app.loadCategoryData(this.getCategoriesId()).then(function(data) {\r\n\t\t\t\t\t\t\tthis.setColorTermsFromCategoryFeatures();\r\n\t\t\t\t\t\t\tthis.buildCategories();\r\n\t\t\t\t\t\t\tthis.buildFeatures();\r\n\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.buildCategories();\r\n\t\t\t\t\t\tthis.buildFeatures();\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\tthis.down('tabpanel').setActiveTab(0);\r\n\t\t\t\t},\r\n\t\t\t\tafterrender: function(builder) {\r\n\t\t\t\t\tbuilder.on('loadedCorpus', function(src, corpus) {\r\n\t\t    \t\t\tthis.setCorpus(corpus);\r\n\t\t\t    \t\tvar terms = this.queryById('terms');\r\n\t\t\t    \t\tterms.getStore().load();\r\n\t\t    \t\t}, builder);\r\n\t\t    \t\t\r\n\t\t\t\t\tthis.panel.on('loadedCorpus', function(src, corpus) {\r\n\t    \t\t\t\tbuilder.fireEvent('loadedCorpus', src, corpus);\r\n\t    \t\t\t}, builder);\r\n\t    \t\t\tif (this.panel.getCorpus && this.panel.getCorpus()) {builder.fireEvent('loadedCorpus', builder, this.panel.getCorpus());}\r\n\t    \t\t\telse if (this.panel.getStore && this.panel.getStore() && this.panel.getStore().getCorpus && this.panel.getStore().getCorpus()) {\r\n\t    \t\t\t\tbuilder.fireEvent('loadedCorpus', builder, this.panel.getStore().getCorpus());\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t}\r\n    \t});\r\n    \t\r\n    \tthis.setAddCategoryWin(Ext.create('Ext.window.Window', {\r\n    \t\ttitle: this.localize('addCategory'),\r\n    \t\tmodal: true,\r\n    \t\tcloseAction: 'hide',\r\n    \t\tlayout: 'fit',\r\n    \t\titems: {\r\n    \t\t\txtype: 'form',\r\n    \t\t\twidth: 300,\r\n    \t\t\tdefaults: {\r\n    \t\t\t\tlabelAlign: 'right'\r\n    \t\t\t},\r\n\t    \t\titems: [{\r\n\t    \t\t\txtype: 'textfield',\r\n\t    \t\t\tfieldLabel: this.localize('categoryName'),\r\n\t    \t\t\tname: 'categoryName',\r\n\t    \t\t\tallowBlank: false,\r\n\t    \t\t\tvalidator: function(val) {\r\n\t    \t\t\t\treturn this.categoriesManager.getCategoryTerms(val) === undefined ? true : this.localize('exists');\r\n\t    \t\t\t}.bind(this),\r\n\t    \t\t\tenableKeyEvents: true,\r\n\t    \t\t\tlisteners: {\r\n\t    \t\t\t\tkeypress: function(field, evt) {\r\n\t    \t\t\t\t\tif (evt.getKey() === Ext.event.Event.ENTER) {\r\n\t    \t\t\t\t\t\tfield.up('form').queryById('addCategoryButton').click();\r\n\t    \t\t\t\t\t}\r\n\t    \t\t\t\t},\r\n\t    \t\t\t\tscope: this\r\n\t    \t\t\t}\r\n\t    \t\t}],\r\n\t    \t\tbuttons: [{\r\n\t    \t\t\ttext: this.localize('cancel'),\r\n\t    \t\t\thandler: function(btn) {\r\n\t    \t\t\t\tbtn.up('window').close();\r\n\t    \t\t\t}\r\n\t    \t\t},{\r\n\t    \t\t\titemId: 'addCategoryButton',\r\n\t    \t\t\ttext: this.localize('add'),\r\n\t    \t\t\thandler: function(btn) {\r\n\t    \t\t\t\tvar form = btn.up('form');\r\n\t    \t\t\t\tif (form.isValid()) {\r\n\t    \t\t\t\t\tvar name = form.getValues()['categoryName'];\r\n\t    \t\t\t\t\tthis.addCategory(name);\r\n\t    \t\t\t\t\tbtn.up('window').close();\r\n\t    \t\t\t\t}\r\n\t    \t\t\t},\r\n\t    \t\t\tscope: this\r\n\t    \t\t}]\r\n    \t\t},\r\n    \t\tlisteners: {\r\n    \t\t\tshow: function(win) {\r\n    \t\t\t\tvar form = win.down('form').getForm();\r\n    \t\t\t\tform.reset();\r\n\t\t\t\t\tform.clearInvalid();\r\n    \t\t\t}\r\n    \t\t}\r\n\t\t}));\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    addCategory: function(name) {\r\n    \tthis.categoriesManager.addCategory(name);\r\n    \t\r\n    \tthis.queryById('features').getStore().add({category: name});\r\n\r\n    \tvar termsData = [];\r\n    \tvar terms = this.categoriesManager.getCategoryTerms(name);\r\n    \tif (terms !== undefined) {\r\n    \t\tfor (var i = 0; i < terms.length; i++) {\r\n    \t\t\ttermsData.push({term: terms[i]});\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tvar grid = this.queryById('categories').add({\r\n    \t\txtype: 'grid',\r\n    \t\tcategory: name,\r\n    \t\ttitle: name,\r\n    \t\tframe: true,\r\n    \t\twidth: 150,\r\n    \t\tmargin: '10 0 10 10',\r\n    \t\tlayout: 'fit',\r\n    \t\ttools: [{\r\n    \t\t\ttype: 'close',\r\n    \t\t\ttooltip: this.localize('removeCategory'),\r\n    \t\t\tcallback: function(panel) {\r\n    \t\t\t\tExt.Msg.confirm(this.localize('removeCategory'), this.localize('confirmRemove'), function(btn) {\r\n    \t\t\t\t\tif (btn === 'yes') {\r\n    \t\t\t\t\t\tthis.removeCategory(name);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}, this);\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n\t\t\t}],\r\n\t\t\tbbar: [{\r\n\t\t\t\txtype: 'button',\r\n\t\t\t\ttext: '',\r\n\t\t\t\ttooltip: this.localize('increaseCategory'),\r\n\t\t\t\tglyph: 'xf067@FontAwesome',\r\n\t\t\t\thandler: function(b) {\r\n\t\t\t\t\tvar grid = b.findParentByType('grid');\r\n\t\t\t\t\tvar parent = this.queryById('categories');\r\n\t\t\t\t\tvar prev = parent.prevChild(grid);\r\n\t\t\t\t\tif (prev !== null) {\r\n\t\t\t\t\t\tparent.moveBefore(grid, prev);\r\n\t\t\t\t\t\tthis.app.getCategoriesManager().setCategoryRanking(grid.getTitle(), parent.items.indexOf(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t},'->',{\r\n\t\t\t\txtype: 'button',\r\n\t\t\t\ttext: '',\r\n\t\t\t\ttooltip: this.localize('decreaseCategory'),\r\n\t\t\t\tglyph: 'xf068@FontAwesome',\r\n\t\t\t\thandler: function(b) {\r\n\t\t\t\t\tvar grid = b.findParentByType('grid');\r\n\t\t\t\t\tvar parent = this.queryById('categories');\r\n\t\t\t\t\tvar next = parent.nextChild(grid);\r\n\t\t\t\t\tif (next !== null) {\r\n\t\t\t\t\t\tparent.moveAfter(grid, next);\r\n\t\t\t\t\t\tthis.app.getCategoriesManager().setCategoryRanking(grid.getTitle(), parent.items.indexOf(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t}],\r\n    \t\t\r\n    \t\tstore: Ext.create('Ext.data.JsonStore', {\r\n    \t\t\tdata: termsData,\r\n    \t\t\tfields: ['term']\r\n    \t\t}),\r\n    \t\tviewConfig: {\r\n\t    \t\tplugins: {\r\n\t    \t\t\tptype: 'gridviewdragdrop',\r\n\t\t\t\t\tddGroup: 'terms',\r\n\t\t\t\t\tdragZone: {\r\n\t\t\t\t\t\tgetDragText: function() {\r\n\t\t\t\t\t\t\tvar text = '';\r\n\t\t\t\t\t\t\tthis.dragData.records.forEach(function(d) {\r\n\t\t\t\t\t\t\t\ttext += d.get('term')+', ';\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn text.substr(0, text.length-2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t    \t\t}\r\n    \t\t},\r\n    \t\tselModel: {\r\n    \t\t\tmode: 'MULTI'\r\n    \t\t},\r\n    \t\tcolumns: [{\r\n        \t\tdataIndex: 'term',\r\n        \t\tflex: 1,\r\n                sortable: true\r\n            }],\r\n    \t\tlisteners: {\r\n    \t\t\tbeforedrop: function(node, data) {\r\n\t\t\t\t\tvar categoriesManager = this.up('categoriesbuilder').categoriesManager;\r\n\t\t\t\t\tvar source = data.view.up('grid');\r\n\r\n\t\t\t\t\tif (source.category !== undefined) {\r\n\t\t\t\t\t\t// we're moving a term from one category to another\r\n\t\t\t\t\t\tfor (var i = data.records.length-1; i >= 0; i--) {\r\n\t\t\t\t\t\t\tvar term = data.records[i].get('term');\r\n\t\t\t\t\t\t\tcategoriesManager.removeTerm(source.category, term);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\tdrop: function(node, data) {\r\n    \t\t\t\tdata.view.getSelectionModel().deselectAll();\r\n    \t\t\t\tthis.getSelectionModel().deselectAll();\r\n    \t\t\t\t\r\n    \t\t\t\tvar categoriesManager = this.up('categoriesbuilder').categoriesManager;\r\n    \t\t\t\tvar terms = [];\r\n    \t\t\t\tfor (var i = 0; i < data.records.length; i++) {\r\n    \t\t\t\t\tvar term = data.records[i].get('term');\r\n    \t\t\t\t\tterms.push(term);\r\n    \t\t\t\t}\r\n    \t\t\t\tcategoriesManager.addTerms(name, terms);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t});\r\n    \t\r\n    \tvar titleEditor = new Ext.Editor({\r\n    \t\tupdateEl: true,\r\n    \t\talignment: 'l-l',\r\n    \t\tautoSize: {\r\n    \t\t\twidth: 'boundEl'\r\n    \t\t},\r\n    \t\tfield: {\r\n    \t\t\txtype: 'textfield',\r\n    \t\t\tallowBlank: false,\r\n    \t\t\tvalidator: function(val) {\r\n    \t\t\t\treturn this.categoriesManager.getCategoryTerms(val) === undefined || val ===  grid.getTitle() ? true : this.localize('exists');\r\n    \t\t\t}.bind(this)\r\n    \t\t},\r\n    \t\tlisteners: {\r\n    \t\t\tcomplete: function(ed, newvalue, oldvalue) {\r\n    \t\t\t\tthis.categoriesManager.renameCategory(oldvalue, newvalue);\r\n    \t\t\t\tthis.buildFeatures();\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t}\r\n    \t});\r\n    \t\r\n    \tgrid.header.getTitle().textEl.on('dblclick', function(e, t) {\r\n    \t\ttitleEditor.startEdit(t);\r\n\t\t});\r\n    },\r\n    \r\n    removeCategory: function(name) {\r\n    \tvar categoriesParent = this.queryById('categories');\r\n    \tvar panel = categoriesParent.queryBy(function(cmp) {\r\n    \t\tif (cmp.category && cmp.category == name) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t});\r\n    \tcategoriesParent.remove(panel[0]);\r\n    \t\r\n    \tvar featuresStore = this.queryById('features').getStore();\r\n    \tfeaturesStore.removeAt(featuresStore.findExact('category', name));\r\n    \t\r\n\t\tthis.categoriesManager.removeCategory(name);\r\n    },\r\n    \r\n    addFeature: function(name) {\r\n\t\tthis.categoriesManager.addFeature(name);\r\n\t\tthis.buildFeatures();\r\n    },\r\n    \r\n    buildFeatures: function() {\r\n    \tthis.queryById('features').getStore().removeAll();\r\n    \t\r\n    \tvar fields = ['category'];\r\n\t\tvar columns = [{\r\n\t\t\tsortable: false,\r\n\t\t\ttext: this.localize('category'),\r\n\t\t\tdataIndex: 'category',\r\n\t\t\tflex: 1\r\n\t\t}];\r\n\t\tvar data = [];\r\n\t\t\r\n\t\tfor (var category in this.categoriesManager.getCategories()) {\r\n\t\t\tdata.push({category: category});\r\n\t\t}\r\n\t\t\r\n\t\tvar features = this.categoriesManager.getFeatures();\r\n\t\tvar featuresConfigs = Ext.ClassManager.getClass(this).features;\r\n\t\t\r\n\t\tfor (var feature in features) {\r\n\t\t\tfields.push(feature);\r\n\t\t\t\r\n\t\t\tvar featureConfig = featuresConfigs[feature];\r\n\t\t\tvar widgetConfig = Ext.applyIf({\r\n\t\t\t\tfeature: feature,\r\n\t\t\t\tlisteners: {\r\n\t\t\t\t\tchange: function(cmp, newvalue) {\r\n\t\t\t\t\t\tif (cmp.rendered) {\r\n\t\t\t\t\t\t\tvar rowIndex = cmp.up('gridview').indexOf(cmp.el.up('table'));\r\n\t\t\t\t\t\t\tvar record = cmp.up('grid').getStore().getAt(rowIndex);\r\n\t\t\t\t\t\t\tif (record) {\r\n\t\t\t\t\t\t\t\trecord.set(cmp.feature, newvalue);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (window.console) {\r\n\t\t\t\t\t\t\t\t\tconsole.warn('no record for', rowIndex, cmp);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t}, featureConfig);\r\n\t\t\tif (featureConfig.listeners) {\r\n\t\t\t\tExt.applyIf(widgetConfig.listeners, featureConfig.listeners);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumns.push({\r\n\t\t\t\tsortable: false,\r\n\t\t\t\thideable: false,\r\n\t\t\t\ttext: this.localize(feature),\r\n\t\t\t\tdataIndex: feature,\r\n\t\t\t\tflex: 0.5,\r\n\t\t\t\txtype: 'widgetcolumn',\r\n\t\t\t\twidget: widgetConfig\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfor (var category in this.categoriesManager.getCategories()) {\r\n\t\t\t\tvar value = this.categoriesManager.getCategoryFeature(category, feature);\r\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\tif (data[i].category == category) {\r\n\t\t\t\t\t\tdata[i][feature] = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar store = Ext.create('Ext.data.JsonStore', {\r\n\t\t\tfields: fields,\r\n\t\t\tdata: data\r\n\t\t});\r\n\t\tthis.queryById('features').reconfigure(store, columns);\r\n    },\r\n\t\r\n\tprocessFeatures: function() {\r\n\t\tvar store = this.queryById('features').getStore();\r\n\t\tvar features = Object.keys(this.categoriesManager.getFeatures());\r\n\t\tstore.each(function(record) {\r\n\t\t\tvar category = record.get('category');\r\n\t\t\tfeatures.forEach(function(feature) {\r\n\t\t\t\tvar featureValue = record.get(feature);\r\n\t\t\t\tif (featureValue !== undefined) {\r\n\t\t\t\t\tthis.categoriesManager.setCategoryFeature(category, feature, featureValue);\r\n\t\t\t\t}\r\n\t\t\t}, this)\r\n\t\t}, this)\r\n\t},\r\n\r\n\tsetColorTermsFromCategoryFeatures: function() {\r\n        for (var category in this.categoriesManager.getCategories()) {\r\n            var color = this.categoriesManager.getCategoryFeature(category, 'color');\r\n            if (color !== undefined) {\r\n                var rgb = this.app.hexToRgb(color);\r\n                var terms = this.categoriesManager.getCategoryTerms(category);\r\n                for (var i = 0; i < terms.length; i++) {\r\n                    this.app.setColorForTerm(terms[i], rgb);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    buildCategories: function() {\r\n\r\n    \tthis.queryById('categories').removeAll();\r\n    \t\r\n    \tvar cats = this.categoriesManager.getCategories();\r\n    \tfor (var key in cats) {\r\n    \t\tthis.addCategory(key);\r\n    \t}\r\n    }\r\n});","Ext.define('Voyant.widget.VoyantNetworkGraph', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.notebook.util.Embed'],\n    embeddable: ['Voyant.widget.VoyantNetworkGraph'],\n    alias: 'widget.voyantnetworkgraph',\n    statics: {\n        i18n: {\n        },\n        api: {\n            jsonData: undefined,\n            docId: undefined,\n            docIndex: undefined,\n            json: undefined,\n            api: undefined\n        }\n    },\n    config: {\n        vis: undefined, // svg > g element\n        visLayout: undefined, // d3 layout algorithm\n        \n        // backing data. don't set through config, use config.nodes & config.edges\n        nodeData: undefined,\n        edgeData: undefined,\n        \n        nodeSelection: undefined, // d3 selection for nodes\n        edgeSelection: undefined, // d3 selection for edges\n        \n        currentNode: undefined,\n        currentEdge: undefined,\n        \n        zoom: undefined, // d3 zoom\n        zoomExtent: [0.25, 8],\n        \n        fixOnDrag: true, // fix node when dragged\n        \n        nodeScaling: {\n        \tminSize: 8,\n        \tmaxSize: 36,\n        \tscalingFunction: undefined\n        },\n        edgeScaling: {\n        \tminSize: 1,\n        \tmaxSize: 10,\n        \tscalingFunction: undefined\n        },\n        \n        graphStyle: {\n    \t\tnode: {\n    \t\t\tnormal: {\n    \t\t\t\tfill: '#c6dbef',\n    \t\t\t\tfillOpacity: 1,\n    \t\t\t\tstroke: '#6baed6',\n    \t\t\t\tstrokeOpacity: 1,\n    \t\t\t\tstrokeWidth: 1\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tfill: '#9ecae1',\n    \t\t\t\tfillOpacity: 1,\n    \t\t\t\tstroke: '#3182bd',\n    \t\t\t\tstrokeOpacity: 1,\n    \t\t\t\tstrokeWidth: 3\n    \t\t\t}\n    \t\t},\n    \t\tedge: {\n    \t\t\tnormal: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.25,\n    \t\t\t\tstrokeWidth: 1\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.5,\n    \t\t\t\tstrokeWidth: 3\n    \t\t\t}\n    \t\t}\n    \t},\n    \t\n    \tgraphPhysics: {\n    \t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n    \t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n    \t\tnodeGravity: -50,  // negative = repel, positive = attract\n\t\t\tspringLength: 100,\n\t\t\tspringStrength: 0.25, // 0 = not strong, >1 = probably too strong\n\t\t\tcollisionScale: 1.25 // 1 = default, 0 = no collision \n    \t}\n    },\n    constructor: function(config) {\n        config = config || {};\n        \n        this.setNodeData([]);\n        this.setEdgeData([]);\n        \n        this.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n        \n        var json = {};\n        if (this.getApiParam('jsonData')) {\n            json = Ext.decode(this.getApiParam('jsonData'));\n        } else if (this.getApiParam('json')) {\n        \tjson = this.getApiParam('json');\n        } else if (config.json) {\n        \tjson = config.json;\n        } else if (config.edges) {\n        \tjson.edges = config.edges;\n        \tif (config.nodes) {\n        \t\tjson.nodes = config.nodes;\n        \t}\n        } else if (config && config.jsonData) {\n        \tjson = JSON.parse(config.jsonData);\n        }\n        this.loadJson(json);\n    },\n    initComponent: function(config) {\n        this.on('boxready', function(src, corpus) {\n            this.initGraph();\n            this.refreshGraph();\n        }, this);\n        \n        this.on('resize', function(panel, width, height) {\n            var vis = this.body.down('svg');\n            if (vis) {\n                var el = this.body;\n                var elHeight = el.getHeight();\n                var elWidth = el.getWidth();\n                vis.dom.setAttribute('width', elWidth);\n                vis.dom.setAttribute('height', elHeight);\n                this.getVisLayout()\n                    .force('x', d3.forceX(elWidth/2))\n\t    \t\t\t.force('y', d3.forceY(elHeight/2));\n                \n                if (this.getVisLayout().alpha() < 0.075) {\n                \tthis.getVisLayout().alpha(-1); // trigger end/zoomToFit\n                }\n            }\n        }, this);\n        \n        this.callParent(arguments);\n    },\n    \n    processJson: function(json) {\n    \tif (!json || !json.edges) {\n            if (json && json.links) {\n                json.edges = json.links;\n                delete json.links;\n            }\n            if (!json || !json.edges) {\n                json = json || {};\n                json.edges = [];\n            }\n        }\n    \tif (!json.nodes) {\n    \t\tjson.nodes = [];\n    \t}\n        if (json.nodes.length === 0) {\n            var wordFreq = {};\n            json.edges.forEach(function(edge) {\n                ['source', 'target'].forEach(function(loc) {\n                \tvar term = edge[loc];\n                    if (term in wordFreq == false) {\n                        wordFreq[term] = 1;\n                        json.nodes.push({term: term});\n                    } else {\n                        wordFreq[term]++;\n                    }\n                    edge.value = 1;\n                });\n            }, this);\n            json.nodes.forEach(function(node) {\n            \tvar val = wordFreq[node.term] === undefined ? 1 : wordFreq[node.term];\n                Ext.applyIf(node, {value: val});\n            });\n        } else {\n        \tjson.nodes.forEach(function(node) {\n        \t\tExt.applyIf(node, {value: 1});\n        \t});\n        }\n        \n        return json;\n    },\n    \n    loadJson: function(json) {\n    \tthis.processJson(json);\n    \t\n    \tvar existingTerms = {};\n\t\tthis.getNodeData().forEach(function(node) {\n\t\t\texistingTerms[node.term] = true;\n\t\t}, this);\n\t\t\n    \tvar newNodes = [];\n    \tvar newEdges = [];\n    \t\n    \tjson.nodes.forEach(function(node) {\n            if (existingTerms[node.term] === undefined) {\n            \tnode.id = this.idGet(node.term);\n            \tnewNodes.push(node);\n            }\n        }, this);\n        json.edges.forEach(function(newedge) {\n            var sourceId = this.idGet(newedge.source);\n            var targetId = this.idGet(newedge.target);\n            var edges = this.getEdgeData();\n            var exists = false;\n            for (var i = 0; i < edges.length; i++) {\n            \tvar edge = edges[i];\n            \tif ((edge.source.id == sourceId && edge.target.id == targetId) || (edge.target.id == sourceId && edge.source.id == targetId)) {\n            \t\texists = true;\n            \t\tbreak;\n            \t}\n            }\n            if (!exists) {\n            \tnewedge.source = sourceId;\n            \tnewedge.target = targetId;\n            \tnewedge.id = sourceId+'-'+targetId;\n\t            newEdges.push(newedge);\n            }\n        }, this);\n        \n        this.setNodeData(this.getNodeData().concat(newNodes));\n        this.setEdgeData(this.getEdgeData().concat(newEdges));\n        \n        this.refreshGraph();\n    },\n    \n    // get a DOM appropriate id\n    idGet: function(term) {\n    \treturn term.replace(/\\W/g, '_');\n    },\n    \n    updateDataForNode: function(nodeId, dataObj) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n    },\n    \n    updateDataForEdge: function(edgeId, dataObj) {\n    \tvar data = this.getEdgeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === edgeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n    },\n    \n    addNode: function(dataObj) {\n    \tif (Ext.isString(dataObj)) {\n    \t\tdataObj = {term: dataObj};\n    \t}\n    \tif (dataObj.term) {\n    \t\tthis.loadJson({nodes: [dataObj]});\n    \t}\n    },\n    \n    removeNode: function(nodeId, removeOrphans) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar potentialOrphans = {};\n\t\tdata = this.getEdgeData();\n\t\tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tvar match = false;\n\t\t\tif (data[i].source.id === nodeId) {\n\t\t\t\tmatch = true;\n\t\t\t\tpotentialOrphans[data[i].target.id] = true;\n\t\t\t}\n\t\t\tif (data[i].target.id === nodeId) {\n\t\t\t\tmatch = true;\n\t\t\t\tpotentialOrphans[data[i].source.id] = true;\n\t\t\t}\n\t\t\tif (match) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (removeOrphans) {\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tif (potentialOrphans[data[i].source.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].source.id];\n\t\t\t\t}\n\t\t\t\tif (potentialOrphans[data[i].target.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].target.id];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var orphanId in potentialOrphans) {\n\t\t\t\tthis.removeNode(orphanId, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.refreshGraph();\n    },\n    \n    addEdge: function(dataObj) {\n    \tif (Ext.isObject(dataObj) && dataObj.source && dataObj.target) {\n    \t\tthis.loadJson({edges: [dataObj]});\n    \t}\n    },\n    \n    removeEdge: function(edgeId, removeOrphans) {\n    \tvar data = this.getEdgeData();\n    \tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tif (data[i].id === edgeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (removeOrphans) {\n\t\t\tvar potentialOrphans = {};\n\t\t\tdata = this.getNodeData();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tpotentialOrphans[data[i].id] = true;\n\t\t\t}\n\t\t\tdata = this.getEdgeData();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tif (potentialOrphans[data[i].source.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].source.id];\n\t\t\t\t}\n\t\t\t\tif (potentialOrphans[data[i].target.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].target.id];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var orphanId in potentialOrphans) {\n\t\t\t\tthis.removeNode(orphanId, true);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tthis.refreshGraph();\n    },\n    \n    initGraph: function() {\n        var el = this.getLayout().getRenderTarget();\n        el.update('');\n        var width = el.getWidth();\n        var height = el.getHeight();\n        \n        var physics = this.getGraphPhysics();\n        this.setVisLayout(d3.forceSimulation()\n        \t.velocityDecay(physics.damping)\n    \t\t.force('x', d3.forceX(width/2).strength(physics.centralGravity))\n    \t\t.force('y', d3.forceY(height/2).strength(physics.centralGravity))\n            .force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n            .force('charge', d3.forceManyBody().strength(physics.nodeGravity))\n            .force('collide', d3.forceCollide().radius(function(d) { return Math.sqrt(d.bbox.width * d.bbox.height)*physics.collisionScale; }))\n            .on('tick', function() {\n            \t this.getEdgeSelection()\n\t                .attr('x1', function(d) { return d.source.x; })\n\t                .attr('y1', function(d) { return d.source.y; })\n\t                .attr('x2', function(d) { return d.target.x; })\n\t                .attr('y2', function(d) { return d.target.y; });\n\t    \n            \t this.getNodeSelection()\n            \t \t.attr('transform', function(d) {\n            \t \t\tvar x = d.x - d.bbox.width*0.5;\n            \t \t\tvar y = d.y - d.bbox.height*0.5;\n            \t \t\treturn 'translate('+x+','+y+')';\n        \t \t\t});\n            \t \n            \t if (this.getVisLayout().alpha() < 0.075) {\n \t    \t\t\tthis.getVisLayout().alpha(-1); // trigger end event\n \t    \t\t}\n\t        }.bind(this))\n\t        .on('end', function() {\n\t    \t\tthis.zoomToFit();\n\t    \t}.bind(this))\n        );\n        \n        var svg = d3.select(el.dom).append('svg').attr('width', width).attr('height', height);\n        var g = svg.append('g');\n        \n        var zoom = d3.zoom()\n\t\t.scaleExtent(this.getZoomExtent())\n\t\t.on('zoom', function() {\n\t\t\tg.attr('transform', d3.event.transform);\n\t\t});\n\t\tthis.setZoom(zoom);\n\t\tsvg.call(zoom);\n        \n        this.setEdgeSelection(g.append('g').attr('class', 'edges').selectAll('.edge'));\n        this.setNodeSelection(g.append('g').attr('class', 'nodes').selectAll('.node'));\n        this.setVis(g);\n    },\n    \n    resetGraph: function() {\n\t    this.setNodeData([]);\n\t\tthis.setEdgeData([]);\n\t\tthis.refreshGraph();\n    },\n    \n    refreshGraph: function() {\n    \tif (this.getVisLayout() === undefined) return;\n    \t\n        var edgeData = this.getEdgeData();\n        var nodeData = this.getNodeData();\n        \n        var nodeExtent = d3.extent(nodeData, function(d) { return d.value; });\n        var nodeSum = d3.sum(nodeData, function(d) { return d.value; });\n        var edgeExtent = d3.extent(edgeData, function(d) { return d.value; });\n        var edgeSum = d3.sum(edgeData, function(d) { return d.value; });\n\n        var edgeScaling = this.getEdgeScaling();\n        if (edgeScaling.scalingFunction === undefined) {\n        \tedgeScaling.scalingFunction = d3.scaleLinear().domain(edgeExtent).range([edgeScaling.minSize, edgeScaling.maxSize]);\n        }\n        \n        var nodeScaling = this.getNodeScaling();\n        if (nodeScaling.scalingFunction === undefined) {\n        \tnodeScaling.scalingFunction = d3.scaleLog().domain(nodeExtent).range([nodeScaling.minSize, nodeScaling.maxSize]);\n        }\n        \n        var edge = this.getEdgeSelection().data(edgeData, function(d) { return d.id; });\n        edge.exit().remove();\n        var edgeEnter = edge.enter().append('line')\n        \t.attr('class', 'edge')\n        \t.attr('id', function(d) { return d.id; })\n        \t.style('cursor', 'pointer')\n        \t.style('stroke-width', function(d) { return edgeScaling.scalingFunction(d.value); })\n        \t.on('mouseover', this.edgeMouseOver.bind(this))\n            .on('mouseout', this.edgeMouseOut.bind(this))\n        \t.on('click', function(d) {\n        \t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.setCurrentEdge(d);\n\t\t\t\tthis.fireEvent('edgeclicked', this, d);\n        \t}.bind(this));\n        \n        this.setEdgeSelection(edgeEnter.merge(edge));\n        \n        var node = this.getNodeSelection().data(nodeData, function(d) { return d.id; });\n        node.exit().remove();\n        var nodeEnter = node.enter().append('g')\n            .attr('class', 'node')\n            .attr('id', function(d) { return d.id; })\n            .style('cursor', 'pointer')\n            .on('mouseover', this.nodeMouseOver.bind(this))\n            .on('mouseout', this.nodeMouseOut.bind(this))\n            .on('click', function(d) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.setCurrentNode(d);\n\t\t\t\tthis.fireEvent('nodeclicked', this, d);\n\t\t\t}.bind(this))\n\t\t\t.on('dblclick', function(d) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.fireEvent('nodedblclicked', this, d);\n\t\t\t}.bind(this))\n\t\t\t.on('contextmenu', function(d) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.fireEvent('nodecontextclicked', this, d);\n\t\t\t}.bind(this))\n            .call(d3.drag()\n                .on('start', function(d) {\n                    if (!d3.event.active) this.getVisLayout().alphaTarget(0.3).restart();\n                    if (this.getFixOnDrag()) {\n\t                    d.fx = d.x;\n\t                    d.fy = d.y;\n                    }\n                    this.fireEvent('nodedragstart', this, d);\n            \t}.bind(this))\n                .on('drag', function(d) {\n                \tif (this.getFixOnDrag()) {\n\t                    d.fx = d3.event.x;\n\t                    d.fy = d3.event.y;\n                \t} else {\n                \t\td.x = d3.event.x;\n                \t\td.y = d3.event.y;\n                \t}\n                    this.fireEvent('nodedrag', this, d);\n                }.bind(this))\n                .on('end', function(d) {\n                \tif (!d3.event.active) this.getVisLayout().alphaTarget(0);\n                \tthis.fireEvent('nodedragend', this, d);\n                }.bind(this))\n            );\n\n        nodeEnter.append('rect');\n                \n        nodeEnter.append('text')\n            .text(function(d) { return d.term; })\n//            .attr('font-family', function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); }.bind(this))\n            .attr('font-size', function(d) {return nodeScaling.scalingFunction(d.value)+'px';})\n//            .attr('text-anchor', 'middle')\n\t\t\t.attr('dominant-baseline', 'middle')\n\t\t\t.style('user-select', 'none')\n            .each(function(d) { d.bbox = this.getBBox(); });\n        \n        this.setNodeSelection(nodeEnter.merge(node));\n        \n        this.getNodeSelection().selectAll('rect')\n        \t.attr('width', function(d) { return d.bbox.width+16; })\n\t\t\t.attr('height', function(d) { return d.bbox.height+8; })\n\t\t\t.attr('rx', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t.attr('ry', function(d) { return Math.max(2, d.bbox.height * 0.2); });\n        \n        this.getNodeSelection().selectAll('text')\n        \t.attr('dx', 8)\n\t\t\t.attr('dy', function(d) { return d.bbox.height*0.5+4; });\n        \n\n        this.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n        this.getNodeSelection().call(this.applyNodeStyle.bind(this));\n        \n        this.getVisLayout().nodes(nodeData);\n        this.getVisLayout().force('link').links(edgeData);\n        this.getVisLayout().alpha(1).restart();\n    },\n    \n    zoomToFit: function(paddingPercent, transitionDuration) {\n    \tvar bounds = this.getVis().node().getBBox();\n    \tvar width = bounds.width;\n    \tvar height = bounds.height;\n    \tvar midX = bounds.x + width/2;\n    \tvar midY = bounds.y + height/2;\n    \tvar svg = this.getVis().node().parentElement;\n    \tvar svgRect = svg.getBoundingClientRect();\n        var fullWidth = svgRect.width;\n        var fullHeight = svgRect.height;\n    \tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n    \tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n    \td3.select(svg)\n    \t\t.transition()\n    \t\t.duration(transitionDuration || 500)\n    \t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n    },\n    \n    nodeScaling: function(min, max, total, value) {\n    \tif (min === max) {\n    \t\treturn 0.5;\n    \t} else {\n    \t\tvar scale = 1 / (max - min);\n    \t\treturn Math.max(0, (value-min)*scale);\n    \t}\n    },\n    \n    applyNodeStyle: function(sel, nodeState) {\n\t\tvar state = nodeState === undefined ? 'normal' : nodeState;\n\t\tvar style = this.getGraphStyle().node[state];\n    \tsel.selectAll(':not(text)')\n    \t\t.style('fill', function(d) { return style.fill; }.bind(this))\n    \t\t.style('fill-opacity', function(d) { return style.fillOpacity; }.bind(this))\n    \t\t.style('stroke', function(d) { return style.stroke; }.bind(this))\n    \t\t.style('stroke-opacity', function(d) { return style.strokeOpacity; }.bind(this))\n    \t\t.style('stroke-width', function(d) { return style.strokeWidth; }.bind(this));\n    },\n    \n    applyEdgeStyle: function(sel, edgeState) {\n    \tvar state = edgeState === undefined ? 'normal' : edgeState;\n    \tvar style = this.getGraphStyle().edge[state];\n    \tsel.style('stroke', function(d) { return style.stroke; }.bind(this))\n\t    \t.style('stroke-opacity', function(d) { return style.strokeOpacity; }.bind(this));\n//\t    \t.style('stroke-width', function(d) { return style.strokeWidth; }.bind(this));\n    },\n\n    edgeMouseOver: function(d) {\n    \tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n    \tthis.getVis().select('#'+d.id).call(this.applyEdgeStyle.bind(this), 'highlight');\n    },\n    \n    edgeMouseOut: function(d) {\n    \tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n    },\n    \n    nodeMouseOver: function(d) {\n    \tthis.setCurrentNode(d);\n\t\t\n    \tthis.getNodeSelection().call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getEdgeSelection().each(function(link) {\n\t\t\tvar id;\n\t\t\tif (link.source.id == d.id) {\n\t\t\t\tid = link.target.id;\n\t\t\t} else if (link.target.id == d.id) {\n\t\t\t\tid = link.source.id;\n\t\t\t}\n\t\t\tif (id !== undefined) {\n\t\t\t\tthis.getVis().select('#'+id).call(this.applyNodeStyle.bind(this), 'highlight');\n\t\t\t\tthis.getVis().select('#'+link.id).call(this.applyEdgeStyle.bind(this), 'highlight');\n\t\t\t}\n\t\t}.bind(this));\n\t\t\n\t\tthis.getVis().select('#'+d.id).call(this.applyNodeStyle.bind(this), 'highlight');\n    },\n    \n    nodeMouseOut: function(d) {\n    \tthis.getNodeSelection().call(this.applyNodeStyle.bind(this));\n    \tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n    }\n});","Ext.define('Voyant.widget.ReaderGraph', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.readergraph',\n    statics: {\n        i18n: {\n        }\n    },\n    config: {\n        parentPanel: undefined,\n        corpus: undefined,\n        documentsStore: undefined,\n        documentTermsStore: undefined,\n    \tlocationMarker: undefined,\n    \tisDetailedGraph: true\n    },\n    \n    locationMarkerColor: '#157fcc',\n\n    DETAILED_GRAPH_DOC_LIMIT: 25, // upper limit on document count for showing detailed graphs\n    LOCATION_UPDATE_FREQ: 100,\n\n    SCROLL_UP: -1,\n    SCROLL_EQ: 0,\n    SCROLL_DOWN: 1,\n\n    constructor: function(config) {\n        this.callParent(arguments);\n    },\n\n    initComponent: function() {\n        Ext.apply(this, {\n            layout: {\n                type: 'hbox'\n            },\n            items: []\n        });\n\n        this.setDocumentTermsStore(Ext.create(\"Ext.data.Store\", {\n\t\t\tmodel: \"Voyant.data.model.DocumentTerm\",\n    \t\tautoLoad: false,\n    \t\tremoteSort: false,\n    \t\tproxy: {\n\t\t\t\ttype: 'ajax',\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\t\textraParams: {\n\t\t\t\t\ttool: 'corpus.DocumentTerms',\n\t\t\t\t\twithDistributions: true,\n\t\t\t\t\t// TODO handle positions\n\t\t\t\t\twithPositions: true,\n\t\t\t\t\tbins: 25,\n\t\t\t\t\tforTool: 'reader'\n\t\t\t\t},\n\t\t\t\treader: {\n\t\t\t\t\ttype: 'json',\n\t\t            rootProperty: 'documentTerms.terms',\n\t\t            totalProperty: 'documentTerms.total'\n\t\t\t\t},\n\t\t\t\tsimpleSortMode: true\n   \t\t    },\n   \t\t    listeners: {\n                load: function(store, records, successful, opts) {\n                    store.sort('docIndex', 'ASC');\n                    var graphDatas = {};\n                    var maxValue = 0;\n                    store.each(function(r) {\n                        var graphData = [];\n                        var dist = r.get('distributions');\n                        var docId = r.get('docId');\n                        var docIndex = r.get('docIndex');\n                        var term = r.get('term');\n                        for (var i = 0; i < dist.length; i++) {\n                            var bin = i;//docIndex * dist.length + i;\n                            var val = dist[i];\n                            if (val > maxValue) maxValue = val;\n                            graphData.push([docId, docIndex, bin, val, term]);\n                        }\n                        graphDatas[docIndex] = graphData;\n                    }, this);\n                    \n                    if (this.getIsDetailedGraph()) {\n                        var graphs = this.query('cartesian');\n                        for (var i = 0; i < graphs.length; i++) {\n                            var graph = graphs[i];\n                            var data = graphDatas[i];\n                            if (data !== undefined) {\n                                graph.getAxes()[0].setMaximum(maxValue);\n                                graph.getStore().loadData(data);\n                            } else {\n                                graph.getStore().removeAll();\n                            }\n                        }\n                    }\n   \t\t    \t},\n   \t\t    \tscope: this\n   \t\t    }\n    \t}));\n\n        this.callParent(arguments);\n\n        var parentPanel = this.findParentBy(function(clz) {\n    \t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n        });\n    \tif (parentPanel != null) {\n            this.setParentPanel(parentPanel);\n    \t\tif (parentPanel.getCorpus && parentPanel.getCorpus()) {\n    \t\t\tthis.on(\"afterrender\", function(c) {\n    \t\t\t\tthis.setCorpus(parentPanel.getCorpus());\t\n    \t\t\t}, this);\n    \t\t} else {\n                parentPanel.on(\"loadedCorpus\", function(src, corpus) {\n                    this.setCorpus(corpus);\n                }, this);\n                this.hasCorpusLoadedListener = true;\n    \t\t}\n        }\n        \n        this.on('boxready', function() {\n            if (this.getLocationMarker() == undefined) {\n                this.setLocationMarker(Ext.DomHelper.append(this.getEl(), {tag: 'div', style: 'background-color: '+this.locationMarkerColor+'; height: 100%; width: 2px; position: absolute; top: 0; left: 0;'}));\n            }\n        });        \n    },\n\n    updateCorpus: function(corpus) {\n        var docs = corpus.getDocuments();\n        this.setDocumentsStore(docs);\n        this.getDocumentTermsStore().getProxy().setExtraParam('corpus', corpus.getId());\n        this.setIsDetailedGraph(docs.getTotalCount() < this.DETAILED_GRAPH_DOC_LIMIT);\n\n        this.generateChart(corpus, this);\n    },\n\n    loadQueryTerms: function(queryTerms) {\n    \tif (queryTerms && queryTerms.length > 0) {\n\t\t\tthis.getDocumentTermsStore().load({\n\t\t\t\tparams: {\n\t\t\t\t\tquery: queryTerms\n    \t\t\t}\n\t\t\t});\n\t\t}\n    },\n\n    generateChart: function(corpus, container) {\n        function getColor(index, alpha) {\n            var c = this.getParentPanel().getApplication().getColor(index);\n            return 'rgba('+c[0]+','+c[1]+','+c[2]+','+alpha+')';\n        }\n        \n        function map(value, istart, istop, ostart, ostop) {\n            return ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n        }\n        \n        function addChart(docInfo) {\n            var index = docInfo.index;\n            var fraction = docInfo.fraction;\n            var height = docInfo.relativeHeight;\n            var bColor = getColor.call(this, index, 0.3);\n            var sColor = getColor.call(this, index, 1.0);\n            var chart = container.add({\n                xtype: 'cartesian',\n                plugins: {\n                    ptype: 'chartitemevents'\n                },\n                flex: fraction,\n                height: '100%',\n                insetPadding: 0,\n                background: {\n                    type: 'linear',\n                    degrees: 90,\n                    stops: [{\n                        offset: 0,\n                        color: bColor\n                    },{\n                        offset: height,\n                        color: bColor\n                    },{\n                        offset: height,\n                        color: 'white'\n                    },{\n                        offset: 1,\n                        color: 'white'\n                    }]\n                },\n                axes: [{\n                    type: 'numeric',\n                    position: 'left',\n                    fields: 'distribution',\n                    hidden: true\n                },{\n                    type: 'category',\n                    position: 'bottom',\n                    fields: 'bin',\n                    hidden: true\n                }],\n                series: [{\n                    type: 'line',\n                    xField: 'bin',\n                    yField: 'distribution',\n                    style: {\n                        lineWidth: 2,\n                        strokeStyle: sColor\n                    },\n                    tooltip: {\n                        corpus: corpus,\n                        trackMouse: true,\n                        style: 'background: #fff',\n                        showDelay: 0,\n                        dismissDelay: 500,\n                        hideDelay: 5,\n                        renderer: function(toolTip, record, ctx) {\n                            toolTip.setHtml(corpus.getDocument(record.get('docIndex')).getTitle()+\"<br>\"+record.get('term') + ': ' + record.get('distribution'));\n                        }\n                    }\n                }],\n                store: Ext.create('Ext.data.ArrayStore', {\n                    fields: ['docId', 'docIndex', 'bin', 'distribution', 'term'],\n                    data: []\n                }),\n                listeners: {\n                    itemclick: function(chart, item, event) {\n                        // var data = item.record.data;\n                        // var doc = this.getDocumentsStore().getAt(data.docIndex);\n                        // this.getParentPanel().getApplication().dispatchEvent('documentsClicked', this, [doc]);\n                    },\n                    scope: this\n                }\n            });\n            \n            chart.body.on('click', function(event, target) {\n                var el = Ext.get(target);\n                \n                var x = event.getX();\n                var box = el.getBox();\n                var fraction = (x - box.x) / box.width;\n\n                var chartContainer = el.parent('.x-panel');\n                var containerParent = chartContainer.parent();\n                var children = Ext.toArray(containerParent.dom.children);\n                var docIndex = children.indexOf(chartContainer.dom);\n\n                this.fireEvent('documentRelativePositionSelected', this, {docIndex: docIndex, fraction: fraction});\n            }, this);\n        }\n        \n        container.removeAll();\n        \n        var docs = corpus.getDocuments();\n        var tokensTotal = corpus.getWordTokensCount();\n        var docInfos = [];\n        var docMinSize = Number.MAX_VALUE;\n        var docMaxSize = -1;\n//      for (var i = 0; i < docs.getTotalCount(); i++) {\n        for (var i = 0; i < docs.getCount(); i++) {\n            var d = docs.getAt(i);\n            var docIndex = d.get('index');\n            var count = d.get('tokensCount-lexical');\n            if (count < docMinSize) docMinSize = count;\n            if (count > docMaxSize) docMaxSize = count;\n            var fraction = count / tokensTotal;\n            docInfos.push({\n                index: docIndex,\n                count: count,\n                fraction: fraction\n            });\n        }\n        \n        if (this.getIsDetailedGraph()) {\n            for (var i = 0; i < docInfos.length; i++) {\n                var d = docInfos[i];\n                d.relativeHeight = d.count==docMaxSize ? 1 : map(d.count, docMinSize, docMaxSize, 0.25, 1);\n                addChart.call(this, d);\n            }\n        } else {\n            var chart = container.add({\n                xtype: 'cartesian',\n                plugins: {\n                    ptype: 'chartitemevents'\n                },\n                flex: 1,\n                height: '100%',\n                insetPadding: 0,\n                axes: [{\n                    type: 'numeric',\n                    position: 'left',\n                    fields: 'count',\n                    hidden: true\n                },{\n                    type: 'category',\n                    position: 'bottom',\n                    fields: 'index',\n                    hidden: true\n                }],\n                series: [{\n                    type: 'bar',\n                    xField: 'index',\n                    yField: 'count',\n                    style: {\n                        minGapWidth: 0,\n                        minBarWidth: 1,\n                        lineWidth: 0,\n                        strokeStyle: 'none'\n                    },\n                    renderer: function (sprite, config, rendererData, index) {\n                        return {fillStyle: getColor.call(this, index, 0.3)};\n                    }.bind(this)\n                }],\n                store: Ext.create('Ext.data.JsonStore', {\n                    fields: [{name: 'index', type: 'int'}, {name: 'count', type: 'int'}, {name: 'fraction', type: 'float'}],\n                    data: docInfos\n                }),\n                listeners: {\n                    itemclick: function(chart, item, event) {\n                        var el = Ext.get(event.getTarget());\n                        var x = event.getX();\n                        var box = el.getBox();\n                        var docWidth = box.width / this.getCorpus().getDocuments().getCount();\n                        var docX = (x - box.x) % docWidth;\n                        var fraction = docX / docWidth;\n\n            \t\t\tvar data = item.record.data;\n                        var doc = this.getDocumentsStore().getAt(data.index);\n                        var docIndex = doc.getIndex();\n\n                        this.fireEvent('documentRelativePositionSelected', this, {docIndex: docIndex, fraction: fraction});\n                    },\n                    scope: this\n                }\n            });\n        }\n\n    },\n\n    moveLocationMarker: function(docIndex, fraction, scrollDir) {\n        var locMarkEl = Ext.get(this.getLocationMarker());\n        var locX = locMarkEl.getX();\n        if (this.getIsDetailedGraph()) {\n            var graph = this.query('cartesian')[docIndex];\n            if (graph) {\n                locX = graph.getX() + graph.getWidth()*fraction;\n            }\n        } else {\n            var graph = this.down('cartesian');\n            var docWidth = graph.getWidth() / this.getCorpus().getDocuments().getCount();\n            locX = graph.getX() + docWidth*docIndex + docWidth*fraction;\n        }\n        if (scrollDir != null) {\n            var currX = locMarkEl.getX();\n            // prevent location being set in opposite direction of scroll\n            if ((scrollDir == this.SCROLL_DOWN && currX > locX) || (scrollDir == this.SCROLL_UP && currX < locX)) locX = currX;\n        }\n        locMarkEl.setX(locX);\n    }\n});","Ext.define('Voyant.panel.Panel', {\n\tmixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.util.Toolable','Voyant.util.DetailedError'],\n\trequires: ['Voyant.widget.QuerySearchField','Voyant.widget.StopListOption','Voyant.widget.CategoriesOption','Voyant.widget.TotalPropertyStatus'],\n\talias: 'widget.voyantpanel',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tconfig: {\n\t\t\tcorpusValidated: false\n\t\t},\n\t\tapi: {\n\t\t\tcorpus: undefined,\n\t\t\tinput: undefined,\n\t\t\tinputFormat: undefined,\n\t\t\tsubtitle: undefined\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\t\tthis.mixins['Voyant.util.Toolable'].constructor.apply(this, arguments);\n\t\tif (!this.glyph) {\n\t\t\tthis.glyph = Ext.ClassManager.getClass(this).glyph\n\t\t}\n\t\t\n\t\tthis.on(\"afterrender\", function() {\n\t\t\tif (this.getXType()!='facet' && this.getApiParam('subtitle') && this.getTitle()) {\n\t\t\t\tthis.setTitle(this.getTitle()+\" <i style='font-size: smaller;'>\"+this.getApiParam('subtitle')+\"</i>\")\n\t\t\t}\n\t\t\tif (this.isXType(\"grid\")) {\n\t\t\t\tthis.getSelectionModel().on(\"selectionchange\", function(store, records) {\n//\t\t\t\t\tconsole.warn(records, this.selectedRecordsToRemember)\n//\t\t\t\t\tthis.selectedRecordsToRemember = records;\n\t\t\t\t}, this);\n\t\t\t\tthis.getStore().on(\"beforeload\", function() {\n\t\t\t\t\tthis.selectedRecordsToRemember = this.getSelection();\n\t\t\t\t}, this)\n\t\t\t\tthis.getStore().on(\"load\", function(store, records) {\n\t\t\t\t\tif (Ext.Array.from(this.selectedRecordsToRemember).length>0) {\n\t\t\t\t\t\t// combine contents of store with contents of remembered items, filtering out duplicates\n\t\t\t\t\t\tvar seen = {}\n\t\t\t\t\t\tvar mergedRecords = Ext.Array.merge(this.selectedRecordsToRemember, records).filter(function(item) {\n\t\t\t\t\t\t\tif (!(item.getId() in seen)) {\n\t\t\t\t\t\t\t\tseen[item.getId()]=true;\n\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (store.isBufferedStore) {\n\t\t\t\t\t\t\tif (store.currentPage==1) {\n\t\t\t\t\t\t\t\tstore.data.addAll(mergedRecords);\n\t\t\t\t\t\t\t\tstore.totalCount = mergedRecords.length;\n\t\t\t\t\t\t\t\tstore.fireEvent('refresh', store);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstore.loadRecords(mergedRecords);\n\t\t\t\t\t\t\tthis.getSelectionModel().select(this.selectedRecordsToRemember);\n\t\t\t\t\t\t\tstore.fireEvent('refresh', store);\n\t\t\t\t\t\t\tthis.selectedRecordsToRemember = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\tthis.on({\n\t\t\tloadedCorpus: {\n\t\t\t\tfn: function(src, corpus) {\n\t\t    \t\t// make sure API is updated if we had a corpus and it's changed, this should be registered first, so hopefully be fired before tools receive notification\n\t\t    \t\tthis.setApiParam(\"corpus\", corpus.getAliasOrId());\n\t\t\t\t\tthis.setCorpus(corpus);\n\t\t\t\t},\n\t\t\t\tpriority: 999, // very high priority\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\t},\n\t\n\tgetApplication: function() {\n\t\treturn Voyant.application;\n\t},\n\t\n\tgetBaseUrl: function() {\n\t\treturn this.getApplication().getBaseUrl();\n\t},\n\t\n\topenUrl: function(url) {\n\t\tthis.getApplication().openUrl.apply(this, arguments);\n\t},\n\t\n\tgetTromboneUrl: function() {\n\t\treturn this.getApplication().getTromboneUrl();\n\t},\n\t\n\tdispatchEvent: function() {\n\t\tvar application = this.getApplication();\n\t\tapplication.dispatchEvent.apply(application, arguments);\n\t},\n\t\n\tshowError: function(config, response) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {\n\t\t\t\tmessage: config\n\t\t\t}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\ttitle: this.localize(\"error\")+\" (\"+this.localize(\"title\")+\")\"\n\t\t})\n\t\tthis.getApplication().showError(config, response)\n\t},\n\t\n\tshowResponseError: function(config, response) {\n\t\tthis.getApplication().showResponseError(config, response)\n\t},\n\t\n\ttoastError: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\tglyph: 'xf071@FontAwesome',\n\t\t\ttitle: this.localize(\"error\")\n\t\t})\n\t\tthis.toast(config);\n\t},\n\t\n\ttoastInfo: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\tglyph: 'xf05a@FontAwesome',\n\t\t\ttitle: this.localize(\"info\")\n\t\t})\n\t\tthis.toast(config);\n\t},\n\t\n\ttoast: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\t slideInDuration: 500,\n\t\t\t shadow: true,\n\t\t\t align: 'b',\n\t\t\t anchor: this.getTargetEl()\t\t\t\n\t\t})\n\t\tExt.toast(config);\n\t},\n\n\t/**\n\t * Checks to see if we have access to this corpus, first by checking the application's\n\t * access setting for the corpus, then by checking the corpus setting.\n\t * \n\t * Assumes we're only calling this from a non-consumptive tool.\n\t */\n\thasCorpusAccess: function(corpus) {\n\t\tvar app = this.getApplication();\n\t\tif (app) {\n\t\t\tvar corpusAccess = app.getCorpusAccess();\n\t\t\tif (corpusAccess=='ADMIN' || corpusAccess=='ACCESS') {return true;}\n\t\t}\n\t\tif (!corpus) {\n\t\t\tif (this.getCorpus) {\n\t\t\t\tcorpus = this.getCorpus();\n\t\t\t}\n\t\t\tif (!corpus && app.getCorpus) {\n\t\t\t\tcorpus = app.getCorpus();\n\t\t\t}\n\t\t}\n\t\tif (corpus) {\n\t\t\treturn corpus.getNoPasswordAccess()!='NONCONSUMPTIVE' && corpus.getNoPasswordAccess()!='NONE';\n\t\t}\n\t\treturn false; // don't know if we ever get here\n\t}\n\t\n});","\nExt.define('Voyant.panel.VoyantTabPanel', {\n\textend: 'Ext.tab.Panel',\n\talias: 'widget.voyanttabpanel',\n\tmixins: ['Voyant.panel.Panel'],\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tinitComponent: function() {\n    \tthis.callParent(arguments);\n\t},\n\tlisteners: {\n\t\ttabchange: function(panel, newTab) {\n\t\t\tthis.tools = [];\n\t\t\tthis.getHeader().tools = [];\n\t\t\tthis.query(\"toolmenu\").forEach(function(toolMenu) {\n\t\t\t\ttoolMenu.destroy();\n\t\t\t})\n\t\t\tthis.addTool(newTab.tools)\n\t\t\tthis.getApplication().dispatchEvent(\"panelChange\", this)\n\t\t},\n\t\tafterrender: function(panel) {\n\t\t\tthis.fireEvent(\"tabchange\", this, this.getActiveTab())\n\t\t}\n\t},\n\tshowOptionsClick: function(panel) {\n\t\tvar tab = panel.getActiveTab();\n\t\tif (tab.showOptionsClick) {\n\t\t\ttab.showOptionsClick.apply(tab, arguments)\n\t\t}\n\t}\n});","Ext.define('Voyant.widget.Facet', {\n\textend: 'Ext.grid.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.facet',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tstopList: 'auto',\n\t\t\tquery: undefined\n\t\t}\n\t},\n\t\n\tconstructor: function(config) {\n        this.callParent(arguments);\n        Ext.applyIf(config || {}, {\n        \tincludeTools: [], // don't show tools in header\n        \trowLines: false,\n\t\t\tsubtitle: undefined\n        });\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, [config]);\n\t},\n\t\n\trowLines: false,\n\t\n    initComponent: function(){\n\n    \tvar me = this;\n    \tif (!this.store) {\n    \t\tthis.store = new Ext.create(\"Voyant.data.store.CorpusFacets\", {\n    \t\t\tproxy: {\n    \t\t\t\textraParams: {\n    \t\t\t\t\tfacet: this.facet\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tparentPanel: this\n    \t\t})\n    \t\tthis.store.getProxy().on(\"exception\", function(proxy, request, operation, eOpts) {\n\t\t    \tme.showResponseError(\"Unable to fetch facet: \"+me.facet, response);\n    \t\t})\n    \t}\n    \t\n        Ext.applyIf(this, {\n        \temptyText: this.localize(\"emptyText\"),\n        \thideHeaders: true,\n        \tselType: 'checkboxmodel',\n        \tcolumns: [\n        \t          { renderer: function(value, metaData, record) {return \"(\"+record.getInDocumentsCount()+\") \"+record.getLabel()}, flex: 1 }\n        \t]\n        });\n        this.callParent();\n        \n        if (this.corpus) {\n        \tthis.setStoreCorpus(this.corpus);\n        }\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tthis.setStoreCorpus(corpus);\n        }, this);\n        \n        this.on(\"query\", function(src, query) {\n        \tthis.setApiParam(\"query\", query);\n        \t// not getting set from beforeload, so set params here\n        \tthis.store.load({\n        \t\tparams: this.getApiParams()\n        \t})\n        })\n    },\n    \n    setStoreCorpus: function(corpus) {\n//    \tthis.callParent(arguments)\n    \tif (this.getStore()) {\n        \tthis.getStore().setCorpus(corpus);\n        \tthis.getStore().load();\n    \t}\n    }\n});\n","// assuming Bubblelines library is loaded by containing page (via voyant.jsp)\nExt.define('Voyant.panel.Bubbles', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.bubbles',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @property stopList The stop list to use to filter results.\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\n    \t\t * @type String\n    \t\t * @private\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tdocIndex: 0,\n    \t\t\n    \t\tlimit: 100,\n    \t\t\n    \t\taudio: false,\n    \t\t\n    \t\tspeed: 30\n    \t\t\t\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: {xtype: 'stoplistoption'},\n    \taudio: false\n\t},\n\t\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<canvas style=\"width: 100%; height: 100%\"></canvas>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 60,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(cmp.getValue())}\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(val)}\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t                xtype: 'checkbox',\n\t                boxLabel: this.localize('sound'),\n\t                listeners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\");\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('soundTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    change: function(cmp, val) {\n\t                    \tthis.setApiParam('audio', val);\n\t                    \tthis.setAudio(val);\n\t                    },\n\t                    scope: this\n\t                }\n\t            },{xtype: 'tbfill'}, {\n\t    \t\t\txtype: 'tbtext',\n\t    \t\t\thtml: this.localize('adaptation') //https://www.m-i-b.com.ar/letters/en/\n\t    \t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\");\n    \t\tvar me = this;\n    \t\tExt.Ajax.request({\n    \t\t\turl: this.getBaseUrl()+'resources/voyant/current/bubbles/bubbles.pjs'\n    \t\t}).then(function(data) {\n    \t\t\tvar canvas = me.getTargetEl().dom.querySelector(\"canvas\");\n    \t\t\tme.bubbles = new Processing(canvas, data.responseText);\n    \t\t\tme.bubbles.size(me.getTargetEl().getWidth(),me.getTargetEl().getHeight());\n    \t\t\tme.bubbles.frameRate(me.getApiParam('speed'));\n    \t\t\tme.bubbles.bindJavascript(me);\n    \t\t\tme.bubbles.noLoop();\n    \t\t\tme.loadDocument();\n    \t\t})\n    \t}, this);\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tif (this.bubbles) {\n    \t\t\tthis.bubbles.size(this.body.getWidth(),this.body.getHeight());\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentselected\", function(src, doc) {\n    \t\tthis.setApiParam('docIndex', this.getCorpus().getDocument(doc).getIndex());\n    \t\tthis.loadDocument();\n    \t})\n    },\n    \n    setAudio: function(val) {\n    \tif (this.gainNode) {this.gainNode.gain.value=val ? 1 : 0;}\n    \tthis.callParent(arguments)\n    },\n\n    handleCurrentTerm: function(term) {\n    \tif (this.oscillator) {this.oscillator.frequency.value = this.terms[term] ? parseInt((this.terms[term]-this.minFreq) * 2000 / (this.maxFreq-this.minFreq)) : 0;}\n    },\n    \n    handleDocFinished: function() {\n    \tif (this.gainNode) {this.gainNode.gain.value = 0;}\n    \tvar index = parseInt(this.getApiParam('docIndex'));\n    \tif (index+1<this.getCorpus().getDocumentsCount()) {\n    \t\tthis.setApiParam('docIndex', index+1);\n    \t\tthis.loadDocument();\n    \t}\n    },\n    \n    loadDocument: function() {\n    \tvar me = this, doc = this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex')));\n    \t// if we're not in a tab panel, set the document title as part of the header\n    \tif (!this.up(\"tabpanel\")) {\n        \tthis.setTitle(this.localize('title') + \" <span class='subtitle'>\"+doc.getFullLabel()+\"</span>\");\n    \t}\n\n    \tdoc.loadDocumentTerms(Ext.apply(this.getApiParams([\"stopList\"]), {\n    \t\tlimit: 100\n    \t})).then(function(documentTerms) {\n    \t\tme.terms = {};\n    \t\tdocumentTerms.each(function(documentTerm) {\n    \t\t\tme.terms[documentTerm.getTerm()] = documentTerm.getRawFreq();\n    \t\t})\n    \t\tvar values = Object.keys(me.terms).map(function(k){return me.terms[k]});\n    \t\tme.minFreq = Ext.Array.min(values);\n    \t\tme.maxFreq = Ext.Array.max(values);\n    \t\tme.getCorpus().loadTokens({whitelist: Object.keys(me.terms), noOthers: true, limit: 0, docIndex: me.getApiParam('docIndex')}).then(function(tokens) {\n    \t\t\tvar words = [];\n        \t\ttokens.each(function(token) {\n    \t\t\t\twords.push(token.getTerm().toLowerCase());\n        \t\t})\n        \t\tme.bubbles.setLines([doc.getTitle(),words.join(\" \")]);\n        \t\tme.bubbles.loop();\n        \t\tme.oscillator.frequency.value = 150;\n        \t\tme.gainNode.gain.value = me.getAudio() ? 1 : 0;\n    \t\t})\n    \t})\n    },\n    \n    initComponent: function() {\n    \t// make sure to load script\n\t\tExt.Loader.loadScript(this.getBaseUrl()+\"resources/processingjs/processing.min.js\");\n\t\t\n\t\tvar audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\t\t\n\t\tthis.oscillator = audioCtx.createOscillator();\n\t\tthis.gainNode = audioCtx.createGain();\n\t\tthis.oscillator.connect(this.gainNode);\n\t\tthis.gainNode.connect(audioCtx.destination);\n\t\tthis.oscillator.frequency.value = 0;\n\t\tthis.oscillator.start();\n\t\tthis.gainNode.gain.value = 0;\n\n    \tthis.callParent(arguments);\n    }\n});","// assuming Bubblelines library is loaded by containing page (via voyant.jsp)\r\nExt.define('Voyant.panel.Bubblelines', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.bubblelines',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\t/**\r\n    \t\t * @property bins How many \"bins\" to separate a document into.\r\n    \t\t * @type Integer\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tbins: 50,\r\n        \t/**\r\n        \t * @property query A string to search for in a document.\r\n        \t * @type String\r\n    \t\t * @private\r\n        \t */\r\n    \t\tquery: null,\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * @property stopList The stop list to use to filter results.\r\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\r\n    \t\t * @type String\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tstopList: 'auto',\r\n    \t\t/**\r\n    \t\t * @property docId The document ID to restrict results to.\r\n    \t\t * @type String\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tdocId: undefined,\r\n    \t\t/**\r\n    \t\t * @property docIndex The document index to restrict results to.\r\n    \t\t * @type Integer\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tdocIndex: undefined,\r\n    \t\t/**\r\n    \t\t * @property maxDocs The maximum number of documents to show.\r\n    \t\t * @type Integer\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tmaxDocs: 50\r\n    \t},\r\n    \tglyph: 'xf06e@FontAwesome'\r\n\t},\r\n\tconfig: {\r\n\t\tbubblelines: undefined,\r\n\t\ttermStore: undefined,\r\n\t\tdocTermStore: undefined,\r\n\t\tselectedDocs: undefined,\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},{xtype: 'colorpaletteoption'}]\r\n\t},\r\n\t\r\n\ttermTpl: new Ext.XTemplate(\r\n\t\t'<tpl for=\".\">',\r\n\t\t\t'<div class=\"term\" style=\"color: rgb({color});float: left;padding: 3px;margin: 2px;\">{term}</div>',\r\n\t\t'</tpl>'\r\n\t),\r\n    \r\n    constructor: function() {\r\n        this.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.on('loadedCorpus', function(src, corpus) {\r\n    \t\tthis.setDocTermStore(corpus.getDocumentTerms({\r\n    \t\t\tproxy: {\r\n\t    \t\t\textraParams: {\r\n\t\t\t\t\t\twithDistributions: 'raw',\r\n\t\t\t\t\t\twithPositions: true\r\n\t\t\t\t\t}\r\n    \t\t\t},\r\n\t\t\t\tlisteners: {\r\n\t   \t\t    \t load: function(store, records, successful, options) {\r\n\t   \t\t    \t\trecords.forEach(function(record) {\r\n\t   \t\t    \t\t\tvar termData = this.processTerms(record);\r\n\t   \t\t    \t\t\tvar docId = record.get('docId');\r\n\t   \t\t    \t\t\tvar term = record.get('term');\r\n\t   \t\t    \t\t\tvar termObj = {};\r\n\t   \t\t    \t\t\ttermObj[term] = termData;\r\n\t   \t\t    \t\t\tthis.getBubblelines().addTermsToDoc(termObj, docId);\r\n\t   \t\t    \t\t}, this);\r\n\t   \t\t    \t\tthis.getBubblelines().doBubblelinesLayout();\r\n\t   \t\t\t\t},\r\n\t   \t\t\t\tscope: this\r\n\t   \t\t     }\r\n    \t\t}));\r\n    \t\t\r\n    \t\tif (this.isVisible() && this.getBubblelines()) {\r\n    \t\t\tthis.initLoad();\r\n    \t\t}\r\n    \t}, this);\r\n    \t\r\n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\r\n        \tif (this.getCorpus()) {\r\n\t\t\t\tExt.Function.defer(this.initLoad, 100, this);\r\n\t\t\t}\r\n    \t}, this);\r\n        \r\n        this.on('query', function(src, query) {\r\n    \t\tif (query !== undefined && query != '') {\r\n    \t\t\tthis.getDocTermsFromQuery(query);\r\n    \t\t}\r\n    \t}, this);\r\n        \r\n        this.on('documentsSelected', function(src, docIds) {\r\n        \tthis.setApiParam('docId', docIds);\r\n        \tthis.getBubblelines().cache.each(function(d) {\r\n        \t\td.hidden = docIds.indexOf(d.id) === -1;\r\n        \t});\r\n        \tthis.getBubblelines().drawGraph();\r\n        }, this);\r\n    \t\r\n    \tthis.on('termsClicked', function(src, terms) {\r\n    \t\tif (src !== this) {\r\n\t    \t\tvar queryTerms = [];\r\n\t    \t\tterms.forEach(function(term) {\r\n        \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\r\n        \t\t\telse if (term.term) {queryTerms.push(term.term);}\r\n        \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\r\n        \t\t});\r\n\t    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t\t}\r\n\t\t}, this);\r\n    \t\r\n    \tthis.on('documentTermsClicked', function(src, terms) {\r\n    \t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t}, this);\r\n    \t\r\n    \tthis.down('#granularity').setValue(parseInt(this.getApiParam('bins')));\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tthis.setTermStore(Ext.create('Ext.data.ArrayStore', {\r\n            fields: ['term', 'color'],\r\n            listeners: {\r\n            \tload: function(store, records, successful, options) {\r\n            \t\tvar termsView = this.down('#termsView');\r\n            \t\tfor (var i = 0; i < records.length; i++) {\r\n            \t\t\tvar r = records[i];\r\n            \t\t\ttermsView.select(r, true);\r\n            \t\t}\r\n            \t},\r\n            \tscope: this\r\n            }\r\n        }));\r\n    \t\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                \txtype: 'querysearchfield'\r\n                },{\r\n\t            \ttext: this.localize('clearTerms'),\r\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\r\n\t            \thandler: function() {\r\n\t            \t\tthis.down('#termsView').getSelectionModel().deselectAll(true);\r\n\t            \t\tthis.getTermStore().removeAll();\r\n\t            \t\tthis.setApiParams({query: null});\r\n\t            \t\tthis.getBubblelines().removeAllTerms();\r\n\t            \t\tthis.getBubblelines().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this                \t\t\t\r\n        \t\t},{\r\n\t            \txtype: 'documentselectorbutton'\r\n        \t\t},{\r\n\t            \txtype: 'slider',\r\n\t            \titemId: 'granularity',\r\n\t            \tfieldLabel: this.localize('granularity'),\r\n\t            \tlabelAlign: 'right',\r\n\t            \tlabelWidth: 70,\r\n\t            \twidth: 150,\r\n\t            \tincrement: 10,\r\n\t            \tminValue: 10,\r\n\t            \tmaxValue: 300,\r\n\t            \tlisteners: {\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParams({bins: newvalue});\r\n\t            \t\t\tthis.getBubblelines().bubbleSpacing = newvalue;\r\n\t            \t\t\tthis.reloadTermsData();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \txtype: 'checkbox',\r\n\t            \tboxLabel: this.localize('separateLines'),\r\n\t            \tboxLabelAlign: 'before',\r\n\t            \tchecked: false,\r\n\t            \thandler: function(checkbox, checked) {\r\n\t            \t\tthis.getBubblelines().SEPARATE_LINES_FOR_TERMS = checked;\r\n\t            \t\tthis.getBubblelines().lastClickedBubbles = {};\r\n\t            \t\tthis.getBubblelines().setCanvasHeight();\r\n\t    \t\t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this\r\n\t            \t\r\n\t            }]\r\n    \t\t}],\r\n            border: false,\r\n            layout: 'fit',\r\n            items: {\r\n            \tlayout: {\r\n            \t\ttype: 'vbox',\r\n            \t\talign: 'stretch'\r\n            \t},\r\n            \tdefaults: {border: false},\r\n\t            items: [{\r\n\t            \theight: 30,\r\n\t            \titemId: 'termsView',\r\n\t            \txtype: 'dataview',\r\n\t            \tstore: this.getTermStore(),\r\n\t            \ttpl: this.termTpl,\r\n\t            \titemSelector: 'div.term',\r\n\t            \toverItemCls: 'over',\r\n\t            \tselectedItemCls: 'selected',\r\n\t            \tselectionModel: {\r\n\t            \t\tmode: 'SIMPLE'\r\n\t            \t},\r\n//\t            \tcls: 'selected', // default selected\r\n\t            \tfocusCls: '',\r\n\t            \tlisteners: {\r\n\t            \t\tbeforeitemclick: function(dv, record, item, index, event, opts) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tdv.fireEvent('itemcontextmenu', dv, record, item, index, event, opts);\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tbeforecontainerclick: function() {\r\n\t            \t\t\t// cancel deselect all\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tselectionchange: function(selModel, selections) {\r\n\t            \t\t\tvar dv = this.down('#termsView');\r\n\t            \t\t\tvar terms = [];\r\n\t            \t\t\t\r\n\t            \t\t\tdv.getStore().each(function(r) {\r\n\t            \t\t\t\tif (selections.indexOf(r) !== -1) {\r\n\t            \t\t\t\t\tterms.push(r.get('term'));\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('unselected').addCls('selected');\r\n\t            \t\t\t\t} else {\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('selected').addCls('unselected');\r\n\t            \t\t\t\t}\r\n\t            \t\t\t});\r\n\t            \t\t\t\r\n\t            \t\t\tfor (var index in this.getBubblelines().lastClickedBubbles) {\r\n\t            \t\t\t\tvar lcTerms = this.getBubblelines().lastClickedBubbles[index];\r\n\t            \t\t\t\tfor (var term in lcTerms) {\r\n\t            \t\t\t\t\tif (terms.indexOf(term) == -1) {\r\n\t            \t\t\t\t\t\tdelete this.getBubblelines().lastClickedBubbles[index][term];\r\n\t            \t\t\t\t\t}\r\n\t            \t\t\t\t}\r\n\t            \t\t\t\t\r\n\t            \t\t\t}\r\n\t            \t\t\tthis.getBubblelines().termsFilter = terms;\r\n\t            \t\t\tthis.getBubblelines().setCanvasHeight();\r\n\t            \t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t\t},\r\n\t            \t\titemcontextmenu: function(dv, record, el, index, event) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tvar isSelected = dv.isSelected(el);\r\n\t            \t\t\tvar menu = new Ext.menu.Menu({\r\n\t            \t\t\t\tfloating: true,\r\n\t            \t\t\t\titems: [{\r\n\t            \t\t\t\t\ttext: isSelected ? this.localize('hideTerm') : this.localize('showTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tif (isSelected) {\r\n\t            \t\t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\t} else {\r\n\t            \t\t\t\t\t\t\tdv.select(index, true);\r\n\t            \t\t\t\t\t\t}\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t},{\r\n\t            \t\t\t\t\ttext: this.localize('removeTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\tvar term = this.getTermStore().getAt(index).get('term');\r\n\t            \t\t\t\t\t\tthis.getTermStore().removeAt(index);\r\n\t            \t\t\t\t\t\tdv.refresh();\r\n\t            \t\t\t\t\t\t\r\n\t            \t\t\t\t\t\tthis.getBubblelines().removeTerm(term);\r\n\t            \t\t\t\t\t\tthis.getBubblelines().setCanvasHeight();\r\n\t            \t\t\t\t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t}]\r\n\t            \t\t\t});\r\n\t            \t\t\tmenu.showAt(event.getXY());\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \tflex: 1,\r\n\t            \txtype: 'container',\r\n\t            \tautoEl: 'div',\r\n\t            \titemId: 'canvasParent',\r\n\t            \tlayout: 'fit',\r\n\t            \toverflowY: 'auto',\r\n\t            \toverflowX: 'hidden'\r\n\t            }],\r\n\t            listeners: {\r\n\t            \trender: function(component) {\r\n\t            \t\tvar canvasParent = this.down('#canvasParent');\r\n\t                \tthis.setBubblelines(new Bubblelines({\r\n\t                \t\tcontainer: canvasParent,\r\n\t                \t\tclickHandler: this.bubbleClickHandler.bind(this)\r\n\t                \t}));\r\n\t                \tthis.getBubblelines().bubbleSpacing = parseInt(this.getApiParam('bins'));\r\n\t            \t},\r\n            \t\tafterlayout: function(container) {\r\n            \t\t\tif (this.getBubblelines().initialized === false) {\r\n            \t\t\t\tthis.getBubblelines().initializeCanvas();\r\n            \t\t\t}\r\n            \t\t},\r\n\t        \t\tresize: function(cnt, width, height) {\r\n\t        \t\t\tthis.getBubblelines().doBubblelinesLayout();\r\n\t        \t\t},\r\n            \t\tscope: this\r\n            \t}\r\n            }\r\n\t\t});\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    initLoad: function() {\r\n    \t// get doc info\r\n    \tvar docIds = [];\r\n\t\tthis.getCorpus().getDocuments().each(function(doc, index, total) {\r\n\t\t\tvar inLimit = index < this.getApiParam('maxDocs');\r\n\t\t\tthis.getBubblelines().addDocToCache({\r\n\t\t\t\tid: doc.getId(),\r\n\t\t\t\tindex: doc.getIndex(),\r\n\t\t\t\ttitle: doc.getShortTitle(),\r\n\t\t\t\ttotalTokens: doc.get('tokensCount-lexical'),\r\n\t\t\t\tterms: {},\r\n\t\t\t\thidden: !inLimit\r\n\t\t\t});\r\n\t\t\tif (inLimit) {\r\n\t\t\t\tdocIds.push(doc.getId());\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\tthis.setApiParam('docId', docIds);\r\n\t\t\r\n\t\t// get top terms in corpus\r\n\t\tthis.getCorpus().getCorpusTerms({autoload: false}).load({\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t    \tvar query = [];\r\n\t\t    \trecords.forEach(function(record, index) {\r\n\t\t\t\t\tquery.push(record.get('term'));\r\n\t\t\t\t}, this);\r\n\t\t    \tthis.getDocTermsFromQuery(query);\r\n\t\t    },\r\n\t\t    scope: this,\r\n\t\t    params: {\r\n\t\t    \tlimit: this.getApiParam('query') ? undefined : 5,\r\n\t\t    \tstopList: this.getApiParams('stopList'),\r\n\t\t    \tquery: this.getApiParam('query')\r\n\t\t    }\r\n\t\t});\r\n    },\r\n    \r\n    /**\r\n     * Get the results for the query(s) for each of the corpus documents.\r\n     * @param query {String|Array}\r\n     */\r\n    getDocTermsFromQuery: function(query) {\r\n    \tif (query) {this.setApiParam('query', query);} // make sure it's set for subsequent calls\r\n    \tif (this.getCorpus() && this.isVisible()) {\r\n\t\t\tthis.getDocTermStore().load({params: this.getApiParams()});\r\n    \t}\r\n\t},\r\n    \r\n\treloadTermsData: function() {\r\n\t\tvar terms = [];\r\n\t\tfor (var term in this.getBubblelines().currentTerms) {\r\n\t\t\tterms.push(term);\r\n\t\t}\r\n\t\tthis.getDocTermsFromQuery(terms);\r\n\t},\r\n\t\r\n    filterDocuments: function() {\r\n\t\tvar docIds = this.getApiParam('docId');\r\n\t\tif (docIds == '') {\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getCorpus().getDocuments().each(function(item, index) {\r\n\t\t\t\tdocIds.push(item.getId());\r\n\t\t\t});\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t}\r\n\t\tif (typeof docIds == 'string') docIds = [docIds];\r\n\t\t\r\n\t\tif (docIds == null) {\r\n\t\t\tthis.setSelectedDocs(this.getCorpus().getDocuments().clone());\r\n\t\t\tvar count = this.getSelectedDocs().getCount();\r\n\t\t\tif (count > 10) {\r\n\t\t\t\tfor (var i = 10; i < count; i++) {\r\n\t\t\t\t\tthis.getSelectedDocs().removeAt(10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getSelectedDocs().eachKey(function(docId, doc) {\r\n\t\t\t\tdocIds.push(docId);\r\n\t\t\t}, this);\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t} else {\r\n\t\t\tthis.setSelectedDocs(this.getCorpus().getDocuments().filterBy(function(doc, docId) {\r\n\t\t\t\treturn docIds.indexOf(docId) != -1;\r\n\t\t\t}, this));\r\n\t\t}\r\n\t},\r\n\t\r\n\tprocessTerms: function(termRecord) {\r\n\t\tvar termObj;\r\n\t\tvar term = termRecord.get('term');\r\n\t\tvar rawFreq = termRecord.get('rawFreq');\r\n\t\tvar positions = termRecord.get('positions');\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar color = this.getApplication().getColorForTerm(term);\r\n\t\t\tif (this.getTermStore().find('term', term) === -1) {\r\n\t\t\t\tthis.getTermStore().loadData([[term, color]], true);\r\n\t\t\t\tvar index = this.getTermStore().find('term', term);\r\n\t\t\t\tthis.down('#termsView').select(index, true); // manually select since the store's load listener isn't triggered\r\n\t\t\t}\r\n\t\t\tvar distributions = termRecord.get('distributions');\r\n\t\t\ttermObj = {positions: positions, distributions: distributions, rawFreq: rawFreq, color: color};\r\n\t\t} else {\r\n\t\t\ttermObj = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn termObj;\r\n\t},\r\n\t\r\n\tbubbleClickHandler: function(data) {\r\n\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\r\n\t}\r\n});","Ext.define('Voyant.panel.Catalogue', {\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.widget.Facet'],\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\t\n\talias: 'widget.catalogue',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tconfig: undefined,\n    \t\tstopList: 'auto',\n    \t\tfacet: ['facet.title','facet.author','facet.language'],\n    \t\ttitle: undefined,\n    \t\tsplash: undefined,\n    \t\treader: \"reader\"\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \tfacets: {},\n    \tmatchingDocIds: [],\n    \tcustomResultsHtml: undefined\n    },\n    \n    constructor: function(config) {\n    \tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: 'hbox',\n    \t\titems: [\n    \t\t        {\n    \t\t        \tlayout: 'vbox',\n    \t\t        \theight: '100%',\n    \t\t        \talign: 'stretch',\n    \t\t        \titemId: 'facets',\n    \t\t        \tdefaults: {\n    \t\t        \t\twidth: 250,\n    \t\t        \t\tflex: 1,\n    \t\t        \t\txtype: 'facet',\n    \t\t        \t\tmargin: 5,\n    \t\t        \t\tborder: true,\n    \t\t        \t\tframe: true,\n    \t\t            \tincludeTools: {\n    \t\t            \t\tclose: {\n    \t\t            \t\t\ttype: 'close',\n    \t\t                \t\ttooltip: this.localize('closeFacetTip'),\n    \t\t                \t\tcallback: function(facetCmp) {\n    \t\t                \t\t\tdelete this.facets[facetCmp.facet]; // remove from facets map\n    \t\t                \t\t\tfacetCmp.destroy(); // remove this facet\n    \t\t                \t\t\tthis.updateResults();\n    \t\t                \t\t},\n    \t\t                \t\tscope: this\n    \t\t            \t\t},\n    \t\t            \t\tadd: {\n    \t\t            \t\t\ttype: 'plus',\n    \t\t                \t\ttooltip: this.localize('plusFacetTip'),\n    \t\t                \t\tcallback: function() {\n    \t\t                \t\t\tthis.addFacet();\n    \t\t                \t\t},\n    \t\t                \t\tscope: this\n    \t\t            \t\t}\n    \t\t            \t}\n    \t\t        \t},\n    \t\t        \titems: []\n    \t\t        },\n    \t\t        {\n    \t\t        \txtype: 'panel',\n    \t\t        \thtml: config.customResultsHtml || '',\n    \t\t        \tflex: 1,\n    \t\t        \titemId: 'results',\n    \t\t        \theight: '100%',\n    \t\t        \talign: 'stretch',\n    \t\t        \tscrollable: true,\n    \t\t        \tmargin: 5,\n    \t\t        \tgetCorpus: function() { // for query search field\n    \t\t        \t\treturn this.findParentByType('panel').getCorpus();\n    \t\t        \t},\n    \t\t        \tlisteners: {\n    \t\t        \t\tquery: function(src, query) {\n    \t\t        \t\t\tthis.findParentByType('panel').updateResults(Ext.isString(query) ? [query] : query)\n    \t\t        \t\t}\n    \t\t        \t},\n    \t\t    \t\tdockedItems: [{\n    \t\t                dock: 'bottom',\n    \t\t                xtype: 'toolbar',\n    \t\t                overflowHandler: 'scroller',\n    \t\t                items: [{\n\t    \t\t        \t\titemId: 'sendToVoyant',\n\t    \t\t        \t\ttext: this.localize('sendToVoyantButton'),\n\t    \t\t        \t\tdisabled: true,\n\t    \t\t        \t\thandler: function() {\n\t    \t\t        \t\t\tthis.mask(this.localize(\"exportInProgress\"));\n\t    \t\t        \t\t\tvar catalogue = this;\n\t    \t\t            \t\tExt.Ajax.request({\n\t    \t\t            \t\t\turl: this.getApplication().getTromboneUrl(),\n\t    \t\t            \t\t\tparams: {\n\t    \t\t            \t\t\t\tcorpus: this.getCorpus().getId(),\n\t    \t\t            \t\t\t\ttool: 'corpus.CorpusManager',\n\t    \t\t            \t\t\t\tkeepDocuments: true,\n\t    \t\t            \t\t\t\tdocId: this.getMatchingDocIds()\n\t    \t\t            \t\t\t},\n\t    \t\t            \t\t    success: function(response, opts) {\n\t    \t\t            \t\t    \tcatalogue.unmask();\n\t    \t\t            \t\t    \tvar json = Ext.JSON.decode(response.responseText);\n\t\t                    \t\t\t\tvar url = catalogue.getBaseUrl()+\"?corpus=\"+json.corpus.id;\n\t\t                    \t\t\t\tcatalogue.openUrl(url);\n\t    \t\t            \t\t    },\n\t    \t\t            \t\t    failure: function(response, opts) {\n\t    \t\t            \t\t    \tcatalogue.unmask();\n\t    \t\t            \t\t    \tme.showResponseError(\"Unable to export corpus: \"+catalogue.getCorpus().getId(), response);\n\t    \t\t            \t\t    }\n\t    \t\t            \t\t})\n\t\n\t    \t\t        \t\t},\n\t    \t\t        \t\tscope: this\n\t    \t\t        \t},{\n\t    \t\t        \t\titemId: 'export',\n\t    \t\t        \t\ttext: this.localize('downloadButton'),\n\t    \t\t        \t\tdisabled: true,\n\t    \t\t        \t\thandler: function() {\n\t    \t\t        \t\t\tthis.mask(this.localize(\"exportInProgress\"));\n\t    \t\t        \t\t\tvar catalogue = this;\n\t    \t\t            \t\tExt.Ajax.request({\n\t    \t\t            \t\t\turl: this.getApplication().getTromboneUrl(),\n\t    \t\t            \t\t\tparams: {\n\t    \t\t            \t\t\t\tcorpus: this.getCorpus().getId(),\n\t    \t\t            \t\t\t\ttool: 'corpus.CorpusManager',\n\t    \t\t            \t\t\t\tkeepDocuments: true,\n\t    \t\t            \t\t\t\tdocId: this.getMatchingDocIds()\n\t    \t\t            \t\t\t},\n\t    \t\t            \t\t    success: function(response, opts) {\n\t    \t\t            \t\t    \tcatalogue.unmask();\n\t    \t\t            \t\t    \tvar json = Ext.JSON.decode(response.responseText);\n\t    \t\t            \t\t    \tcatalogue.downloadFromCorpusId(json.corpus.id);\n\t    \t\t            \t\t    },\n\t    \t\t            \t\t    failure: function(response, opts) {\n\t    \t\t            \t\t    \tcatalogue.unmask();\n\t    \t\t            \t\t    \tme.showResponseError(\"Unable to export corpus: \"+catalogue.getCorpus().getId(), response);\n\t    \t\t            \t\t    }\n\t    \t\t            \t\t})\n\t\n\t    \t\t        \t\t},\n\t    \t\t        \t\tscope: this\n\t    \t\t        \t},{\n\t    \t\t        \t\txtype: 'querysearchfield',\n\t    \t\t        \t\twidth: 200,\n\t    \t\t        \t\tflex: 1\n\t    \t\t        \t},{\n\t    \t\t        \t\titemId: 'status',\n\t    \t\t        \t\txtype: 'tbtext'\n\t    \t\t        \t}]\n    \t\t    \t\t}]\n    \t\t        }, {\n    \t\t        \txtype: this.getApiParam(\"reader\"),\n    \t\t        \tflex: 1,\n    \t\t        \theight: '100%',\n    \t\t        \talign: 'stretch',\n    \t\t        \theader: false\n    \t\t        }]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('noMatches')).apply([corpus.getDocumentsCount()]))\n    \t\tif (!this.getCustomResultsHtml()) {\n    \t\t\tif (this.getApiParam(\"splash\")) {\n        \t\t\tthis.setCustomResultsHtml(this.getApiParam(\"splash\"));\n        \t\t\tthis.updateResults();\n        \t\t\treturn;\n    \t\t\t}\n    \t\t\tthis.setCustomResultsHtml(new Ext.XTemplate(this.localize('noMatches')).apply([corpus.getDocumentsCount()]));\n    \t\t\tthis.updateResults();\n    \t    \tExt.Ajax.request({\n    \t    \t    url: this.getTromboneUrl(),\n    \t    \t    params: {\n    \t        \t\ttool: 'resource.StoredResource',\n    \t        \t\tverifyResourceId: 'customhtml-'+corpus.getAliasOrId()\n    \t    \t    },\n    \t    \t    success: function(response, req) {\n    \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \t    \tif (json && json.storedResource && json.storedResource.id) {\n    \t        \t    \tExt.Ajax.request({\n    \t        \t    \t    url: this.getTromboneUrl(),\n    \t        \t    \t    params: {\n    \t        \t        \t\ttool: 'resource.StoredResource',\n    \t        \t        \t\tretrieveResourceId: 'customhtml-'+corpus.getAliasOrId()\n    \t        \t    \t    },\n    \t        \t    \t    success: function(response, req) {\n    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t        \t    \t    \tif (json && json.storedResource && json.storedResource.resource) {\n    \t        \t    \t    \t\tthis.setCustomResultsHtml(json.storedResource.resource);\n    \t        \t    \t    \t\tthis.updateResults()\n    \t        \t    \t    \t}\n    \t        \t    \t    },\n    \t        \t    \t    scope: this\n    \t        \t    \t})\n    \t    \t    \t}\n    \t    \t    },\n    \t    \t    scope: this\n    \t    \t})\n\n    \t\t}\n    \t});\n    \t\n    \tthis.on('afterrender', function(panel) {\n    \t\t\n    \t\tvar facetsCmp = this.queryById('facets');\n\t\t\tthis.addFacet({\n\t\t\t\tfacet: 'lexical',\n    \t\t\tincludeTools: {add: {\n        \t\t\ttype: 'plus',\n            \t\ttooltip: this.localize('plusFacetTip'),\n            \t\tcallback: function() {\n            \t\t\tthis.addFacet();\n            \t\t},\n            \t\tscope: this\n        \t\t}},\n\t\t\t\tstore: new Voyant.data.store.CorpusTerms({\n\t\t\t\t\tparentPanel: this,\n    \t\t\t\tproxy: {\n    \t\t\t\t\textraParams: {\n    \t    \t\t\t\tstopList: this.getApiParam(\"stopList\")\n    \t\t\t\t\t}\n    \t\t\t\t}\n\t\t\t\t})\n\t\t\t}, facetsCmp)\n    \t\t\n    \t\tvar facets = this.getApiParam('facet');\n    \t\tif (Ext.isString(facets)) {facets = facets.split(\",\")}\n    \t\tfacets.forEach(function(facet) {\n    \t\t\tthis.addFacet({facet: facet}, facetsCmp)\n    \t\t\t/*\n    \t\t\tfacetCmp.getSelectionModel().on('selectionchange', function(model, selected) {\n    \t\t\t\tvar labels = [];\n    \t\t\t\tselected.forEach(function(model) {\n    \t\t\t\t\tlabels.push({facet: model.getFacet(), label: model.getLabel()})\n    \t\t\t\t})\n    \t\t\t\tpanel.getFacets()[facet] = labels;\n    \t\t\t\tpanel.updateResults();\n    \t\t\t})\n    \t\t\tfacetCmp.on('query', function(model, selected) {\n    \t\t\t\tpanel.getFacets()[facetCmp.facet] = [];\n    \t\t\t\tpanel.updateResults();\n    \t\t\t})*/\n    \t\t}, this);\n\t\t\t\n\n\t\t\t\n    \t\t/*\n\t\t\tfacetCmp.getSelectionModel().on('selectionchange', function(model, selected) {\n\t\t\t\tvar labels = [];\n\t\t\t\tselected.forEach(function(model) {\n\t\t\t\t\tlabels.push({facet: 'lexical', label: model.getTerm()})\n\t\t\t\t})\n\t\t\t\tpanel.getFacets()['lexical'] = labels;\n\t\t\t\tpanel.updateResults();\n\t\t\t})*/\n    \t\t\n        \tvar title = this.getApiParam(\"title\");\n        \tif (title) {this.setTitle(title)}\n    \t});\n    \t\n    \t\n    },\n    \n    addFacet: function(config, facetsCmp) {\n    \tif (!config) {\n    \t\t// select first, then add\n    \t\treturn this.selectFacet(function(facet) {\n    \t\t\tthis.addFacet({facet: facet})\n    \t\t})\n    \t}\n\t\tfacetsCmp = facetsCmp || this.queryById('facets');\n    \tvar facet = config.facet,\n    \t\titemTpl = '<span style=\"font-size: smaller;\">(<span class=\"info-tip\" data-qtip=\"'+this.localize('matchingDocuments')+'\">{inDocumentsCount}</span>)</span> {term}'+'<span style=\"font-size: smaller;\"> (<span class=\"info-tip\" data-qtip=\"'+this.localize('rawFreqs')+'\">{rawFreq}</span>)</span>'\n\n\t\tvar title = this.localize(facet+\"Title\");\n\t\tif (title==\"[\"+facet+\"Title]\") {\n\t\t\ttitle = facet.replace(/^facet\\./,\"\").replace(/^extra./,\"\");\n\t\t}\n\t\tvar matchingDocumentsLabel = this.localize('matchingDocuments');\n\t\t\n\t\tExt.applyIf(config, {\n\t\t\ttitle: title,\n\t\t\tcollapsible: true,\n\t\t\tfacet: facet,\n\t\t\tcolumns: [{\n\t\t\t\trenderer: function(value, metaData, record) {\n\t\t\t\t\treturn '<span style=\"font-size: smaller;\">(<span class=\"info-tip\" data-qtip=\"'+this.localize('matchingDocuments')+'\">'+record.getInDocumentsCount()+\"</span>) </span>\"+\n\t\t\t\t\t\t(record.getLabel ? record.getLabel() : record.getTerm()+'<span style=\"font-size: smaller;\"> (<span class=\"info-tip\" data-qtip=\"'+this.localize('rawFreqs')+'\">'+record.getRawFreq()+\"</span>)</span>\")\n\t\t\t\t},\n\t\t\t\tflex: 1\n\t\t\t}],\n\t\t\tbbar: [{\n\t\t\t\txtype: 'querysearchfield',\n\t\t\t\twidth: '100%',\n\t\t\t\ttokenType: facet.replace(\"facet.\", \"\"),\n\t\t\t\titemTpl: itemTpl\n\t\t\t}],\n\t\t\tcorpus: this.getCorpus()\n\t\t})\n\t\t\n\t\tvar facetCmp = facetsCmp.add(config);\n\t\t\n\t\tfacetCmp.getSelectionModel().on('selectionchange', function(model, selected) {\n\t\t\tvar labels = [];\n\t\t\tselected.forEach(function(model) {\n\t\t\t\tlabels.push({facet: facetCmp.facet, label: model.getLabel ? model.getLabel() : model.getTerm()})\n\t\t\t})\n\t\t\tthis.getFacets()[facet] = labels;\n\t\t\tthis.updateResults();\n\t\t}, this)\n\t\tfacetCmp.on('query', function(model, selected) {\n\t\t\tthis.getFacets()[facetCmp.facet] = [];\n\t\t\tthis.updateResults();\n\t\t}, this)\n    \treturn facetCmp;\n    },\n    \n    updateResults: function(queries) {\n    \tvar facets = this.getFacets();\n    \tif (!queries) {\n\t    \tvar queries = [];\n\t    \tfor (facet in facets) {\n\t    \t\tfacets[facet].forEach(function(label) {\n\t        \t\tqueries.push(label.facet+\":\"+label.label);\n\t    \t\t})\n\t    \t}\n\t    \tif (queries) {\n\t\t    \treturn this.updateResults(queries)\n\t    \t}\n    \t}\n\t\tvar results = this.queryById(\"results\").getTargetEl();\n\t\tvar catalogue = this;\n\t\tresults.update(this.getCustomResultsHtml() ? this.getCustomResultsHtml() : new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]));\n\t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]))\n\t\tthis.queryById('sendToVoyant').setDisabled(true);\n\t\tthis.queryById('export').setDisabled(true);\n    \tif (queries && queries.length>0) {\n    \t\tthis.mask(this.localize(\"loading\"));\n    \t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n    \t\tdocumentQueryMatches.load({\n    \t\t\tparams: {query: queries, includeDocIds: true},\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tthis.unmask();\n    \t\t\t\tif (records && records.length>0) {\n    \t\t\t\t\tthis.queryById('status').setHtml(records.length)\n    \t\t\t\t\tvar list = \"<ul>\";\n    \t\t\t\t\tvar matchingDocIds = [];\n    \t\t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\t\trecord.getDocIds().forEach(function(docId) {\n    \t\t\t\t\t\t\tmatchingDocIds.push(docId);\n    \t\t\t\t\t\t\tvar doc = documentQueryMatches.getCorpus().getDocument(docId);\n    \t\t\t\t\t\t\tvar item = \"<li id='\"+results.getId()+'_'+docId+\"' class='cataloguedoc'>\";\n    \t\t\t\t\t\t\titem += \"<a href='#' class='cataloguedoctitle' data='\"+docId+\"'>\"+doc.getTitle()+\"</a>\";\n    \t\t\t\t\t\t\tfor (facet in facets) {\n    \t\t\t\t\t\t\t\tif (facets[facet].length==0) {continue;}\n    \t\t\t\t\t\t\t\tvar labelItems = \"\";\n    \t\t\t\t\t\t\t\tif (facet!='facet.title') {\n    \t\t\t\t\t\t\t\t\tvar suffix = facet.replace(/^.+?\\./,\"\");\n    \t\t\t\t\t\t\t\t\tvar label = doc.get(suffix);\n    \t\t\t\t\t\t\t\t\tif (label) {\n    \t\t\t\t\t\t\t\t\t\tvar isArray = Ext.isArray(label);\n    \t\t\t\t\t\t\t\t\t\tif (isArray) {\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"<li>\"+suffix+\"<ul>\"\n    \t\t\t\t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\t\t\t\tlabel = [label];\n    \t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\tlabel.forEach(function(l) {\n    \t\t\t\t\t\t\t\t\t\t\tvar isMatch = false;\n    \t\t\t\t\t\t\t\t\t\t\tfacets[facet].forEach(function(f) {\n    \t\t\t\t\t\t\t\t\t\t\t\tif (f.label==l) {isMatch=true}\n    \t\t\t\t\t\t\t\t\t\t\t\telse if (f.facet.indexOf('facet')==-1) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\tf.label.split(/\\W+/).forEach(function(part) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (part.trim().length>0 && l.toLowerCase().indexOf(part.toLowerCase())>-1) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisMatch=true;\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"<li>\"+(isArray ? '' : suffix.replace('extra.','')+\": \")+(isMatch ? '<span class=\"keyword\">'+l+'</span>' : l)+\"</li>\"\n    \t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\tif (isArray) {\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"</ul></li>\";\n    \t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\tif (labelItems) {\n    \t\t\t\t\t\t\t\t\titem+=\"<ul>\"+labelItems+\"</ul>\";\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\titem += \"</li>\";\n    \t\t\t\t\t\t\tlist += item;\n    \t\t\t\t\t\t})\n    \t\t\t\t\t})\n    \t\t\t\t\tlist += \"</ul>\";\n    \t\t\t\t\tresults.update(list);\n    \t\t\t\t\tvar me = this;\n    \t\t\t\t\tvar lnks = results.query(\".cataloguedoctitle\");\n    \t\t\t\t\tlnks.forEach(function(lnk) {\n    \t\t\t\t\t\tExt.get(lnk).on(\"click\", function(e,el) {\n    \t\t\t\t\t\t\tthis.dispatchEvent(\"documentSelected\", me, el.getAttribute(\"data\"));\n    \t\t\t\t\t\t}, me)\n    \t\t\t\t\t});\n    \t\t\t\t\tif (lnks.length==1) {\n    \t\t\t\t\t\tthis.dispatchEvent(\"documentSelected\", me, lnks[0].getAttribute(\"data\"));\n    \t\t\t\t\t}\n    \t\t\t\t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('queryMatches')).apply([matchingDocIds.length,this.getCorpus().getDocumentsCount()]))\n    \t\t\t\t\tthis.setMatchingDocIds(Ext.Array.clone(matchingDocIds));\n    \t\t\t\t\tif (matchingDocIds.length>0) {\n    \t\t\t\t\t\tthis.queryById('export').setDisabled(false);\n    \t\t\t\t\t\tthis.queryById('sendToVoyant').setDisabled(false);\n    \t\t\t\t\t}\n    \t\t\t\t\t\n    \t\t\t\t\t// now try to load some snippets, if need be\n    \t\t\t\t\tif (facets['lexical']) {\n    \t\t\t\t\t\tvar firstDocIds = matchingDocIds.splice(0,5);\n    \t\t\t\t\t\tthis.loadSnippets(firstDocIds, results.first().first());\n    \t\t\t\t\t\tif (matchingDocIds && matchingDocIds.length>0) {\n        \t\t\t\t\t\tthis.loadSnippets(matchingDocIds); // load the rest\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t})    \t\t\n    \t}\n    },\n    \n    loadSnippets: function(docIds, elToMask) {\n\t\tvar results = this.queryById(\"results\").getTargetEl();\n    \tvar facets = this.getFacets();\n    \tif (facets['lexical']) {\n    \t\tvar queries = facets['lexical'].map(function(label) {return label.facet+\":\"+label.label});\n    \t\tvar contexts = this.getCorpus().getContexts({buffered: false});\n    \t\tif (elToMask) {\n    \t\t\telToMask.mask(this.localize(\"loadingSnippets\"));\n    \t\t}\n    \t\tcontexts.load({\n    \t\t\tmethod: 'POST',\n    \t\t\tparams: {\n                \tstripTags: \"all\",\n    \t\t\t\tquery: queries,\n    \t\t\t\tdocId: docIds,\n    \t\t\t\tperDocLimit: 3,\n    \t\t\t\tlimit: 100,\n    \t\t\t\taccurateTotalNotNeeded: true\n    \t\t\t},\n    \t\t\tscope: this,\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tif (elToMask) {\n    \t\t\t\t\telToMask.unmask();\n    \t\t\t\t}\n    \t\t\t\tif (success && Ext.isArray(records) && records.length>0) {\n    \t\t\t\t\tvar snippets = {};\n    \t\t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\t\tif (!snippets[record.getDocIndex()]) {snippets[record.getDocIndex()]=[]}\n    \t\t\t\t\t\tsnippets[record.getDocIndex()].push(record);\n    \t\t\t\t\t})\n    \t\t\t\t\tfor (docIndex in snippets) {\n    \t\t\t\t\t\tvar id = this.getCorpus().getDocument(docIndex).getId();\n    \t\t\t\t\t\tvar html = '<li style=\"list-style-type: none; font-size: smaller;\">'+snippets[docIndex].map(function(snippet) {\n    \t\t\t\t\t\t\treturn snippet.getHighlightedContext();\n    \t\t\t\t\t\t}).join(\" \u2026 \")+'</li>'\n    \t\t\t\t\t\tvar docItem = results.down(\"#\"+results.getId()+\"_\"+id);\n    \t\t\t\t\t\tif (docItem.query(\"ul\")) {\n    \t\t\t\t\t\t\thtml=\"<ul>\"+html+\"</ul>\";\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\tdocItem.insertHtml('beforeEnd', html)\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n        \t})        \t\t\n    \t}\n\t\n    },\n    \n    selectFacet: function(callback) {\n    \tif (!this.facetsSelectionStore) {\n    \t\tvar keys = {};\n    \t\tthis.getCorpus().getDocuments().each(function(doc) {\n    \t\t\tfor (var key in doc.getData()) {\n    \t\t\t\tif (key!=\"corpus\" && key.indexOf(\"parent\")!==0 && key.indexOf(\"-lexical\")==\"-1\") {\n        \t\t\t\tkeys[key] = true\n    \t\t\t\t}\n    \t\t\t}\n    \t\t});\n    \t\tkeys = Object.keys(keys);\n    \t\tkeys.sort();\n    \t\tthis.facetsSelectionStore = Ext.create('Ext.data.ArrayStore', {\n    \t\t    fields: ['text'],\n    \t\t    data: keys.map(function(key) {return [key]})\n    \t\t});\n    \t}\n    \t\n    \tvar existingFacets = {};\n    \tthis.queryById('facets').items.each(function(cmp) {\n    \t\texistingFacets[cmp.facet]=true;\n    \t})\n\n    \tthis.facetsSelectionStore.filterBy(function(record) {\n    \t\treturn !(\"facet.\"+record.get('text') in existingFacets)\n    \t})\n    \t\n\t\tvar win = Ext.create('Ext.window.Window', {\n\t\t\ttitle: this.localize(\"selectFacet\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 300,\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tstore: this.facetsSelectionStore,\n\t\t\t\t\tforceSelection: true,\n\t\t\t\t\twidth: 300\n\t\t\t\t},\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancel\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize(\"select\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar facet = btn.up('window').down('combo').getValue();\n\t        \t\t\tif (!facet) {\n\t        \t\t\t\treturn this.showError(this.localize('selectValidFacet'));\n\t        \t\t\t} else {\n\t        \t\t\t\tcallback.call(this, \"facet.\"+facet);\n\t\t        \t\t\tbtn.up('window').close();\n\t        \t\t\t}\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n    }\n    \n});\n","// assuming Cirrus library is loaded by containing page (via voyant.jsp)\n/**\n * Cirrus tool, a wordcloud-like visuaization.\n * \n * \t// simple cirrus\n * \tloadCorpus(\"austen\").tool(\"cirrus\");\n *\n * \t// define stopwords list and styling\n * \tloadCorpus(\"austen\").tool(\"cirrus\", {\n * \t\tstopList: 'auto',\n * \t\tstyle: 'width: 500px; height: 400px'\n * \t});\n */\nExt.define('Voyant.panel.Cirrus', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.cirrus',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @cfg {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n    \t\t * @default auto\n    \t\t * \n    \t\t * By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n    \t\t *  \n    \t\t * For more information see the <a href=\"#!/guide/search\">Stopwords documentation</a>.\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\tcategories: undefined,\n    \t\twhiteList: undefined, // specify a list of words to use\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} limit Specify the number of terms to load (which is separate from the number of {@link #visible} terms to show) at a time).\n    \t\t * @default 500\n    \t\t * \n    \t\t *  By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n    \t\t */\n    \t\tlimit: 500,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} visible Specify the number of terms that are visible at a time.\n    \t\t * @default 50\n    \t\t */\n    \t\tvisible: 50,\n    \t\tterms: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\t\n    \t\tinlineData: undefined, // format should match CorpusTerm model, only term and rawFreq required\n\n    \t\tfontFamily: '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif',\n    \t\tcirrusForceFlash: false,\n    \t\tbackground: '0xffffff',\n    \t\tfade: true,\n    \t\tsmoothness: 2,\n    \t\tdiagonals: 'none' // all, bigrams, none\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \tmode: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},\n    \t\t{\n\t    \t\txtype: 'listeditor',\n\t    \t\tname: 'whiteList'\n    \t    },\n    \t    {xtype: 'categoriesoption'},\n//    \t    {\n//    \t    \t// TODO this field does nothing\n//    \t        xtype: 'numberfield',\n//    \t        name: 'label',\n//    \t        fieldLabel: 'Max words',\n//    \t        labelAlign: 'right',\n//    \t        value: 500,\n//    \t        minValue: 50,\n//    \t        step: 50,\n//    \t        listeners: {\n//        \t        afterrender: function(field) {\n//        \t        \tvar win = field.up(\"window\");\n//        \t        \tif (win && win.panel) {field.setFieldLabel(win.panel.localize(\"maxTerms\"))}\n//        \t        }\n//    \t        }\n//    \t    },\n    \t    {xtype: 'fontfamilyoption'},\n    \t    {xtype: 'colorpaletteoption'}\n\n    \t],\n    \t/**\n    \t * @private\n    \t */\n    \trecords: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tterms: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tcirrusId: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tvisLayout: undefined, // cloud layout algorithm\n    \t/**\n    \t * @private\n    \t */\n    \tvis: undefined, // actual vis\n    \t/**\n    \t * @private\n    \t */\n    \ttip: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tsizeAdjustment: 100, // amount to multiply a word's relative size by\n    \t/**\n    \t * @private\n    \t */\n    \tminFontSize: 12,\n    \t/**\n    \t * @private\n    \t */\n    \tlargestWordSize: 0,\n    \t/**\n    \t * @private\n    \t */\n    \tsmallestWordSize: 1000000\n    },\n    \n    MODE_CORPUS: 'corpus',\n    MODE_DOCUMENT: 'mode_document',\n    \n    layout: 'fit',\n    \n\t/**\n\t * @private\n\t */\n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.getApplication().getCategoriesManager().addFeature('orientation', function() { return ~~(Math.random() * 2) * 90; });\n    \t\n    \tthis.setCirrusId(Ext.id(null, 'cirrus_'));\n    },\n    \n    initComponent: function (config) {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'corpusdocumentselector',\n        \t\t\tsingleSelect: true\n        \t\t},{\n        \t\t\tfieldLabel: this.localize('visibleTerms'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 25,\n\t            \tminValue: 25,\n\t            \tmaxValue: 500,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.maxValue = this.getApiParam(\"limit\")\n\t            \t\t\tslider.increment = parseInt(slider.maxValue/50)\n\t            \t\t\tslider.setValue(this.getApiParam(\"visible\"))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({visible: newvalue});\n\t            \t\t\tthis.loadFromTermsRecords();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n    \tthis.callParent(arguments);\n    \t\n    \t\n    },\n    \n    listeners: {\n    \tboxready: function() {\n\t\t\tthis.initVisLayout(); // force in case we've changed fontFamily from options\n\n\t\t\tvar dataString = this.getApiParam('inlineData');\n        \tif (dataString !== undefined) {\n        \t\tif (dataString.charAt(0)==\"[\") {\n            \t\tvar jsonData = Ext.decode(dataString, true);\n        \t\t} else {\n        \t\t\tif (dataString.indexOf(\":\")>-1) {\n        \t\t\t\tjsonData = [];\n        \t\t\t\tdataString.split(\",\").forEach(function(term) {\n        \t\t\t\t\tparts = term.split(\":\");\n        \t\t\t\t\tjsonData.push({\n        \t\t\t\t\t\ttext: parts[0],\n        \t\t\t\t\t\trawFreq: parseInt(parts[1])\n        \t\t\t\t\t})\n        \t\t\t\t})\n        \t\t\t} else {\n        \t\t\t\tvar terms = {}\n        \t\t\t\tjsonData = [];\n        \t\t\t\tdataString.split(\",\").forEach(function(term) {\n        \t\t\t\t\tif (term in terms) {\n        \t\t\t\t\t\tterms[term]++;\n        \t\t\t\t\t} else {\n        \t\t\t\t\t\tterms[term] = 1;\n        \t\t\t\t\t}\n        \t\t\t\t});\n        \t\t\t\tfor (term in terms) {\n        \t\t\t\t\tjsonData.push({\n        \t\t\t\t\t\ttext: term,\n        \t\t\t\t\t\trawFreq: terms[term]\n        \t\t\t\t\t})\n        \t\t\t\t}\n        \t\t\t}\n        \t\t}\n        \t\tif (jsonData !== null && jsonData.length>0) {\n        \t\t\tthis.setApiParam('inlineData', jsonData);\n\t        \t    this.setTerms(jsonData);\n\t        \t    this.buildFromTerms();\n        \t\t}\n        \t}\n    \t},\n    \tresize: function(panel, width, height) {\n    \t\tif (this.getVisLayout() && this.getCorpus()) {\n    \t\t\tthis.setAdjustedSizes();\n    \t\t\t\n    \t\t\tvar el = this.getLayout().getRenderTarget();\n    \t    \twidth = el.getWidth();\n    \t\t\theight = el.getHeight();\n    \t\t\t\n    \t\t\tel.down('svg').set({width: width, height: height});\n    \t\t\tif (this.getTerms()) {\n        \t\t\tthis.getVisLayout().size([width, height]).stop().words(this.getTerms()).start();\n    \t\t\t}\n    \t\t}\n    \t},\n    \t\n    \tloadedCorpus: function(src, corpus) {\n\t\t\tthis.getApplication().getCategoriesManager().addFeature('font', this.getApiParam('fontFamily')); // make sure the default for font is set from the api\n    \t\tthis.initVisLayout(); // force in case we've changed fontFamily from options\n    \t\tif (this.getApiParam(\"docIndex\")) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, corpus.getDocument(this.getApiParam(\"docIndex\")));\n    \t\t} else if (this.getApiParam(\"docId\")) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, corpus.getDocument(this.getApiParam(\"docId\")));\n    \t\t} else {\n        \t\tthis.loadFromCorpus(corpus);\n\t\t\t}\n    \t},\n    \t\n    \tcorpusSelected: function(src, corpus) {\n    \t\tthis.loadFromCorpus(corpus);\n    \t\t\n    \t},\n    \t\n    \tdocumentSelected: function(src, document) {\n    \t\tif (document) {\n        \t\tvar corpus = this.getCorpus();\n        \t\tvar document = corpus.getDocument(document);\n        \t\tthis.setApiParam('docId', document.getId());\n        \t\tvar documentTerms = document.getDocumentTerms({autoload: false, corpus: corpus, pageSize: this.getApiParam(\"maxVisible\"), parentPanel: this});\n        \t\tthis.loadFromDocumentTerms(documentTerms);\n    \t\t}\n    \t},\n    \t\n    \tensureCorpusView: function(src, corpus) {\n    \t\tif (this.getMode() != this.MODE_CORPUS) {this.loadFromCorpus(corpus);}\n    \t}\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar jsonData = this.getApiParam('inlineData');\n    \tif (jsonData === undefined) {\n\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined});\n\t\t\tthis.loadFromCorpusTerms(corpus.getCorpusTerms({autoload: false, pageSize: this.getApiParam(\"maxVisible\"), parentPanel: this}));\n    \t} else {\n    \t\t// if (jsonData !== undefined) {\n    \t\t// \tvar records = [];\n    \t\t// \tfor (var i = 0; i < jsonData.length; i++) {\n\t\t\t// \t\tvar wordData = jsonData[i];\n\t\t\t// \t\twordData.term = wordData.text; // inlineData/CorpusTerm format mismatch\n    \t\t// \t\tvar record = Ext.create('Voyant.data.model.CorpusTerm', wordData);\n    \t\t// \t\trecords.push(record);\n    \t\t// \t}\n    \t\t// \tthis.setRecords(records);\n    \t\t// \tthis.setMode(this.MODE_CORPUS);\n    \t\t// \tthis.loadFromTermsRecords();\n    \t\t// }\n    \t}\n    },\n    \n    loadFromDocumentTerms: function(documentTerms) {\n    \tdocumentTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tthis.setMode(this.MODE_DOCUMENT);\n\t\t    \tthis.setRecords(operation.getRecords()); // not sure why operation.records is different from records\n\t\t    \tthis.loadFromTermsRecords();\n\t\t    },\n\t\t    scope: this,\n\t\t    params: this.getApiParams()\n    \t});\n    },\n    \n    loadFromCorpusTerms: function(corpusTerms) {\n\t\tcorpusTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tthis.setMode(this.MODE_CORPUS);\n\t\t    \tthis.setRecords(operation.getRecords()); // not sure why operation.records is different from records\n\t\t\t\tthis.loadFromTermsRecords();\n\t\t    },\n\t\t    scope: this,\n\t\t    params: this.getApiParams()\n    \t});\n    },\n    \n    loadFromTermsRecords: function() {\n    \tvar records = this.getRecords();\n    \tvar visible = this.getApiParam(\"visible\");\n    \tif (visible>records.length) {visible=records.length;}\n    \tvar terms = [];\n    \tfor (var i=0; i<visible; i++) {\n    \t\tif (records[i].get('rawFreq')>0) {\n        \t\tterms.push({text: records[i].get('term').replace(/\"/g,''), rawFreq: records[i].get('rawFreq')});\n    \t\t}\n    \t}\n    \tthis.setTerms(terms);\n    \tthis.buildFromTerms();\n    },\n    \n    initVisLayout: function(forceLayout) {\n    \tif (forceLayout || this.getVisLayout() == undefined) {\n    \t\tvar cirrusForceFlash = this.getApiParam('cirrusForceFlash');\n    \t\tif (cirrusForceFlash == 'true' || cirrusForceFlash === true) {\n    \t\t\tthis.setApiParam('cirrusForceFlash', true);\n    \t\t\tvar id = this.getCirrusId();\n    \t\t\tvar appVars = {\n    \t\t\t\tid: id\n    \t\t\t};\n    \t\t\tvar keys = ['background','fade','smoothness','diagonals'];\n    \t\t\tfor (var i = 0; i < keys.length; i++) {\n    \t\t\t\tappVars[keys[i]] = this.getApiParam(keys[i]);\n    \t\t\t}\n    \t\t\t\n    \t\t\tvar swfscript = '<script type=\"text/javascript\" src=\"'+this.getApplication().getBaseUrl()+'resources/swfobject/swfobject.js'+'\">\u003c/script>';\n    \t\t\tvar cirrusLinks = '<script type=\"text/javascript\">'+\n\t\t\t\t'cirrusClickHandler'+id+' = function(word, value) {\\n'+\n\t\t\t\t'\\tif (window.console && console.info) console.info(word, value);\\n'+\n\t\t\t\t'\\tvar cirrusTool = Ext.getCmp(\"'+this.id+'\");\\n'+\n\t\t\t\t'\\tcirrusTool.dispatchEvent(\"termsClicked\", cirrusTool, [word]);\\n'+\n\t\t\t\t'}\\n'+\n\t\t\t\t'cirrusLoaded'+id+' = function() {\\n'+\n\t\t\t\t'\\tif (window.console && console.info) console.info(\"cirrus flash loaded\");\\n'+\n\t\t\t\t'}\\n'+\n\t\t\t\t'cirrusPNGHandler'+id+' = function(base64String) {\\n'+\n\t\t\t\t'\\tvar cirrusTool = Ext.getCmp(\"'+this.id+'\");\\n'+\n\t\t\t\t'\\tcirrusTool.cirrusPNGHandler(base64String);\\n'+\n\t\t\t\t'}'+\n\t\t\t\t'\u003c/script>';\n    \t\t\t\n    \t\t\tthis.update(swfscript+cirrusLinks, true, function() {\n    \t\t\t\tfunction loadFlash(component) {\n    \t\t\t\t\tif (typeof swfobject !== 'undefined') {\n    \t\t\t\t\t\tvar el = component.getLayout().getRenderTarget();\n    \t\t\t\t\t\tvar width = el.getWidth();\n    \t\t\t\t\t\tvar height = el.getHeight();\n    \t\t    \t\t\t\n\t        \t\t\t\tvar cirrusFlash = component.getApplication().getBaseUrl()+'resources/cirrus/flash/Cirrus.swf';\n\t        \t\t\t\tcomponent.add({\n\t        \t\t\t\t\txtype: 'flash',\n\t        \t\t\t\t\tid: appVars.id,\n\t        \t\t\t\t\turl: cirrusFlash,\n\t        \t\t\t\t\twidth: width,\n\t        \t\t\t\t\theight: height,\n\t        \t\t\t\t\tflashVars: appVars,\n\t        \t\t\t\t\tflashParams: {\n\t\t\t\t\t\t\t\t\tmenu: 'false',\n\t\t\t\t\t\t\t\t\tscale: 'showall',\n\t\t\t\t\t\t\t\t\tallowScriptAccess: 'always',\n\t\t\t\t\t\t\t\t\tbgcolor: '#222222',\n\t\t\t\t\t\t\t\t\twmode: 'opaque'\n\t        \t\t            }\n\t        \t\t\t\t});\n\t        \t\t\t\t\n\t        \t\t\t\tcomponent.cirrusFlashApp = Ext.get(appVars.id).first().dom;\n    \t\t\t\t\t} else {\n    \t\t\t\t\t\tsetTimeout(loadFlash, 50, component);\n    \t\t\t\t\t}\n        \t\t\t}\n    \t\t\t\tloadFlash(this);\n    \t\t\t\t\n    \t\t\t}, this);\n    \t\t} else {\n    \t\t\tvar el = this.getLayout().getRenderTarget();\n    \t\t\tel.update(\"\"); // make sure to clear existing contents (especially for re-layout)\n    \t    \tvar width = el.getWidth();\n\t\t\t\tvar height = el.getHeight();\n\t\t\t\tthis.setVisLayout(\n\t\t\t\t\td3.layoutCloud()\n\t\t\t\t\t\t.size([width, height])\n\t\t\t\t\t\t.overflow(true)\n\t\t\t\t\t\t.padding(1)\n\t\t\t\t\t\t.rotate(function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('orientation', d.text); }.bind(this))\n\t\t\t\t\t\t.spiral('archimedean')\n\t\t\t\t\t\t.font(function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); }.bind(this))\n\t\t\t\t\t\t.fontSize(function(d) {return d.fontSize; }.bind(this))\n\t\t\t\t\t\t.text(function(d) { return d.text; })\n\t\t\t\t\t\t.on('end', this.draw.bind(this))\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\tvar svg = d3.select(el.dom).append('svg').attr('id',this.getCirrusId()).attr('class', 'cirrusGraph').attr('width', width).attr('height', height);\n\t\t\t\tthis.setVis(svg.append('g').attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')'));\n\t\t\t\t\n\t\t\t\tif (this.getTip() === undefined) {\n\t\t\t\t\tthis.setTip(Ext.create('Ext.tip.Tip', {}));\n\t\t\t\t}\n    \t\t}\n    \t}\n    },\n    \n    buildFromTerms: function() {\n\t\tvar terms = this.getTerms();\n    \tif (this.rendered && terms) {\n    \t\tif (this.getApiParam('cirrusForceFlash') === true) {\n    \t\t\tif (this.cirrusFlashApp !== undefined && this.cirrusFlashApp.clearAll !== undefined) {\n\t    \t\t\tvar words = [];\n\t    \t\t\tfor (var i = 0; i < terms.length; i++) {\n\t    \t\t\t\tvar t = terms[i];\n\t    \t\t\t\tif (!t.text && t.term) {t.text=t.term;}\n\t    \t\t\t\twords.push({word: t.text, size: t.rawFreq, label: t.rawFreq});\n\t    \t\t\t}\n\t    \t\t\tthis.cirrusFlashApp.clearAll();\n\t    \t\t\tthis.cirrusFlashApp.addWords(words);\n\t    \t\t\tthis.cirrusFlashApp.arrangeWords();\n    \t\t\t} else {\n    \t\t\t\tExt.defer(this.buildFromTerms, 50, this);\n    \t\t\t}\n    \t\t} else {\n\t    \t\tvar minSize = 1000;\n\t    \t\tvar maxSize = -1;\n\t    \t\tfor (var i = 0; i < terms.length; i++) {\n\t    \t\t\tvar size = terms[i].rawFreq;\n\t    \t\t\tif (size < minSize) minSize = size;\n\t    \t\t\tif (size > maxSize) maxSize = size;\n\t    \t\t}\n\t    \t\tthis.setSmallestWordSize(minSize);\n\t    \t\tthis.setLargestWordSize(maxSize);\n\t    \t\t\n\t    \t\t// set the relative sizes for each word (0.0 to 1.0), then adjust based on available area\n\t    \t\tthis.setRelativeSizes();\n\t    \t\tthis.setAdjustedSizes();\n\n\t//    \t\tvar fontSizer = d3.scalePow().range([10, 100]).domain([minSize, maxSize]);\n\n\t    \t\tthis.getVisLayout().words(terms).start();\n    \t\t}\n    \t} else {\n    \t\tExt.defer(this.buildFromTerms, 50, this);\n    \t}\n    },\n    \n    draw: function(words, bounds) {\n    \tvar panel = this;\n    \tvar el = this.getLayout().getRenderTarget();\n    \tvar width = this.getVisLayout().size()[0];\n    \tvar height = this.getVisLayout().size()[1];\n    \t\n    \tvar scale = bounds ? Math.min(\n\t\t\twidth / Math.abs(bounds[1].x - width / 2),\n\t\t\twidth / Math.abs(bounds[0].x - width / 2),\n\t\t\theight / Math.abs(bounds[1].y - height / 2),\n\t\t\theight / Math.abs(bounds[0].y - height / 2)\n    \t) / 2 : 1;\n    \t\n\t\tvar t = d3.transition().duration(1000);\n\t\t\t\n\t\tvar nodes = this.getVis().selectAll('text').data(words, function(d) {return d.text;});\n\t\t\n\t\tnodes.exit().transition(t)\n\t\t\t.style('font-size', '1px')\n\t\t\t.remove();\n\n\t\tvar nodesEnter = nodes.enter().append('text')\n\t\t\t.text(function(d) { return d.text; })\n\t\t\t.attr('text-anchor', 'middle')\n\t\t\t.attr('data-freq', function(d) { return d.rawFreq; })\n\t\t\t.attr('transform', function(d) { return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')'; })\n\t\t\t.style('font-family', function(d) { return panel.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); })\n\t\t\t.style('fill', function(d) { return panel.getApplication().getColorForTerm(d.text, true); })\n\t\t\t.style('font-size', '1px')\n\t\t\t.on('click', function(obj) {panel.dispatchEvent('termsClicked', panel, [obj.text]);})\n\t\t\t.on('mouseover', function(obj) {\n\t\t\t\tthis.getTip().show();\n\t\t\t}.bind(this))\n\t\t\t.on('mousemove', function(obj) {\n\t\t\t\tvar tip = this.getTip();\n\t\t\t\ttip.update(obj.text+': '+obj.rawFreq);\n\t\t\t\tvar container = Ext.get(this.getCirrusId()).dom;\n\t\t\t\tvar coords = d3.mouse(container);\n\t\t\t\tcoords[1] += 30;\n\t\t\t\ttip.setPosition(coords);\n\t\t\t}.bind(this))\n\t\t\t.on('mouseout', function(obj) {\n\t\t\t\tthis.getTip().hide();\n\t\t\t}.bind(this));\n\t\t\n\t\tvar nodesUpdate = nodes.merge(nodesEnter);\n\t\t\n\t\tnodesUpdate.transition(t)\n\t\t\t.style('font-family', function(d) { return panel.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); })\n\t\t\t.style('fill', function(d) { return panel.getApplication().getColorForTerm(d.text, true); })\n\t\t\t.attr('transform', function(d) { return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')'; })\n\t\t\t.style('font-size', function(d) { return d.fontSize + 'px'; });\n\t\t\n\t\tthis.getVis().transition(t).attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')scale(' + scale + ')');\n    },\n    \n    map: function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t},\n\t\n\tcalculateSizeAdjustment: function() {\n\t\tvar terms = this.getTerms();\n        if (terms !== undefined) {\n\t\t\tvar el = this.getLayout().getRenderTarget();\n\t\t\t\n\t        var stageArea = el.getWidth() * el.getHeight();\n\t        if (stageArea < 100000) this.setMinFontSize(8);\n\t        else this.setMinFontSize(12);\n        \n\t        var pixelsPerWord = stageArea / terms.length;\n\t        var totalWordsSize = 0;\n\t        for (var i = 0; i < terms.length; i++) {\n\t            var word = terms[i];\n\t            var wordArea = this.calculateWordArea(word);\n\t            totalWordsSize += wordArea;\n\t        }\n\n\t        this.setSizeAdjustment(stageArea / totalWordsSize);\n        }\n    },\n    \n    calculateWordArea: function(word) {\n        var baseSize = Math.log(word.relativeSize * 10) * Math.LOG10E; // take the relativeSize (0.1 to 1.0), multiply by 10, then get the base-10 log of it\n        var height = (baseSize + word.relativeSize) / 2; // find the average between relativeSize and the log\n        var width = 0; //(baseSize / 1.5) * word.text.length;\n        for (var i = 0; i < word.text.length; i++ ) {\n            var letter = word.text.charAt(i);\n            if (letter == 'f' || letter == 'i' || letter == 'j' || letter == 'l' || letter == 'r' || letter == 't') width += baseSize / 3;\n            else if (letter == 'm' || letter == 'w') width += baseSize / (4 / 3);\n            else width += baseSize / 1.9;\n        }\n        var wordArea = height * width;\n        return wordArea;\n    },\n    \n    setAdjustedSizes: function() {\n    \tthis.calculateSizeAdjustment();\n    \tvar terms = this.getTerms();\n    \tif (terms !== undefined) {\n\t\t\tfor (var i = 0; i < terms.length; i++) {\n\t\t\t\tvar term = terms[i];\n\t\t\t\tvar adjustedSize = this.findNewRelativeSize(term);\n\t\t\t\tterm.fontSize = adjustedSize > this.getMinFontSize() ? adjustedSize : this.getMinFontSize();\n\t\t\t}\n    \t}\n    },\n    \n    setRelativeSizes: function() {\n    \tvar terms = this.getTerms();\n    \tif (terms !== undefined) {\n\t    \tfor (var i = 0; i < terms.length; i++) {\n\t            var word = terms[i];\n\t            word.relativeSize = this.map(word.rawFreq, this.getSmallestWordSize(), this.getLargestWordSize(), 0.1, 1);\n\t        }\n    \t}\n    },\n    \n    findNewRelativeSize: function(word) {\n    \tvar areaMultiplier = this.getSizeAdjustment();\n        var area = this.calculateWordArea(word) * areaMultiplier;\n        // given the area = (x+6)*(2*x/3*y), solve for x\n        var newRelativeSize = (Math.sqrt(6) * Math.sqrt(6 * Math.pow(word.text.length, 2) + area * word.text.length) - 6 * word.text.length) / (2 * word.text.length);\n        return newRelativeSize;\n    }\n});","Ext.define('Voyant.panel.CollocatesGraph', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.collocatesgraph',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tmode: undefined,\n    \t\tlimit: 5,\n    \t\tstopList: 'auto',\n    \t\tterms: undefined,\n    \t\tcontext: 5,\n    \t\tcentralize: undefined\n    \t},\n\t\tglyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{\n    \t\txtype: 'categoriesoption'\n    \t}],\n    \t\n    \tnodeData: undefined,\n    \tlinkData: undefined,\n    \t\n    \tvisId: undefined,\n    \tvis: undefined,\n    \tvisLayout: undefined,\n    \tnodes: undefined,\n    \tlinks: undefined,\n    \tzoom: undefined,\n    \t\n    \tdragging: false,\n    \t\n    \tcontextMenu: undefined,\n    \t\n    \tcurrentNode: undefined,\n    \t\n    \tnetworkMode: undefined,\n    \t\n    \tgraphStyle: {\n    \t\tkeywordNode: {\n    \t\t\tnormal: {\n    \t\t\t\tfill: '#c6dbef',\n    \t\t\t\tstroke: '#6baed6'\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tfill: '#9ecae1',\n    \t\t\t\tstroke: '#3182bd'\n    \t\t\t}\n    \t\t},\n    \t\tcontextNode: {\n    \t\t\tnormal: {\n    \t\t\t\tfill: '#fdd0a2',\n    \t\t\t\tstroke: '#fdae6b'\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tfill: '#fd9a53',\n    \t\t\t\tstroke: '#e6550d'\n    \t\t\t}\n    \t\t},\n    \t\tlink: {\n    \t\t\tnormal: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.1\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.5\n    \t\t\t}\n    \t\t}\n    \t},\n    \t\n    \tgraphPhysics: {\n    \t\tdefaultMode: {\n\t    \t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n\t    \t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n\t    \t\tnodeGravity: -50,  // negative = repel, positive = attract\n\t\t\t\tspringLength: 100,\n\t\t\t\tspringStrength: 0.25, // 0 = not strong, >1 = probably too strong\n\t\t\t\tcollisionScale: 1.25 // 1 = default, 0 = no collision \n    \t\t},\n    \t\tcentralizedMode: {\n    \t\t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n    \t\t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n\t    \t\tnodeGravity: -1,  // negative = repel, positive = attract\n\t\t\t\tspringLength: 200,\n\t\t\t\tspringStrength: 1, // 0 = not strong, >1 = probably too strong\n\t\t\t\tcollisionScale: 1 // 1 = default, 0 = no collision \n    \t\t}\n    \t}\n    },\n\n    DEFAULT_MODE: 0,\n    CENTRALIZED_MODE: 1,\n    \n    constructor: function(config) {\n    \tthis.setNodeData([]);\n    \tthis.setLinkData([]);\n    \t\n    \tthis.setVisId(Ext.id(null, 'links_'));\n\n    \tthis.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                   xtype: 'querysearchfield'\n                },{\n                \ttext: me.localize('clearTerms'),\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\n                \thandler: this.resetGraph,\n                \tscope: me\n                },this.localize('context'),{\n                \txtype: 'slider',\n                \titemId: 'contextSlider',\n                \tminValue: 3,\n                \tvalue: 5,\n                \tmaxValue: 30,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('context', slider.getValue());\n                \t\t\tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n                    \t\t\tvar terms = this.getNodeData().map(function(node) { return node.term; });\n                \t\t\t\tif (terms.length > 0) {\n                \t\t\t\t\tthis.setNodeData([]);\n                \t\t\t\t\tthis.setLinkData([]);\n                \t\t\t\t\tthis.refresh();\n                \t\t\t\t\t\n                \t\t\t\t\tthis.loadFromQuery(terms);\n                \t\t\t\t}\n                \t\t\t}\n                \t\t},\n                \t\tscope: me\n                \t}\n                }]\n            }]\n        });\n        \n        this.setContextMenu(Ext.create('Ext.menu.Menu', {\n\t\t\trenderTo: Ext.getBody(),\n\t\t\titems: [{\n\t\t\t\txtype: 'box',\n\t\t\t\titemId: 'label',\n\t\t\t\tmargin: '5px 0px 5px 5px',\n\t\t\t\thtml: ''\n\t\t\t},{\n\t\t        xtype: 'menuseparator'\n\t\t\t},{\n\t\t\t\txtype: 'menucheckitem',\n\t\t\t\ttext: 'Fixed',\n\t\t\t\titemId: 'fixed',\n\t\t\t\tlisteners: {\n\t\t\t\t\tcheckchange: function(c, checked, e) {\n\t\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\tfixed: checked\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\tdata.fx = node.x;\n\t\t\t\t\t\t\t\tdata.fy = node.y;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdata.fx = null;\n\t\t\t\t\t\t\t\tdata.fy = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.updateDataForNode(node.id, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Fetch Collocates',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\tif (this.getNetworkMode() === this.CENTRALIZED_MODE) {\n\t\t\t\t\t\t\tthis.resetGraph();\n\t\t\t\t\t\t\tthis.setNetworkMode(this.DEFAULT_MODE);\n\t\t\t\t\t\t\tthis.setApiParam('centralize', undefined);\n\t\t\t\t\t\t\tnode.start = 0;\n\t\t\t\t\t\t\tnode.limit = this.getApiParam('limit');\n\t\t\t\t\t\t}\n\t\t    \t\t\tthis.fetchCollocatesForNode(node);\n\t\t    \t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Centralize',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t    \t\t\tthis.doCentralize(node.term);\n\t\t    \t\t}\n\t\t\t\t\tthis.getContextMenu().hide();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Remove',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\tthis.removeNode(node.id);\n\t\t\t\t\t}\n\t\t\t\t\tb.up('menu').hide();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t}));\n        \n        this.on('loadedCorpus', function(src, corpus) {\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis.initLoad();\n\t\t\t}\n        }, this);\n        \n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\n\t\t\tif (this.getCorpus()) {\n\t\t\t    if (this.getNodeData().length === 0) { // only initLoad if there isn't already data\n\t\t\t        Ext.Function.defer(this.initLoad, 100, this);\n\t\t\t    }\n\t\t\t}\n    \t}, this);\n        \n        this.on('query', function(src, query) {this.loadFromQuery(query);}, this);\n        \n        this.on('resize', function(panel, width, height) {\n        \tvar vis = Ext.get(this.getVisId());\n        \tif (vis) {\n        \t\tvar el = this.body;//this.getLayout().getRenderTarget();\n            \tvar elHeight = el.getHeight();\n            \tvar elWidth = el.getWidth();\n            \t\n        \t\tvis.el.dom.setAttribute('width', elWidth);\n        \t\tvis.el.dom.setAttribute('height', elHeight);\n        \t\tthis.getVisLayout()\n        \t\t\t.force('x', d3.forceX(elWidth/2))\n\t    \t\t\t.force('y', d3.forceY(elHeight/2));\n//        \t\t\t.alpha(0.5).restart(); // restarting physics messes up zoomToFit\n        \t\t\n        \t\tExt.Function.defer(this.zoomToFit, 100, this);\n //       \t\tthis.zoomToFit();\n        \t}\n\t\t}, this);\n        \n        me.callParent(arguments);\n\n    },\n    \n    initLoad: function() {\n\t\tthis.initGraph();\n\t\tthis.setNetworkMode(this.DEFAULT_MODE);\n\t\t\n\t\tif (this.getApiParam('centralize')) {\n\t\t\tthis.setNetworkMode(this.CENTRALIZED_MODE);\n\t\t\tvar term = this.getApiParam('centralize');\n\t\t\tthis.doCentralize(term);\n\t\t} else {\n\t\t\tvar limit = 3;\n\t\t\tvar query = this.getApiParam('query');\n\t\t\tif (query !== undefined) {\n\t\t\t\tlimit = Ext.isArray(query) ? query.length : query.split(',').length;\n\t\t\t}\n\t\t\tthis.getCorpus().getCorpusTerms({autoLoad: false}).load({\n\t\t\t\tparams: {\n\t\t\t\t\tlimit: limit,\n\t\t\t\t\tquery: query,\n\t\t\t\t\tstopList: this.getApiParam('stopList'),\n\t\t\t\t\tcategories: this.getApiParam(\"categories\")\n\t\t\t\t},\n\t\t\t    callback: function(records, operation, success) {\n\t\t\t    \tif (success) {\n\t\t\t    \t\tthis.loadFromCorpusTermRecords(records);\n\t\t\t    \t}\n\t\t\t    },\n\t\t\t    scope: this\n\t    \t});\n\t\t}\n    },\n    \n    loadFromQuery: function(query) {\n    \tif (Ext.isArray(query) && query.length==0) {\n    \t\tthis.setApiParam(\"query\", undefined);\n    \t\tthis.resetGraph();\n    \t\treturn;\n    \t}\n    \tthis.setApiParams({\n    \t\tmode: 'corpus',\n    \t\tquery: query\n    \t});\n    \tvar params = this.getApiParams();\n    \tparams.noCache=true;\n    \t(Ext.isString(query) ? [query] : query).forEach(function(q) {\n        \tthis.getCorpus().getCorpusCollocates({autoLoad: false}).load({\n        \t\tparams: Ext.apply(Ext.clone(params), {query: q}),\n        \t\tcallback: function(records, operations, success) {\n        \t\t\tif (success) {\n        \t\t\t\tthis.loadFromCorpusCollocateRecords(records);\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t});\n    \t}, this);\n    },\n    \n    loadFromCorpusTermRecords: function(corpusTerms) {\n    \tif (Ext.isArray(corpusTerms) && corpusTerms.length>0) {\n    \t\tvar terms = [];\n    \t\tcorpusTerms.forEach(function(corpusTerm) {\n    \t\t\tterms.push(corpusTerm.getTerm());\n    \t\t});\n    \t\tthis.loadFromQuery(terms);\n    \t}\n    },\n    \n    loadFromCorpusCollocateRecords: function(records, keywordId) {\n    \tif (Ext.isArray(records)) {\n    \t\tvar start = this.getApiParam('limit');\n    \t\t\n    \t\tvar el = this.getLayout().getRenderTarget();\n    \t\tvar cX = el.getWidth()/2;\n    \t\tvar cY = el.getHeight()/2;\n    \t\t\n    \t\tvar existingKeys = {};\n    \t\tthis.getNodeData().forEach(function(item) {\n    \t\t\texistingKeys[item.id] = true;\n    \t\t}, this);\n    \t\t\n    \t\tvar newNodes = [];\n    \t\tvar newLinks = [];\n    \t\t\n    \t\trecords.forEach(function(corpusCollocate, index) {\n    \t\t\tvar term = corpusCollocate.getTerm();\n    \t\t\tvar contextTerm = corpusCollocate.getContextTerm();\n    \t\t\tvar termFreq = corpusCollocate.getKeywordRawFreq();\n    \t\t\tvar contextFreq = corpusCollocate.getContextTermRawFreq();\n    \t\t\t\n    \t\t\tvar termValue = termFreq;\n    \t\t\tvar contextValue = contextFreq;\n    \t\t\tif (this.getNetworkMode() === this.CENTRALIZED_MODE) {\n    \t\t\t\ttermValue = 0;\n    \t\t\t\tcontextValue = Math.log(contextFreq);\n    \t\t\t}\n    \t\t\t\n    \t\t\tvar termEntry = undefined;\n    \t\t\tvar contextTermEntry = undefined;\n    \t\t\t\n    \t\t\tif (index == 0) { // only process keyword once\n    \t\t\t\tif (keywordId === undefined) keywordId = this.idGet(term);\n\t    \t\t\tif (existingKeys[keywordId] !== undefined) {\n\t    \t\t\t\tthis.updateDataForNode(keywordId, {\n\t    \t\t\t\t\ttitle: term+' ('+termFreq+')',\n\t    \t\t\t\t\ttype: 'keyword',\n\t    \t\t\t\t\tvalue: termValue\n\t    \t\t\t\t});\n\t    \t\t\t} else {\n\t    \t\t\t\texistingKeys[keywordId] = true;\n\t    \t\t\t\t\n\t    \t\t\t\ttermEntry = {\n\t\t    \t\t\t\tid: keywordId,\n\t    \t\t\t\t\tterm: term,\n\t    \t\t\t\t\ttitle: term+' ('+termFreq+')',\n\t    \t\t\t\t\ttype: 'keyword',\n\t    \t\t\t\t\tvalue: termValue,\n\t    \t\t\t\t\tstart: start,\n\t    \t\t\t\t\tfixed: false,\n\t    \t\t\t\t\tx: cX,\n\t    \t\t\t\t\ty: cY\n\t\t\t\t\t\t};\n\t    \t\t\t\tnewNodes.push(termEntry);\n\t    \t\t\t}\n\t\t\t\t}\n    \t\t\t\n    \t\t\tif (term != contextTerm) {\n\t    \t\t\tvar contextId = this.idGet(contextTerm);\n\t    \t\t\tif (existingKeys[contextId] !== undefined) {\n\t    \t\t\t} else {\n\t    \t\t\t\texistingKeys[contextId] = true;\n\t    \t\t\t\t\n\t    \t\t\t\tcontextTermEntry = {\n    \t    \t\t\t\tid: contextId,\n    \t    \t\t\t\tterm: contextTerm,\n        \t\t\t\t\ttitle: contextTerm+' ('+contextFreq+')',\n        \t\t\t\t\ttype: 'context',\n        \t\t\t\t\tvalue: contextValue,\n        \t\t\t\t\tstart: 0,\n        \t\t\t\t\tfixed: false,\n\t    \t\t\t\t\tx: cX,\n\t    \t\t\t\t\ty: cY\n    \t\t\t\t\t};\n\t    \t\t\t\tnewNodes.push(contextTermEntry);\n\t    \t\t\t}\n\t    \t\t\t\n\t    \t\t\tvar existingLink = null;\n\t    \t\t\tvar linkData = this.getLinkData();\n\t    \t\t\tfor (var i = 0; i < linkData.length; i++) {\n\t    \t\t\t\tvar link = linkData[i];\n\t    \t\t\t\tif ((link.source.id == keywordId && link.target.id == contextId) || (link.source.id == contextId && link.target.id == keywordId)) {\n\t    \t\t\t\t\texistingLink = link;\n\t    \t\t\t\t\tbreak;\n\t    \t\t\t\t}\n\t    \t\t\t}\n\n\t    \t\t\tvar linkValue = corpusCollocate.getContextTermRawFreq();\n\t    \t\t\tif (existingLink === null) {\n\t    \t\t\t\tnewLinks.push({source: keywordId, target: contextId, value: linkValue, id: keywordId+'-'+contextId});\n\t    \t\t\t} else if (existingLink.value < linkValue) {\n//\t    \t\t\t\texistingLink.value = linkValue;\n\t    \t\t\t}\n    \t\t\t}\n    \t\t}, this);\n    \t\t\n    \t\tthis.setNodeData(this.getNodeData().concat(newNodes));\n    \t\tthis.setLinkData(this.getLinkData().concat(newLinks));\n    \t\t\n    \t\tthis.refresh();\t\t\n    \t}\n    },\n    \n    idGet: function(term) {\n    \treturn term.replace(/\\W/g, '_');\n    },\n    \n    updateDataForNode: function(nodeId, dataObj) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n    },\n    \n    removeNode: function(nodeId, removeOrphans) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata = this.getLinkData();\n\t\tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tif (data[i].source.id === nodeId || data[i].target.id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tthis.setApiParam(\"query\", Ext.Array.remove(Ext.Array.from(this.getApiParam(\"query\")), nodeId));\n\t\t\n\t\tif (removeOrphans) {\n\t\t\t// TODO\n\t\t}\n\t\t\n\t\tthis.refresh();\n    },\n    \n    doCentralize: function(term) {\n    \tthis.setApiParam(\"centralize\",term);\n    \tthis.resetGraph();\n    \t\n    \tthis.setNetworkMode(this.CENTRALIZED_MODE);\n    \t\n    \tvar data = {\n\t\t\tid: this.idGet(term),\n\t\t\tterm: term,\n\t\t\ttitle: term+' ('+1+')',\n\t\t\ttype: 'keyword',\n\t\t\tvalue: 1000,\n\t\t\tstart: 0\n\t\t};\n\t\tthis.setNodeData([data]);\n\t\tthis.refresh();\n\t\t\n\t\tvar centralizeLimit = 150;\n\t\tvar limit = this.getApiParam('limit');\n\t\tthis.setApiParam('limit', centralizeLimit);\n\t\tthis.fetchCollocatesForNode(data);\n\t\tthis.setApiParam('limit', limit);\n    },\n    \n    // called by setNetworkMode\n    applyNetworkMode: function(mode) {\n    \tif (this.getVisLayout()) {\n\t    \tif (mode === this.DEFAULT_MODE) {\n\t    \t\tvar physics = this.getGraphPhysics().defaultMode;\n\t    \t\tthis.getVisLayout()\n\t    \t\t\t.velocityDecay(physics.damping)\n\t\t    \t\t.force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n\t\t\t\t\t.force('charge', d3.forceManyBody().strength(physics.nodeGravity))\n\t\t\t\t\t.force('collide', d3.forceCollide(function(d) { return Math.sqrt(d.bbox.width * d.bbox.height) * physics.collisionScale; }));\n\t    \t\tthis.getVisLayout().force('x').strength(physics.centralGravity);\n\t    \t\tthis.getVisLayout().force('y').strength(physics.centralGravity);\n\t    \t} else {\n\t    \t\tvar physics = this.getGraphPhysics().centralizedMode;\n\t    \t\tthis.getVisLayout()\n\t    \t\t\t.velocityDecay(physics.damping)\n\t\t    \t\t.force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n\t\t\t\t\t.force('charge', d3.forceManyBody().strength(function(d) {\n\t\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\t\treturn -10000;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}))\n\t\t\t\t\t.force('collide', d3.forceCollide(function(d) {\n\t\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\t\treturn d.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn Math.sqrt(d.bbox.width * d.bbox.height) * physics.collisionScale;\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t    \t\tthis.getVisLayout().force('x').strength(physics.centralGravity);\n\t    \t\tthis.getVisLayout().force('y').strength(physics.centralGravity);\n\t    \t}\n    \t}\n    \t\n    \treturn mode; // need to return mode for it to actually be set\n    },\n    \n    initGraph: function() {\n    \tvar el = this.getLayout().getRenderTarget();\n    \tel.update('');\n    \tvar width = el.getWidth();\n    \tvar height = el.getHeight();\n    \t\n    \tthis.setVisLayout(d3.forceSimulation()\n    \t\t.force('x', d3.forceX(width/2))\n    \t\t.force('y', d3.forceY(height/2))\n\t\t\t.on('tick', function() {\n\t    \t\tthis.getLinks()\n\t    \t\t\t.attr('x1', function(d) { return d.source.x; })\n\t    \t\t\t.attr('y1', function(d) { return d.source.y; })\n\t    \t\t\t.attr('x2', function(d) { return d.target.x; })\n\t    \t\t\t.attr('y2', function(d) { return d.target.y; });\n\t//    \t\tthis.getLinks().attr('d', function(d) {\n\t//\t\t\t\treturn 'M' + d[0].x + ',' + d[0].y\n\t//\t\t\t\t\t\t+ 'S' + d[1].x + ',' + d[1].y\n\t//\t\t\t\t\t\t+ ' ' + d[2].x + ',' + d[2].y;\n\t//\t\t\t});\n\t    \t\tthis.getNodes().attr('transform', function(d) {\n\t    \t\t\tvar x = d.x;\n\t    \t\t\tvar y = d.y;\n\t    \t\t\tif (this.getNetworkMode() === this.DEFAULT_MODE || d.type !== 'keyword') {\n\t\t    \t\t\tx -= d.bbox.width*0.5;\n\t\t    \t\t\ty -= d.bbox.height*0.5;\n\t    \t\t\t} else {\n\t    \t\t\t\t\n\t    \t\t\t}\n\t    \t\t\treturn 'translate('+x+','+y+')';\n\t    \t\t}.bind(this));\n\t    \t\t\n\t    \t\tif (!this.getDragging() && this.getVisLayout().alpha() < 0.075) {\n\t    \t\t\tthis.getVisLayout().alpha(-1); // trigger end event\n\t    \t\t}\n\t    \t}.bind(this))\n\t    \t.on('end', function() {\n        \t\tExt.Function.defer(this.zoomToFit, 100, this);\n\t    \t}.bind(this))\n\t\t);\n    \t\n    \tvar svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('class', 'linksGraph').attr('width', width).attr('height', height);\n    \tvar g = svg.append('g');\n    \t\n    \tvar zoom = d3.zoom()\n    \t\t.scaleExtent([1/4, 4])\n    \t\t.on('zoom', function() {\n\t\t\t\tg.attr('transform', d3.event.transform);\n\t\t\t});\n    \tthis.setZoom(zoom);\n\t\tsvg.call(zoom);\n\t\t\n\t\tsvg.on('click', function() {\n    \t\tthis.getContextMenu().hide();\n    \t}.bind(this));\n    \t\n    \tthis.setLinks(g.append('g').attr('class', 'links').selectAll('.link'));\n    \tthis.setNodes(g.append('g').attr('class', 'nodes').selectAll('.node'));\n\t\tthis.setVis(g);\n    },\n    \n    resetGraph: function() {\n\t\tthis.setNodeData([]);\n    \tthis.setLinkData([]);\n\t\tthis.setNetworkMode(this.DEFAULT_MODE); // ? there was another version of this function without this\n\t\tthis.refresh();\n    },\n    \n    refresh: function() {\n    \tvar me = this;\n    \t\n    \tvar nodeData = this.getNodeData();\n    \tvar linkData = this.getLinkData();\n    \t\n//    \tvar nodeMap = d3.map(nodeData, function(d) { return d.id; });\n//    \tvar bilinks = [];\n//    \tlinkData.forEach(function(link) {\n//    \t\tvar s = link.source = nodeMap.get(link.source);\n//    \t\tvar t = link.target = nodeMap.get(link.target);\n//    \t\tvar i = {};\n//    \t\tnodeData.push(i);\n//    \t\tlinkData.push({source: s, target: i}, {source: i, target: t});\n//    \t\tbilinks.push([s,i,t]);\n//    \t});\n    \t\n    \tvar link = this.getLinks().data(linkData, function(d) { return d.id; });\n    \tlink.exit().remove();\n\t\tvar linkEnter = link.enter().append('line')\n\t\t\t.attr('class', 'link')\n\t\t\t.attr('id', function(d) { return d.id; })\n\t\t\t.on('mouseover', me.linkMouseOver.bind(me))\n\t\t\t.on('mouseout', me.linkMouseOut.bind(me))\n\t\t\t.on('click', function(data) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.dispatchEvent('termsClicked', this, ['\"'+data.source.term+' '+data.target.term+'\"~'+this.getApiParam('context')]);\n\t\t\t}.bind(me))\n//\t\t\t.style('fill', 'none')\n\t\t\t.style('cursor', 'pointer')\n\t\t\t.style('stroke-width', function(d) {\n\t\t\t\tif (me.getNetworkMode() === me.DEFAULT_MODE) {\n\t\t\t\t\treturn Math.max(1, Math.min(15, Math.sqrt(d.value)));\n\t\t\t\t} else {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\tthis.setLinks(linkEnter.merge(link));\n\n    \tvar node = this.getNodes().data(nodeData, function(d) { return d.id; });\n    \tnode.exit().remove();\n    \tvar nodeEnter = node.enter().append('g')\n\t\t\t.attr('class', function(d) { return 'node '+d.type; })\n\t\t\t.attr('id', function(d) { return d.id; })\n\t\t\t.on('mouseover', me.nodeMouseOver.bind(me))\n\t\t\t.on('mouseout', me.nodeMouseOut.bind(me))\n\t\t\t.on('click', function(data) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.dispatchEvent('termsClicked', this, [data.term]);\n\t\t\t}.bind(me))\n\t\t\t.on('dblclick', function(data) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.fetchCollocatesForNode(data);\n\t\t\t}.bind(me))\n\t\t\t.on('contextmenu', function(d, i) {\n\t\t\t\td3.event.preventDefault();\n//\t\t\t\tme.getTip().hide();\n\t\t\t\tvar menu = me.getContextMenu();\n\t\t\t\tmenu.queryById('label').setHtml(d.term);\n    \t\t\tmenu.queryById('fixed').setChecked(d.fixed);\n\t\t\t\tmenu.showAt(d3.event.pageX+10, d3.event.pageY-50);\n\t\t\t})\n\t\t\t.call(d3.drag()\n\t\t\t\t.on('start', function(d) {\n\t\t\t\t\tme.setDragging(true);\n\t\t\t\t\tif (!d3.event.active) me.getVisLayout().alpha(0.3).restart();\n\t\t\t\t\td.fx = d.x;\n\t\t\t\t\td.fy = d.y;\n\t\t\t\t\td.fixed = true;\n\t\t\t\t})\n\t\t\t\t.on('drag', function(d) {\n\t\t\t\t\tme.getVisLayout().alpha(0.3); // don't let simulation end while the user is dragging\n\t\t\t\t\td.fx = d3.event.x;\n\t\t\t\t\td.fy = d3.event.y;\n\t\t\t\t\tif (me.isMasked()) {\n\t\t\t    \t\tif (!me.isOffCanvas(d3.event.x, d3.event.y)) {\n\t\t\t    \t\t\tme.unmask();\n\t\t\t    \t\t}\n\t\t\t    \t} else if (me.isOffCanvas(d3.event.x, d3.event.y)) {\n\t\t\t    \t\tme.mask(me.localize('releaseToRemove'));\n\t\t\t    \t}\n\t\t\t\t})\n\t\t\t\t.on('end', function(d) {\n\t\t\t\t\tme.setDragging(false);\n//\t\t\t\t\tif (!d3.event.active) me.getVisLayout().alpha(0);\n\t\t\t\t\tif (d.fixed != true) {\n\t\t\t\t\t\td.fx = null;\n\t\t\t\t\t\td.fy = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (me.isOffCanvas(d3.event.x, d3.event.y)) {\n\t    \t    \t\tme.unmask();\n\t    \t    \t\tme.mask(me.localize('cleaning'));\n\t    \t    \t\tme.removeNode(d.id);\n\t    \t    \t\tme.unmask();\n\t    \t    \t}\n\t\t\t\t})\n\t\t\t);\n    \t\n    \tnodeEnter.append('title').text(function(d) { return d.title; });\n    \t\n    \tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n    \t\tnodeEnter.append('rect')\n\t\t\t\t.style('stroke-width', 1)\n\t\t\t\t.style('stroke-opacity', 1);\n    \t} else {\n    \t\tnodeEnter.filter(function(d) { return d.type === 'keyword'; }).append('circle')\n    \t\t\t.style('stroke-width', 1)\n    \t\t\t.style('stroke-opacity', 1);\n    \t}\n    \t\n    \tnodeEnter.append('text')\n\t\t\t.attr('font-family', function(d) { return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n\t\t\t.attr('font-size', function(d) { return Math.max(10, Math.sqrt(d.value)); })\n\t\t\t.text(function(d) { return d.term; })\n\t\t\t.each(function(d) { d.bbox = this.getBBox(); }) // set bounding box for later use\n\t\t\t.style('cursor', 'pointer')\n\t\t\t.style('user-select', 'none')\n\t\t\t.attr('dominant-baseline', 'middle');\n    \t\n    \tthis.setNodes(nodeEnter.merge(node));\n    \t\n    \tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n\t    \tthis.getVis().selectAll('rect')\n\t    \t\t.attr('width', function(d) { return d.bbox.width+16; })\n\t\t\t\t.attr('height', function(d) { return d.bbox.height+8; })\n\t\t\t\t.attr('rx', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t\t.attr('ry', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t\t.call(this.applyNodeStyle.bind(this));\n\t    \tthis.getVis().selectAll('text')\n\t\t    \t.attr('dx', 8)\n\t\t\t\t.attr('dy', function(d) { return d.bbox.height*0.5+4; });\n    \t} else {\n    \t\tthis.getVis().selectAll('circle')\n    \t\t\t.attr('r', function(d) { return Math.min(150, d.bbox.width); })\n    \t\t\t.call(this.applyNodeStyle.bind(this));\n    \t\tthis.getVis().selectAll('text')\n\t\t    \t.attr('dx', function(d) {\n\t\t    \t\tif (d.type === 'keyword') {\n\t\t    \t\t\treturn -d.bbox.width*0.5;\n\t\t\t    \t} else {\n\t\t\t    \t\treturn 8;\n\t\t\t    \t}\n\t    \t\t})\n\t\t\t\t.attr('dy', function(d) {\n\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn d.bbox.height*0.5+4;\n\t\t\t\t\t}\n\t\t\t\t});\n    \t}\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    \t\n    \t\n    \tthis.getVisLayout().nodes(nodeData);\n    \tthis.getVisLayout().force('link').links(linkData);\n    \tthis.getVisLayout().alpha(1).restart();\n    },\n    \n    isOffCanvas: function(x, y) {\n    \tvar vis = Ext.get(this.getVisId());\n    \treturn x < 0 || y < 0 || x > vis.getWidth() || y > vis.getHeight();\n    },\n    \n    zoomToFit: function(paddingPercent, transitionDuration) {\n    \tvar bounds = this.getVis().node().getBBox();\n    \tvar width = bounds.width;\n    \tvar height = bounds.height;\n    \tvar midX = bounds.x + width/2;\n    \tvar midY = bounds.y + height/2;\n    \tvar svg = this.getVis().node().parentElement;\n    \tvar svgRect = svg.getBoundingClientRect();\n    \tvar fullWidth = svgRect.width;\n    \tvar fullHeight = svgRect.height;\n    \tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n    \tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n    \tif (width<1) {return} // FIXME: something strange with spyral\n     \t\n    \td3.select(svg)\n    \t\t.transition()\n    \t\t.duration(transitionDuration || 500)\n    \t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n    },\n \n    applyNodeStyle: function(sel, nodeState) {\n\t\tvar state = nodeState === undefined ? 'normal' : nodeState;\n    \tsel.style('fill', function(d) { var type = d.type+'Node'; return this.getGraphStyle()[type][state].fill; }.bind(this));\n    \tsel.style('stroke', function(d) { var type = d.type+'Node'; return this.getGraphStyle()[type][state].stroke; }.bind(this));\n    },\n    \n    applyLinkStyle: function(sel, linkState) {\n    \tvar state = linkState === undefined ? 'normal' : linkState;\n    \tsel.style('stroke', function(d) { return this.getGraphStyle().link[state].stroke; }.bind(this));\n    \tsel.style('stroke-opacity', function(d) { return this.getGraphStyle().link[state].strokeOpacity; }.bind(this));\n    },\n    \n    linkMouseOver: function(d) {\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    \tthis.getVis().select('#'+d.id).call(this.applyLinkStyle.bind(this), 'highlight');\n    },\n    \n    linkMouseOut: function(d) {\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    },\n    \n    nodeMouseOver: function(d) {\n    \tthis.setCurrentNode(d);\n\t\t\n\t\tthis.getVis().selectAll('rect').call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getLinks().each(function(link) {\n\t\t\tvar id;\n\t\t\tif (link.source.id == d.id) {\n\t\t\t\tid = link.target.id;\n\t\t\t} else if (link.target.id == d.id) {\n\t\t\t\tid = link.source.id;\n\t\t\t}\n\t\t\tif (id !== undefined) {\n\t\t\t\tthis.getVis().select('#'+id+' rect').call(this.applyNodeStyle.bind(this), 'highlight');\n\t\t\t\tthis.getVis().select('#'+link.id).call(this.applyLinkStyle.bind(this), 'highlight');\n\t\t\t}\n\t\t}.bind(this));\n\t\t\n\t\tthis.getVis().select('#'+d.id+' rect')\n\t\t\t.style('stroke-width', 3)\n\t\t\t.call(this.applyNodeStyle.bind(this), 'highlight');\n    },\n    \n    nodeMouseOut: function(d) {\n    \tif (!this.getContextMenu().isVisible()) {\n\t\t\tthis.setCurrentNode(undefined);\n\t\t}\n\t\t\n\t\tthis.getVis().selectAll('rect')\n\t\t\t.style('stroke-width', 1)\n\t\t\t.call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getVis().selectAll('line')\n\t\t\t.call(this.applyLinkStyle.bind(this));\n    },\n    \n    fetchCollocatesForNode: function(d) {\n    \tvar limit = this.getApiParam('limit');\n    \tvar query = this.getApiParam(\"query\");\n    \t\n    \tvar query = Ext.Array.from(this.getApiParam(\"query\"));\n    \tExt.Array.include(query, d.term)\n\t\tthis.setApiParam(\"query\", query);\n\n    \tvar corpusCollocates = this.getCorpus().getCorpusCollocates({autoLoad: false});\n    \tcorpusCollocates.load({\n    \t\tparams: Ext.apply(this.getApiParams(), {query: d.term, start: d.start, limit: limit}),\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tif (success) {\n    \t\t\t\tthis.updateDataForNode(d.id, {\n    \t\t\t\t\tstart: d.start+limit\n    \t\t\t\t});\n    \t    \t\t\n    \t    \t\tthis.loadFromCorpusCollocateRecords(records, d.id);\n    \t\t\t}\n    \t\t},\n    \t\tscope: this\n    \t});\n    }\n    \n});","Ext.define('Voyant.panel.Contexts', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.Contexts'],\n\talias: 'widget.contexts',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tstopList: 'auto',\n    \t\tcontext: 5,\n    \t\texpand: 50\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    constructor: function() {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, { \n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : Ext.create(\"Voyant.data.store.ContextsBuffered\", {\n            \tparentPanel: this,\n            \tproxy: {\n            \t\textraParams: {\n                    \tstripTags: \"all\"            \t\t\t\n            \t\t}\n            \t}\n//            \tsortOnLoad: true,\n//            \tsorters: {\n//                    property: 'position',\n//                    direction: 'ASC'\n//            \t}\n            }),\n    \t\tselModel: {\n    \t\t\ttype: 'rowmodel',\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('termLocationClicked', this, selections);\n                    \t},\n                    \tscope: this\n                    }\n                }\n            },\n            plugins: [{ // the expander slider assumes there's only one plugin, needs to be updated if changed\n                ptype: 'rowexpander',\n                rowBodyTpl : new Ext.XTemplate('')\n            }],\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, this.localize('context'), {\n                \txtype: 'slider',\n                \tminValue: 5,\n                \tvalue: 5,\n                \tmaxValue: 50,\n                \tincrement: 5,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam(\"context\", slider.getValue());\n           \t\t        \tme.getStore().clearAndLoad({params: me.getApiParams()});\n                \t\t}\n                \t}\n                }, this.localize('expand'), {\n                \txtype: 'slider',\n                \tminValue: 5,\n                \tvalue: 5,\n                \tmaxValue: 500,\n                \tincrement: 10,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('expand'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam('expand', newValue);\n                \t\t\tvar view = me.getView();\n                \t\t\tvar recordsExpanded = me.plugins[0].recordsExpanded;\n                \t\t\tvar store = view.getStore();\n                \t\t\tfor (var id in recordsExpanded) {\n                \t\t\t\tvar record = store.getByInternalId(id);\n            \t\t\t\t\tvar row = view.getRow(record);\n            \t\t\t\t\tvar expandRow = row.parentNode.childNodes[1];\n                \t\t\t\tif (recordsExpanded[id]) {\n                \t\t\t\t\tview.fireEvent(\"expandbody\", row, record, expandRow, {force: true});\n                \t\t\t\t} else {\n                \t\t\t\t\tExt.fly(expandRow).down('.x-grid-rowbody').setHtml('');\n                \t\t\t\t}\n                \t\t\t}\n                \t\t}\n                \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"document\"),\n    \t\t\ttoolTip: this.localize(\"documentTip\"),\n                width: 'autoSize',\n        \t\tdataIndex: 'docIndex',\n                sortable: true,\n                renderer: function (value, metaData, record, rowIndex, colIndex, store) {\n                \treturn store.getCorpus().getDocument(value).getTinyLabel();\n                }\n            },{\n    \t\t\ttext: this.localize(\"left\"),\n    \t\t\ttooltip: this.localize(\"leftTip\"),\n    \t\t\talign: 'right',\n        \t\tdataIndex: 'left',\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n    \t\t\ttooltip: this.localize(\"termTip\"),\n        \t\tdataIndex: 'term',\n                sortable: true,\n                width: 'autoSize'\n            },{\n    \t\t\ttext: this.localize(\"right\"),\n    \t\t\ttooltip: this.localize(\"rightTip\"),\n        \t\tdataIndex: 'right',\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"position\"),\n    \t\t\ttooltip: this.localize(\"positionTip\"),\n        \t\tdataIndex: 'position',\n                sortable: true,\n                hidden: true,\n                flex: 1\n            }],\n            listeners: {\n            \tscope: this,\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tif (this.getStore().getCorpus()) {\n\t\t\t\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined})\n\t\t\t\t\t\tthis.getStore().clearAndLoad()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t\t\t\t\tthis.getStore().clearAndLoad()\n\t\t\t\t},\n\n            \tdocumentSegmentTermClicked: {\n\t           \t\t fn: function(src, documentSegmentTerm) {\n\t           \t\t\t if (!documentSegmentTerm.term) {return;}\n\t           \t\t\t params = {query: documentSegmentTerm.term};\n\t           \t\t\t if (documentSegmentTerm.docId) {\n\t           \t\t\t\t params.docId = documentSegmentTerm.docId;\n\t           \t\t\t }\n\t           \t\t\t else {\n\t           \t\t\t\t // default to first document\n\t           \t\t\t\t params.docIndex = documentSegmentTerm.docIndex ?  documentSegmentTerm.docIndex : 0;\n\t           \t\t\t }\n\t           \t\t\t this.setApiParams(params);\n\t       \t        \tif (this.isVisible()) {\n\t       \t\t        \tthis.getStore().clearAndLoad()\n\t       \t        \t}\n\t           \t\t },\n\t           \t\t scope: this\n            \t},\n\t           \t documentIndexTermsClicked: {\n\t           \t\t fn: function(src, documentIndexTerms) {\n\t           \t\t\t// this isn't quite right, since we want every term associated with a docIndex, but for now it will do\n\t           \t\t\tvar queriesHash = {};\n\t           \t\t\tvar queries = [];\n\t           \t\t\tvar docIndexHash = {};\n\t           \t\t\tvar docIndex = [];\n\t           \t\t\tdocumentIndexTerms.forEach(function(item) {\n\t           \t\t\t\tif (!queriesHash[item.term]) {\n\t           \t\t\t\t\tqueries.push(item.term);\n\t           \t\t\t\t\tqueriesHash[item.term]=true;\n\t           \t\t\t\t}\n\t           \t\t\t\tif (!docIndexHash[item.docIndex]) {\n\t           \t\t\t\t\tdocIndex.push(item.docIndex);\n\t           \t\t\t\t\tdocIndexHash[item.docIndex]=true;\n\t           \t\t\t\t}\n\t           \t\t\t});\n\t       \t        \tthis.setApiParams({\n\t       \t        \t\tdocId: undefined,\n\t       \t        \t\tdocIndex: docIndex,\n\t       \t        \t\tquery: queries\n\t       \t        \t});\n\t       \t        \tif (this.isVisible()) {\n\t       \t\t        \tthis.getStore().clearAndLoad({params: this.getApiParams()});\n\t       \t        \t}\n\t           \t\t },\n\t           \t\t scope: this\n\t           \t },\n                 afterrender: function(me) {\n                \t me.getView().on('expandbody', function( rowNode, record, expandRow, eOpts ) {\n                \t\t if (expandRow.textContent===\"\" || (eOpts && eOpts.force)) {\n                \t            var store = Ext.create(\"Voyant.data.store.Contexts\", {\n                \t            \tstripTags: \"all\",\n                \t            \tcorpus: me.getStore().getCorpus()\n                \t            });\n                \t            var data = record.getData();\n                \t            store.load({\n                \t            \tparams: {\n                    \t            \tquery: data.query,\n                    \t            \tdocIndex: data.docIndex,\n                    \t            \tposition: data.position,\n                    \t            \tlimit: 1,\n                    \t            \tcontext: me.getApiParam('expand')\n                \t            \t},\n                \t                callback: function(records, operation, success) {\n                \t                \tif (success && records.length==1) {\n                \t                \t\tdata = records[0].getData();\n                \t                \t\tExt.fly(operation.expandRow).down('.x-grid-rowbody').setHtml(data.left + \" <span class='word keyword'>\" + data.middle + \"</span> \" + data.right);\n                \t                \t}\n                \t                },\n                \t                expandRow: expandRow\n                \t            });\n                \t            \n                \t\t }\n                \t });\n                 }\n\n            }\n        });\n        \n        me.on(\"loadedCorpus\", function(src, corpus) {\n        \tif (this.hasCorpusAccess(corpus)==false) {\n        \t\tthis.mask(this.localize('limitedAccess'), 'mask-no-spinner');\n        \t}\n        \telse {\n        \t\tvar corpusTerms = corpus.getCorpusTerms({autoLoad: false});\n        \t\tcorpusTerms.load({\n        \t\t    callback: function(records, operation, success) {\n        \t\t    \tif (success && records.length>0) {\n        \t\t    \t\tthis.setApiParam(\"query\", [records[0].getTerm()]);\n        \t\t    \t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n        \t\t    \t}\n        \t\t    },\n        \t\t    scope: me,\n        \t\t    params: {\n        \t\t\t\tlimit: 1,\n        \t\t\t\tquery: this.getApiParam(\"query\"),\n        \t\t\t\tstopList: this.getApiParam(\"stopList\"),\n        \t\t\t\tforTool: 'contexts'\n        \t\t\t}\n            \t});\n        \t}\n        });\n        \n        me.on(\"query\", function(src, query) {\n        \tthis.setApiParam('query', query);\n        \tthis.getStore().clearAndLoad({params: this.getApiParams()});\n        }, me);\n        \n        me.on(\"documentTermsClicked\", function(src, documentTerms) {\n        \tvar documentIndexTerms = [];\n        \tdocumentTerms.forEach(function(documentTerm) {\n        \t\tdocumentIndexTerms.push({\n        \t\t\tterm: documentTerm.getTerm(),\n        \t\t\tdocIndex: documentTerm.getDocIndex()\n        \t\t});\n        \t});\n        \tthis.fireEvent(\"documentIndexTermsClicked\", this, documentIndexTerms);\n        });\n        \n        me.on(\"termsClicked\", function(src, terms) {\n        \tvar documentIndexTerms = [];\n        \tif (Ext.isString(terms)) {terms = [terms];}\n        \tterms.forEach(function(term) {\n        \t\tif (term.docIndex !== undefined) {\n            \t\tdocumentIndexTerms.push({\n            \t\t\tterm: term.term,\n            \t\t\tdocIndex: term.docIndex\n            \t\t});\n        \t\t}\n        \t});\n        \tif (documentIndexTerms.length > 0) {\n        \t\tthis.fireEvent(\"documentIndexTermsClicked\", this, documentIndexTerms);\n        \t}\n        });\n\n    \tme.callParent(arguments);\n     }\n     \n});","Ext.define('Voyant.panel.CorpusCollocates', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpuscollocates',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tcontext: 5,\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tsort: 'contextTermRawFreq'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.isVisible()) {\n    \t\t\tthis.loadFromApis();\n    \t\t}\n    \t});\n    \t\n    \tif (config.embedded) {\n//    \t\tvar cls = Ext.getClass(config.embedded).getName();\n//    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n//    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus())\n//    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(term.get(\"term\"));\n        \t\t})\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.loadFromApis();\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentsClicked\", function(src, documents) {\n    \t\tvar docIds = [];\n    \t\tdocuments.forEach(function(doc) {docIds.push(doc.get('id'))});\n    \t\tthis.setApiParams({\n    \t\t\tdocId: docIds,\n    \t\t\tdocid: undefined,\n    \t\t\tquery: undefined\n    \t\t})\n    \t\tif (this.isVisible()) {\n        \t\tthis.loadFromApis();\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.loadFromApis()}\n    \t}, this)\n    \t\n    \tthis.on(\"query\", function(src, query) {\n    \t\tthis.setApiParam(\"query\", query);\n    \t\tthis.getStore().getProxy().setExtraParam(\"query\", query);\n    \t\tthis.loadFromApis();\n    \t}, this)\n    },\n    \n    loadFromApis: function() {\n    \tif (this.getStore().getCorpus()) {\n    \t\tif (this.getApiParam('query')) {\n    \t\t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n    \t\t}\n    \t\telse {\n\t\t\t\tvar corpusTerms = this.getStore().getCorpus().getCorpusTerms({\n\t\t\t\t\tleadingBufferZone: 0,\n\t\t\t\t\tautoLoad: false\n\t\t\t\t});\n        \t\tcorpusTerms.load({\n        \t\t    callback: function(records, operation, success) {\n        \t\t    \tif (success) {\n        \t\t    \t\tvar terms = [];\n        \t\t    \t\trecords.forEach(function(term) {\n        \t\t    \t\t\tterms.push(term.getTerm());\n        \t\t    \t\t})\n        \t\t    \t\tthis.getStore().getProxy().setExtraParam(\"query\", terms);\n        \t\t    \t\tthis.setApiParam('query', terms);\n        \t\t    \t\tthis.loadFromApis();\n        \t\t    \t}\n        \t\t    },\n        \t\t    scope: this,\n        \t\t    params: {\n        \t\t\t\tlimit: 10,\n        \t\t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t\t}\n            \t});\n\n    \t\t}\n    \t}\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusCollocatesBuffered\", {parentPanel: this});\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tvar terms = [];\n                    \t\tvar context = this.getApiParam(\"context\")\n                    \t\tselections.forEach(function(selection) {\n                    \t\t\tterms.push('\"'+selection.getKeyword()+\" \"+selection.getContextTerm()+'\"~'+context)\n                    \t\t})\n                    \t\tthis.getApplication().dispatchEvent('termsClicked', this, terms);\n                    \t},\n                    \tscope: this\n                    }\n                }\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, this.localize('context'), {\n                \txtype: 'slider',\n                \tminValue: 1,\n                \tvalue: 5,\n                \tmaxValue: 30,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('context'))\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam(\"context\", slider.getValue());\n\t\t\t\t\t\t\tme.loadFromApis();\n                \t\t}\n                \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"rawFreq\"),\n        \t\tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"termRawFreqTip\"),\n                sortable: true,\n                width: 'autoSize',\n                hidden: true\n            },{\n            \ttext: this.localize(\"contextTerm\"),\n            \tdataIndex: 'contextTerm',\n            \ttooltip: this.localize(\"contextTermTip\"),\n            \tflex: 1,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"contextTermRawFreq\"),\n            \ttooltip: this.localize(\"contextTermRawFreqTip\"),\n            \tdataIndex: 'contextTermRawFreq',\n            \twidth: 'autoSize',\n            \tsortable: true\n            }/*,{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                width: 120,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }*/],\n            \n            listeners: {\n\t\t\t\tscope: this,\n            \ttermsClicked: function(src, terms) {\n\t\t\t\t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n\t\t\t\t\t\tvar queryTerms = [];\n\t\t\t\t\t\tterms.forEach(function(term) {\n\t\t\t\t\t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n\t\t\t\t\t\t\telse if (term.term) {queryTerms.push(term.term);}\n\t\t\t\t\t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (queryTerms.length > 0) {\n\t\t\t\t\t\t\tthis.setApiParams({\n\t\t\t\t\t\t\t\tdocIndex: undefined,\n\t\t\t\t\t\t\t\tdocId: undefined,\n\t\t\t\t\t\t\t\tquery: queryTerms\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (this.isVisible()) {\n\t\t\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tif (this.getStore().getCorpus()) {\n\t\t\t\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined})\n\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined});\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n})","Ext.define('Voyant.widget.CorpusTermSummary', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.corpustermsummary',\n    statics: {\n        i18n: {\n        },\n        api: {\n            stopList: 'auto',\n            query: undefined,\n            limit: 5\n        }\n    },\n    config: {\n        corpus: undefined,\n        record: undefined, // Voyant.data.model.CorpusTerm\n        collocatesStore: undefined,\n        correlationsStore: undefined,\n        phrasesStore: undefined,\n        documentTermsStore: undefined\n    },\n    cls: 'corpus-term-summary',\n\n    constructor: function(config) {\n        if (config.record === undefined) {\n            console.warn('CorpusTermSummary: no config.record!');\n            return false;\n        }\n        \n        Ext.apply(this, {\n            items: {\n                itemId: 'main',\n                minHeight: 200,\n                scrollable: true,\n                margin: 5\n            },\n            dockedItems: {\n                dock: 'bottom',\n                xtype: 'toolbar',\n                items: {\n                    fieldLabel: this.localize('items'),\n                    labelWidth: 40,\n                    width: 120,\n                    xtype: 'slider',\n                    increment: 5,\n                    minValue: 5,\n                    maxValue: 59,\n                    listeners: {\n                        boxready: function(slider) {\n                            slider.setValue(this.getApiParam('limit'));\n                        },\n                        changecomplete: function(slider, newvalue) {\n                            this.setApiParam('limit', newvalue);\n                            this.loadStuff();\n                        },\n                        scope: this\n                    }\n                }\n            },\n            listeners: {\n                boxready: function() {\n                    this.body.on('click', function(e) {\n                        var target = e.getTarget(null, null, true);\n                        if (target && target.dom.tagName == 'A') {\n                            if (target.hasCls('corpus-type')) {\n                                this.dispatchEvent('termsClicked', this, [target.getHtml()]);\n                            }\n                        }\n                    }, this, {stopPropagation: true});\n                    \n                    this.getDockedItems().forEach(function(i) {\n                       i.getEl().on('click', null, this, {stopPropagation: true}); // stop owner container from receiving clicks\n                    });\n                    \n                    this.loadStuff();\n                },\n                scope: this\n            }\n        });\n        \n        Ext.applyIf(config, {\n            title: this.localize('title')+config.record.getTerm()\n        });\n\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n        var corpus = this.getRecord().store.getCorpus();\n        this.setCorpus(corpus);\n\n        this.setApiParam('query', this.getRecord().getTerm());\n        \n        this.setCollocatesStore(Ext.create('Voyant.data.store.CorpusCollocates', { corpus: corpus }));\n        this.setCorrelationsStore(Ext.create('Voyant.data.store.TermCorrelations', { corpus: corpus }));\n        this.setPhrasesStore(Ext.create('Voyant.data.store.CorpusNgrams', { corpus: corpus }));\n        this.setDocumentTermsStore(Ext.create('Voyant.data.store.DocumentTerms', { corpus: corpus }));\n        \n    },\n\n    loadStuff: function() {\n        this.getComponent('main').removeAll();\n        \n        var docIndexes = [];\n        for (var i = 0; i < this.getCorpus().getDocumentsCount(); i++) {\n            docIndexes[i] = i;\n        }\n        this.getComponent('main').add({\n            xtype: 'container',\n            cls: 'section',\n            layout: 'hbox',\n            align: 'bottom',\n            items: [{\n                xtype: 'container',\n                html: '<div class=\"header\">'+this.localize('distribution')+'</div>'\n            },{\n                itemId: 'distLine',\n                xtype: 'sparklineline',\n                values: [],\n                height: 20,\n                width: 200\n            }],\n            listeners: {\n                afterrender: function(container) {\n                    container.mask(this.localize('loading'));\n                    // TODO make distribution bins reflective of doc sizes\n                    this.getDocumentTermsStore().load({\n                        params: {\n                            query: this.getApiParam('query'),\n                            docIndex: docIndexes,\n                            withDistributions: true,\n                            bins: parseInt(this.getApiParam('limit'))*2\n                        },\n                        callback: function(records, op, success) {\n                            if (success && records && records.length>0) {\n                                var arrays = records.map(function(r) { return r.getDistributions(); });\n                                var values = arrays.reduce(function(a,b) { return a.concat(b); });\n                                this.down('#distLine').setValues(values);\n                                container.unmask();\n                            }\n                        },\n                        scope: this\n                    });\n                },\n                scope: this\n            }\n        });\n        \n        this.addSection(\n            this.localize('collocates'), this.getCollocatesStore(), this.getApiParams(),\n            '<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{term}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>',\n            function(r) {\n                return {term: r.getContextTerm(), val: r.getContextTermRawFreq()}\n            }\n        );\n        \n        this.addSection(\n            this.localize('correlations'), this.getCorrelationsStore(), this.getApiParams(),\n            '<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{term}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>',\n            function(r) {\n                return {term: r.get('source-term'), val: r.get('source').rawFreq}\n            }\n        );\n        \n        this.addSection(\n            this.localize('phrases'), this.getPhrasesStore(), Ext.apply({minLength: 3, sort: 'length'}, this.getApiParams()),\n            '<tpl for=\".\"><div>&ldquo;{phrase}&rdquo;</div></tpl>',\n            function(r) {\n                return {phrase: r.getTerm()}\n            }\n        );\n    },\n    \n    addSection: function(title, store, params, template, mapping) {\n        return this.getComponent('main').add({\n            xtype: 'container',\n            html: '<div class=\"header\">'+title+'</div>',\n            cls: 'section',\n            listeners: {\n                afterrender: function(container) {\n                    container.mask(this.localize('loading'));\n                    store.load({\n                        params: params,\n                        callback: function(records, op, success) {\n\t\t\t\t\t\t\tcontainer.unmask();\n                            if (success && records && records.length>0) {\n                                Ext.dom.Helper.append(container.getTargetEl().first().first(),\n                                    new Ext.XTemplate('<div class=\"contents\">'+template+'</div>').apply(records.map(mapping))\n                                );\n                            }\n                        }\n                    });\n                },\n                scope: this\n            }\n        });\n    }\n});\n","Ext.define('Voyant.panel.Correlations', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.correlations',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tstopList: 'auto',\n    \t\tminInDocumentsCountRatio: 100\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},\n        \t{xtype: 'categoriesoption'}\n        ]\n    },\n    constructor: function() {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, { \n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n    \t\tstore: Ext.create(\"Voyant.data.store.TermCorrelationsBuffered\", {\n            \tparentPanel: this\n\t        }),\n\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"source\"),\n    \t\t\ttooltip: this.localize(\"sourceTip\"),\n        \t\tdataIndex: 'source-term',\n        \t\tsortable: false\n    \t\t},{\n                xtype: 'widgetcolumn',\n                tooltip: this.localize(\"trendTip\"),\n                width: 100,\n                dataIndex: 'source-distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                },\n                text: '\u2190'\n            },{\n                xtype: 'widgetcolumn',\n                tooltip: this.localize(\"trendTip\"),\n                width: 100,\n                dataIndex: 'target-distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                },\n                text: '\u2192',\n                align: 'right'\n            },{\n    \t\t\ttext: this.localize(\"target\"),\n    \t\t\ttooltip: this.localize(\"targetTip\"),\n        \t\tdataIndex: 'target-term',\n        \t\tsortable: false\n    \t\t},{\n    \t\t\ttext: this.localize(\"correlation\"),\n    \t\t\ttooltip: this.localize(\"correlationTip\"),\n        \t\tdataIndex: 'correlation'\n    \t\t},{\n    \t\t\ttext: this.localize(\"significance\"),\n    \t\t\ttooltip: this.localize(\"significanceTip\"),\n        \t\tdataIndex: 'significance'\n    \t\t}],\n    \t\t\n\n            listeners: {\n            \tscope: this,\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tthis.setApiParams({docIndex: undefined, docId: undefined});\n\t        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.CorpusTermCorrelations');\n\t        \t\tthis.getStore().load();\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.DocumentTermCorrelations');\n\t        \t\tthis.getStore().load();\n\t\t\t\t}\n\n            },\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                },{\n                    xtype: 'totalpropertystatus'\n                }, {\n                \txtype: 'tbspacer'\n                }, {\n                \txtype: 'tbtext',\n                \titemId: 'minInDocumentsCountRatioLabel',\n                \ttext: me.localize('minInDocumentsCountRatioLabel')\n                }, {\n        \t\t\txtype: 'slider',\n\t            \tincrement: 5,\n\t            \tminValue: 0,\n\t            \tmaxValue: 100,\n\t            \twidth: 75,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"minInDocumentsCountRatio\"))\n\t            \t\t\tslider.up('toolbar').getComponent(\"minInDocumentsCountRatioLabel\").setText(new Ext.XTemplate(me.localize(\"minInDocumentsCountRatioLabel\")).apply([this.getApiParam(\"minInDocumentsCountRatio\")]));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({minInDocumentsCountRatio: newvalue});\n\t            \t\t\tslider.up('toolbar').getComponent(\"minInDocumentsCountRatioLabel\").setText(new Ext.XTemplate(me.localize(\"minInDocumentsCountRatioLabel\")).apply([newvalue]));\n\t            \t\t\tthis.getStore().load();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }]\n        });\n        \n        me.on(\"loadedCorpus\", function(src, corpus) {\n        \tif (corpus.getDocumentsCount()==1) { // switch to documents mode\n        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.DocumentTermCorrelations');\n        \t}\n        \tif (this.isVisible()) {\n        \t\tthis.getStore().load();\n        \t}\n        });\n        \n    \tme.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.getStore().load();}\n    \t}, this)\n\n    \tme.on(\"query\", function(src, query) {\n        \tthis.setApiParam(\"query\", query);\n        \tthis.getStore().load();\n        }, me);\n        \n        me.callParent(arguments);\n     }\n     \n});","Ext.define('Voyant.panel.CorpusCreator', {\n\textend: 'Ext.form.Panel',\n\trequires: ['Ext.form.field.File'],\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpuscreator',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n\t\t\tcorpusSortInitialOrder: 'initial order',\n\t\t\tdtocIndexDoc: 'DToC Index Document'\n    \t},\n    \tapi: {\n    \t\tinputFormat: undefined,\n    \t\tlanguage: undefined,\n    \t\txmlDocumentsXpath: undefined,\n    \t\txmlGroupByXpath: undefined,\n    \t\txmlContentXpath: undefined,\n    \t\txmlTitleXpath: undefined,\n    \t\txmlAuthorXpath: undefined,\n    \t\txmlPubDateXpath: undefined,\n    \t\txmlPublisherXpath: undefined,\n    \t\txmlPubPlaceXpath: undefined,\n    \t\txmlKeywordsXpath: undefined,\n    \t\txmlCollectionXpath: undefined,\n    \t\txmlExtraMetadataXpath: undefined,\n    \t\thtmlGroupByQuery: undefined,\n    \t\thtmlDocumentsQuery: undefined,\n    \t\thtmlContentQuery: undefined,\n    \t\thtmlTitleQuery: undefined,\n    \t\thtmlAuthorQuery: undefined,\n    \t\thtmlPubDateQuery: undefined,\n    \t\thtmlPublisherQuery: undefined,\n    \t\thtmlPubPlaceQuery: undefined,\n    \t\thtmlKeywordsQuery: undefined,\n    \t\thtmlCollectionQuery: undefined,\n    \t\thtmlExtraMetadataQuery: undefined,\n    \t\t//jsonGroupByPointer: undefined,\n    \t\tjsonDocumentsPointer: undefined,\n    \t\tjsonContentPointer: undefined,\n    \t\tjsonTitlePointer: undefined,\n    \t\tjsonAuthorPointer: undefined,\n    \t\tjsonPubDatePointer: undefined,\n    \t\tjsonPublisherPointer: undefined,\n    \t\tjsonPubPlacePointer: undefined,\n    \t\tjsonKeywordsPointer: undefined,\n    \t\tjsonCollectionPointer: undefined,\n    \t\tjsonExtraMetadataPointer: undefined,\n    \t\ttokenization: undefined,\n    \t\tadminPassword: undefined,\n    \t\taccessPassword: undefined,\n    \t\tnoPasswordAccess: undefined,\n    \t\ttableDocuments: undefined,\n    \t\ttableContent: undefined,\n    \t\ttableTitle: undefined,\n    \t\ttableAuthor: undefined,\n    \t\ttitle: undefined,\n    \t\tsubTitle: undefined,\n    \t\tinputRemoveFrom: undefined,\n    \t\tinputRemoveFromAfter: undefined,\n    \t\tinputRemoveUntil: undefined,\n    \t\tinputRemoveUntilAfter: undefined,\n    \t\tsort: undefined,\n\t\t\tdtocIndexDoc: -1\n    \t}\n    },\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n        config = config || {};\n        var me = this;\n    \tthis.mixins['Voyant.panel.Panel'].constructor.call(this, \n    \t\t\tExt.apply(config, {\n    \t\t\t\tincludeTools: {\n    \t\t\t\t\tgear: true,\n    \t\t\t\t\thelp: true,\n    \t\t\t\t\tlanguage: this.getLanguageToolMenu()\n    \t\t\t\t}\n    \t\t\t})\n    \t);\n    \t\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\twidth: 800,\n    \t\tframe: true,\n    \t\tpadding: 10,\n    \t\tstyle: {\n    \t\t    borderColor: '#aaa',\n    \t\t    borderStyle: 'solid'\n    \t\t},\n    \t\tframeHeader: true,\n    \t\tlayout: {\n    \t\t\ttype: 'vbox',\n    \t\t\talign: 'stretch'\n    \t\t},\n\t    \tdockedItems: [{\n\t    \t\txtype: 'toolbar',\n                overflowHandler: 'scroller',\n                dock: 'bottom',\n    \t    \tbuttonAlign: 'right',\n//    \t    \tdefaultButtonUI : 'default',\n\t    \t\titems: [{\n\t    \t\t\ttext: me.localize('Open'),\n                    glyph: 'xf115@FontAwesome', // not visible\n\t    \t\t\ttooltip: me.localize('SelectExisting'),\n\t    \t\t\thidden: this.getCorpus()!=undefined,\n\t    \t\t\thandler: function() {\n\t    \t\t\t\tExt.create('Ext.window.Window', {\n\t    \t\t\t\t    title: me.localize('Open'),\n\t    \t\t\t\t    layout: 'fit',\n\t    \t\t\t\t    modal: true,\n\t    \t\t\t\t    items: {  // Let's put an empty grid in just to illustrate fit layout\n\t    \t\t\t\t        xtype: 'form',\n\t    \t\t\t\t        submitEmptyText: false,\n\t    \t\t\t\t        margin: '5,5,5,5',\n\t    \t\t\t\t        items: {\n\t    \t\t\t\t        \txtype: 'corpusselector'\n//\t    \t\t\t\t            xtype:'combo',\n//\t    \t\t\t\t            labelWidth: 150,\n//\t    \t\t\t\t            fieldLabel:'Choose a corpus:',\n//\t    \t\t\t\t            name:'corpus',\n//\t    \t\t\t\t            queryMode:'local',\n//\t    \t\t\t\t            store:[['shakespeare',\"Shakespeare's Plays\"],['austen',\"Austen's Novels\"]],\t\t\t\t            \n//\t    \t\t\t\t            forceSelection:true\n\t    \t\t\t\t        },\n\t    \t\t\t\t        buttons: [\n\t    \t\t\t\t        \t{\n\t    \t\t\t\t        \t\ttext: me.localize('Open'),\n\t    \t\t\t                    glyph: 'xf00c@FontAwesome',\n\t    \t\t\t\t        \t\thandler: function(btn) {\n\t    \t\t\t\t        \t\t\tvar form = btn.up('form').getForm();\n\t    \t\t\t\t        \t\t\tvar corpus = btn.up('form').getForm().getValues().corpus;\n\t    \t\t\t\t        \t\t\tif (corpus!='') {\n\t    \t\t\t\t        \t\t\t\tme.loadCorpus({corpus: corpus});\n\t\t    \t\t\t\t        \t\t\tbtn.up('window').close();\n\t    \t\t\t\t        \t\t\t}\n\t    \t\t\t\t        \t\t\telse {\n\t    \t\t\t\t    \t        \t\tExt.Msg.show({\n\t    \t\t\t\t    \t        \t\t    title: me.localize('SelectExisting'),\n\t    \t\t\t\t    \t        \t\t    message: me.localize('PleaseSelectExisting'),\n\t    \t\t\t\t    \t        \t\t    buttons: Ext.Msg.OK,\n\t    \t\t\t\t    \t        \t\t    icon: Ext.Msg.ERROR\n\t    \t\t\t\t    \t        \t\t});\n\t    \t\t\t\t        \t\t\t}\n\t    \t\t\t\t        \t\t},\n\t    \t\t\t\t        \t\tflex: 1\n\t    \t\t\t\t            },{\n\t    \t\t\t\t        \t\ttext: me.localize('cancel'),\n\t    \t\t\t                    glyph: 'xf00d@FontAwesome',\n\t    \t\t\t\t        \t\tflex: 1,\n\t    \t\t\t\t        \t\thandler: function(btn) {\n\t    \t\t\t\t        \t\t\tbtn.up('window').close();\n\t    \t\t\t\t        \t\t}\n\t    \t\t\t\t        \t}\n\t    \t\t\t\t        ]\n\t    \t\t\t\t    }\n\t    \t\t\t\t}).show();\n\t    \t\t\t}\n\t    \t\t},{\n    \t        \txtype: 'fileuploadfield',\n                    glyph: 'xf093@FontAwesome',\n    \t        \tname: 'upload',\n        \t    \tbuttonOnly: true,\n        \t    \thideLabel: true,\n\t\t            ui: 'default-toolbar',\n        \t    \tbuttonText: me.localize('Upload'),\n        \t    \tlisteners: {\n        \t    \t\trender: function(filefield) {\n        \t    \t\t\tfilefield.fileInputEl.dom.setAttribute('multiple', true);\n        \t\t        \tExt.tip.QuickTipManager.register({\n       \t\t                 target: filefield.getEl(),\n       \t\t                 text: me.localize('UploadLocal')\n       \t\t             \t});\n        \t            },\n        \t            beforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n        \t            change: function(filefield, value) {\n        \t            \tif (value) {\n            \t            \tvar form = filefield.up('form').getForm();\n            \t            \tif (form.isValid()) {\n            \t            \t\tvar files = filefield.fileInputEl.dom.files;\n            \t            \t\tvar badFilesRe = /\\.(png|gif|jpe?g|mp[234a]|mpeg|exe|wmv|avi|ppt|mpg|tif|wav|mov|psd|wma|ai|bmp|pps|aif|pub|dwg|indd|swf|asf|mbd|dmg|flv)$/i;\n            \t            \t\tvar goodFilesRe = /\\.(txt|pdf|html?|xml|docx?|rtf|pages|epub|odt|zip|jar|tar|gz|ar|cpio|bzip2|bz2|gzip|xlsx?)$/i;\n            \t            \t\tvar badFiles = [];\n            \t            \t\tvar unknownFiles = [];\n            \t            \t\tfor (var i = 0, len = files.length; i<len; i++) {\n            \t            \t\t\tvar filename = files[i].name;\n            \t            \t\t\tif (badFilesRe.test(filename)) {\n            \t            \t\t\t\tbadFiles.push(filename.split(\"/\").pop());\n            \t            \t\t\t}\n            \t            \t\t\telse if (!goodFilesRe.test(filename)) {\n            \t            \t\t\t\tunknownFiles.push(filename.split(\"/\").pop());\n            \t            \t\t\t}\n            \t            \t\t}\n            \t            \t\tif (badFiles.length>0 || unknownFiles.length>0) {\n            \t            \t\t\tvar file = filefield;\n            \t            \t\t\tExt.Msg.show({\n            \t            \t\t\t\ttitle: me.localize(\"fileTypesWarning\"),\n            \t            \t\t\t\ticon: Ext.MessageBox.ERROR,\n            \t            \t\t\t\tmessage: me.localize('fileTypesMessage')+'<ul>' +\n            \t            \t\t\t\t\t(badFiles.length > 0 ? ('<li>'+me.localize(\"badFiles\") + badFiles.slice(0, 5).join(\", \") + (badFiles.length>5 ? '\u2026' : '') + '</li>') : '') +\n            \t            \t\t\t\t\t(unknownFiles.length>0 ? ('<li>' +me.localize(\"unknownFiles\") + unknownFiles.slice(0, 5).join(\", \") + (unknownFiles.length>5 ? '\u2026' : '') +'</li>') : '')+\n            \t            \t\t\t\t\t'</ul>'+me.localize('sureContinue'),\n            \t            \t\t\t\tbuttons: Ext.Msg.YESNO,\n            \t            \t\t\t\tfn: function(btn) {\n            \t            \t\t\t        if (btn === 'yes') {\n            \t            \t\t\t        \tme.loadForm(form);\n            \t            \t\t\t        }\n            \t            \t\t\t        else {\n            \t            \t\t\t        \tfile.reset(); // make sure we can trigger a change next time\n            \t            \t\t\t        \tfile.fileInputEl.dom.setAttribute('multiple', true);\n            \t            \t\t\t        }\n            \t            \t\t\t    },\n            \t            \t\t\t\tscope: form\n            \t            \t\t\t});\n            \t            \t\t}\n            \t            \t\telse {\n            \t            \t\t\tme.loadForm(form);\n            \t            \t\t}\n            \t            \t}\n        \t            \t}\n        \t            }\n        \t    \t}\n\t    \t\t},'->', {\n\t    \t    \txtype: 'button',\n\t    \t    \tscale: 'large',\n        \t\t\tglyph: 'xf00d@FontAwesome',\n\t    \t    \ttext: this.localize('cancel'),\n\t    \t    \thidden: this.getCorpus()==undefined,\n\t    \t    \thandler: function(btn) {\n\t    \t        \tvar win = this.up(\"window\");\n\t    \t        \tif (win && win.isFloating()) {\n\t    \t        \t\twin.close();\n\t    \t        \t}\n\t    \t    \t}\n\t    \t    }, {\n\t    \t    \txtype: 'button',\n\t    \t    \tscale: 'large',\n                    glyph: 'xf00c@FontAwesome',\n\t    \t    \ttext: this.localize('reveal'),\n\t    \t    \tui: 'default',\n\t    \t    \twidth: 200,\n\t    \t    \thandler: function(btn) {\n\t    \t        \tvar input = btn.up('form').down('#input').getValue();\n\t    \t        \tif (input !== '') {\n\t    \t        \t\tvar api = me.getApiParams();\n\t    \t            \tdelete api.view;\n\t    \t            \tdelete api.stopList;\n\t    \t        \t\tif (api.inputFormat && input.trim().indexOf(\"<\")!==0) {\n\t    \t        \t\t\tExt.Msg.confirm(me.localize('error'), me.localize('errorNotXmlContinue'), function(buttonId) {\n\t    \t        \t\t\t\tif (buttonId=='yes') {\n\t\t\t\t    \t        \t\tme.loadCorpus(Ext.apply(api, {input: input}));\n\t    \t        \t\t\t\t}\n\t    \t        \t\t\t}, me);\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t\t    \t        \t\tme.loadCorpus(Ext.apply(api, {input: input}));\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        \telse {\n\t    \t        \t\tExt.Msg.show({\n\t    \t        \t\t    title: me.localize('noTextProvided'),\n\t    \t        \t\t    message: me.localize('pleaseProvideText'),\n\t    \t        \t\t    buttons: Ext.Msg.OK,\n\t    \t        \t\t    icon: Ext.Msg.ERROR\n\t    \t        \t\t});\n\t    \t        \t}\n\t    \t    \t}\n\t    \t    }]\n\t    \t}],\n\t    \titems: [{\n\t    \t\thtml: this.getInitialConfig().addTextLabel,\n\t    \t\thidden: this.getInitialConfig().addTextLabel==undefined\n\t    \t},{\n//\t    \t\tlayout: 'fit',\n\t    \t\theight: 100,\n    \t    \txtype: 'textareafield',\n    \t    \titemId: 'input',\n    \t    \temptyText: this.localize('emptyInput')\n\t    \t}]\n        });\n        \n        me.on(\"boxready\", function(panel) {\n        \tvar app = this.getApplication();\n        \tif (app.getAllowInput && app.getAllowInput()==\"false\") {\n        \t\tif (app.getNoAllowInputText && app.getNoAllowInputText().trim().length>0) {\n        \t\t\tExt.defer(function() {\n            \t\t\tvar parent = panel.up(\"container\");\n            \t\t\tparent.removeAll(); // input box and copyright message\n            \t\t\tparent.add({\n            \t    \t\tframe: false,\n            \t    \t\tpadding: 10,\n            \t    \t\tstyle: {\n            \t    \t\t    borderColor: '#aaa',\n            \t    \t\t    borderStyle: 'solid'\n            \t    \t\t},\n            \t\t\t\thtml: app.getNoAllowInputText()\n            \t\t\t})\n        \t\t\t}, 100);\n        \t\t} else {\n            \t\tpanel.hide();\n            \t\tExt.create('Ext.window.Window', {\n            \t\t    layout: 'fit',\n            \t\t    header: false,\n            \t\t    modal: true,\n            \t\t    bodyPadding: 10,\n            \t\t    items: {  // Let's put an empty grid in just to illustrate fit layout\n            \t\t        html: \"<p style='color: red;'>\"+panel.localize('noAllowInputMessage')+\"</p>\"\n            \t\t    }\n            \t\t}).show();\n        \t\t}\n        \t}\n        })\n\n        me.callParent(arguments);\n        \n    },\n    \n    loadForm: function(form) {\n    \tvar params = {tool: this.getCorpus() ? 'corpus.CorpusMetadata' : 'corpus.CorpusCreator'};\n    \tif (this.getCorpus()) {\n    \t\tExt.apply(params, {\n    \t\t\tcorpus: this.getCorpus().getId(),\n    \t\t\taddDocuments: true\n    \t\t})\n    \t};\n    \tvar apiParams = this.getApiParams();\n    \tdelete apiParams.view;\n    \tdelete apiParams.stopList;\n    \tExt.apply(params, apiParams);\n    \tvar view = this.getApplication().getViewport();\n\t\tview.mask(this.localize('uploadingCorpus'));\n\t\tform.submit({\n\t\t\turl: this.getTromboneUrl(),\n\t\t\tparams: params,\n\t\t\tfailure: function(form, action) { // we always fail because of content-type\n            \tview.unmask();\n\t\t\t\tif (action.result && (action.result.corpus || action.result.stepEnabledCorpusCreator)) {\n\t\t\t\t\tvar corpusParams = {corpus: action.result.corpus ? action.result.corpus.metadata.id : action.result.stepEnabledCorpusCreator.storedId};\n\t\t\t\t\tExt.applyIf(corpusParams, apiParams); // adding title & subTitle here\n\t\t\t\t\tthis.setCorpus(undefined)\n\t\t\t\t\tthis.loadCorpus(corpusParams);\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tthis.showResponseError(\"Unable to load corpus.\", action.response)\n\t\t\t\t}\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n    },\n   \n    loadCorpus: function(params) {\n    \tif (this.getCorpus()) {\n    \t\tExt.apply(params, {\n    \t\t\tcorpus: this.getCorpus().getId(),\n    \t\t\taddDocuments: true\n    \t\t})\n    \t};\n    \t\n    \tvar win = this.up(\"window\");\n    \tif (win && win.isFloating()) {\n    \t\twin.close();\n    \t}\n    \t\n\t\tthis.getApplication().loadCorpusFromParams(params);\n    },\n    \n    showOptionsClick: function(panel) {\n    \tvar me = panel;\n    \tif (me.optionsWin === undefined) {\n    \t\tme.optionsWin = Ext.create('Ext.window.Window', {\n    \t\t\ttitle: me.localize('gearWinTitle'),\n    \t\t\tcloseAction: 'hide',\n//    \t\t\twidth: 500,\n    \t\t\tlayout: 'fit',\n    \t\t\tbodyPadding: 10,\n    \t\t\tanchor: '100% 100%',\n//    \t\t\tshrinkWrap: 3,\n    \t\t\titems: [{\n    \t\t\t\txtype: 'form',\n    \t\t\t\tdefaultType: 'textfield',\n        \t\t\tmaxHeight: me.getApplication().getViewport().getHeight()-120,\n        \t\t\tscrollable: true,\n    \t\t\t\tfieldDefaults: {\n    \t\t\t\t\tlabelAlign: 'right',\n    \t\t\t\t\tlabelWidth: 110,\n    \t\t\t\t\twidth: 350\n    \t\t\t\t},\n    \t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t    fieldLabel: me.localize('inputFormat'),\n\t\t\t\t\t\t    labelWidth: 90, // try to align with fieldset\n\t\t\t\t\t\t    name: 'inputFormat',\n\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t    store:[['',me.localize('inputFormatAuto')],['dtoc','DToC: Dynamic Table of Contexts'],['TEI',\"TEI: Text Encoding Initative\"],['TEI',\"TEI Corpus\"],['RSS',\"Really Simple Syndication: RSS\"]],\n\t\t\t\t\t\t    value: '',\n\t\t\t\t\t\t    listeners: {\n\t\t\t\t\t\t    \tafterrender: {\n\t\t\t\t\t\t    \t\tfn: function(combo) {\n\t\t\t\t\t\t    \t\t\tvar inputFormat = this.getApiParam('inputFormat');\n\t\t\t\t\t\t    \t\t\tif (inputFormat) {\n\t\t\t\t\t\t    \t\t\t\tcombo.setValue(inputFormat);\n\t\t\t\t\t\t    \t\t\t}\n\t\t\t\t\t\t    \t\t},\n\t\t\t\t\t\t    \t\tscope: me\n\t\t\t\t\t\t    \t},\n\t\t\t\t\t\t\t\tchange: {\n\t\t\t\t\t\t\t\t\tfn: function(combo, newval, oldval) {\n\t\t\t\t\t\t\t\t\t\tvar dtocIndexDocField = combo.up('form').down('[name=dtocIndexDoc]');\n\t\t\t\t\t\t\t\t\t\tif (newval === 'dtoc') {\n\t\t\t\t\t\t\t\t\t\t\tdtocIndexDocField.show();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tdtocIndexDocField.hide();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: me\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'container',\n\t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('advancedOptionsText')).applyTemplate([me.getBaseUrl()+'docs/#!/guide/corpuscreator-section-xml'])+'</i></p>',\n\t\t\t\t\t\t\twidth: 375\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-titles' target='voyantdocs'>\"+me.localize('corpusOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('corpusTitle'),\n\t\t\t\t\t\t\t\t\tname: 'title'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('corpusSubTitle'),\n\t\t\t\t\t\t\t\t\tname: 'subTitle'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize(\"corpusSort\"),\n\t\t\t\t\t\t\t\t\tname: 'sort',\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('corpusSortAuto')],['TITLEASC',me.localize('corpusSortTitle')],['AUTHORASC',me.localize('corpusSortAuthor')],['PUBDATEASC',me.localize('corpusSortPubDate')],['NOCHANGE', me.localize('corpusSortInitialOrder')]],\n\t\t\t\t\t\t\t\t    value: '',\n\t\t\t\t\t\t\t\t    listeners: {\n\t\t\t\t\t\t\t\t    \tafterrender: {\n\t\t\t\t\t\t\t\t    \t\tfn: function(combo) {\n\t\t\t\t\t\t\t\t    \t\t\tvar inputFormat = this.getApiParam('sort');\n\t\t\t\t\t\t\t\t    \t\t\tif (inputFormat) {\n\t\t\t\t\t\t\t\t    \t\t\t\tcombo.setValue(inputFormat);\n\t\t\t\t\t\t\t\t    \t\t\t}\n\t\t\t\t\t\t\t\t    \t\t},\n\t\t\t\t\t\t\t\t    \t\tscope: me\n\t\t\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('dtocIndexDoc'),\n\t\t\t\t\t\t\t\t\tname: 'dtocIndexDoc',\n\t\t\t\t\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\t\t\t\t\tvalue: -1,\n\t\t\t\t\t\t\t\t\tminValue: -1,\n\t\t\t\t\t\t\t\t\tmaxValue: 99,\n\t\t\t\t\t\t\t\t\twidth: 180,\n\t\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-text' target='voyantdocs'>\"+me.localize('textOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"textOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveUntil'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveUntil'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveUntilAfter'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveUntilAfter'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveFrom'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveFrom'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveFromAfter'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveFromAfter'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-xml' target='voyantdocs'>\"+me.localize('xmlOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"xmlOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'xmlContentXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'xmlTitleXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'xmlAuthorXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'xmlDocumentsXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'xmlGroupByXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPubDateXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPublisherXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPubPlaceXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlKeywordsXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlCollectionXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlExtraMetadataXpath'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-html' target='voyantdocs'>\"+me.localize('htmlOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('htmlOptionsText')).applyTemplate([me.getBaseUrl()+'docs/#!/guide/corpuscreator-section-html'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'htmlContentQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'htmlTitleQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'htmlAuthorQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'htmlDocumentsQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'htmlGroupByQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPubDateQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPublisherQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPubPlaceQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlKeywordsQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlCollectionQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlExtraMetadataQuery'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-json' target='voyantdocs'>\"+me.localize('jsonOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('jsonOptionsText')).applyTemplate([me.getBaseUrl()+'docs/#!/guide/corpuscreator-section-json'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'jsonContentPointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'jsonTitlePointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'jsonAuthorPointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'jsonDocumentsPointer'\n\t\t\t\t\t\t\t\t},/*{ \n\t\t\t\t\t\t\t\t\t// groupBy is tricky because documents are combined in ways that may conflict \n\t\t\t\t\t\t\t\t\t// with the other extraction options (especially since Pointer expects absolute\n\t\t \t\t\t\t\t\t\t// addresses from root). So for now we'll skip.\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'jsonGroupByPointer'\n\t\t\t\t\t\t\t\t},*/{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPubDatePointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPublisherPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPubPlacePointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonKeywordsPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonCollectionPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonExtraMetadataPointer'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-tables' target='voyantdocs'>\"+me.localize('tableOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('tableOptionsText')).applyTemplate([me.getBaseUrl()+'docs/#!/guide/corpuscreator-section-tables'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                        \t},{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableDocuments'),\n\t\t\t\t\t\t\t\t    name: 'tableDocuments',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('tableDocumentsTable')],['rows',me.localize('tableDocumentsRows')],['columns',me.localize(\"tableDocumentsColumns\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableNoHeadersRowText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize(\"tableNoHeadersRow\"),\n\t\t\t\t\t\t\t\t\txtype: 'checkboxfield',\n\t\t\t\t\t\t\t\t\tname: 'tableNoHeadersRow',\n\t\t\t\t\t\t\t\t\tinputValue: \"true\"\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableContentText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableContent'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableContent'\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableMetadataText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableAuthor'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableAuthor'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableTitle'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableTitle'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-processing' target='voyantdocs'>\"+me.localize('processingOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        items: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    fieldLabel: me.localize(\"language\"),\n\t\t\t\t\t\t\t\t    name: 'language',\n\t\t\t\t\t\t\t\t    queryMode:'local', //?\n\t\t\t\t\t\t\t\t    store:[['',me._localizeClass(Voyant.widget.StopListOption, \"auto\")],['cn',me._localizeClass(Voyant.widget.StopListOption, \"cn\")],['bo',me._localizeClass(Voyant.widget.StopListOption, \"bo\")],['grc',me._localizeClass(Voyant.widget.StopListOption, \"grc\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    fieldLabel: me.localize('tokenization'),\n\t\t\t\t\t\t\t\t    name: 'tokenization',\n\t\t\t\t\t\t\t\t    queryMode:'local', //?\n\t\t\t\t\t\t\t\t    store:[['',me.localize('tokenizationAuto')],['wordBoundaries',me.localize(\"tokenizationWordBoundaries\")],['whitespace',me.localize(\"tokenizationWhitespace\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-access-management' target='voyantdocs'>\"+me.localize('accessOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"accessOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('adminPassword'),\n\t\t\t\t\t\t\t\t\tname: 'adminPassword'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('accessPassword'),\n\t\t\t\t\t\t\t\t\tname: 'accessPassword'\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"accessModeWithoutPasswordText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('accessModeWithoutPassword'),\n\t\t\t\t\t\t\t\t    name: 'noPasswordAccess',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('accessModeNonConsumptive')],['none',me.localize(\"accessModeNone\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t]\n    \t\t\t}],\n    \t\t\tbuttons: [{\n    \t\t\t\ttext: me.localize('ok'),\n    \t\t\t\thandler: function(button, event) {\n    \t\t\t\t\tvar win = button.findParentByType('window');\n    \t\t\t\t\tvar form = win.down('form');\n    \t\t\t\t\tif (form.isValid()) {\n        \t\t\t\t\tvar params = form.getValues();\n        \t\t\t\t\tme.setApiParams(params);\n        \t\t\t\t\twin.hide();\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tme.showError({\n    \t\t\t\t\t\t\tmessage: me.localize(\"invalidForm\")\n    \t\t\t\t\t\t})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t},{\n    \t\t\t\ttext: me.localize('cancel'),\n    \t\t\t\thandler: function(button, event) {\n    \t\t\t\t\tbutton.findParentByType('window').hide();\n    \t\t\t\t}\n    \t\t\t}]\n    \t\t});\n    \t}\n    \tme.optionsWin.showAt((me.getApplication().getViewport().getWidth()/2)-200,10);\n    },\n    \n    validatePositiveNumbersCsv: function(val) {\n    \tval = val.trim();\n    \tif (val.length>0) {\n        \tif (/[^\\d,+ ]/.test(val)) {\n        \t\treturn this.localize(\"numbersCommasOnly\");\n        \t}\n        \tif (/\\d\\s+\\d/.test(val)) {\n        \t\treturn this.localize(\"numbersNeedCommas\");\n        \t}\n        \tvar numbers = val.split(/\\s*[,+]\\s*/), number;\n        \tfor (var i=0, len=numbers.length; i<len; i++) {\n        \t\tnumber = numbers[i];\n        \t\tif (number.length==0) {\n        \t\t\treturn this.localize(\"numberEmpty\")\n        \t\t}\n        \t\tif (parseInt(number)==0) {\n        \t\t\treturn this.localize(\"numberZero\")\n        \t\t}\n        \t}\n    \t}\n    \treturn true;\n\t}\n    \n});","Ext.define('Voyant.panel.DreamScape', {\n    extend: 'Ext.Panel',\n    xtype: 'dreamscape',\n    mixins: ['Voyant.panel.Panel'],\n    statics: {\n        i18n: {\n        },\n        api: {\n            stopList: 'auto',\n            hide: [],\n            author: undefined,\n            title: undefined,\n            keyword: undefined,\n            pubDate: undefined,\n            citiesMaxCount: 500,\n            minPopulation: 10000,\n            citiesMinFreq: 1,\n            connectionsMaxCount: 2500,\n            connectionsMinFreq: 1,\n            millisPerAnimation: 2000,\n            annotationsId: undefined,\n            source: undefined,\n            overridesId: undefined,\n            filterHasLowerCaseForm: true,\n            filterIsPersonName: true,\n            preferredCoordinates: undefined\n        },\n        glyph: 'xf124@FontAwesome'\n    },\n    config: {\n        map: undefined, // OL object, should be set during init\n        overlay: undefined, // OL object, should be set during init\n        contentEl: undefined, // EXTJS Element, where info is shown\n        isOpenLayersLoaded: false,\n        isArcLoaded: false,\n        animationDelay: 25, // determines the delay between animation calls\n        isProj4Loaded: false,\n        projection: undefined,\n        filterWidgets: new Ext.util.MixedCollection(),\n        drawInteraction: undefined,\n        drawMode: false,\n        //currentAnnotation: undefined,\n        baseLayers: {},\n        annotations: undefined, // set during init if any values are stored, shouldn't be looked up (getAnnotations) after init\n        annotationsLoadedIfAvailable: false, // check api and local storage,\n        overrides: {}\n    },\n\n    html: '<div class=\"map\"></div><div class=\"ticker\"></div>',\n\n    cls: 'dreamscape',\n\n    constructor: function(config) {\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        Ext.Loader.loadScript({\n            url: this.getBaseUrl()+\"resources/openlayers/ol.js\",\n            onLoad: function() {\n                // Utility function to get layer by id\n                if (ol.Map.prototype.getLayer === undefined) {\n                    ol.Map.prototype.getLayer = function (id) {\n                        var layer = undefined;\n                        this.getLayers().forEach(function(lyr) {\n                            if (id === lyr.get('id')) {\n                                layer = lyr;\n                            }\n                        });\n                        return layer;\n                    }\n                }\n                this.setIsOpenLayersLoaded(true);\n            },\n            scope: this\n        });\n        Ext.Loader.loadScript({\n            url: this.getBaseUrl()+\"resources/dreamscape/arc.js\",\n            onLoad: function() {\n                this.setIsArcLoaded(true);\n            },\n            scope: this\n        });\n        Ext.Loader.loadScript({\n            url: \"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js\",\n            onLoad: function() {\n                this.setIsProj4Loaded(true);\n            },\n            scope: this\n        });\n        var annotationsId = this.getApiParam(\"annotationsId\");\n        if (annotationsId) {\n            var me = this;\n            Ext.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    retrieveResourceId: annotationsId\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data.storedResource.resource) {\n                    var annotations = Ext.JSON.decode(data.storedResource.resource)\n                    if (Ext.isString(annotations)) {\n                        annotations = Ext.JSON.decode(annotations);\n                        me.setAnnotations(annotations)\n                    }\n                }\n                if (!me.getAnnotations()) {\n                    me.showError(me.localize(\"annotationsLoadFailed\"));\n                }\n                me.setAnnotationsLoadedIfAvailable(true);\n            }, function(response) {\n                me.showResponseError(me.localize(\"annotationsLoadFailed\"), response);\n                me.setAnnotationsLoadedIfAvailable(true);\n            });\n        } else {\n            this.setAnnotationsLoadedIfAvailable(true);\n        }\n    },\n    initComponent: function() {\n        var me = this;\n        this.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n        var hide = this.getApiParam(\"hide\");\n        if (Ext.isString(hide)) {\n            hide = hide.split(',');\n            this.setApiParam('hide');\n        }\n        var iconBase = this.getApplication().getBaseUrl()+\"resources/dreamscape/\";\n        Ext.apply(this, {\n            title: this.localize('title'),\n            bodyBorder: true,\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                itemId: 'bottomToolbar',\n                overflowHandler: 'scroller',\n                items: [\n                    {\n                        text: this.localize('display'),\n                        tooltip: this.localize('displayTip'),\n                        glyph: 'xf013@FontAwesome',\n                        menu: {\n                            defaults: { // these are intended for the radiogroups after the separator (and should be ignored by the menu items above the separator)\n                                xtype: 'menucheckitem',\n                                checkHandler: function(item, checked) {\n                                    var map = this.getMap(), id = item.getItemId();\n                                    this.getFilterWidgets().each(function(filter) {\n                                        map.getLayer(filter.getId()+\"-\"+id).setVisible(checked);\n                                    })\n                                    var hide = Ext.Array.from(this.getApiParam('hide'));\n                                    if (checked) {\n                                        hide = Ext.Array.remove(hide, id);\n                                    } else {\n                                        hide.push(id);\n                                        hide = Ext.Array.unique(hide);\n                                    }\n                                    this.setApiParam(\"hide\", hide);\n                                    item.getMenu().setDisabled(checked==false);\n                                },\n                                scope: this,\n                                checked: true\n                            },\n                            items: [{\n                                xtype: 'menuitem',\n                                text: this.localize('baseLayer'),\n                                tooltip: this.localize('baseLayerTip'),\n                                glyph: 'xf279@FontAwesome',\n                                menu: {\n                                    items: [{\n                                        xtype: 'radiogroup',\n                                        columns: 1,\n                                        vertical: true,\n                                        defaults: {\n                                            cls: 'map-menu-item',\n                                            handler: function(item, checked) {\n                                                if(checked){\n                                                    var panel = this;\n                                                    id = item.getItemId();\n                                                    var layer = this.getBaseLayers()[id];\n                                                    if (layer) {\n                                                        layer.setOpacity(1);\n                                                        this.getMap().getLayers().setAt(0, layer);\n                                                    }\n                                                    if(id == 'osm' || id == 'arcGIS') {\n                                                        this.getMap().getLayer(\"overlayLayer\").setVisible(false);\n                                                    } else {\n                                                        this.getMap().getLayer(\"overlayLayer\").setVisible(true);\n                                                    }\n                                                }\n                                            },\n                                            listeners: {\n                                                afterrender: function(item) {\n                                                    Ext.create('Ext.tip.ToolTip', {\n                                                        target: item,\n                                                        html: '<div class=\"map-menu-item-tooltip '+item.getItemId()+'\"></div>',\n                                                        anchor: 'right'\n                                                    });\n                                                }\n                                            },\n                                            scope: this\n                                        },\n                                        items: [\n                                            {\n                                                boxLabel: this.localize('watercolor'),\n                                                itemId: 'watercolor',\n                                                cls: ['map-menu-item','watercolor'],\n                                                checked: true\n                                            },{\n                                                boxLabel: this.localize('wms4326'),\n                                                cls: ['map-menu-item','wms4326'],\n                                                itemId: 'wms4326'\n                                            },{\n                                                boxLabel: this.localize('osm'),\n                                                cls: ['map-menu-item','osm'],\n                                                itemId: 'osm'\n                                            },{\n                                                boxLabel: this.localize('arcGIS'),\n                                                cls: ['map-menu-item','arcGIS'],\n                                                itemId: 'arcGIS'\n                                            }\n                                        ]\n                                    }]\n                                }\n                            },{\n                                xtype: 'menuitem',\n                                text: this.localize('projection'),\n                                tooltip: this.localize('projectionTip'),\n                                glyph: 'xf0ac@FontAwesome',\n                                menu: {\n                                    items: [{\n                                        xtype: 'radiogroup',\n                                        columns: 1,\n                                        vertical: true,\n                                        defaults: {\n                                            handler: function(item, checked) {\n                                                if(checked){\n                                                    var panel = this;\n                                                    id = item.getItemId();\n                                                    var view = undefined\n                                                    if (id === \"webMercatorProjection\") {\n                                                        this.setProjection(ol.proj.get('EPSG:3857'));\n                                                    } else if (id === \"mercatorProjection\") {\n                                                        this.setProjection(ol.proj.get('EPSG:4326'));\n                                                    } else if (id === \"gallPetersProjection\") {\n                                                        proj4.defs('cea',\"+proj=cea +lon_0=0 +lat_ts=45 +x_0=0 +y_0=0 +ellps=WGS84 +units=m +no_defs\");\n                                                        var gallPetersProjection = ol.proj.get('cea');\n                                                        this.setProjection(gallPetersProjection);\n                                                    } else if (id === \"sphereMollweideProjection\") {\n                                                        proj4.defs('ESRI:54009', '+proj=moll +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs');\n                                                        var sphereMollweideProjection = ol.proj.get('ESRI:54009');\n                                                        sphereMollweideProjection.setExtent([-18e6, -9e6, 18e6, 9e6]);\n                                                        this.setProjection(sphereMollweideProjection);\n                                                    }\n                                                    var newProjExtent = this.getProjection().getExtent();\n                                                    // If using Mercator projection, earth with is measured in degrees, otherwise it's in meters\n                                                    var earthWidth = this.getProjection() == ol.proj.get(\"EPSG:4326\") ? 360 : 40075016.68557849;\n                                                    var newView = new ol.View({\n                                                        projection: this.getProjection(),\n                                                        center: ol.extent.getCenter(newProjExtent || [0, 0, 0, 0]),\n                                                        maxResolution: earthWidth / panel.body.dom.offsetWidth,\n                                                        zoom: 0\n                                                    });\n                                                    var map = this.getMap();\n                                                    var layers = map.getLayers();\n                                                    layers.forEach(function(layer) {\n                                                        if(layer.getSource().getFeatures){\n                                                            var features = layer.getSource().getFeatures();\n                                                            features.forEach(function(feature){\n                                                                var newGeometry = feature.getGeometry().transform(map.getView().getProjection(), panel.getProjection());\n                                                                feature.setGeometry(newGeometry);\n                                                            })\n                                                        }\n                                                    });\n\n                                                    map.setView(newView);\n                                                }\n                                            },\n                                            listeners: {\n                                                afterrender: function(item) {\n                                                    Ext.create('Ext.tip.ToolTip', {\n                                                        target: item,\n                                                        html: '<div class=\"map-menu-item-tooltip '+item.getItemId()+'\"></div>',\n                                                        anchor: 'right'\n                                                    });\n                                                }\n                                            },\n                                            scope: this\n                                        },\n                                        items: [\n                                            {\n                                                boxLabel: this.localize('webMercatorProjection'),\n                                                itemId: 'webMercatorProjection',\n                                                cls: ['map-menu-item','webMercatorProjection'],\n                                                checked: true\n                                            },{\n                                                boxLabel: this.localize('mercatorProjection'),\n                                                cls: ['map-menu-item','mercatorProjection'],\n                                                itemId: 'mercatorProjection'\n                                            },{\n                                                boxLabel: this.localize('gallPetersProjection'),\n                                                cls: ['map-menu-item','gallPetersProjection'],\n                                                itemId: 'gallPetersProjection'\n                                            },{\n                                                boxLabel: this.localize('sphereMollweideProjection'),\n                                                cls: ['map-menu-item','sphereMollweideProjection'],\n                                                itemId: 'sphereMollweideProjection'\n                                            }\n                                        ]\n                                    }]\n\n                                }\n                            },'-',{\n                                text: this.localize('cities'),\n                                checked: Ext.Array.contains(hide, \"cities\")==false,\n                                itemId: 'cities',\n                                menu: {\n                                    defaults: {\n                                        labelAlign: 'right',\n                                        labelWidth: 140\n                                    },\n                                    items: [{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMaxCount'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('citiesMaxCount')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('citiesMaxCount', newVal);\n                                                    var currentCitiesCount = filter.getGeonames().getCitiesCount();\n                                                    if (newVal<oldVal || newVal<=currentCitiesCount) {\n                                                        this.filterUpdate(filter);\n                                                    } else if (filter.getGeonames().hasMoreCities()) {\n                                                        filter.loadGeonames()\n                                                    } else {\n                                                        cmp.setValue(currentCitiesCount); // will call change\n                                                        this.toastInfo(new Ext.XTemplate(this.localize(\"allNCitiesShown\")).apply([currentCitiesCount]))\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMinPopulation'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('minPopulation')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.setApiParam('minPopulation', newVal);\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMinFreq'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('citiesMinFreq')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('citiesMinFreq', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n                            },{\n                                text: this.localize('connections'),\n                                checked: Ext.Array.contains(hide, \"connections\")==false,\n                                itemId: 'connections',\n                                menu: {\n                                    defaults: {\n                                        labelWidth: 140,\n                                        labelAlign: 'right'\n                                    },\n                                    items: [{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('connectionsMaxCount'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('connectionsMaxCount')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('connectionsMaxCount', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('connectionsMinFreq'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('connectionsMinFreq')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('connectionsMinFreq', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n\n                            },{\n                                xtype: 'menucheckitem',\n                                checked: Ext.Array.contains(hide, \"animation\")==false,\n                                text: this.localize('animations'),\n                                itemId: 'animation',\n                                menu: {\n                                    defaults: {\n                                        labelWidth: 170,\n                                        labelAlign: 'right',\n                                        width: 280\n                                    },\n                                    items: [{\n                                        xtype: 'sliderfield',\n                                        fieldLabel: this.localize('millisPerAnimation'),\n                                        value: parseInt(this.getApiParam('millisPerAnimation')),\n                                        minValue: this.getAnimationDelay(),\n                                        maxValue: 10000,\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    filter.setMillisPerAnimation(newVal);\n                                                    filter.animate();\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n                            }]\n                        }\n                    }, '-', {\n                        text: this.localize('add'),\n                        itemId: 'addFilter',\n                        glyph: 'xf067@FontAwesome',\n                        handler: function(cmp) {\n                            var colors = this.getApplication().getColorPalette(this.getApiParam('palette'), true),\n                                color = colors[0]; // default to first\n\n                            // find an available color\n                            for (var i=0, len=colors.length; i<len; i++) {\n                                var hasMatch = false;\n                                this.getFilterWidgets().each(function(filter) {\n                                    if (filter.getColor()==colors[i]) {\n                                        hasMatch = true;\n                                        return false;\n                                    }\n                                })\n                                if (hasMatch==false) {\n                                    color = colors[i];\n                                    break;\n                                }\n                            }\n                            var filter = cmp.ownerCt.add({\n                                xtype: 'geonamesfilter',\n                                corpus: this.getCorpus(),\n                                color: color,\n                                listeners: {\n                                    removeFilterWidget: function(filter) {\n                                        var map = this.getMap(), id = filter.getItemId(), filters = this.getFilterWidgets();\n                                        [\"connections\",\"cities\",\"animation\"].forEach(function(layer) {\n                                            map.removeLayer(map.getLayer(id+\"-\"+layer));\n                                        })\n                                        filters.remove(filter);\n                                        if (filters.getCount()==0) { // we always want at least one filter\n                                            // simulate adding a filter\n                                            this.getDockedComponent('bottomToolbar').getComponent('addFilter').click();\n                                        }\n                                    },\n                                    filterUpdate: this.filterUpdate,\n                                    scope: this\n                                }\n                            })\n                            this.getFilterWidgets().add(filter.getId(), filter);\n\n                            var map = this.getMap();\n\n                            var connectionsLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-connections\",\n                                visible: true,\n                                opacity: 0.2,\n                                style: this.travelStyleFunction.bind(this),\n                                updateWhileAnimating: true, // optional, for instant visual feedback\n                                updateWhileInteracting: true // optional, for instant visual feedback\n                            });\n                            map.addLayer(connectionsLayer);\n\n                            var citiesLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-cities\",\n                                opacity: 0.5,\n                                style: this.cityStyleFunction.bind(this)\n                            });\n                            map.addLayer(citiesLayer);\n\n                            var animationLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-animation\",\n                                style:  this.animationStyleFunction.bind(this)\n                            });\n                            map.addLayer(animationLayer);\n                        },\n                        scope: this\n                    }]\n            }]\n        });\n\n        this.on(\"loadedCorpus\", function(src, corpus) {\n            this.tryInit();\n        }, this);\n\n        this.callParent();\n    },\n\n    tryInit: function() {\n        if (this.getIsOpenLayersLoaded() && this.getIsArcLoaded() && this.getIsProj4Loaded() && this.getAnnotationsLoadedIfAvailable()) {\n            var el = this.body.down('.map').setId(Ext.id());\n            /*\n            var overlayEl = this.body.down('.ol-popup');\n            var overlay = new ol.Overlay({\n                element: overlayEl.dom,\n                autoPan: true,\n                autoPanAnimation: {\n                    duration: 250\n                }\n            });\n            this.setOverlay(overlay);\n            */\n            var panel = this;\n            // Add a click handler to hide the popup\n            /*\n            var closer = overlayEl.down(\".ol-popup-closer\").dom;\n            closer.onclick = function() {\n                overlay.setPosition(undefined);\n                closer.blur();\n                panel.getMap().getLayer(\"preview\").getSource().clear();\n\n//                if(panel.getDrawMode()) {\n//                    panel.getDockedComponent('bottomToolbar').getComponent('annotate').click();\n//                }\n                return false;\n            };\n            */\n\n            var baseLayers = this.getBaseLayers();\n            baseLayers['wms4326'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.TileWMS({\n                    url: 'https://ahocevar.com/geoserver/wms',\n                    crossOrigin: '',\n                    params: {\n                        'LAYERS': 'ne:NE1_HR_LC_SR_W_DR',\n                        'TILED': true\n                    },\n                    projection: 'EPSG:4326'\n                })\n            });\n\n            baseLayers['watercolor'] =  new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.Stamen({\n                    //cacheSize: 2048,\n                    layer: 'watercolor',\n                    projection: \"EPSG:3857\"\n                })\n            });\n\n            baseLayers['osm'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.OSM({\n                    projection: \"EPSG:3857\"\n                })\n            });\n\n            baseLayers['arcGIS'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.TileArcGISRest({\n                    url: \"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer\",\n                    projection: \"EPSG:3857\"\n                })\n            });\n\n//            this.setContentEl(overlayEl.down('.popup-content'));\n            var map = new ol.Map({\n                layers: [\n                    baseLayers['watercolor'],\n\n                    new ol.layer.Tile({\n                        preload: Infinity,\n                        source: new ol.source.Stamen({\n                            cacheize: 2048,\n                            layer: 'toner-hybrid',\n                            projection: \"EPSG:3857\"\n                        }),\n                        id: 'overlayLayer'\n                    })\n                ],\n//                overlays: [overlay],\n                target: el.getId(),\n                loadTilesWhileInteracting: true,\n                view: new ol.View({\n                    center: [0, 0],\n                    maxResolution: 40075016.68557849 / panel.body.dom.offsetWidth,\n                    zoom: 0\n                })\n            });\n\n            map.on('singleclick', this.handleSingleClick, this);\n            // Add a click handler to the map to render the popup\n            map.on('singleclicking', function(event) {\n                var pixel = event.pixel;\n                var features = map.getFeaturesAtPixel(pixel);\n                if (features) {\n                \t\tfor (var i=0; i<features.length; i++) {\n                \t\t\tvar feature = features[i];\n                \t\t\tif (feature.get(\"type\")=='city') {\n                \t\t\t\tthis.handleLocationClick(feature);\n                \t\t\t}\n                \t\t}\n                \t\tvar feature = features[0];\n                \t\tdebugger\n                }\n                \n                if(features) {\n                    var foundFeature = false;\n                    features.forEach( function(feature) {\n                        if( feature.get(\"type\") === \"city\" && feature.get(\"selected\")) { // city\n                            panel.dispatchEvent(\"termsClicked\", panel, [feature.get(\"forms\").join(\"|\")])\n                            foundFeature = true;\n                        } else if (feature.get(\"type\") === \"connection\" && feature.get(\"selected\") && !foundFeature) { // connection\n                            panel.getFilterWidgets().each(function (filter) {\n                                var geonames = filter.getGeonames();\n                                if (geonames != null) {\n                                    var occurrences = geonames.getAllConnectionOccurrences(feature.get(\"source\"), feature.get(\"target\"));\n                                    var infos = \"<ul>\";\n                                    var docIndex = -1;\n                                    occurrences.forEach(function(occ) {\n                                        if(occ.docIndex != docIndex) {\n                                            docIndex = occ.docIndex;\n                                            infos += '<h4>' + panel.getCorpus().getDocument(docIndex).getFullLabel() + ':</h4>';\n                                        }\n                                        infos += '<li>'+ occ.source.left+'<a href=\"http://www.geonames.org/' + occ.source.id + '\" target=\"_blank\" docIndex='+occ.docIndex +' offset='+occ.source.position+\n                                            ' location='+occ.source.form + ' cityId=' + occ.source.id + ' coordinates=' + JSON.stringify(sourceCoordinates) + ' class=\"termLocationLink\">' + occ.source.form + '</a> '+occ.source.right + ' [...] ' +\n                                            occ.target.left+'<a href=\"http://www.geonames.org/' + occ.target.id + '\" target=\"_blank\" docIndex='+occ.docIndex+' offset='+occ.target.position+\n                                            ' location='+occ.target.form+ ' cityId=' + occ.target.id + ' coordinates=' + JSON.stringify(targetCoordinates) + ' class=\"termLocationLink\">' + occ.target.form + '</a> '+occ.target.right + '</li>';\n                                    });\n                                    var header = feature.get(\"text\");\n                                    infos += \"</ul>\";\n                                    panel.getContentEl().setHtml('<h3>' + header + '</h3>' + infos);\n                                    panel.getOverlay().setPosition(event.coordinate);\n                                    var links = Ext.select('.termLocationLink');\n\n//                                    function contextMenuListener(el) {\n//                                        el.addEventListener( \"contextmenu\", function(e) {\n//                                            e.preventDefault();\n//                                            panel.openContextMenu(e.layerX, e.layerY, el);\n//                                            return false;\n//                                        }, false);\n//                                    }\n\n                                    links.elements.forEach(function(link) {\n//                                        contextMenuListener(link);\n                                        link.onmouseover = function(){panel.showTermInCorpus(link.getAttribute(\"docIndex\"), link.getAttribute(\"offset\"), link.getAttribute('location'))};\n                                    });\n                                }\n                            });\n                            foundFeature = true\n                        } /*else if (feature.get(\"type\") === \"annotation\" && !foundFeature) { //annotation\n                            panel.setCurrentAnnotation(feature);\n                            panel.getContentEl().setHtml('<textarea class=\"annotation-text\" rows=\"5\" cols=\"60\">'+(feature.get(\"text\")?feature.get(\"text\"):\"\")+'</textarea>' +\n                                '<button class=\"saveAnnotation\">Save</button><button class=\"deleteAnnotation\">Delete</button>');\n                            panel.getOverlay().setPosition(event.coordinate);\n                            panel.getContentEl().down('.deleteAnnotation').dom.onclick = function() {panel.deleteAnnotation()};\n                            panel.getContentEl().down('.saveAnnotation').dom.onclick = function() {panel.saveAnnotation()};\n                            panel.getContentEl().down('.annotation-text').dom.focus();\n                        } */\n                    }, this);\n                }\n            });\n\n            // Layer for selected vector\n            var selectedLayer = new ol.layer.Vector({\n                map: map,\n                source: new ol.source.Vector({\n                    wrapX: false,\n                    useSpatialIndex: false // optional, might improve performance\n                }),\n                zIndex: 10,\n                selected: true,\n                style: function(feature) {\n                    if(feature.get(\"type\") === \"city\")\n                    {\n                        return panel.cityStyleFunction(feature, map.getView().getResolution());\n                    } else if(feature.get(\"type\") === \"connection\") {\n                        return panel.travelStyleFunction(feature, map.getView().getResolution());\n                    }\n                },\n                updateWhileAnimating: true, // optional, for instant visual feedback\n                updateWhileInteracting: true // optional, for instant visual feedback\n            });\n\n            // Layer for edit preview\n            var previewLayer = new ol.layer.Vector({\n                map: map,\n                source: new ol.source.Vector({\n                    wrapX: false,\n                    useSpatialIndex: false // optional, might improve performance\n                }),\n                preview: true,\n                zIndex: 15,\n                id: \"preview\",\n                style: function(feature) {\n                    if(feature.get(\"type\") === \"city\")\n                    {\n                        return panel.cityStyleFunction(feature, map.getView().getResolution());\n                    } else if(feature.get(\"type\") === \"connection\") {\n                        return panel.travelStyleFunction(feature, map.getView().getResolution());\n                    }\n                },\n                updateWhileAnimating: true, // optional, for instant visual feedback\n                updateWhileInteracting: true // optional, for instant visual feedback\n            });\n            map.addLayer(previewLayer);\n\n            // Add handler to update selected vector when mouse is moved\n            map.on('pointermove', function(event) {\n            \t\n            \t// set cursoe to pointer if we have a feature\n            \t  var pixel = map.getEventPixel(event.originalEvent);\n            \t  var hit = map.hasFeatureAtPixel(pixel);\n            \t  map.getViewport().style.cursor = hit ? 'pointer' : '';\n            \t  \n                if(!panel.getDrawMode()) {\n                    selectedLayer.getSource().clear();\n                    var coordinate = event.coordinate;\n                    var pixel = event.pixel;\n                    var features = map.getFeaturesAtPixel(pixel);\n                    if(features) {\n                        var i = 0;\n                        while(features[i].get(\"selected\")){\n                            i++;\n                            if (i === features.length) break;\n                        }\n                        if (i < features.length) {\n                            var feature = features[i];\n\n                            var baseTextStyle = {\n                                font: '12px Calibri,sans-serif',\n                                textAlign: 'center',\n                                offsetY: -15,\n                                fill: new ol.style.Fill({\n                                    color: [0,0,0,1]\n                                }),\n                                stroke: new ol.style.Stroke({\n                                    color: [255,255,255,0.5],\n                                    width: 4\n                                })\n                            };\n\n                            baseTextStyle.text = feature.get(\"text\");\n\n                            var textOverlayStyle = new ol.style.Style({\n                                text: new ol.style.Text(baseTextStyle),\n                                zIndex: 1\n                            });\n\n                            if (!(feature.get(\"type\") === \"annotation\")) {\n                                var selectedFeature = new ol.Feature({\n                                    text: feature.get(\"text\"),\n                                    geometry: feature.getGeometry(),\n                                    forms: feature.get(\"forms\"),\n                                    selected: true,\n                                    coordinates: feature.get(\"coordinates\"),\n                                    width: feature.get(\"width\"),\n                                    visible: feature.get(\"visible\"),\n                                    color: feature.get(\"color\"),\n                                    type: feature.get(\"type\"),\n                                    confidence: feature.get(\"confidence\"),\n                                    source: feature.get(\"source\"),\n                                    target: feature.get(\"target\"),\n                                    cityId: feature.get(\"cityId\")\n                                });\n                                selectedLayer.getSource().addFeature(selectedFeature);\n                            }\n                            var geometry = feature.getGeometry();\n                            var point = event.coordinate;\n                            var textFeature = new ol.Feature({\n                                geometry: new ol.geom.Point(point),\n                                selected: true\n                            });\n                            textFeature.setStyle(textOverlayStyle);\n                            selectedLayer.getSource().addFeature(textFeature);\n\n                            // Highlight all connection where selected city is source or target\n\n                            if(feature.get(\"type\") === \"city\") {\n                                var layers = panel.getMap().getLayers();\n                                layers.forEach(function (layer) {\n                                    var layerId = layer.get(\"id\");\n                                    if (layerId && layerId.indexOf(\"connections\") !== -1) {\n                                        connections = layer.getSource().getFeatures();\n                                        connections.forEach(function (connection) {\n                                            if(connection.get(\"target\") === feature.get(\"cityId\") || connection.get(\"source\") === feature.get(\"cityId\")) {\n                                                selectedLayer.getSource().addFeature(new ol.Feature({\n                                                    geometry: connection.getGeometry(),\n                                                    selected: true,\n                                                    coordinates: connection.get(\"coordinates\"),\n                                                    width: connection.get(\"width\"),\n                                                    visible: connection.get(\"visible\"),\n                                                    color: connection.get(\"color\"),\n                                                    type: connection.get(\"type\")\n                                                }));\n                                            }\n                                        })\n                                    }\n                                })\n                            }\n                        }\n                    }\n                }\n            });\n            var source = new ol.source.Vector({wrapX: false});\n\n            var annotations = new ol.layer.Vector({\n                source: source,\n                id: \"annotations\"\n            });\n\n            var annotationsObj = this.getAnnotations();\n            if (annotationsObj) {\n                var geojson = new ol.format.GeoJSON();\n                var features = geojson.readFeatures(annotationsObj);\n                source.addFeatures(features);\n            }\n\n            map.addLayer(annotations);\n\n            this.setDrawInteraction(\n                new ol.interaction.Draw({\n                    source: source,\n                    type: \"Polygon\",\n                    freehand: true,\n                    alias: \"draw\"\n                })\n            );\n            this.getDrawInteraction().on('drawend', function (evt) {\n                evt.feature.set('type', 'annotation');\n//                panel.setCurrentAnnotation(evt.feature);\n                panel.editAnnotation(evt.feature);\n//                panel.getContentEl().setHtml('<textarea class=\"annotation-text\" rows=\"5\" cols=\"60\"></textarea>'+\n//                    '<button class=\"saveAnnotation\">Save</button><button class=\"deleteAnnotation\">Cancel</button>');\n//                panel.getContentEl().down('.deleteAnnotation').dom.onclick = function() {panel.deleteAnnotation()};\n//                panel.getContentEl().down('.saveAnnotation').dom.onclick = function() {panel.saveAnnotation()};\n//                panel.getOverlay().setPosition(evt.feature.getGeometry().getLastCoordinate());\n//                panel.getContentEl().down('.annotation-text').dom.focus();\n            });\n\n            /*\n            map.getViewport().addEventListener('contextmenu', function (e) {\n                e.preventDefault();\n                panel.openContextMenu(e.layerX, e.layerY);\n                return false;\n            }, false);\n            */\n\n            this.setMap(map);\n\n            var zoom = this.getTargetEl().down(\".ol-zoom\");\n            Ext.create('Ext.Button', {\n                glyph:'xf075@FontAwesome',\n                cls: 'annotate',\n                renderTo: this.getTargetEl().down(\".ticker\").parent(),\n                tooltip: this.localize('annotateTip'),\n                enableToggle: true,\n                toggleHandler: function(cmp, state) {\n                    if (state) {\n                        this.getMap().addInteraction(this.getDrawInteraction());\n                    } else {\n                        this.getMap().removeInteraction(this.getDrawInteraction());\n                    }\n                },\n                scope: this\n            })\n\n            // simulate adding a filter\n            this.getDockedComponent('bottomToolbar').getComponent('addFilter').click();\n        } else {\n            Ext.defer(this.tryInit, 500, this); // try again in a half second\n        }\n    },\n    \n    editAnnotation: function(feature) {\n    \t\tvar text = feature.get(\"text\"), buttons = [];\n    \t\tExt.Msg.show({\n    \t\t\ttitle: this.localize(\"editAnnotation\"),\n    \t\t\tmessage: this.localize(\"editAnnotationMessage\"),\n    \t\t\tbuttons: Ext.Msg.OKCANCEL,\n            multiline: true,\n            value: text,\n            scope: this,\n            callback: function(btn, val) {\n            \t\tif (btn=='ok') {\n            \t\t\tif (val==\"\") {\n            \t\t\t\tthis.getMap().getLayer(\"annotations\").getSource().removeFeature(feature);\n            \t\t\t} else {\n            \t\t\t\tfeature.set(\"text\", val);\n            \t\t\t}\n            \t        var geojson  = new ol.format.GeoJSON;\n            \t        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n            \t        var transformedFeatures = [];\n            \t        var projection = this.getProjection();\n            \t        features.forEach(function (feature) {\n            \t            transformedFeature = feature.clone();\n            \t            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            \t            transformedFeatures.push(transformedFeature);\n            \t        })\n            \t        var json = geojson.writeFeatures(transformedFeatures);\n            \t        this.storeAnnotations(json);\n            \t\t}\n            }\n    \t\t})\n\n    },\n\n    /*\n    deleteAnnotation: function() {\n        this.body.down('.ol-popup').down(\".ol-popup-closer\").dom.click();\n        this.getMap().getLayer(\"annotations\").getSource().removeFeature(this.getCurrentAnnotation());\n        var geojson  = new ol.format.GeoJSON;\n        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n        var transformedFeatures = [];\n        var projection = this.getProjection();\n        features.forEach(function (feature) {\n            transformedFeature = feature.clone();\n            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            transformedFeatures.push(transformedFeature);\n        })\n        var json = geojson.writeFeatures(transformedFeatures);\n        this.storeAnnotations(json);\n//        localStorage['annotations'] = JSON.stringify(json);\n    },\n    */\n\n    storeAnnotations: function(json) {\n        this.mask(\"storingAnnotations\");\n        var me = this;\n        Ext.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                storeResource: JSON.stringify(json)\n            },\n            scope: this\n        }).then(function(response) {\n            me.unmask();\n            var data = Ext.JSON.decode(response.responseText);\n            me.setApiParam(\"annotationsId\", data.storedResource.id);\n            me.toastInfo(me.localize('annotationsUpdated'));\n        }, function(response) {\n            me.unmask();\n            me.showResponseError(me.localize(\"annotationsUpdateFailed\"), response);\n        });\n    },\n\n    /*\n    saveAnnotation: function() {\n        this.getCurrentAnnotation().set(\"text\", this.getContentEl().down('.annotation-text').dom.value);\n        this.getOverlay().setPosition(undefined);\n//        if(this.getDrawMode()) {\n//            this.getDockedComponent('bottomToolbar').getComponent('annotate').click();\n//        }\n        var geojson  = new ol.format.GeoJSON;\n        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n        var transformedFeatures = [];\n        var projection = this.getProjection();\n        features.forEach(function (feature) {\n            transformedFeature = feature.clone();\n            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            transformedFeatures.push(transformedFeature);\n        })\n        var json = geojson.writeFeatures(transformedFeatures);\n        this.storeAnnotations(json);\n//        localStorage['annotations'] = JSON.stringify(json);\n    },\n    */\n\n    // Style for vector after animation\n    travelStyleFunction: function(feature, resolution) {\n\n        var stroke = new ol.style.Stroke({\n            color: feature.get('color'),\n            width: feature.get('width')\n        });\n\n        var styles = [\n            new ol.style.Style({\n                stroke: stroke\n            })];\n\n        // Add arrow at the end of vectors\n        var geometry = feature.getGeometry();\n        var end = geometry.getLastCoordinate();\n        var beforeEnd = geometry.getCoordinateAt(0.9);\n        var dx = end[0] - beforeEnd[0];\n        var dy = end[1] - beforeEnd[1];\n        var rotation = Math.atan2(dy, dx);\n\n        var lineStr1 = new ol.geom.LineString([end, [end[0] - 10 * resolution, end[1] + 10 * resolution]]);\n        lineStr1.rotate(rotation, end);\n        var lineStr2 = new ol.geom.LineString([end, [end[0] - 10 * resolution, end[1] - 10 * resolution]]);\n        lineStr2.rotate(rotation, end);\n\n        styles.push(new ol.style.Style({\n            geometry: lineStr1,\n            stroke: stroke\n        }));\n        styles.push(new ol.style.Style({\n            geometry: lineStr2,\n            stroke: stroke\n        }));\n\n        return styles;\n    },\n\n    // Style for cities\n    cityStyleFunction: function(feature, resolution) {\n        if(feature.get(\"visible\")) {\n            var diameter = Math.PI * 2 * feature.get(\"width\");\n            var confArc = feature.get(\"confidence\") ? diameter * feature.get(\"confidence\") : diameter;\n            return (new ol.style.Style({\n                image: new ol.style.Circle({\n                    radius: feature.get(\"width\"),\n                    fill: new ol.style.Fill({\n                        color: feature.get(\"color\")\n                    }),\n                    stroke: new ol.style.Stroke({\n                        lineDash: [confArc, diameter - confArc],\n                        color: 'rgb(255, 255, 255)',\n                        width: 2\n                    })\n                })\n            }));\n        } else {\n            return false;\n        }\n    },\n\n    // Style for vector during animation\n    animationStyleFunction: function (feature) {\n        return [new ol.style.Style({\n            stroke: new ol.style.Stroke({\n                color: feature.get(\"color\"),\n                width: 5\n            })\n        }), new ol.style.Style({\n            geometry: new ol.geom.Circle(feature.getGeometry().getFirstCoordinate()),\n            stroke: new ol.style.Stroke({\n                color: \"white\",\n                width: 10\n            })\n        }), new ol.style.Style({\n            geometry: new ol.geom.Circle(feature.getGeometry().getLastCoordinate()),\n            stroke: new ol.style.Stroke({\n                color: \"white\",\n                width: 10\n            })\n        })];\n    },\n\n    showTermInCorpus: function(docIndex, position, location) {\n        var term = Ext.create(\"Voyant.data.model.Context\", {\n            docIndex: docIndex,\n            position: position,\n            term: location\n        });\n        this.getApplication().dispatchEvent('termLocationClicked', this, [term]);\n    },\n   \n    /**\n     * Update all filters\n     */\n    reloadFilters: function() {\n        this.getFilterWidgets().each(function(filter) {\n        \t\tfilter.loadGeonames();\n        }, this);\n    },\n\n    filterUpdate: function(filter) {\n        var panel = this;\n        filter.clearAnimation();\n\n        var map = this.getMap(), color = filter.getColor();\n\n        var citiesMaxCount = parseInt(this.getApiParam(\"citiesMaxCount\"));\n\n        // determine max rawFreq for sizing\n        var max = 0;\n        filter.getGeonames().eachCity(function(city) {if (city.rawFreq>max) {max=city.rawFreq;}}, this, citiesMaxCount);\n\n        // generate cities\n        var layerSource = map.getLayer(filter.getId()+\"-cities\").getSource();\n\n        var hide = Ext.Array.from(this.getApiParam(\"hide\"));\n\n        layerSource.clear();\n        var minPopulation = parseInt(this.getApiParam(\"minPopulation\"));\n        var citiesMinFreq = parseInt(this.getApiParam(\"citiesMinFreq\"));\n        var validCitiesHash = {};\n\n        filter.getGeonames().eachCity(function(city) {\n\n            if ((!minPopulation || city.population>=minPopulation) && (!citiesMinFreq || city.rawFreq>=citiesMinFreq)) {\n                validCitiesHash[city.id]=true;\n                var coordinates = [parseFloat(city.lng), parseFloat(city.lat)]\n                var feature = new ol.Feature({\n\n                    geometry: new ol.geom.Point(coordinates).transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857')),\n                    text: city.label + \" (\"+city.rawFreq+\")\",\n                    description: city.label,\n                    color: color,\n                    selected: false,\n                    width: 3+ (Math.sqrt(city.rawFreq/max)*20),\n                    visible: true,\n                    coordinates: coordinates,\n                    forms: city.forms,\n                    cityId: city.id,\n                    type: \"city\",\n                    confidence: city.confidence ? city.confidence*100 : undefined\n                });\n                layerSource.addFeature(feature);\n            }\n        }, this, citiesMaxCount);\n\n        if (layerSource.getFeatures().length>0) {\n            map.getView().fit(layerSource.getExtent());\n        }\n\n        map.getLayer(filter.getId()+\"-cities\").setVisible(Ext.Array.contains(hide, \"cities\")==false);\n\n        layerSource = map.getLayer(filter.getId()+\"-connections\").getSource();\n        layerSource.clear();\n\n        if (Object.keys(validCitiesHash).length==0) {\n            this.toastInfo(\"No cities available for current criteria.\");\n        }\n\n        max = 0;\n        filter.getGeonames().eachConnection(function(connection) {\n            if (connection.rawFreq>max) {max=connection.rawFreq;}\n        }, this);\n\n        // we'll go through all collections to see if we have valid cities\n        var counter = 0,\n            maxConnectionsCount = parseInt(this.getApiParam('connectionsMaxCount')),\n            connectionsMinFreq = parseInt(this.getApiParam('connectionsMinFreq'));\n        filter.getGeonames().eachConnection(function(connection) {\n            if ((!connectionsMinFreq || connection.rawFreq>=connectionsMinFreq) && (!maxConnectionsCount || counter<maxConnectionsCount) && connection.source.id in validCitiesHash && connection.target.id in validCitiesHash && (!minPopulation || (connection.source.population>=minPopulation && connection.target.population>=minPopulation))) {\n                var arcGenerator = new arc.GreatCircle(\n                    {x: connection.source.lng, y: connection.source.lat},\n                    {x: connection.target.lng, y: connection.target.lat});\n                var arcLine = arcGenerator.Arc(100, {offset: 100});\n                var label = connection.source.label+\" -> \"+connection.target.label + \" (\"+connection.rawFreq+\")\"\n                arcLine.geometries.forEach(function(geometry) {\n                    var line = new ol.geom.LineString(geometry.coords);\n                    line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                    var feature = new ol.Feature({\n                        geometry: line,\n                        text: label,\n                        color: color,\n                        width: 3+ (Math.sqrt(connection.rawFreq/max)*10),\n                        source: connection.source.id,\n                        target: connection.target.id,\n                        type: \"connection\"\n                    });\n                    layerSource.addFeature(feature);\n                }, this);\n                counter++;\n            }\n        }, this);\n\n        map.getLayer(filter.getId()+\"-connections\").setVisible(Ext.Array.contains(hide, \"connections\")==false)\n\n        filter.animate();\n\n    },\n    \n    handleSingleClick: function(event) {\n        var features = this.getMap().getFeaturesAtPixel(event.pixel);\n        if (features) {\n        \t\tfor (var i=0; i<features.length; i++) {\n        \t\t\tvar feature = features[i];\n        \t\t\tvar featureType = feature.get(\"type\")\n        \t\t\tif (featureType=='city') {\n        \t\t\t\tthis.handleLocationClick(event, feature);\n        \t\t\t\tbreak;\n        \t\t\t} else if (featureType==\"connection\") {\n        \t\t\t\tthis.handleConnectionClick(feature, event.pixel[0], event.pixel[1]);\n        \t\t\t\tbreak;\n        \t\t\t}else if (featureType==\"annotation\") {\n        \t\t\t\tthis.editAnnotation(feature);\n        \t\t\t\tbreak;\n        \t\t\t}\n        \t\t}\n        }\n\n    },\n    \n    handleConnectionClick: function(feature, x, y) {\n\t\tExt.create('Ext.menu.Menu', {\n\t\t\titems: [{\n    \t\t\t\ttext: this.localize(\"viewConnections\"),\n    \t\t\t\ttooltip: this.localize(\"viewConnectionsTip\"),\n    \t\t\t\tglyph: 'xf02d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingConnections\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'corpus.Dreamscape',\n    \t\t                    corpus: this.getCorpus().getId(),\n    \t\t                    suppressLocations: true,\n    \t\t                    suppressConnections: true,\n    \t\t                    sourceId: feature.get(\"source\"),\n    \t\t                    targetId: feature.get(\"target\"),\n    \t\t                    context: 2,\n    \t\t                    limit: 25\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.dreamscape && data.dreamscape.connectionOccurrences) {\n    \t\t                \t\tvar out = \"<table style='font-size:smaller'>\";\n    \t\t                \t\tdata.dreamscape.connectionOccurrences.connectionOccurrences.forEach(function(occurrence) {\n    \t\t                \t\t\tout+=\"<tr><td style='text-align: right'>\"+occurrence.source.left+\"</td><td class='keyword' style='text-align: center'>\"+\n    \t\t                \t\t\t\toccurrence.source.term+\"</td><td>\"+occurrence.source.right+\"</td><td>\u2026</td><td style='text-align: right'>\"+occurrence.target.left+\"</td><td class='keyword' style='text-align: center'>\"+\n    \t\t                \t\t\t\toccurrence.target.term+\"</td><td>\"+occurrence.target.right+\"</td></tr>\";\n    \t\t                \t\t})\n    \t\t                \t\tout += \"</table>\";\n    \t\t                \t\tExt.Msg.alert(me.localize(\"occurrences\"), out);\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n                \t\t\treturn me.showError(me.localize(\"occurrencesNotLoaded\"))\t    \t\t                \t\t\t\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t}]\n\t\t}).showAt(x, y)\n    },\n    \n    \n    handleLocationClick: function(event, feature) {\n\t\tvar currentGeonameId = feature.get(\"cityId\");\n\t\tvar e = Ext.create('Ext.menu.Menu', {\n\t\t\titems: [{\n    \t\t\t\ttext: this.localize(\"viewOccurrences\"),\n    \t\t\t\ttooltip: this.localize(\"viewOccurrencesTip\"),\n    \t\t\t\tglyph: 'xf02d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingOccurrences\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'corpus.Dreamscape',\n    \t\t                    corpus: this.getCorpus().getId(),\n    \t\t                    suppressLocations: true,\n    \t\t                    suppressConnections: true,\n    \t\t                    suppressConnectionOccurrences: true,\n    \t\t                    locationId: currentGeonameId,\n    \t\t                    limit: 25\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.dreamscape && data.dreamscape.occurrences) {\n    \t\t                \t\tvar out = \"<table style='font-size:smaller'>\";\n    \t\t                \t\tdata.dreamscape.occurrences.occurrences.forEach(function(occurrence) {\n    \t\t                \t\t\tout+=\"<tr><td style='text-align: right'>\"+occurrence.left+\"</td><td class='keyword' style='text-align: center'>\"+occurrence.term+\"</td><td>\"+occurrence.right+\"</td></tr>\";\n    \t\t                \t\t})\n    \t\t                \t\tout += \"</table>\";\n    \t\t                \t\tExt.Msg.alert(me.localize(\"occurrences\"), out);\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n                \t\t\treturn me.showError(me.localize(\"occurrencesNotLoaded\"))\t    \t\t                \t\t\t\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t},{\n    \t\t\t\ttext: this.localize(\"openInVoyant\"),\n    \t\t\t\ttooltip: this.localize(\"openInVoyantTip\"),\n    \t\t\t\tglyph: 'xf08e@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.dispatchEvent('termsClicked', this, feature.get(\"forms\"));\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t},{\n    \t\t\t\ttext: this.localize(\"editLocation\"),\n    \t\t\t\ttooltip: this.localize(\"editLocationTip\"),\n    \t\t\t\tglyph: 'xf124@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingAlternatives\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'util.Geonames',\n    \t\t                    query: feature.get(\"forms\")\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.geonames && data.geonames.locations) {\n    \t\t                \t\tvar items = []; \t\t \n    \t\t                \t\tObject.values(data.geonames.locations.locations).forEach(function(location) {\n    \t\t                \t\t\titems.push({\n    \t\t                \t\t\t\tboxLabel: location.label+\" (\"+location.population+\")\",\n    \t\t                \t\t\t\tname: 'id',\n    \t\t                \t\t\t\tinputValue: location.id,\n    \t\t                \t\t\t\tchecked: location.id==currentGeonameId\n    \t\t                \t\t\t})\n    \t\t                \t\t})\n    \t\t                \t\tif (items.length==0) {\n    \t\t                \t\t\treturn me.showError(me.localize(\"editLocationNoLocationsFound\"))\n    \t\t                \t\t} else if (items.length==1 && items[0].inputValue==currentGeonameId) {\n    \t\t                \t\t\treturn me.showError(me.localize(\"editLocationNoAlternativesFound\"))\t    \t\t                \t\t\t\n    \t\t                \t\t}\n\t    \t\t                \tExt.create('Ext.window.Window', {\n\t\t\t\t\t\t\t\ttitle: me.localize(\"editLocation\"),\n\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t        xtype: 'radiogroup',\n\t\t\t\t\t\t\t\t        columns: 1,\n\t\t\t\t\t\t\t\t        vertical: true,\n\t\t\t\t\t\t\t\t        items: items\n\t\t\t\t\t\t\t\t    }],\n\t\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\t\t\t\t\ttext: me.localize(\"cancel\"),\n\t\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t\t                glyph: 'xf00d@FontAwesome',\n\t\t\t\t\t\t        \t\t\tflex: 1,\n\t\t\t\t\t\t        \t\t\thandler: function(btn) {\n\t\t\t\t\t\t        \t\t\t\tbtn.up('window').destroy();\n\t\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\ttext: me.localize(\"confirmTitle\"),\n\t\t\t\t\t\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t\t\t\t\t            \t\t\tflex: 1,\n\t\t\t\t\t            \t\t\thandler: function(btn) {\n\t\t\t\t\t            \t\t\t\tvar newId = btn.up(\"form\").getValues().id;\n\t\t\t\t\t            \t\t\t\tif (newId && newId!=currentGeonameId) {\n\t\t\t\t\t    \t\t\t\t\t\t\tvar config = {};\n\t\t\t\t\t    \t\t\t\t\t\t\tconfig[currentGeonameId] = newId;\n\t\t\t\t\t    \t\t\t\t\t\t\tme.appendOverrides(config);\n\t\t\t\t\t            \t\t\t\t}\n\t\t\t\t\t\t        \t\t\t\tbtn.up('window').destroy();\n\t\t\t\t\t            \t\t\t}\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).show();\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n    \t\t                me.showResponseError(me.localize(\"editLocationServerError\"), response);\n\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t},{\n    \t\t\t\ttext: this.localize(\"removeLocation\"),\n    \t\t\t\ttooltip: this.localize(\"removeLocationTip\"),\n    \t\t\t\tglyph: 'xf00d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tExt.Msg.confirm(\n\t    \t\t\t\t\tthis.localize(\"removeLocationConfirmTitle\"),\n\t    \t\t\t\t\tthis.localize(\"removeLocationConfirm\"),\n\t    \t\t\t\t\tfunction(btn) {\n\t    \t\t\t\t\t\tif (btn==\"yes\") {\n\t    \t\t\t\t\t\t\tvar config = {};\n\t    \t\t\t\t\t\t\tconfig[currentGeonameId] = \"\";\n\t    \t\t\t\t\t\t\tthis.appendOverrides(config);\n\t    \t\t\t\t\t\t}\n\t    \t\t\t\t\t},\n\t    \t\t\t\t\tthis\n    \t\t\t\t\t)\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t}    \t\t\t\t\n\n\t\t\t],\n\t\t\tlisteners: {\n\t\t\t\tfocusleave : function(menu) {\n\t\t\t\t\tmenu.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}).showAt(event.pixel[0], event.pixel[1])    \t\t\n    },\n    \n    appendOverrides: function(config, isAll) {\n    \t\t// if we have overridesId defined but we haven't loaded all IDs yet\n    \t\tif (this.getApiParam(\"overridesId\") && !isAll) {\n    \t\t\tvar me = this;\n    \t\t\tExt.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    retrieveResourceId: this.getApiParam(\"overridesId\")\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data && data.storedResource && data.storedResource.resource) {\n                \t\tvar newConfig = Ext.decode(data.storedResource.resource);\n                \t\tExt.apply(newConfig, config);\n                \t\t// call again, this time specifying that we have all\n                \t\tme.appendOverrides(newConfig, true);\n                } else {\n                    me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n                }\n            \t\n            }, function(response) {\n                me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n            });\n    \t\t} else {\n    \t\t\tvar me = this;\n    \t\t\tExt.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    storeResource: Ext.encode(config)\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data && data.storedResource && data.storedResource.id) {\n                    me.setApiParam(\"overridesId\", data.storedResource.id);\n                    me.reloadFilters();\n                } else {\n                    me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n                }\n            }, function(response) {\n                me.showResponseError(me.localize(\"overidesStorageError\"), response);\n            });\n    \t\t}\n    }    \n\n});\n\nExt.define('Voyant.widget.GeonamesFilter', {\n    extend: 'Ext.Button',\n    xtype: 'geonamesfilter',\n    mixins: ['Voyant.util.Localization'],\n    statics: {\n        i18n: {\n            filter: 'Filter',\n            authorLabel: 'authors',\n            titleLabel: 'titles',\n            keywordLabel: 'full text',\n            pubDateLabel: \"dates\",\n            loading: \"Loading geographical information\u2026\",\n//            loadedAll: \"All available cities and connections have been loaded (see options under the <i>Show</i> menu in the toolbar).\",\n//            loadedSome: \"Loaded {currentCitiesCount} of {totalCitiesCount} available locations and {currentConnectionsCount} of {totalConnectionsCount} available connections (see options under the <b>Show</b> menu in the toolbar).\",\n//            disclaimer: \"Please note that geographical information is generated automatically and may be inaccurate (<a href='{url}' target='_blank'>more information</a>).</p>\",\n            disclaimer: \"This is an experimental tool and the accuracy of the data is variable (<a href='{url}' target='_blank'>see help</a>).\",\n            noDataForField: \"No data seems to be available for this field so it will be disabled.\",\n            close: \"Close\"\n        }\n    },\n    config: {\n        corpus: undefined, // used by querysearchfields among other things\n        geonames: undefined,\n        color: \"#f00\",\n        timeout: undefined,\n        currentConnectionOccurrence: undefined,\n        animationLayer: undefined,\n        millisPerAnimation: 2000,\n        stepByStepMode: false,\n        keepAnimationInFrame: false\n    },\n    constructor: function(config) {\n        config = config || {};\n        var geonames = new Voyant.data.util.Geonames({\n            corpus: config.corpus\n        });\n        this.setGeonames(geonames);\n        var me = this;\n        Ext.applyIf(config,\n            {\n                tooltip: this.localize('filterTip'),\n                style: \"background-color: white; color: \"+config.color,\n                glyph: 'xf0b0@FontAwesome',\n                menu: {\n                    defaults: {\n                        xtype: 'querysearchfield',\n                        labelWidth: 60,\n                        labelAlign: 'right',\n                        width: 250,\n                        maxWidth: 250,\n                        padding: 2,\n                        listeners: { // don't set scope to this so that load keeps the widget scope\n                            change: function(cmp, vals) {\n                                me.loadGeonames();\n                            },\n                            load: function(store, records, success, operation) {\n                                if (records.length==0 && operation.getParams().query==\"\") {\n                                    Ext.Msg.show({\n                                        buttonText: {ok: me.localize('close')},\n                                        icon: Ext.MessageBox.INFO,\n                                        message: me.localize(\"noDataForField\"),\n                                        buttons: Ext.Msg.OK\n                                    });\n                                    this.disable();\n                                }\n                            }\n                        }\n\n                    },\n                    items: [{\n                        fieldLabel: this.localize('authorLabel'),\n                        tokenType: 'author',\n                        itemId: 'author'\n                    },{\n                        fieldLabel: this.localize('titleLabel'),\n                        itemId: 'title',\n                        tokenType: 'title'\n                    },{\n                        fieldLabel: this.localize('keywordLabel')\n                    },{\n                        xtype: 'multislider',\n                        fieldLabel: this.localize('pubDateLabel'),\n                        itemId: 'pubDate',\n                        tokenType: 'pubDate',\n                        values: [0,1],\n                        hidden: true,\n                        listeners: {\n                            afterrender: function(cmp) {\n                                this.getCorpus().getCorpusTerms().load({\n                                    params: {\n                                        tokenType: 'pubDate',\n                                        limit: 1,\n                                        sort: \"TERMASC\"\n                                    },\n                                    callback: function(records) {\n                                        if (records.length==0) {\n                                            // no pubDate, see if we can parse from titles\n                                            var vals = [];\n                                            this.getCorpus().each(function(doc) {\n                                                var val = parseInt(doc.getTitle());\n                                                if (isNaN(val)==false) {\n                                                    vals.push(parseInt(doc.getTitle()))\n                                                }\n                                            }, this);\n                                            if (vals.length>1) {\n                                                cmp.setMinValue(vals[0]);\n                                                cmp.setMaxValue(vals[vals.length-1]);\n                                                cmp.tokenType = 'title';\n                                                cmp.suspendEvent('changecomplete');\n                                                cmp.setValue([vals[0], vals[vals.length-1]]);\n                                                cmp.resumeEvent('changecomplete');\n                                                cmp.setVisible(true);\n                                            }\n                                        } else {\n                                            cmp.setMinValue(parseInt(records[0].getTerm()))\n                                            this.getCorpus().getCorpusTerms().load({\n                                                params: {\n                                                    tokenType: 'pubDate',\n                                                    limit: 1,\n                                                    sort: \"TERMDESC\"\n                                                },\n                                                callback: function(records) {\n                                                    cmp.setMaxValue(parseInt(records[0].getTerm())),\n                                                        cmp.setVisible(true);\n                                                },\n                                                scope: this\n                                            });\n                                        }\n                                    },\n                                    scope: this\n                                })\n                            },\n                            changecomplete: function(cmp, newVal) {\n                                this.loadGeonames();\n                            },\n                            scope: this\n                        }\n                    }, {\n                        xtype: 'fieldset',\n                        title: \"Animation\",\n                        items: [{\n                            xtype: 'container',\n                            layout: 'hbox',\n                            defaults: {\n                                xtype: 'button',\n                                text: \"\",\n                                ui: 'default-toolbar'\n                            },\n                            items: [{\n                                glyph: 'xf048@FontAwesome', // step back\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n                                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence ? currentConnectionOccurrence.index-1 : 0);\n                                    this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                                    this.animate();\n                                },\n                                scope: this\n                            },{\n                                glyph: 'xf04c@FontAwesome', // play\n                                handler: function(cmp) {\n                                    if (cmp.getGlyph().glyphConfig==\"xf04b@FontAwesome\") {\n                                        this.clearAnimation();\n                                        cmp.setGlyph(new Ext.Glyph('xf04c@FontAwesome'));\n                                        this.setStepByStepMode(false);\n                                        this.animate();\n                                    } else {\n                                        cmp.setGlyph(new Ext.Glyph('xf04b@FontAwesome'));\n//                                         this.clearAnimation();\n//                                         this.getAnimationLayer().getSource().clear();\n                                        this.setStepByStepMode(true);\n                                    }\n//                                     this.setCurrentConnectionOccurrence(this.getGeonames().getConnectionOccurrence(0));\n                                },\n                                scope: this\n\n                            },{\n                                glyph: 'xf051@FontAwesome', // step forward\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n                                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence ? currentConnectionOccurrence.index+1 : 0);\n                                    this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                                    this.animate();\n                                },\n                                scope: this\n                            }, {\n                                xtype: 'tbtext',\n                                text: \"&nbsp;&nbsp;\"\n                            }, {\n                                glyph: 'xf01e@FontAwesome', // reset\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    this.setCurrentConnectionOccurrence(this.getGeonames().getConnectionOccurrence(0));\n                                    this.animate();\n                                },\n                                scope: this\n                            }]\n                        }, {\n                            xtype: 'checkbox',\n                            checked: false,\n                            handler: function(item, checked) {\n                                me.setKeepAnimationInFrame(checked);\n                            },\n                            boxLabel: \"Keep animation in frame\"\n                        }]\n\n                    },{\n                        xtype: \"container\",\n                        text: \"&nbsp;\"\n                    },{\n                        xtype: 'button',\n                        text: 'remove',\n                        scope:this,\n                        //margin: 3,\n                        handler: function(cmp) {\n                            // assumes coupling with dreamscape\n                            this.fireEvent(\"removeFilterWidget\", this);\n                            cmp.ownerCt.ownerCmp.destroy();\n                        }\n                    }]\n                }\n            });\n        this.callParent([config]);\n        this.on(\"afterrender\", function(cmp) {\n            cmp.getTargetEl().down('.x-btn-glyph').setStyle('color', this.getColor());\n            var panel = cmp.up(\"panel\")\n            panel.mask(cmp.localize(\"loading\"));\n            cmp.loadGeonames().then(function(geonames) {\n                panel.unmask();\n                if (panel.getFilterWidgets().getCount()==1) {\n                    var currentCitiesCount = geonames.getCitiesCount(),\n                        totalCitiesCount = geonames.getTotalCitiesCount(),\n                        currentConnectionsCount = geonames.getConnectionsCount(),\n                        totalConnectionsCount = geonames.getTotalConnectionsCount();\n                    message = cmp.localize(currentCitiesCount==totalCitiesCount && currentConnectionsCount==totalConnectionsCount ? \"loadedAll\" : \"loadedSome\") +\n                        \"<br><br>\"+cmp.localize(\"disclaimer\");\n                    panel.toastInfo({\n                        autoCloseDelay: 5000,\n\n                        closable: true,\n                        maxWidth: '90%',\n                        html: new Ext.Template(cmp.localize(\"disclaimer\")).apply({\n                            currentCitiesCount: currentCitiesCount,\n                            totalCitiesCount: totalCitiesCount,\n                            currentConnectionsCount: currentConnectionsCount,\n                            totalConnectionsCount: totalConnectionsCount,\n                            url: panel.getBaseUrl()+\"docs/#!/guide/dreamscape\"\n                        })\n\n                    });\n                }\n            })\n        }, this);\n    },\n    loadGeonames: function(params) {\n        var me = this;\n        params = params || {};\n\n        // add queries\n        var queries  = [];\n        this.query('querysearchfield').forEach(function(querysearchfield) {\n            var id = querysearchfield.getItemId();\n            querysearchfield.getValue().forEach(function(query) {\n                queries.push(id+\":\"+query);\n            })\n        });\n        var pubDateSlider = this.down(\"multislider\");\n        if (pubDateSlider && pubDateSlider.isVisible()) {\n            var vals = pubDateSlider.getValue();\n            queries.push(pubDateSlider.tokenType+\":[\"+vals[0]+\"-\"+vals[1]+\"]\")\n        }\n        if (queries.length>0 && !(\"query\" in params)) {params.query=queries;}\n\n        // add params from tool\n        var panel  = this.up('panel');\n        if (panel && panel.getApiParams) {\n            Ext.applyIf(params, panel.getApiParams([\"minPopulation\",\"connectionsMaxCount\",\"connectionsMinFreq\",\"source\",\"overridesId\",\"filterHasLowerCaseForm\",\"filterIsPersonName\",\"preferredCoordinates\"]))\n        }\n\n        this.mask(\"\u2026\");\n        var geonames = this.getGeonames();\n        return geonames.load(params).then(function() {\n            me.unmask();\n            me.fireEvent(\"filterUpdate\", me, geonames);\n            return geonames;\n        });\n    },\n\n    clearAnimation: function() {\n        if (this.getTimeout()) {clearTimeout(this.getTimeout());}\n    },\n\n    animate: function() {\n        var panel = this.up('panel');\n        if (!panel) {return;}\n        this.clearAnimation();\n        var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n        if (currentConnectionOccurrence) {\n            var animationLayer = this.getAnimationLayer();\n            if (!animationLayer) {\n                animationLayer = this.up('panel').getMap().getLayer(this.getId()+\"-animation\");\n                this.setAnimationLayer(animationLayer);\n            }\n            if (animationLayer) {\n                var features = animationLayer.getSource().getFeatures();\n                if (features.length==0) {\n                    if (!panel) {return;}\n                    var connectionsLayerSource = panel.getMap().getLayer(this.getId()+\"-connections\").getSource();\n                    var connectionsFeatures = connectionsLayerSource.getFeatures();\n                    var hasMatch = false;\n                    for (var i=0, len=connectionsFeatures.length; i<len; i++) {\n                        if (currentConnectionOccurrence.source.id==connectionsFeatures[i].get(\"source\") && currentConnectionOccurrence.target.id==connectionsFeatures[i].get(\"target\")) {\n                            hasMatch = connectionsFeatures[i];\n                            break;\n                        }\n                    }\n                    if (hasMatch) {\n                        // check to see if we need to reposition the map, use displayed feature as basis for extent\n                        if(this.getKeepAnimationInFrame()) {\n                            var map = panel.getMap();\n                            var extent = panel.getMap().getView().calculateExtent(map.getSize());\n                            var isVisible = ol.extent.containsExtent(extent, hasMatch.getGeometry().getExtent());\n                            if(!isVisible) {\n                                newExtent = ol.extent.extend(extent, hasMatch.getGeometry().getExtent());\n                                map.getView().fit(newExtent);\n                            }\n                        }\n\n                        var arcGenerator = new arc.GreatCircle(\n                            {x: currentConnectionOccurrence.source.lng, y: currentConnectionOccurrence.source.lat},\n                            {x: currentConnectionOccurrence.target.lng, y: currentConnectionOccurrence.target.lat});\n                        var arcLine = arcGenerator.Arc(100, {offset: 100});\n                        var label = currentConnectionOccurrence.source.label+\" -> \"+currentConnectionOccurrence.target.label;\n                        arcLine.geometries.forEach(function(geometry) {\n                            var line = new ol.geom.LineString([]); // can be empty since we generate a line during next animate call\n                            line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                            var feature = new ol.Feature({\n                                geometry: line,\n                                allcoords: geometry.coords ,\n                                text: label,\n                                color: this.getColor(),\n                                width: 5,\n                                start: new Date().getTime()\n                            });\n                            animationLayer.getSource().addFeature(feature);\n                        }, this);\n\n                        var ticker = panel.body.down(\".ticker\");\n\n                        panel.body.down(\".ticker\").setHtml(\n                            currentConnectionOccurrence.source.left+\" <span class='keyword'>\"+currentConnectionOccurrence.source.term+\"</span> \"+currentConnectionOccurrence.source.right+\" \u2026 \"+\n                            currentConnectionOccurrence.target.left+\" <span class='keyword'>\"+currentConnectionOccurrence.target.term+\"</span> \"+currentConnectionOccurrence.target.right\n                        );\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n\n                    } else {\n                        if (!this.getGeonames()) {return;}\n                        currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence.index+1);\n                        this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                        animationLayer.getSource().clear();\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n\n                    }\n                } else if (features.length>0) {\n\n                    var coords = features[0].getGeometry().getCoordinates(),\n                        allcoords = features[0].get(\"allcoords\");\n                    if (coords.length<allcoords.length) {\n                        var elapsed = new Date().getTime()-features[0].get('start'),\n                            len = elapsed*allcoords.length/this.getMillisPerAnimation()\n                        line = new ol.geom.LineString(allcoords.slice(0,len));\n                        line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                        features[0].set(\"geometry\", line);\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 25));\n\n                    }\n                    // if we get here, all features should have been changed\n                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence.index+1);\n                    if(!this.getStepByStepMode()) {\n                        this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                        animationLayer.getSource().clear();\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n                    }\n                }\n            }\n        } else {\n            if (!this.getGeonames()) {return;}\n            currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(0);\n            if (currentConnectionOccurrence) {\n                this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n            }\n        }\n    }\n});\n","// assuming Knots library is loaded by containing page (via voyant.jsp)\r\nExt.define('Voyant.panel.Knots', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.knots',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\t/**\r\n        \t * @property query A string to search for in a document.\r\n        \t * @type String\r\n    \t\t * @private\r\n        \t */\r\n    \t\tquery: null,\r\n    \t\t/**\r\n    \t\t * @property stopList The stop list to use to filter results.\r\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\r\n    \t\t * @type String\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tstopList: 'auto',\r\n    \t\t/**\r\n    \t\t * @property docId The document ID to restrict results to.\r\n    \t\t * @type String\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tdocId: undefined,\r\n    \t\t\r\n    \t\taudio: false\r\n    \t},\r\n    \tglyph: 'xf06e@FontAwesome'\r\n\t},\r\n\tconfig: {\r\n\t\tknots: undefined,\r\n\t\ttermStore: undefined,\r\n\t\tdocTermStore: undefined,\r\n\t\ttokensStore: undefined,\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},{xtype: 'colorpaletteoption'}],\r\n    \trefreshInterval: 100,\r\n    \tstartAngle: 315,\r\n    \tangleIncrement: 15,\r\n    \tcurrentTerm: undefined\r\n\t},\r\n\t\r\n\ttermTpl: new Ext.XTemplate(\r\n\t\t'<tpl for=\".\">',\r\n\t\t\t'<div class=\"term\" style=\"color: rgb({color});float: left;padding: 3px;margin: 2px;\">{term}</div>',\r\n\t\t'</tpl>'\r\n\t),\r\n\t\r\n    constructor: function() {\r\n        this.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.on('loadedCorpus', function(src, corpus) {\r\n    \t\tvar firstDoc = corpus.getDocument(0);\r\n    \t\tvar pDoc = this.processDocument(firstDoc);\r\n    \t\tthis.getKnots().setCurrentDoc(pDoc);\r\n    \t\t\r\n    \t\tthis.setApiParams({docId: firstDoc.getId()});\r\n    \t\tthis.getDocTermStore().getProxy().setExtraParam('corpus', corpus.getId());\r\n    \t\tthis.getTokensStore().setCorpus(corpus);\r\n    \t\tthis.getDocTermStore().load({params: {\r\n\t\t    \tlimit: 5,\r\n\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t    }});\r\n    \t}, this);\r\n    \t\r\n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\r\n\t\t\tif (this.getCorpus()) {\t\t\t\t\r\n\t\t\t\tExt.Function.defer(function() {\r\n\t\t\t\t\tthis.getDocTermStore().load({params: {\r\n\t\t\t\t    \tlimit: 5,\r\n\t\t\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t\t\t    }});\r\n\t\t\t\t}, 100, this);\r\n\t\t\t}\r\n    \t}, this);\r\n        \r\n        this.on('query', function(src, query) {\r\n    \t\tif (query !== undefined && query != '') {\r\n    \t\t\tthis.getDocTermsFromQuery(query);\r\n    \t\t}\r\n    \t}, this);\r\n        \r\n        this.on('documentSelected', function(src, doc) {\r\n        \t\r\n        \tvar document = this.getCorpus().getDocument(doc)\r\n        \tthis.setApiParam('docId', document.getId());\r\n        \t\r\n        \tvar terms = this.getKnots().currentDoc.terms;\r\n        \tvar termsToKeep = [];\r\n        \tfor (var t in terms) {\r\n        \t\ttermsToKeep.push(t);\r\n        \t}\r\n        \t\r\n//        \tthis.getTermStore().removeAll();\r\n    \t\tthis.setApiParams({query: termsToKeep});\r\n    \t\t\r\n    \t\tvar limit = termsToKeep.length;\r\n    \t\tif (limit === 0) {\r\n    \t\t\tlimit = 5;\r\n    \t\t}\r\n        \t\r\n        \tthis.getKnots().setCurrentDoc(this.processDocument(document));\r\n        \t\r\n        \tthis.getDocTermStore().load({params: {\r\n\t\t    \tquery: termsToKeep,\r\n\t\t    \tlimit: limit,\r\n\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t    }});\r\n        }, this);\r\n        \r\n        this.on('termsClicked', function(src, terms) {\r\n    \t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\r\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\r\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tif (queryTerms.length > 0) {\r\n    \t\t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t\t}\r\n\t\t}, this);\r\n        \r\n\t\tthis.on('corpusTermsClicked', function(src, terms) {\r\n\t\t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n\t\t}, this);\r\n\t\t\r\n\t\tthis.on('documentTermsClicked', function(src, terms) {\r\n\t\t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n\t\t}, this);\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tthis.setTermStore(Ext.create('Ext.data.ArrayStore', {\r\n\t        fields: ['term', 'color']\r\n\t    }));\r\n    \t\r\n    \tthis.setDocTermStore(Ext.create(\"Ext.data.Store\", {\r\n\t\t\tmodel: \"Voyant.data.model.DocumentTerm\",\r\n    \t\tautoLoad: false,\r\n    \t\tremoteSort: false,\r\n    \t\tproxy: {\r\n\t\t\t\ttype: 'ajax',\r\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\t\textraParams: {\r\n\t\t\t\t\ttool: 'corpus.DocumentTerms',\r\n\t\t\t\t\twithDistributions: 'raw',\r\n\t\t\t\t\twithPositions: true\r\n\t\t\t\t},\r\n\t\t\t\treader: {\r\n\t\t\t\t\ttype: 'json',\r\n\t\t            rootProperty: 'documentTerms.terms',\r\n\t\t            totalProperty: 'documentTerms.total'\r\n\t\t\t\t},\r\n\t\t\t\tsimpleSortMode: true\r\n   \t\t     },\r\n   \t\t     listeners: {\r\n   \t\t    \t beforeload: function(store) {\r\n   \t\t    \t\t store.getProxy().setExtraParam('docId', this.getApiParam('docId'));\r\n   \t\t    \t },\r\n   \t\t    \t load: function(store, records, successful, options) {\r\n   \t\t    \t\tvar termObj = {};\r\n   \t\t    \t\tif (records && records.length>0) {\r\n   \t   \t\t    \t\trecords.forEach(function(record) {\r\n   \t   \t\t    \t\t\tvar termData = this.processTerms(record);\r\n   \t   \t\t    \t\t\tvar docId = record.get('docId');\r\n   \t   \t\t    \t\t\tvar term = record.get('term');\r\n   \t   \t\t    \t\t\ttermObj[term] = termData;\r\n   \t   \t\t    \t\t}, this);\r\n   \t   \t\t    \t\tthis.getKnots().addTerms(termObj);\r\n   \t   \t\t    \t\tthis.getKnots().buildGraph();\r\n   \t\t    \t\t}\r\n   \t\t    \t\telse {\r\n   \t\t    \t\t\tthis.toastInfo({\r\n   \t\t    \t\t\t\thtml: this.localize(\"noTermsFound\"),\r\n   \t\t    \t\t\t\talign: 'bl'\r\n   \t\t    \t\t\t})\r\n   \t\t    \t\t}\r\n   \t\t\t\t},\r\n   \t\t\t\tscope: this\r\n   \t\t     }\r\n    \t}));\r\n    \t\r\n    \tthis.setTokensStore(Ext.create(\"Voyant.data.store.Tokens\", {\r\n        \tstripTags: \"all\",\r\n        \tlisteners: {\r\n        \t\tbeforeload: function(store) {\r\n  \t\t    \t\t store.getProxy().setExtraParam('docId', this.getApiParam('docId'));\r\n  \t\t    \t},\r\n        \t\tload: function(store, records, successful, options) {\r\n        \t\t\tvar context = '';\r\n        \t\t\tvar currTerm = this.getCurrentTerm();\r\n        \t\t\trecords.forEach(function(record) {\r\n        \t\t\t\tif (record.getPosition() == currTerm.tokenId) {\r\n        \t\t\t\t\tcontext += '<strong>'+record.getTerm()+'</strong>';\r\n        \t\t\t\t} else {\r\n        \t\t\t\t\tcontext += record.getTerm();\r\n        \t\t\t\t}\r\n        \t\t\t});\r\n        \t\t\t\r\n        \t\t\tExt.Msg.show({\r\n        \t\t\t\ttitle: this.localize('context'),\r\n        \t\t\t\tmessage: context,\r\n        \t\t\t\tbuttons: Ext.Msg.OK,\r\n        \t\t\t    icon: Ext.Msg.INFO\r\n        \t\t\t});\r\n        \t\t},\r\n   \t\t\t\tscope: this\r\n        \t}\r\n        }));\r\n    \t\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                \txtype: 'querysearchfield'\r\n                },{\r\n\t            \ttext: this.localize('clearTerms'),\r\n\t            \tglyph: 'xf00d@FontAwesome',\r\n\t            \thandler: function() {\r\n\t            \t\tthis.down('#termsView').getSelectionModel().deselectAll(true);\r\n\t            \t\tthis.getTermStore().removeAll();\r\n\t            \t\tthis.setApiParams({query: null});\r\n\t            \t\tthis.getKnots().removeAllTerms();\r\n\t            \t\tthis.getKnots().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this\r\n\t            },{\r\n\t            \txtype: 'documentselectorbutton',\r\n\t            \tsingleSelect: true\r\n\t            },{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'speed',\r\n\t\t\t\t\tfieldLabel: this.localize(\"speed\"),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 50,\r\n\t\t\t\t\twidth: 100,\r\n\t\t\t\t\tincrement: 50,\r\n\t\t\t\t\tminValue: 0,\r\n\t\t\t\t\tmaxValue: 500,\r\n\t\t\t\t\tvalue: 500-this.getRefreshInterval(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setRefreshInterval(500-newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'startAngle',\r\n\t\t\t\t\tfieldLabel: this.localize('startAngle'),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 35,\r\n\t\t\t\t\twidth: 85,\r\n\t\t\t\t\tincrement: 15,\r\n\t\t\t\t\tminValue: 0,\r\n\t\t\t\t\tmaxValue: 360,\r\n\t\t\t\t\tvalue: this.getStartAngle(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setStartAngle(newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'tangles',\r\n\t\t\t\t\tfieldLabel: this.localize('tangles'),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 30,\r\n\t\t\t\t\twidth: 80,\r\n\t\t\t\t\tincrement: 5,\r\n\t\t\t\t\tminValue: 5,\r\n\t\t\t\t\tmaxValue: 90,\r\n\t\t\t\t\tvalue: this.getAngleIncrement(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setAngleIncrement(newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t                xtype: 'checkbox',\r\n\t                boxLabel: this.localize('sound'),\r\n\t                listeners: {\r\n\t                \trender: function(cmp) {\r\n\t                \t\tcmp.setValue(this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\")\r\n\t    \t\t        \tExt.tip.QuickTipManager.register({\r\n\t    \t\t        \t\ttarget: cmp.getEl(),\r\n\t   \t\t                 \ttext: this.localize('soundTip')\r\n\t    \t\t        \t});\r\n\t                \t\t\r\n\t                \t},\r\n\t                \tbeforedestroy: function(cmp) {\r\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\r\n\t                \t},\r\n\t                    change: function(cmp, val) {\r\n\t                    \tif (this.getKnots()) {\r\n\t\t                    \tthis.getKnots().setAudio(val);\r\n\t                    \t}\r\n\t                    },\r\n\t                    scope: this\r\n\t                }\r\n\t            }]\r\n    \t\t}],\r\n            border: false,\r\n            layout: 'fit',\r\n            items: {\r\n            \tlayout: {\r\n            \t\ttype: 'vbox',\r\n            \t\talign: 'stretch'\r\n            \t},\r\n            \tdefaults: {border: false},\r\n\t            items: [{\r\n\t            \theight: 30,\r\n\t            \titemId: 'termsView',\r\n\t            \txtype: 'dataview',\r\n\t            \tstore: this.getTermStore(),\r\n\t            \ttpl: this.termTpl,\r\n\t            \titemSelector: 'div.term',\r\n\t            \toverItemCls: 'over',\r\n\t            \tselectedItemCls: 'selected',\r\n\t            \tselectionModel: {\r\n\t            \t\tmode: 'SIMPLE'\r\n\t            \t},\r\n//\t            \tcls: 'selected', // default selected\r\n\t            \tfocusCls: '',\r\n\t            \tlisteners: {\r\n\t            \t\tbeforeitemclick: function(dv, record, item, index, event, opts) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tdv.fireEvent('itemcontextmenu', dv, record, item, index, event, opts);\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tbeforecontainerclick: function() {\r\n\t            \t\t\t// cancel deselect all\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tselectionchange: function(selModel, selections) {\r\n\t            \t\t\tvar dv = this.down('#termsView');\r\n\t            \t\t\tvar terms = [];\r\n\t            \t\t\t\r\n\t            \t\t\tdv.getStore().each(function(r) {\r\n\t            \t\t\t\tif (selections.indexOf(r) !== -1) {\r\n\t            \t\t\t\t\tterms.push(r.get('term'));\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('unselected').addCls('selected');\r\n\t            \t\t\t\t} else {\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('selected').addCls('unselected');\r\n\t            \t\t\t\t}\r\n\t            \t\t\t});\r\n\t            \t\t\t\r\n\t            \t\t\tthis.getKnots().termsFilter = terms;\r\n\t            \t\t\tthis.getKnots().drawGraph();\r\n\t            \t\t},\r\n\t            \t\titemcontextmenu: function(dv, record, el, index, event) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tvar isSelected = dv.isSelected(el);\r\n\t            \t\t\tvar menu = new Ext.menu.Menu({\r\n\t            \t\t\t\tfloating: true,\r\n\t            \t\t\t\titems: [{\r\n\t            \t\t\t\t\ttext: isSelected ? this.localize('hideTerm') : this.localize('showTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tif (isSelected) {\r\n\t            \t\t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\t} else {\r\n\t            \t\t\t\t\t\t\tdv.select(index, true);\r\n\t            \t\t\t\t\t\t}\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t},{\r\n\t            \t\t\t\t\ttext: this.localize('removeTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\tvar term = this.getTermStore().getAt(index).get('term');\r\n\t            \t\t\t\t\t\tthis.getTermStore().removeAt(index);\r\n\t            \t\t\t\t\t\tdv.refresh();\r\n\t            \t\t\t\t\t\t\r\n\t            \t\t\t\t\t\tthis.getKnots().removeTerm(term);\r\n\t            \t\t\t\t\t\tthis.getKnots().drawGraph();\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t}]\r\n\t            \t\t\t});\r\n\t            \t\t\tmenu.showAt(event.getXY());\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \tflex: 1,\r\n\t            \txtype: 'container',\r\n\t            \tautoEl: 'div',\r\n\t            \titemId: 'canvasParent',\r\n\t            \tlayout: 'fit',\r\n\t            \toverflowY: 'auto',\r\n\t            \toverflowX: 'hidden'\r\n\t            }],\r\n\t            listeners: {\r\n\t            \trender: function(component) {\r\n\t            \t\tvar canvasParent = this.down('#canvasParent');\r\n\t                \tthis.setKnots(new Knots({\r\n\t                \t\tcontainer: canvasParent,\r\n\t                \t\tclickHandler: this.knotClickHandler.bind(this),\r\n\t                \t\taudio: this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\"\r\n\t                \t}));\r\n\t            \t},\r\n            \t\tafterlayout: function(container) {\r\n            \t\t\tif (this.getKnots().initialized === false) {\r\n            \t\t\t\tthis.getKnots().initializeCanvas();\r\n            \t\t\t}\r\n            \t\t},\r\n\t        \t\tresize: function(cnt, width, height) {\r\n\t        \t\t\tthis.getKnots().doLayout();\r\n\t        \t\t},\r\n            \t\tscope: this\r\n            \t}\r\n            }\r\n\t\t});\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    updateRefreshInterval: function(value) {\r\n    \tif (this.getKnots()) {\r\n    \t\tif (value < 50) {\r\n    \t\t\tvalue = 50;\r\n    \t\t\tthis.getKnots().progressiveDraw = false;\r\n    \t\t} else {\r\n    \t\t\tthis.getKnots().progressiveDraw = true;\r\n    \t\t}\r\n    \t\tthis.getKnots().refreshInterval = value;\r\n\t\t\tthis.getKnots().buildGraph(this.getKnots().drawStep);\r\n    \t}\r\n    },\r\n    \r\n    updateStartAngle: function(value) {\r\n    \tif (this.getKnots()) {\r\n\t\t\tthis.getKnots().startAngle = value;\r\n\t\t\tthis.getKnots().recache();\r\n\t\t\tthis.getKnots().buildGraph();\r\n    \t}\r\n    },\r\n    \r\n    updateAngleIncrement: function(value) {\r\n    \tif (this.getKnots()) {\r\n\t    \tthis.getKnots().angleIncrement = value;\r\n\t\t\tthis.getKnots().recache();\r\n\t\t\tthis.getKnots().buildGraph();\r\n    \t}\r\n    },\r\n    \r\n    loadFromCorpusTerms: function(corpusTerms) {\r\n    \tif (this.getKnots()) { // get rid of existing terms\r\n    \t\tthis.getKnots().removeAllTerms();\r\n    \t\tthis.getTermStore().removeAll(true);\r\n    \t}\r\n\t\tcorpusTerms.load({\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tvar query = []; //this.getApiParam('query') || [];\r\n\t\t\t\tif (typeof query == 'string') query = [query];\r\n\t\t    \trecords.forEach(function(record, index) {\r\n\t\t\t\t\tquery.push(record.get('term'));\r\n\t\t\t\t}, this);\r\n\t\t    \tthis.getDocTermsFromQuery(query);\r\n\t\t    },\r\n\t\t    scope: this,\r\n\t\t    params: {\r\n\t\t    \tlimit: 5,\r\n\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t    }\r\n    \t});\r\n    },\r\n    \r\n    /**\r\n     * Get the results for the query(s) for each of the corpus documents.\r\n     * @param query {String|Array}\r\n     * @private\r\n     */\r\n    getDocTermsFromQuery: function(query) {\r\n    \tif (query) {this.setApiParam(\"query\", query);} // make sure it's set for subsequent calls\r\n    \tvar corpus = this.getCorpus();\r\n    \tif (corpus && this.isVisible()) {\r\n    \t\tthis.setApiParams({query: query}); // assumes docId already set\r\n\t\t\tthis.getDocTermStore().load({params: this.getApiParams()});\r\n    \t}\r\n\t},\r\n    \r\n\treloadTermsData: function() {\r\n\t\tvar terms = [];\r\n\t\tfor (var term in this.bubblelines.currentTerms) {\r\n\t\t\tterms.push(term);\r\n\t\t}\r\n\t\tthis.getDocTermsFromQuery(terms);\r\n\t},\r\n\t\r\n    filterDocuments: function() {\r\n\t\tvar docIds = this.getApiParam('docId');\r\n\t\tif (docIds == '') {\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getCorpus().getDocuments().each(function(item, index) {\r\n\t\t\t\tdocIds.push(item.getId());\r\n\t\t\t});\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t}\r\n\t\tif (typeof docIds == 'string') docIds = [docIds];\r\n\t\t\r\n\t\tif (docIds == null) {\r\n\t\t\tthis.selectedDocs = this.getCorpus().getDocuments().clone();\r\n\t\t\tvar count = this.selectedDocs.getCount();\r\n\t\t\tif (count > 10) {\r\n\t\t\t\tfor (var i = 10; i < count; i++) {\r\n\t\t\t\t\tthis.selectedDocs.removeAt(10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.selectedDocs.eachKey(function(docId, doc) {\r\n\t\t\t\tdocIds.push(docId);\r\n\t\t\t}, this);\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t} else {\r\n\t\t\tthis.selectedDocs = this.getCorpus().getDocuments().filterBy(function(doc, docId) {\r\n\t\t\t\treturn docIds.indexOf(docId) != -1;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\t// produce format that knots can use\r\n\tprocessDocument: function(doc) {\r\n\t\tvar title = doc.getShortTitle();\r\n\t\ttitle = title.replace('&hellip;', '...');\r\n\t\r\n\t\treturn {\r\n\t\t\tid: doc.getId(),\r\n\t\t\tindex: doc.get('index'),\r\n\t\t\ttitle: title,\r\n\t\t\ttotalTokens: doc.get('tokensCount-lexical'),\r\n\t\t\tterms: {},\r\n\t\t\tlineLength: undefined\r\n\t\t};\r\n\t},\r\n\t\r\n\tprocessTerms: function(termRecord) {\r\n\t\tvar termObj;\r\n\t\tvar term = termRecord.get('term');\r\n\t\tvar rawFreq = termRecord.get('rawFreq');\r\n\t\tvar positions = termRecord.get('positions');\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar color = this.getApplication().getColorForTerm(term);\r\n\t\t\tif (this.getTermStore().find('term', term) === -1) {\r\n\t\t\t\tthis.getTermStore().loadData([[term, color]], true);\r\n\t\t\t\tvar index = this.getTermStore().find('term', term);\r\n\t\t\t\tthis.down('#termsView').select(index, true); // manually select since the store's load listener isn't triggered\r\n\t\t\t}\r\n\t\t\tvar distributions = termRecord.get('distributions');\r\n\t\t\ttermObj = {term: term, positions: positions, distributions: distributions, rawFreq: rawFreq, color: color};\r\n\t\t} else {\r\n\t\t\ttermObj = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn termObj;\r\n\t},\r\n\t\r\n\tknotClickHandler: function(data) {\r\n\t\tthis.setCurrentTerm(data);\r\n\t\tvar start = data.tokenId - 10;\r\n\t\tif (start < 0) start = 0;\r\n\t\tthis.getTokensStore().load({\r\n\t\t\tstart: start,\r\n\t\t\tlimit: 21\r\n\t\t});\r\n\t\t\r\n\t\tdata = [data].map(function(item) {return item.term}); // make an array for the event dispatch\r\n\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\r\n\t}\r\n});","Ext.define('Voyant.panel.Phrases', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.phrases',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tsort: 'length',\n    \t\tdir: 'desc',\n    \t\tminLength: 2,\n    \t\tmaxLength: 50,\n    \t\toverlapFilter: 'length'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.isVisible()) {\n            \tif (this.hasCorpusAccess(corpus)==false) {\n            \t\tthis.mask(this.localize('limitedAccess'), 'mask-no-spinner');\n            \t} else {\n        \t\t\tthis.loadFromApis();\n            \t}\n    \t\t}\n    \t\t\n    \t});\n    \t\n    \tif (config.embedded) {\n//    \t\tvar cls = Ext.getClass(config.embedded).getName();\n//    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n//    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus())\n//    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(term.get(\"term\"));\n        \t\t})\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.getStore().load({params: this.getApiParams()});\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.loadFromApis()}\n    \t}, this)\n    \t\n    \tthis.on(\"query\", function(src, query) {\n    \t\tthis.setApiParam(\"query\", query);\n    \t\tthis.getStore().getProxy().setExtraParam(\"query\", query);\n    \t\tthis.loadFromApis();\n    \t}, this)\n    },\n    \n    loadFromApis: function() {\n    \tif (this.getStore().getCorpus()) {\n    \t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t}\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusNgramsBuffered\", {\n        \tparentPanel: me\n        });\n        \n        store.on(\"beforeload\", function(store) {\n    \t\treturn me.hasCorpusAccess(store.getCorpus());\n        });\n        me.on(\"sortchange\", function( ct, column, direction, eOpts ) {\n        \tthis.setApiParam('sort', column.dataIndex);\n        \tthis.setApiParam('dir', direction);\n        \tvar api = this.getApiParams([\"stopList\", \"query\", \"docId\", \"docIndex\", \"sort\", \"dir\", \"minLength\", \"maxLength\", \"overlapFilter\"]);\n        \tvar proxy = this.getStore().getProxy();\n        \tfor (var key in api) {proxy.setExtraParam(key, api[key]);}\n        }, me)\n\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tvar terms = [];\n                    \t\tvar context = this.getApiParam(\"context\")\n                    \t\tselections.forEach(function(selection) {\n                    \t\t\tterms.push('\"'+selection.getTerm()+'\"')\n                    \t\t})\n                    \t\tthis.getApplication().dispatchEvent('termsClicked', this, terms);\n                    \t},\n                    \tscope: this\n                    }\n                }\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, '-', {\n                \ttext: me.localize('length'),\n                \ttooltip: 'test',\n                \txtype: 'label'\n                }, {\n                \txtype: 'slider',\n                \tminValue: 2,\n                \tvalues: [2, 30],\n                \tmaxValue: 30,\n                \tincrement: 1,\n                \twidth: 75,\n                \ttooltip: this.localize(\"lengthTip\"),\n                \tlisteners: {\n                \t\trender: {\n                \t\t\tfn: function(slider) {\n                \t\t\t\tvar values = slider.getValues();\n                \t\t\t\tslider.setValue(0, parseInt(this.getApiParam(\"minLength\", values[0])))\n                \t\t\t\tslider.setValue(1, parseInt(this.getApiParam(\"maxLength\", values[1])))\n\t                \t\t},\n\t                \t\tscope: me\n                \t\t},\n                \t\tchangecomplete: {\n                \t\t\tfn: function(slider, newValue) {\n                \t\t\t\tvar values = slider.getValues();\n                \t\t\t\tthis.setApiParam(\"minLength\", parseInt(values[0]));\n                \t\t\t\tthis.setApiParam(\"maxLength\", parseInt(values[1]));\n                        \t\tthis.getStore().load({params: this.getApiParams()});\n                    \t\t},\n                    \t\tscope: me\n                \t\t}\n                \t}\n                }, {\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}, '-', {\n                    xtype: 'button',\n                    text: this.localize('overlap'),\n                    tooltip: this.localize('overlapTip'),\n                    menu: {\n                    \titems: [\n                           {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapNone\"),\n                               group: 'overlap',\n                               inputValue: 'none',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'none')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }, {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapLength\"),\n                               group: 'overlap',\n                               inputValue: 'length',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'length')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }, {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapFreq\"),\n                               group: 'overlap',\n                               inputValue: 'rawFreq',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'rawfreq')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }\n\t                   ],\n\t                   listeners: {\n\t                \t   afterrender: {\n\t                \t\t   fn: function(menu) {\n\t                \t\t\t   var overlapFilter = this.getApiParam('overlapFilter');\n\t                \t\t\t   menu.items.each(function(item) {\n\t                \t\t\t\t   if (item.group) {\n\t                \t\t\t\t\t   item.setChecked(item.inputValue==overlapFilter);\n\t                \t\t\t\t   }\n\t                \t\t\t   }, this)\n\t                \t\t   },\n\t                \t\t   scope: this\n\t                \t   }\n                \n\t                   }\n                    }\n                }]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"rawFreq\"),\n        \t\tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"termRawFreqTip\"),\n                sortable: true,\n                width: 'autoSize'\n            },{\n            \ttext: this.localize(\"length\"),\n            \tdataIndex: 'length',\n            \ttooltip: this.localize(\"lengthTip\"),\n            \tsortable: true,\n                width: 'autoSize'\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                width: 120,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }],\n            \n            listeners: {\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tthis.setApiParams({docIndex: undefined, docId: undefined});\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t},\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t},\n            \ttermsClicked: {\n            \t\tfn: function(src, terms) {\n                \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n                    \t\tvar queryTerms = [];\n                    \t\tterms.forEach(function(term) {\n                    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n                    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n                    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n                    \t\t});\n                    \t\tif (queryTerms.length > 0) {\n                    \t\t\tthis.setApiParams({\n                    \t\t\t\tdocIndex: undefined,\n                    \t\t\t\tdocId: undefined,\n                    \t\t\t\tquery: queryTerms\n                    \t\t\t});\n                        \t\tif (this.isVisible()) {\n                            \t\tif (this.isVisible()) {\n                                \t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n                            \t\t}\n                        \t\t}\n                    \t\t}\n                \t\t}\n                \t},\n                \tscope: this\n            \t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n})","/**\n * Corpus Terms tool, a grid that shows the terms in the corpus.\n * \n * <iframe src=\"../?corpus=austen&view=corpusterms\" style=\"max-width: 500px; height: 300px\"></iframe>\n * \n * The typical use is not to instantiate this class directly, but to embed the tool from a corpus.\n * \n * \t\tvar austen;\n * \t\tnew Corpus(\"austen\").then(function(corpus) {\n * \t\t\tausten = corpus;\n * \t\t\tausten.embed('CorpusTerms'); // simply embed\n * \t\t\tausten.embed('CorpusTerms', {query: '^lov*'}); // embed with query\n * \t\t});\n */\nExt.define('Voyant.panel.CorpusTerms', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpusterms',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n    \t\t * \n    \t\t *  By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n    \t\t *  \n    \t\t * For more information see the <a href=\"#!/guide/search\">Stopwords documentation</a>.\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String/String[]} query A query or array of queries (queries can be separated by a comma).\n    \t\t * \n    \t\t * For query syntax, see the <a href=\"#!/guide/search\">search documentation</a>.\n    \t\t */\n    \t\tquery: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} maxBins The maximum number of bins to use for distributions in Trend.\n    \t\t * \n    \t\t * By default this is set to 100 (in other words, if there are more than 100 documents in the corpus, they will be forced into 100 bins).\n    \t\t * Higher values are possible but it can cause performance issues and necessitate more data transfer (values for each one of the bins for each one of the terms).\n    \t\t * @cfg\n    \t\t */\n    \t\tmaxBins: 100,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} comparisonCorpus An existing corpus to be used for comparison purposes.\n    \t\t * \n    \t\t * None of the columns visible by default use comparisonCorpus so this is an advanced parameter used when the \"Comparison\" column is shown.\n    \t\t * The comparison column shows the relative frequency of the term in the corpus compared to the relative frequency of the same term in a comparison corpus.\n    \t\t */\n    \t\tcomparisonCorpus: undefined\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},{xtype: 'categoriesoption'},{\n    \t\txtype: 'corpusselector',\n    \t\tname: 'comparisonCorpus',\n    \t\tfieldLabel: 'comparison corpus'\n    \t}]\n    },\n\t/**\n\t * @private\n\t */\n    constructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusTermsBuffered\", {\n        \tparentPanel: this,\n        \tproxy: {\n        \t\textraParams: {\n        \t\t\twithDistributions: 'relative',\n        \t\t\tforTool: 'corpusterms'\n        \t\t}\n        \t}\n        });\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                pruneRemoved: false,\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tif (selections && selections.length>0) {\n                        \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, selections);\n                    \t\t}\n                    \t},\n                    \tscope: this\n                    }\n                },\n                mode: 'SIMPLE'\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }]\n            }],\n            \n            plugins: [{\n                ptype: 'rowexpander',\n                rowBodyTpl: new Ext.XTemplate('')\n            }],\n            viewConfig: {\n                listeners: {\n                    // TODO widget disappears when scrolled off screen\n                    expandbody: function(rowNode, record, expandRow, eOpts) {\n                        if (expandRow.textContent==='' || (eOpts && eOpts.force)) {\n                            Ext.create('Voyant.widget.CorpusTermSummary', {\n                                record: record,\n                                header: false,\n                                renderTo: expandRow.querySelector('div')\n                            });\n                        }\n                    },\n                    scope: this\n                }\n            },\n\n    \t\tcolumns: [{\n                xtype: 'rownumberer',\n                width: 'autoSize',\n                sortable: false\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n            \ttooltip: this.localize(\"termTip\"),\n        \t\tdataIndex: 'term',\n        \t\tflex: 1,\n                sortable: true\n            },{\n            \ttext: this.localize(\"rawFreq\"),\n            \ttooltip: this.localize(\"rawFreqTip\"),\n            \tdataIndex: 'rawFreq',\n                width: 'autoSize',\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeFreq\"),\n            \ttooltip: this.localize(\"relativeFreqTip\"),\n            \tdataIndex: 'relativeFreq',\n            \trenderer: function(val) {\n            \t\tvar percent = val*100;\n            \t\treturn Ext.util.Format.number(val*1000000, \"0,000\")/* + \" (%\"+\n            \t\t\t(val*100 <  .1 ? \"<0.1\" : Ext.util.Format.number(val*100, \"0.0\"))+\")\"*/\n            \t},\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativePeakedness\"),\n            \ttooltip: this.localize(\"relativePeakednessTip\"),\n            \tdataIndex: 'relativePeakedness',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.0\"),\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeSkewness\"),\n            \ttooltip: this.localize(\"relativeSkewnessTip\"),\n            \tdataIndex: 'relativeSkewness',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.0\"),\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"corpusComparisonDifference\"),\n            \ttooltip: this.localize(\"corpusComparisonDifferenceTip\"),\n            \tdataIndex: 'comparisonRelativeFreqDifference',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.00000\"),\n                width: 'autoSize',\n                hidden: !this.getApiParam('comparisonCorpus'),\n            \tsortable: true,\n            \tlisteners: {\n            \t\tshow: function(ct, column, eopts) {\n            \t\t\tif (!me.getApiParam('comparisonCorpus')) {\n            \t\t\t\tme.showError(me.localize('noCorpusComparison'))\n            \t\t\t}\n            \t\t}\n            \t}\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize(\"trendTip\"),\n                flex: 1,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline',\n                    tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n                    \tgetDocumentTitle: function(docIndex, relativeFreq) {\n                    \t\treturn this.panel.store.getCorpus().getDocument(docIndex).getTitle()+\"<br>\"+this.panel.localize(\"relativeFreqLabel\")+\" \"+Ext.util.Format.number(relativeFreq*1000000, \"0,000\")\n                    \t},\n                    \tpanel: me \n                    })\n                }\n            }]\n        });\n        \n    \tme.on('loadedCorpus', function(src, corpus) {\n//    \t\tthis.setApiParam('query', undefined);\n    \t\tif (corpus.getDocumentsCount()>100) {\n    \t\t\tthis.getStore().getProxy().setExtraParam('bins', this.getApiParam('maxBins'));\n    \t\t}\n    \t\tif (this.isVisible()) {\n        \t\tthis.getStore().load()\n    \t\t}\n    \t}, me);\n    \t\n    \tme.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (me.getStore().getCorpus()) {\n    \t\t\tme.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, me);\n\n    \t\n    \tme.on(\"query\", function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.getStore().removeAll();\n    \t\tthis.getStore().load();\n    \t}, me);\n\n\n        me.callParent(arguments);\n        \n    }\n})\n","Ext.define('Voyant.panel.DocumentTerms', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.DocumentTerms'],\n\talias: 'widget.documentterms',\n\tconfig: {\n\t\toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},{xtype: 'categoriesoption'}]\n    },\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tbins: 10\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tvar store = this.getStore();\n    \t\tstore.setCorpus(corpus);\n    \t\tif (this.isVisible()) {\n        \t\tstore.load();\n    \t\t}\n    \t});\n    \t\n    \tif (config.embedded) {\n    \t\tif (window.console) {\n    \t\t\tconsole.warn(config.embedded.then);\n    \t\t}\n    \t\tvar cls = Ext.getClass(config.embedded).getName();\n    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus());\n    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus);\n    \t}\n    \t\n    \tthis.on(\"query\", function(src, query) {\n    \t\tthis.fireEvent(\"corpusTermsClicked\", src, query);\n    \t}, this);\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(Ext.isString(term) ? term : term.get(\"term\"));\n        \t\t});\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.getStore().load({params: this.getApiParams()});\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentsClicked\", function(src, documents) {\n    \t\tvar docIds = [];\n    \t\tdocuments.forEach(function(doc) {docIds.push(doc.get('id'));});\n    \t\tthis.setApiParams({\n    \t\t\tdocId: docIds,\n    \t\t\tquery: undefined\n    \t\t});\n    \t\tif (this.isVisible()) {\n        \t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t});\n\n\t\tthis.on(\"documentsSelected\", function(src, docIds) {\n    \t\tthis.setApiParams({\n    \t\t\tdocId: docIds,\n    \t\t\tquery: undefined\n    \t\t});\n    \t\tif (this.isVisible()) {\n        \t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n\t\t});\n\n\t\tthis.on(\"corpusSelected\", function(src, corpus) {\n\t\t\tthis.setApiParams({\n\t\t\t\tdocId: undefined,\n\t\t\t\tdocIndex: undefined\n\t\t\t});\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis.getStore().load({params: this.getApiParams()});\n\t\t\t}\n\t\t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {\n    \t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, this);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.DocumentTermsBuffered\", {parentPanel: this});\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('documentTermsClicked', this, selections);\n                    \t},\n                    \tscope: this\n                    }\n                },\n                pruneRemoved: false,\n    \t\t\tmode: 'SIMPLE'\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: '#',\n    \t\t\twidth: 30,\n        \t\tdataIndex: 'docIndex',\n                sortable: true,\n                renderer: function(v) {return v+1;} // 0-based to 1-based\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1\n            },{\n            \ttext: this.localize(\"rawFreq\"),\n            \tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"rawFreqTip\"),\n            \twidth: 'autoSize',\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeFreq\"),\n            \ttooltip: this.localize(\"relativeFreqTip\"),\n            \tdataIndex: 'relativeFreq',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \trenderer: Ext.util.Format.numberRenderer('0,000')\n            },{\n            \ttext: this.localize(\"tfidf\"),\n            \ttooltip: this.localize(\"tfidfTip\"),\n            \tdataIndex: 'tfidf',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \thidden: true,\n            \trenderer: Ext.util.Format.numberRenderer('0,000.000')\n            },{\n            \ttext: this.localize(\"zscore\"),\n            \ttooltip: this.localize(\"zscoreTip\"),\n            \tdataIndex: 'zscore',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \thidden: true,\n            \trenderer: Ext.util.Format.numberRenderer('0,000.000')\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                flex: 1,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }],\n            \n            listeners: {\n            \ttermsClicked: {\n            \t\tfn: function(src, terms) {\n                \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n                    \t\tvar queryTerms = [];\n                    \t\tterms.forEach(function(term) {\n                    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n                    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n                    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n                    \t\t});\n                    \t\tif (queryTerms.length > 0) {\n                    \t\t\tthis.setApiParams({\n                    \t\t\t\tdocIndex: undefined,\n                    \t\t\t\tdocId: undefined,\n                    \t\t\t\tquery: queryTerms\n                    \t\t\t});\n                        \t\tif (this.isVisible()) {\n                            \t\tif (this.isVisible()) {\n                                \t\tthis.getStore().load({params: this.getApiParams()});\n                            \t\t}\n                        \t\t}\n                    \t\t}\n                \t\t}\n                \t},\n                \tscope: this\n            \t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n});\n","Ext.define('Voyant.panel.Documents', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\talias: 'widget.documents',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n\t\t\tnewCorpusError: 'There was an error creating the new the corpus. You may not have permission to do this.'\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tdocIndex: undefined,\n    \t\tdocId: undefined\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    \n    MODE_EDITING: 'editing',\n    MODE_NORMAL: 'normal',\n    config: {\n    \toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},\n        \t{xtype: 'categoriesoption'}\n        ],\n    \tmode: this.MODE_NORMAL\n    },\n\n    constructor: function(config) {\n    \t\n    \tvar store = Ext.create(\"Voyant.data.store.Documents\", {\n    \t    selModel: {pruneRemoved: false},\n    \t    proxy: {\n    \t    \textraParams: {\n    \t    \t\tforTool: 'documents'\n    \t    \t}\n    \t    }\n    \t});\n    \t\n    \tvar dockedItemsItems = [{\n            xtype: 'querysearchfield'\n        }, {\n            xtype: 'totalpropertystatus'\n        }]\n    \t\n    \tvar me = this;\n    \t\n    \tif (!config || config.mode!=this.MODE_EDITING) {\n    \t\tdockedItemsItems.push({\n            \ttext: this.localize(\"modify\"),\n            \ttooltip: this.localize(\"modifyTip\"),\n    \t\t\tglyph: 'xf044@FontAwesome',\n    \t\t\tscope: this,\n    \t\t\titemId: 'modifyButton',\n            \thandler: function(btn) {\n            \t\tvar win = Ext.create('Ext.window.Window', {\n            \t\t    title: this.localize(\"title\"),\n            \t\t    modal: true,\n            \t\t    width: \"80%\",\n            \t\t    minWidth: 300,\n            \t\t    minHeight: 200,\n            \t\t    height: \"80%\",\n            \t\t    layout: 'fit',\n            \t\t    frame: true,\n            \t\t    border: true,\n            \t\t    items: {\n            \t\t    \txtype: 'documents',\n            \t\t    \tmode: this.MODE_EDITING,\n            \t\t    \tcorpus: this.getStore().getCorpus(),\n            \t\t    \theader: false,\n            \t\t    \tviewConfig: {\n            \t\t            plugins:{\n            \t\t                ptype:'gridviewdragdrop'\n            \t\t            },\n            \t\t            listeners: {\n            \t\t            \tbeforedrop: function(node, data, overModel, dropPosition, dropHandlers) {\n            \t\t            \t\tif (this.getStore().getCount()<this.getStore().getCorpus().getDocumentsCount()) {\n            \t\t            \t\t\tvar panel = this.up(\"panel\");\n            \t\t        \t\t\t\tExt.Msg.show({\n            \t\t        \t\t\t\t    title: panel.localize('error'),\n            \t\t        \t\t\t\t    message: panel.localize('reorderFilteredError'),\n            \t\t        \t\t\t\t    buttons: Ext.Msg.OK,\n            \t\t        \t\t\t\t    icon: Ext.Msg.ERROR\n            \t\t        \t\t\t\t});\n            \t\t            \t\t\treturn false;\n            \t\t            \t\t}\n            \t\t            \t\treturn true;\n            \t\t            \t}\n            \t\t            }\n            \t\t    \t}\n            \t\t    },\n            \t\t    buttons: [{\n                \t\t\ttext: this.localize('add'),\n                \t\t\ttooltip: this.localize(\"addTip\"),\n                \t\t\tglyph: 'xf067@FontAwesome',\n                \t\t\thandler: function(btn) {\n                \t\t\t\tbtn.up(\"window\").close();\n                \t\t\t\tExt.create('Ext.window.Window', {\n                \t\t\t\t\theader: false,\n                        \t\t    modal: true,\n                        \t\t    layout: 'fit',\n                        \t\t    items: {\n                        \t\t    \txtype: 'corpuscreator',\n                        \t\t    \tcorpus: this.getStore().getCorpus()\n                        \t\t    }\n                        \t\t}).show();\n                \t\t\t},\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('remove'),\n                \t\t\ttooltip: this.localize(\"removeTip\"),\n                \t\t\tglyph: 'xf05e@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'remove',\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('keep'),\n                \t\t\ttooltip: this.localize(\"keepTip\"),\n                \t\t\tglyph: 'xf00c@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'keep',\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('reorder'),\n                \t\t\ttooltip: this.localize(\"reorderTip\"),\n                \t\t\tglyph: 'xf0dc@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'reorder',\n                \t\t\tscope: this\n                \t\t},{\n            \t\t        text: 'Cancel',\n                \t\t\tglyph: 'xf00d@FontAwesome',\n            \t\t        handler: function(btn) {\n            \t\t        \tbtn.up(\"window\").close();\n            \t\t        }\n            \t\t    }]\n            \t\t}).show();\n\n            \t}\n    \t\t}, {\n    \t\t\ttext: this.localize('downloadButton'),\n\t\t    \tglyph: 'xf019@FontAwesome',\n    \t\t\titemId: 'downloadButton',\n    \t\t\thandler: function() {\n    \t\t\t\tme.downloadFromCorpusId(me.getStore().getCorpus().getId())\n    \t\t\t}\n    \t\t})\n    \t}\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n\t    \tcolumns:[\n\t    \t   {\n\t    \t\t   xtype: 'rownumberer',\n\t    \t        renderer: function(value, metaData, record) {return record.getIndex()+1},\n\t    \t        sortable: false\n\t    \t    },{\n\t    \t        text: this.localize('documentTitle'),\n\t    \t        dataIndex: 'title',\n\t    \t        sortable: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getTitle();},\n\t    \t        flex: 3\n\t    \t    },{\n\t    \t        text: this.localize('documentAuthor'),\n\t    \t        dataIndex: 'author',\n\t    \t        sortable: true,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getAuthor();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPubDate'),\n\t    \t        dataIndex: 'pubDate',\n\t    \t        sortable: true,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPubDate();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPublisher'),\n\t    \t        dataIndex: 'publisher',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPublisher();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPubPlace'),\n\t    \t        dataIndex: 'pubPlace',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPubPlace();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentKeyword'),\n\t    \t        dataIndex: 'keyword',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getKeyword();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentCollection'),\n\t    \t        dataIndex: 'collection',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getCollection();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('tokensCountLexical'),\n\t    \t        dataIndex: 'tokensCount-lexical',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000'),\n\t    \t        sortable: true,\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('typesCountLexical'),\n\t    \t        dataIndex: 'typesCount-lexical',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000'),\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('typeTokenRatioLexical'),\n\t    \t        dataIndex: 'typeTokenRatio-lexical',\n\t    \t        renderer: function(val) {return Ext.util.Format.percent(val)},\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('averageWordsPerSentence'),\n\t    \t        dataIndex: 'averageWordsPerSentence',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000.0'),\n\t            \ttooltip: this.localize(\"averageWordsPerSentenceTip\"),\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('language'),\n\t    \t        dataIndex: 'language',\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metaData, record, rowIndex, colIndex, store, view) {return view.ownerCt.getLanguage(val);},\n\t    \t        width: 'autoSize'\n\t    \t    }\n\t    \t],\n\t    \t\n\t        store: store,\n\t    \t\n\t    \tselModel: {\n\t    \t\ttype: 'rowmodel',\n\t    \t\tmode: 'MULTI',\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('documentsClicked', this, selections, this.getStore().getCorpus());\n                    \t},\n                    \tscope: this\n                    }\n                }\n            },\n            \n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: dockedItemsItems\n            }]\n    \t});\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n\n    \t\tthis.store.setCorpus(corpus);\n\n    \t\tif (this.isVisible()) {\n        \t\tthis.store.load({params: this.getApiParams()});\n    \t\t} else {\n    \t\t\tthis.on('afterrender', function() {\n            \t\tthis.store.load({params: this.getApiParams()});\n    \t\t\t}, this);\n    \t\t}\n    \t\tif (this.hasCorpusAccess(corpus)==false) {\n    \t\t\tthis.queryById('modifyButton').hide();\n    \t\t\tthis.queryById('downloadButton').hide();\n    \t\t}\n    \t\t/*\n    \t\tvar me = this;\n    \t\tExt.Ajax.request({\n    \t\t\turl: this.getApplication().getTromboneUrl(),\n    \t\t\tparams: {\n    \t\t\t\tcorpus: corpus.getId(),\n    \t\t\t\ttool: 'corpus.CorpusManager',\n    \t\t\t\tgetAccess: true\n    \t\t\t},\n    \t\t    success: function(response, opts) {\n    \t\t        var obj = Ext.decode(response.responseText);\n    \t\t        if (obj && obj)\n    \t\t        debugger\n    \t\t        console.dir(obj);\n    \t\t        me\n    \t\t    },\n    \t\t    failure: function(response, opts) {\n    \t\t    \tme.showError(response);\n    \t\t    }\n    \t\t})\n    \t\t*/\n    \t})\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {\n    \t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, this);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('query', function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.store.load({params: this.getApiParams()});\n    \t})\n    \t\n    \tif (config.embedded) {\n        \tif (Ext.getClass(config.embedded).getName() == \"Voyant.data.model.Corpus\") {\n        \t\tconfig.corpus = config.embedded\n        \t}\n        \telse if (Ext.getClass(config.embedded).getName() == \"Voyant.data.store.Documents\") {\n        \t\tthis.store.setRecords(config.embedded.getData())\n        \t\tconfig.corpus = config.embedded.getCorpus()\n        \t}\n    \t\t\n    \t}\n    \t\n    \t// if we have a corpus, load it\n    \tif (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    },\n    \n    keepRemoveReorderHandler: function(btn) {\n    \t// we're not sure which scope we're in, so ensure we're talking about this buttons panel\n\t\tvar panel = btn.up(\"window\").down(\"documents\");\n\t\tvar selection = panel.getSelection();\n\t\tvar docs = panel.getStore().getCorpus().getDocumentsCount();\n\t\tvar btnMode = btn.getItemId();\n\t\t// if reordering, check to make sure that we're not looking at a subset\n\t\tif (btnMode=='reorder') {\n\t\t\tif (panel.getStore().getCount()<docs) {\n\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('reorderFilteredError'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdocIndex = [];\n\t\t\t\tpanel.getStore().each(function(doc) {\n\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t    }, this);\n\t\t\t\tfor (var i=1; i<docIndex.length; i++) {\n\t\t\t\t\tif (docIndex[i-1]>docIndex[i]) {\n\t\t\t\t\t\treturn Ext.Msg.confirm(panel.localize('newCorpus'), new Ext.Template(panel.localize(btnMode+'Documents')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\t\t\t\tdocIndex = [];\n\t\t\t\t\t\t\t\tthis.getStore().each(function(doc) {\n\t\t\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t\t    }, this);\n\t\t\t\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, panel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if we get here it's because nothing's been reordered\n\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('reorderOriginalError'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif (selection.length>0) {\n\t\t\tif (selection.length==docs) {\n\t\t\t\tif (docs==1) {\n\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t    message: this.localize('onlyOneError'),\n\t\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t    message: this.localize('allSelectedError'),\n\t\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn Ext.Msg.confirm(this.localize('newCorpus'), new Ext.Template(this.localize(btnMode+'SelectedDocuments')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\t\tdocIndex = [];\n\t\t\t\t\t\tselection.forEach(function(doc){\n\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t\t}\n\t\t\t\t}, panel);\n\t\t\t}\n\t\t}\n\t\telse if (panel.getApiParam(\"query\") && panel.getStore().getCount()<docs) {\n\t\t\treturn Ext.Msg.confirm(this.localize('newCorpus'), new Ext.Template(this.localize(btnMode+'FilteredDocuments')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\tdocIndex = [];\n\t\t\t\t\tthis.getStore().each(function(doc) {\n\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t    }, this);\n\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t}\n\t\t\t}, panel);\n\t\t}\n\t\telse {\n\t\t\treturn Ext.Msg.show({\n\t\t\t    title: this.localize('error'),\n\t\t\t    message: this.localize('selectOrFilterError'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n\t\t}    \t\n    },\n    \n    editCorpus: function(params) {\n    \t\n    \tExt.apply(params, {\n    \t\ttool: 'corpus.CorpusManager',\n    \t\tcorpus: this.getStore().getCorpus().getId()\n    \t})\n\n    \t// mask main viewport while we create a new corpus\n    \tvar app = this.getApplication();\n    \tvar view = app.getViewport();\n\t\tview.mask(this.localize(\"Creating new corpus\u2026\"));\n    \tExt.Ajax.request({\n    \t\turl: this.getApplication().getTromboneUrl(),\n    \t\tmethod: 'POST',\n    \t\tparams: params,\n    \t\tsuccess: function(response) {\n    \t\t\tview.unmask();\n    \t\t\tvar obj = Ext.decode(response.responseText);\n\t\t\t\tapp.openUrl(app.getBaseUrl()+\"?corpus=\"+obj.corpus.id);\n//    \t\t\tview.mask(\"Loading new corpus\u2026\")\n//    \t\t\tnew Voyant.data.model.Corpus({corpus: obj.corpus.id}).then(function(corpus) {\n//    \t\t\t\tview.unmask();\n//    \t\t\t\tapp.openUrl(app.getBaseUrl()+\"/?corpus=\"+obj.corpus.id)\n//    \t\t\t\tapp.dispatchEvent('loadedCorpus', app, corpus);\n//    \t\t\t}).fail(function(message, response) {\n//    \t\t\t\tview.unmask();\n//    \t\t\t\tapp.showErrorResponse({message: message}, response);\n//    \t\t\t});\n    \t\t},\n\t\t\tfailure: function(response) {\n\t\t\t\tview.unmask();\n\t\t\t\tExt.Msg.show({\n\t\t\t\t\ttitle: this.localize('error'),\n\t\t\t\t\tmessage: this.localize('newCorpusError'),\n\t\t\t\t\tbuttons: Ext.Msg.OK,\n\t\t\t\t\ticon: Ext.Msg.ERROR\n\t\t\t\t});\n\t\t\t},\n\t\t\tscope: this\n    \t});\n    \t\n    \t// close editing window if we're in modal mode, should happen asynchronously while new corpus is created\n    \tvar win = this.up(\"window\");\n    \tif (win && win.isFloating()) {win.close()}\n    }\n})","Ext.define('Voyant.panel.DocumentsFinder', {\n\textend: 'Ext.grid.Panel',\n\trequire: ['Voyant.data.store.DocumentQueryMatches','Ext.grid.plugin.CellEditing'],\n\tmixins: ['Voyant.panel.Panel'/*,'Voyant.util.Localization'*/],\n\talias: 'widget.documentsfinder',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    config: {\n    \texportGridAll: false // prevents export all options from grid\n    },\n\n    constructor: function(config) {\n    \t\n        this.cellEditing = Ext.create(\"Ext.grid.plugin.CellEditing\", {\n            clicksToEdit: 1\n        });\n\n        this.cellEditing.on('edit', this.onEditComplete, this);\n    \t\n    \tvar me = this;\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n    \t\tplugins: [this.cellEditing],\n    \t\tbbar: [\n    \t\t       {\n                       text: this.localize('addRow'),\n                       glyph: 'xf055@FontAwesome',\n                       handler: this.addRow,\n                       scope: this\n    \t\t       },{\n                       text: this.localize('exportNewCorpus'),\n                       disabled: true,\n                       glyph: 'xf08e@FontAwesome',\n                       tooltip: this.localize('exportNewCorpusTip'),\n                       handler: function() {\n                    \t   var query = this.getQueryFromStore();\n                    \t   if (query) {\n                    \t\t   this.setLoading(true);\n\t   \t               \t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n\t\t            \t\t\tdocumentQueryMatches.load({\n\t\t            \t\t\t\tparams: {query: query, createNewCorpus: true},\n\t\t            \t\t\t\tcallback: function(records, operation, success) {\n\t\t                     \t\t   this.setLoading(false);\n\t\t            \t\t\t\t\tif (success) {\n\t\t            \t\t\t\t\t\tvar corpus = operation.getProxy().getReader().rawData.documentsFinder.corpus;\n\t\t            \t\t\t\t\t\tvar url = this.getBaseUrl()+'?corpus='+corpus;\n\t\t                         \t\t   Ext.Msg.alert({\n\t\t                        \t\t\t   title: this.localize('title'),\n\t\t                        \t\t\t   message: \"<a href='\"+url+\"' target='_blank'>New Corpus</a>\"\n\t\t                        \t\t   })\n\t\t            \t\t\t\t\t}\n\t\t            \t\t\t\t\telse {\n\t\t            \t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n\t\t            \t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n\t\t            \t\t\t\t\t\t\tresponse: operation.getError().response\n\t\t            \t\t\t\t\t\t}).show();\n\t\t            \t\t\t\t\t}\n\t\t            \t\t\t\t},\n\t\t            \t\t\t\tscope: this\n\t\t            \t\t\t})\n                    \t\t   \n                    \t   }\n                    \t   else {\n                    \t\t   Ext.Msg.alert({\n                    \t\t\t   title: this.localize('title'),\n                    \t\t\t   message: this.localize('noMatches')\n                    \t\t   })\n                    \t   }\n                       },\n                       scope: this,\n                       cls: 'exportBtn'\n    \t\t       },{\n    \t\t    \t   xtype: 'tbtext',\n    \t\t    \t   name: 'status',\n    \t\t    \t   cls: 'status'\n    \t\t       }\n    \t\t],\n\t    \tcolumns:[\n \t    \t    {\n\t    \t        text: this.localize('query'),\n\t    \t        dataIndex: 'query',\n\t    \t        renderer: function(value) {\n\t    \t        \treturn Ext.isEmpty(value) ? '<span class=\"placeholder\">'+me.localize('emptyQuery') + '</span>' : value;\n\t    \t        },\n\t    \t        editor: true,\n\t    \t        minWidth: 150,\n\t    \t        maxWidth: 300\n\t    \t    },{\n\t    \t        text: this.localize('field'),\n\t    \t        dataIndex: 'field',\n\t    \t        editor: {\n\t    \t        \txtype: 'combo',\n\t                    typeAhead: true,\n\t                    triggerAction: 'all',\n\t                    forceSelection: true,\n\t                    value: '',\n\t                    valueField: 'value',\n\t                    listeners: {\n\t                    \tchange:function() {\n\t                    \t  if (Ext.isEmpty(this.getValue())) {\n\t\t                    \t    this.reset();\n\t\t                    \t  }\n\t\t                    \t}\n\t                    },\n\t                    store: new Ext.data.Store({\n\t                        fields: ['text','value'],\n\t                \t\tdata: [[this.localize('textField'),'text'],[this.localize('advancedField'),'advanced']]\n\t                    })\n\t    \t        },\n\t    \t        width: 150,\n                    renderer: function(v) {return Ext.isEmpty(v) ? '' : me.localize(v+\"Field\")}\n\t    \t    },{\n\t    \t        text: this.localize('operator'),\n\t    \t        dataIndex: 'operator',\n\t    \t        editor: {\n\t    \t        \txtype: 'combo',\n\t                    forceSelection: true,\n\t                    store: new Ext.data.Store({\n\t                        autoDestroy: true,\n\t                        fields: ['text','value'],\n\t                        displayField:  'text',\n\t                        valueField: 'value',\n\t                \t\tdata: [{text:'AND',value:'+'},{text:'OR',value:''}]\n\t                    })\n\t    \t        },\n\t    \t        minWidth: 75,\n\t    \t        maxWidth: 75\n\t    \t    },{\n\t    \t        text: this.localize('count'),\n\t    \t        dataIndex: 'count',\n\t    \t        renderer: function(value, metadata, record) {\n\t    \t        \treturn Ext.isEmpty(record.get('query')) ? '' : Ext.util.Format.number(value, '0,000')\n\t    \t        },\n\t    \t        minWidth: 100,\n\t    \t        maxWidth: 100\n\t    \t    },{\n\t    \t    \txtype: 'actioncolumn',\n\t                width: 25,\n\t                getGlyph: 'xf014@FontAwesome',\n\t                tooltip: this.localize('deleteQueryTip'),\n\t                menuDisabled: true,\n\t                sortable: false,\n\t                handler: this.removeRow,\n\t                scope: this\n\t    \t    }\n\t    \t],\n\t    \t\n\t    \tstore: new Ext.data.Store({\n                // destroy the store if the grid is destroyed\n                autoDestroy: true,\n                fields: ['id','operator','field','query','count'],\n\t    \t\tdata: [['','','','',0]]\n            })\n      \t});\n    \t\t\t\n        this.callParent(arguments);\n        \n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n  \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tvar docs = corpus.getDocuments();\n    \t\tif (docs && docs.getCount()>0) {\n    \t\t\tvar doc = docs.getDocument(0);\n    \t\t\tvar records = [];\n    \t\t\t[\"title\",\"author\",\"pubDate\",\"publisher\",\"pubPlace\"].forEach(function(field) {\n    \t\t\t\tif (!Ext.isEmpty(doc.get(field))) {\n    \t\t\t\t\trecords.push([this.localize(field+'Field'),field])\n    \t\t\t\t}\n    \t\t\t}, this);\n    \t\t\tif (records) {\n    \t\t\t\tvar editor = this.getColumnManager().getHeaderByDataIndex(\"field\").getEditor();\n    \t\t\t\tvar store = editor.getStore();\n    \t\t\t\tstore.each(function(record) {\n    \t\t\t\t\trecords.push([record.get('text'), record.get('value')]);\n    \t\t\t\t}, this);\n    \t\t\t\teditor.setStore(Ext.create(\"Ext.data.Store\",{\n    \t\t\t\t\tfields: ['text','value'],\n    \t\t\t\t\tdata: records\n    \t\t\t\t}))\n    \t\t\t}\n    \t\t\tthis.updateStatus(0);\n    \t\t\tthis.setLoading(false);\n    \t\t}\n    \t})\n    \t\n    },\n    \n    removeRow:function(grid, rowIndex) {\n    \tthis.getStore().removeAt(rowIndex);\n    \tif (this.getStore().getCount()==0) {this.addRow();}\n    \tthis.updateAggregate();\n    },\n    \n    addRow: function() {\n    \tthis.store.loadData([['','','','',0]], true);\n    },\n    \n    onEditComplete: function(editor, context) {\n    \t\n    \t\n    \tvar query = this.getQueryFromRecord(context.record);\n\t\tif (Ext.isEmpty(query)) {\n\t\t\tcontext.record.set('count','');\n\t\t\tthis.updateAggregate();\n\t\t}\n\t\telse {\n\t\t\tvar cell = context.view.getCell(context.record, this.getColumnManager().getHeaderByDataIndex(\"count\"));\n\t\t\tcell.mask(\"loading\");\n\t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n\t\t\tdocumentQueryMatches.load({\n\t\t\t\tparams: {\n\t\t\t\t\tquery: query\n\t\t\t\t},\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tcell.unmask();\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tcontext.record.set('count', records.length==0 ? 0 : records[0].get('count'))\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n\t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n\t\t\t\t\t\t\tresponse: operation.getError().response\n\t\t\t\t\t\t}).show();\n\t\t\t\t\t\tcontext.record.set('count',0);\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateAggregate();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t})\n\t\t}\n\n    },\n    \n    getQueryFromRecord: function(record) {\n\t\tif (Ext.isEmpty(record) || Ext.isEmpty(record.get('query'))) {return \"\"}\n\t\tvar query = record.get('query').trim();\n\t\tif (Ext.isEmpty(query)) {return \"\"}\n\t\tvar field = record.get('field');\n\t\treturn Ext.isEmpty(field ? field.trim() : field) ? query : field+\":\"+query\n    },\n    \n    getQueryFromStore: function() {\n    \tvar query = \"\";\n \t\tthis.getStore().each(function(record) {\n \t\t\tvar q = this.getQueryFromRecord(record);\n \t\t\tif (!Ext.isEmpty(q)) {\n \t\t\t\tif (!Ext.isEmpty(query)) {\n \t\t\t\t\tvar op = record.get('operator');\n \t\t\t\t\tquery += op== 'AND' ? ' + ' : ' | '\n \t\t\t\t}\n \t\t\t\tquery+=q\n \t\t\t}\n \t\t}, this)\n \t\tconsole.warn(query)\n \t\treturn query;\n    },\n    \n    updateAggregate: function() {\n    \tvar count = this.getStore().sum('count');\n    \tif (!count || typeof count == 'string') {\n    \t\tthis.updateStatus(0);\n    \t}\n    \telse if (count==1) {\n    \t\tvar count = this.getStore().getAt(0).get('count');\n    \t\tthis.updateStatus(this.getStore().getAt(0).get('count'))\n    \t}\n    \telse {\n    \t\t\n    \t\tvar query = this.getQueryFromStore();\n    \t\tif (!Ext.isEmpty(query)) {\n            \tif (!this.status) {this.status=this.down(\"[cls~=status]\")} // make sure we have status for masking\n    \t\t\tthis.status.mask(this.localize(\"loading\"));\n    \t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n    \t\t\tdocumentQueryMatches.load({\n    \t\t\t\tparams: {query: query},\n    \t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\t\n    \t\t\t\t\tthis.status.unmask();\n    \t\t\t\t\tif (success) {\n    \t\t\t\t\t\tthis.updateStatus(records[0].get('count'));\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n    \t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n    \t\t\t\t\t\t\tresponse: operation.getError().response\n    \t\t\t\t\t\t}).show();\n    \t\t\t\t\t\tthis.updateStatus(0);\n    \t\t\t\t\t}\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t})\n    \t\t}\n    \t}\n    },\n    \n    updateStatus: function(count) {\n    \tif (!this.status) {this.status=this.down(\"[cls~=status]\")}\n    \tif (!this.exportBtn) {this.exportBtn=this.down(\"[cls~=exportBtn]\")}\n    \tif (count==0) {\n        \tthis.status.update(new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]))\n    \t}\n    \telse {\n    \t\tthis.status.update(new Ext.XTemplate(this.localize('queryMatches')).apply([count,this.getCorpus().getDocumentsCount()]))\n    \t}\n    \tthis.exportBtn.setDisabled(count==0);\n    \t\n    }\n    \n})","Ext.define('Voyant.panel.Embedder', {\n\textend: 'Ext.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.embedder',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttitle: 'Embedder',\n\t\t\turl: 'URL',\n\t\t\tgo: 'Go',\n\t\t\thelp: 'Embedder provides a way to embed a web page into your Voyant Tools experience.',\n\t\t\thelpTip: 'Embedder provides a way to embed a web page into your Voyant Tools experience.'\n\t\t},\n\t\tapi: {\n\t\t\turl: undefined\n\t\t},\n\t\tglyph: 'xf0c1@FontAwesome'\n\t},\n\tconstructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\t\tthis.setApiParam('url', config.url);\n\n        this.callParent(arguments);\n\t\t\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlayout: {\n\t\t\t\ttype: 'fit'\n\t\t\t},\n\t\t\titems: {\n\t\t\t\txtype: 'uxiframe',\n\t\t\t\tsrc: this.getApiParam('url')\n\t\t\t},\n\t\t\ttbar: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tvalue: this.getApiParam('url'),\n\t\t\t\temptyText: this.localize('url'),\n\t\t\t\tlisteners: {\n\t\t\t\t\tspecialkey: function(field, e){\n\t\t\t\t\t\tif (e.getKey() == e.ENTER) {\n\t\t\t\t\t\t\tfield.up('panel').down('uxiframe').load(field.getValue());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: this.localize('go'),\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tvar url = btn.prev('textfield').getValue();\n\t\t\t\t\tbtn.up('panel').down('uxiframe').load(url);\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\t\n\t\tthis.callParent();\n\t},\n\tloadUrl: function(url) {\n\t\tthis.down('uxiframe').load(url);\n\t}\n});","// assuming Bubblelines library is loaded by containing page (via voyant.jsp)\nExt.define('Voyant.panel.Fountain', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.fountain',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"FountainMeter\"\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @property stopList The stop list to use to filter results.\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\n    \t\t * @type String\n    \t\t * @private\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tdocIndex: 0,\n    \t\t\n    \t\tspeed: 30,\n    \t\t\n    \t\tgroups: undefined\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \taudio: false,\n    \twords: [],\n    \tgroups: {},\n    \tmoveWordsTimeout: undefined\n\t},\n\t\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: {\n    \t\t\ttype: 'hbox',\n    \t\t\talign: 'stretch'\n    \t\t},\n    \t\titems: [{\n        \t\thtml: '<svg></svg>',\n        \t\titemId: 'fountain',\n        \t\tflex: 2\n    \t\t},{\n    \t\t\tflex: 1,\n    \t\t\tlayout:  'vbox',\n    \t\t\titems: [{\n    \t\t\t\t   xtype: 'polar',\n    \t\t\t\t   itemId: 'gauge',\n    \t\t\t\t   width: 300,\n    \t\t\t\t   flex: 1,\n    \t\t\t\t   store: {\n    \t\t\t\t       fields: ['mph', 'fuel', 'temp', 'rpm'],\n    \t\t\t\t       data: [{val: 10}]\n    \t\t\t\t   },\n    \t\t\t\t   series: {\n    \t\t\t\t       type: 'gauge',\n    \t\t\t\t       colors: this.getApplication().getColorPalette(this.getApplication().getApiParam('palette'), true),\n    \t\t\t\t       angleField: 'val',\n    \t\t\t\t       donut: 20\n    \t\t\t\t   }\n    \t\t\t\t},{\n\t\t    \t\t\twidth: 300,\n\t\t    \t\t\theight: 16,\n    \t\t\t\t\titems: {\n    \t\t    \t\t\txtype: 'sparklineline',\n        \t\t\t\t    itemId: 'gaugsparkline',\n    \t\t    \t\t\tvalues: [0,1,2,34],\n    \t\t    \t\t\theight: 16,\n    \t\t    \t\t\twidth: 300\n    \t\t\t\t\t},\n\t\t    \t\t\tlisteners: {\n\t\t    \t\t\t\tafterrender: function(cmp) {\n\t\t    \t\t\t\t\tcmp.getTargetEl().setStyle(\"cursor\", \"pointer\");\n\t\t\t    \t\t\t\tcmp.getTargetEl().on(\"click\", function(e, t, eOpts) {\n\t    \t\t\t\t\t    \tclearTimeout(this.getMoveWordsTimeout());\n\t\t    \t\t\t\t\t\tthis.getWords().forEach(function(word) {\n\n\t\t    \t\t\t\t\t\t\tif (word.svg) {\n\t\t    \t\t\t\t\t\t\t\tword.svg.remove();\n\t\t    \t\t\t\t\t\t\t\tdelete word.svg;\n\t\t    \t\t\t\t\t\t\t}\n\t\t    \t\t\t\t\t\t\tword.direction = -1; // reset\n\t\t    \t\t\t\t\t\t})\n\t\t    \t\t\t\t\t\tvar pos = Math.floor(e.event.offsetX * this.getWords().length / t.offsetWidth)\n\t\t    \t\t\t\t\t\tthis.moveWords(pos);\n\t\t    \t\t\t\t\t}, this);\n\t\t    \t\t\t\t},\n\t\t    \t\t\t\tscope: this\n\t\t    \t\t\t}\n    \t\t\t\t}]\n    \t\t}],\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 60,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(cmp.getValue())}\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(val)}\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.loadDocument();\n    \t}, this);\n    \t\n    },\n    \n    loadDocument: function() {\n    \tvar me = this;\n    \tvar docIndex = parseInt(this.getApiParam('docIndex')) || 0;\n    \tthis.getCorpus().getWordsArray({docIndex: docIndex, stopList: 'auto'}).then(function(words) {\n\n    \t\t// fold to lower case\n    \t\tvar lcwords = words.map(function(w) {return w.toLowerCase()});\n    \t\t\n    \t\t// if we don't have any groups of words, form them based on words that are longer than four letters\n    \t\tif (me.getApiParam(\"groups\")==undefined) {\n    \t\t\tvar group = {};\n    \t\t\tlcwords.forEach(function(w) {\n    \t\t\t\tif (w.length>5 && !(w in group)) {\n    \t\t\t\t\tgroup[w] = w.length;\n    \t\t\t\t} \n    \t\t\t});\n    \t\t\tvar maxLen = Math.max.apply(this, Object.values(group))\n    \t\t\tvar lenVal = d3.scaleLinear().domain([4,maxLen]).range([.5,1])\n    \t\t\tfor (var w in group) {\n    \t\t\t\tgroup[w] = lenVal(group[w]); // convert length to val between 0 and 1\n    \t\t\t}\n    \t\t\tme.setGroups({length: {\n    \t\t\t\tcolor: me.getApplication().getColorForTerm(\"length\"),\n    \t\t\t\tterms: group\n    \t\t\t}})\n    \t\t}\n\n    \t\tvar el = me.getComponent('fountain').getTargetEl();\n\t\t\tvar svgEl = el.down(\"svg\");\n    \t\tsvgEl.set({width: el.getWidth(), height: el.getHeight()});\n    \t\tvar svgDom = svgEl.dom\n    \t\tvar svg = d3.select(svgDom);\n    \t\tsvg.selectAll(\"*\").remove(); // clear\n    \t\t\n    \t\t// create words and set min height (highest point)\n    \t\tvar types = {};\n    \t\tvar groups = me.getGroups();\n\n    \t\tme.setWords(words.slice(0,1000).map(function(w) {\n    \t\t\tvar word = new me.FountainWord(w.toLowerCase());\n    \t\t\tif (word.word in types) {types[word.word]++}\n    \t\t\telse {types[word.word]=1;}\n    \t\t\tword.min = parseInt(Math.random()*svgDom.clientHeight*.05);\n    \t\t\tvar yshift = Math.sqrt(Math.random()*10)\n    \t\t\tword.yshift = Math.random()*2<1 ? - yshift : yshift;\n    \t\t\tword.jump = svgDom.clientHeight/10\n    \t\t\tword.groupVals = {};\n    \t\t\tfor (var g in groups) {\n    \t\t\t\tif (word.word in groups[g].terms) {\n    \t\t\t\t\tword.groupVals[g] = groups[g].terms[word.word]\n    \t\t\t\t}\n    \t\t\t}\n    \t\t\treturn word;\n    \t\t}));\n    \t\tvar max = Math.max.apply(this, Object.values(types));\n    \t\tvar fontSize = d3.scaleLog().domain([1,Math.max.apply(this, Object.values(types))]).range([4,12]);\n    \t\tme.getWords().forEach(function(word) {\n    \t\t\tword.fontSize = fontSize(types[word.word])\n    \t\t})\n    \t\tme.moveWords();\n    \t})\n    },\n    \n    FountainWord: function(word) {\n    \tthis.word = word;\n    \tthis.direction = -1;\n    },\n    \n    moveWords: function(until) {\n\n    \tvar words = this.getWords(),\n    \t\tsvg = this.getComponent('fountain').getTargetEl().down(\"svg\").dom,\n\t\t\theight = svg.clientHeight,\n\t\t\twidth = svg.clientWidth,\n\t\t\tgroups = this.getGroups();\n\t\tvar opacity = d3.scaleLinear().domain([0,height]).range([1,0]);\n\n\t\tvar gaugeVals = [];\n\t\tvar seen = 0;\n    \tfor (var i=0; i<words.length; i++) {\n    \t\tseen++;\n    \t\t\n\t\t\t// make sure to count group hits for all words since start to current point\n\t\t\tif (Object.keys(words[i].groupVals).length==0) {\n\t\t\t\tgaugeVals.push(0)\n\t\t\t} else {\n\t\t\t\tObject.values(words[i].groupVals).forEach(function(val) {\n\t\t\t\t\tgaugeVals.push(val);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n    \t\tif (words[i].direction<0) { // going up\n    \t\t\t\n\t\t\t\t\n    \t\t\tif (!words[i].svg) {\n    \t    \t\tvar word = d3.select(svg)\n    \t    \t\t\t.append(\"text\")\n    \t    \t\t\t.text(words[i].word)\n    \t    \t\t\t.attr(\"font-size\", words[i].fontSize)\n    \t    \t\t\t.attr(\"text-anchor\", \"middle\")\n    \t    \t\t\t.attr(\"x\", width/2)\n    \t    \t\t\t.attr(\"y\", height-(Math.random()*height)/5)\n    \t    \t\t\t.attr(\"fill\", Object.keys(words[i].groupVals).length==0 ? \"black\" : this.getApplication().getColorForTerm(Object.keys(words[i].groupVals).shift(), true));\n    \t    \t\twords[i].ys = [height];\n    \t    \t\twords[i].svg = word;\n    \t    \t\tif (!until || i>until) {\n    \t    \t\t\tbreak;\n    \t    \t\t}\n    \t\t\t} else {\n    \t\t\t\tvar y = parseInt(words[i].svg.attr(\"y\"));\n        \t\t\tvar delta = y-words[i].min;\n        \t\t\tvar change = delta/5\n        \t\t\twords[i].svg.attr(\"y\", y-change);\n        \t\t\twords[i].svg.attr(\"x\", parseInt(words[i].svg.attr(\"x\"))+words[i].yshift);\n        \t\t\ty = parseInt(words[i].svg.attr(\"y\"))\n        \t\t\twords[i].ys.push(y);\n        \t\t\tif (y<=words[i].min) {\n        \t\t\t\twords[i].direction = 1;\n        \t\t\t}\n    \t\t\t}\n    \t\t\t\n    \t\t} else if (words[i].direction>0) { // going down\n    \t\t\tif (words[i].svg && words[i].ys.length>0) {\n        \t\t\twords[i].svg.attr(\"y\", words[i].ys.pop());\n        \t\t\twords[i].svg.attr(\"x\", parseInt(words[i].svg.attr(\"x\"))+words[i].yshift);\n        \t\t\twords[i].svg.attr(\"opacity\", opacity(parseInt(words[i].svg.attr(\"y\"))));\n    \t\t\t\t\n    \t\t\t} else {\n    \t\t\t\twords[i].direction = 0;\n    \t\t\t}\n    \t\t} else {\n    \t\t\tif (\"svg\" in words[i]) {\n    \t\t\t\twords[i].svg.remove()\n    \t\t\t\tdelete words[i].svg\n    \t\t\t}\n    \t\t}\n    \t\t\n    \t}\n\n    \tvar avg = gaugeVals.length==0 ? 0 : Ext.mean(gaugeVals)*100;\n    \tvar polar = this.down(\"polar\")\n    \tpolar.getStore().getAt(0).set(\"val\", avg)\n    \tpolar.setSprites({\n            type: 'text',\n            text: Ext.util.Format.number(avg, '%0.0'),\n            x: 145,\n            y: 240\n        });\n    \tvar sparkline = this.down(\"sparklineline\");\n    \tsparkline.setValues(gaugeVals.length>100 ? this.chunkify(gaugeVals, 100, true).map(function(vals) {return Ext.mean(vals)}) : gaugeVals);\n    \tsparkline.setWidth(seen*sparkline.ownerCt.getWidth()/words.length)\n    \t\n    \tthis.setMoveWordsTimeout(Ext.defer(this.moveWords, 100, this));\n    },\n    \n    // https://stackoverflow.com/questions/8188548/splitting-a-js-array-into-n-arrays\n    chunkify: function(a, n, balanced) {\n        if (n < 2)\n            return [a];\n\n        var len = a.length,\n                out = [],\n                i = 0,\n                size;\n\n        if (len % n === 0) {\n            size = Math.floor(len / n);\n            while (i < len) {\n                out.push(a.slice(i, i += size));\n            }\n        }\n\n        else if (balanced) {\n            while (i < len) {\n                size = Math.ceil((len - i) / n--);\n                out.push(a.slice(i, i += size));\n            }\n        }\n\n        else {\n\n            n--;\n            size = Math.floor(len / n);\n            if (len % size === 0)\n                size--;\n            while (i < size * n) {\n                out.push(a.slice(i, i += size));\n            }\n            out.push(a.slice(size * n));\n\n        }\n\n        return out;    \t\n    },\n    \n    initComponent: function() {\n    \tthis.callParent(arguments);\n    }\n});","Ext.define('Voyant.panel.RezoViz', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.rezoviz',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tlimit: 25,\n    \t\tstopList: 'auto',\n    \t\ttype: ['organization','location','person'],\n    \t\tminEdgeCount: 2\n    \t},\n\t\tglyph: 'xf1cb@FontAwesome'\n    },\n    \n    config: {\n    \tnetwork: undefined, // the vis network graph\n    \tnodesStore: undefined, // used by combo\n    \tnodesDataSet: undefined, // used by vis\n    \tedgesDataSet: undefined, // used by vis\n    \tisNetworkBounded: true,\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n\n    categorizedNodeOptions: {\n    \tlocation: {\n    \t\tfont: {\n    \t\t\tcolor: 'green'\n    \t\t}\n    \t},\n    \tperson: {\n    \t\tfont: {\n    \t\t\tcolor: 'maroon'\n    \t\t}\n    \t},\n    \torganization: {\n    \t\tfont: {\n    \t\t\tcolor: 'purple'\n    \t\t}\n    \t}\n    },\n    nodeOptions: {\n\t\tshape: 'box',\n\t\tcolor: {\n\t\t\tborder: 'rgba(0,0,0,0.1)',\n\t\t\tbackground: 'rgba(255,255,255,1)'\n\t\t},\n\t\tscaling:{\n            label: {\n              min: 8,\n              max: 20\n            }\n          }\n\t},\n\tedgeOptions: {\n\t\tcolor: {\n\t\t\tcolor: 'rgba(0,0,0,0.1)',\n\t\t\thighlight: 'black',\n\t\t\thover: 'red'\n\t\t},\n\t\tlabelHighlightBold: false\n\t},\n\thighlightOptions: {\n\t\tfont: {\n\t\t\tcolor: 'white'\n\t\t},\n\t\tcolor: {\n\t\t\tbackground: 'black'/*,\n\t\t\thover: {\n\t\t\t\tborder: '#CB157F',\n\t\t\t\tbackground: '#EB42A5'\n\t\t\t}*/\n\t\t}\n\t},\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n        \n        this.setNodesStore(Ext.create('Ext.data.Store', {\n        \tfields: ['id', 'term', 'type', 'rawFreq'],\n        \tsortOnLoad: true,\n        \tsorters: 'term'\n        }));\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'combo',\n                    queryMode: 'local',\n                    valueField: 'term',\n                    displayField: 'term',\n                    store: this.getNodesStore(),\n                    listeners: {\n\t\t\t\t\t\tselect: function(combo, record) {\n\t\t\t\t\t\t\tthis.getNetwork().selectNodes([record.get('id')]);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n                    }\n                },{\n                \txtype: 'button',\n\t                text: this.localize('categories'),\n\t                menu: {\n\t                \titems: [{\n\t                \t\txtype: 'menucheckitem',\n\t                \t\ttext: this.localize('people'),\n\t                \t\titemId: 'person',\n\t                \t\tchecked: true\n\t                \t},{\n\t                \t\txtype: 'menucheckitem',\n\t                \t\ttext: this.localize('locations'),\n\t                \t\titemId: 'location',\n\t                \t\tchecked: true\n\t                \t},{\n\t                \t\txtype: 'menucheckitem',\n\t                \t\ttext: this.localize('organizations'),\n\t                \t\titemId: 'organization',\n\t                \t\tchecked: true\n\t                \t},{\n\t                \t\txtype: 'button',\n\t                \t\ttext: this.localize('reload'),\n\t                \t\tstyle: 'margin: 5px;',\n\t                \t\thandler: this.categoriesHandler,\n\t                \t\tscope: this\n\t                \t}]\n\t                }\n                },{\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\titemId: 'minEdgeCount',\n\t\t\t\t\tfieldLabel: this.localize('minEdgeCount'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 120,\n\t\t\t\t\twidth: 170,\n\t\t\t\t\tmaxValue: 10,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tallowDecimals: false,\n\t\t\t\t\tallowExponential: false,\n\t\t\t\t\tallowOnlyWhitespace: false,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\trender: function(field) {\n\t\t\t\t\t\t\tfield.setRawValue(this.getApiParam('minEdgeCount'));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchange: function(field, newVal) {\n\t\t\t\t\t\t\tif (field.isValid()) {\n\t\t\t\t\t\t\t\tthis.setApiParam('minEdgeCount', newVal);\n\t\t\t\t\t\t\t\tthis.getEntities();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n                },{ xtype: 'tbseparator' },{\n                \txtype: 'slider',\n                \tfieldLabel: this.localize('repulsion'),\n                \tlabelAlign: 'right',\n                \tlabelWidth: 70,\n                \twidth: 150,\n                \tvalue: 100,\n                \tincrement: 10,\n                \tminValue: 0,\n                \tmaxValue: 500,\n                \tlisteners: {\n                \t\tchangecomplete: function(slider, val) {\n                \t\t\tthis.getNetwork().physics.options.repulsion.nodeDistance = val;\n                \t\t\tthis.getNetwork().startSimulation();\n                \t\t},\n                \t\tscope: this\n                \t}\n                },{\n                \txtype: 'slider',\n                \tfieldLabel: this.localize('stiffness'),\n                \tlabelAlign: 'right',\n                \tlabelWidth: 70,\n                \twidth: 150,\n                \tvalue: 4,\n                \tincrement: 1,\n                \tminValue: 0,\n                \tmaxValue: 10,\n                \tlisteners: {\n                \t\tchangecomplete: function(slider, val) {\n                \t\t\tval /= 100;\n                \t\t\tthis.getNetwork().physics.options.repulsion.springConstant = val;\n                \t\t\tthis.getNetwork().startSimulation();\n                \t\t},\n                \t\tscope: this\n                \t}\n                },{\n                \txtype: 'slider',\n                \tfieldLabel: this.localize('friction'),\n                \tlabelAlign: 'right',\n                \tlabelWidth: 55,\n                \twidth: 150,\n                \tvalue: 9,\n                \tincrement: 10,\n                \tminValue: 0,\n                \tmaxValue: 100,\n                \tlisteners: {\n                \t\tchangecomplete: function(slider, val) {\n                \t\t\tval /= 100;\n                \t\t\tthis.getNetwork().physics.options.repulsion.damping = val;\n                \t\t\tthis.getNetwork().startSimulation();\n                \t\t},\n                \t\tscope: this\n                \t}\n                }]\n            }]\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tif (corpus.getDocumentsCount()==1) {\n        \t\tthis.setApiParam(\"minEdgeCount\", 1);\n        \t}\n        \tthis.getEntities();\n        }, this);\n        \n        this.on('resize', function(panel, width, height) {\n\n\t\t}, this);\n        \n        me.callParent(arguments);\n    },\n    \n    getEntities: function() {\n    \tvar corpusId = this.getCorpus().getId();\n    \tvar el = this.getLayout().getRenderTarget();\n    \tel.mask(this.localize('loadingEntities'));\n    \tExt.Ajax.request({\n    \t\turl: this.getApplication().getTromboneUrl(),\n    \t\tmethod: 'POST',\n    \t\tparams: {\n    \t\t\ttool: 'corpus.EntityCollocationsGraph',\n    \t\t\ttype: this.getApiParam('type'),\n    \t\t\tlimit: this.getApiParam('limit'),\n    \t\t\tminEdgeCount: this.getApiParam(\"minEdgeCount\"),\n    \t\t\tcorpus: corpusId\n\t\t\t},\n\t\t\ttimeout: 60000,\n    \t\tsuccess: function(response) {\n    \t\t\tel.unmask();\n    \t\t\tvar obj = Ext.decode(response.responseText);\n    \t\t\tif (obj.entityCollocationsGraph.edges.length==0) {\n    \t\t\t\tthis.showError({msg: this.localize('noEntities')});\n    \t\t\t\tExt.Msg.confirm(this.localize('error'), this.localize('noEntitiesForEdgeCount'), function(button) {\n    \t\t\t\t\tif (button === 'yes') {\n    \t\t\t\t\t\tvar newEdgeCount = Math.max(1, this.getApiParam('minEdgeCount')-1);\n    \t\t\t\t\t\tthis.queryById('minEdgeCount').setRawValue(newEdgeCount);\n    \t\t\t\t\t\tthis.setApiParam('minEdgeCount', newEdgeCount);\n    \t\t\t\t\t\tthis.getEntities();\n    \t\t\t\t\t}\n    \t\t\t\t}, this);\n    \t\t\t}\n    \t\t\telse {\n        \t\t\tthis.processEntities(obj.entityCollocationsGraph);\n        \t\t\tthis.initGraph();\n    \t\t\t}\n    \t\t},\n    \t\tscope: this\n    \t});\n    },\n    \n    processEntities: function(entityParent) {\n    \tvar nodes = entityParent.nodes;\n    \tvar edges = entityParent.edges;\n    \t\n    \t// we need to calculate the font size because the scaling option doesn't seem to work as advertised\n    \tvar extent = d3.extent(nodes, function(node) {return node.rawFreq;});\n    \tvar min = extent[0];\n    \tvar max = extent[1];    \t\n    \tvar scaleFont = d3.scaleLinear()\n                    .domain([min, max])\n                    .range([10, 24]);\n    \t\n    \tvar visNodes = [];\n    \tfor (var i = 0; i < nodes.length; i++) {\n    \t\tvar n = nodes[i];\n    \t\tn.id = i;\n    \t\tvisNodes.push({id: i, label: n.term, value: nodes[i].rawFreq, font: {size: scaleFont(n.rawFreq), color: this.categorizedNodeOptions[n.type].font.color}, type: n.type, rawFreq: n.rawFreq, title: n.term + (n.rawFreq ? ' ('+n.rawFreq+')':'')});\n    \t}\n    \t\n    \tthis.getNodesStore().loadData(nodes);\n    \t\n    \tvar visEdges = [];\n    \tfor (var i = 0; i < edges.length; i++) {\n    \t\tvar link = edges[i].nodes;\n    \t\tvisEdges.push({from: link[0], to: link[1], title: edges[i].count, value: 200*edges[i].count});\n    \t}\n    \t\n    \tthis.setNodesDataSet(new vis.DataSet(visNodes));\n    \tthis.setEdgesDataSet(new vis.DataSet(visEdges));\n    },\n    \n    initGraph: function() {\n    \tvar el = this.getLayout().getRenderTarget();\n    \tel.update(''); // clear\n    \t\n    \t// explicitly set dimensions\n    \tel.setWidth(el.getWidth());\n    \tel.setHeight(el.getHeight());\n\n    \tvar options = {\n\t\t\tinteraction: {\n    \t\t\thover: true,\n    \t\t\thoverConnectedEdges: true,\n    \t\t\tmultiselect: false\n    \t\t},\n    \t\tphysics: {\n    \t\t\tsolver: 'repulsion',\n    \t\t\trepulsion: {\n    \t\t\t\tcentralGravity: 0.1\n    \t\t\t}\n    \t\t},\n    \t\tnodes: this.nodeOptions,\n    \t\tedges: this.edgeOptions\n    \t};\n    \t\n    \t\n    \tvar network = new vis.Network(el.dom, {\n    \t\tnodes: this.getNodesDataSet(),\n    \t\tedges: this.getEdgesDataSet()\n    \t}, options);\n\n    \tif (this.getIsNetworkBounded()) {\n\t    \tnetwork.on('beforeDrawing', function (ctx) {\n\t    \t\tvar el = this.getLayout().getRenderTarget();\n\t    \t\tvar width = el.getWidth();\n\t    \t\tvar height = el.getHeight();\n\t    \t\t\n\t    \t    var nodePositions = network.getPositions();\n\t    \t    for (var id in nodePositions) {\n\t    \t    \tvar node = nodePositions[id];\n\t    \t    \tvar xy = network.canvasToDOM(node);\n\t    \t    \tvar boundedX = Math.max(0, Math.min(width, xy.x));\n\t    \t    \tvar boundedY = Math.max(0, Math.min(height, xy.y));\n\t    \t    \tvar bXY = network.DOMtoCanvas({x: boundedX, y: boundedY});\n\t    \t    \tnetwork.body.nodes[id].x = bXY.x;\n\t    \t    \tnetwork.body.nodes[id].y = bXY.y;\n\t    \t    }\n\t    \t}.bind(this));\n    \t}\n    \t\n    \tnetwork.on('selectNode', function(params) {\n    \t\tvar node = params.nodes[0];\n    \t\tthis.doNodeSelect(node);\n    \t}.bind(this));\n    \tnetwork.on('deselectNode', function(params) {\n    \t\tnetwork.unselectAll(); // need this due to our custom selecting code\n    \t\t\n    \t\tvar node = params.nodes[0];\n    \t\tif (node !== undefined) {\n    \t\t\t// select clicked node after deselection is finished\n    \t\t\tsetTimeout(this.doNodeSelect.bind(this), 5, node);\n    \t\t}\n    \t}.bind(this));\n    \tnetwork.on('selectEdge', function(params) {\n    \t\t// prevent edge selection\n    \t\tnetwork.unselectAll();\n    \t});\n    \t\n    \tthis.setNetwork(network);\n    },\n    \n    doNodeSelect: function(node) {\n\t\tvar term = this.getNodesDataSet().get(node).label;\n\t\tthis.dispatchEvent(\"termsClicked\", this, [term]);\n    \tvar network = this.getNetwork();\n\t\tvar nodes = network.getConnectedNodes(node);\n\t\tnodes.push(node);\n\t\tvar edges = network.getConnectedEdges(node);\n\t\t\n\t\t// custom selection to avoid selecting edges between the secondary/connected nodes\n\t\tnetwork.unselectAll();\n\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t\tvar n = nodes[i];\n\t\t\tvar nodeObj = network.body.nodes[n];\n\t\t\tnetwork.selectionHandler.selectObject(nodeObj, false);\n\t\t}\n\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\tvar e = edges[i];\n\t\t\tvar edgeObj = network.body.edges[e];\n\t\t\tnetwork.selectionHandler.selectObject(edgeObj, false);\n\t\t}\n\t\t\n\t\tnetwork.redraw(); // need to force redraw if coming from deselect\n    },\n    \n    categoriesHandler: function(item) {\n    \tvar categories = [];\n    \titem.up('menu').items.each(function(checkitem) {\n    \t\tif (checkitem.checked) {\n    \t\t\tcategories.push(checkitem.itemId);\n    \t\t}\n    \t});\n    \t\n    \tthis.setApiParam('type', categories);\n    \tthis.getEntities();\n    },\n    \n    map: function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t}\n});","Ext.define('Voyant.panel.Loom', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.loom',\n    statics: {\n        i18n: {\n        \ttitle: \"Loom\",\n        \tcontrols: \"Controls\",\n        \tfrequenciesGroup: \"Frequencies\",\n        \tcoverageGroup: \"Coverage\",\n        \tdistributionsGroup: \"Distribution\",\n        \ttermsGroup: \"Terms\",\n        \tinDocumentsLabel: \"in documents\",\n        \tinDocumentsLabelTip: \"each term must be present in the number of documents defined by this range\",\n        \tspanSomeLabel: \"some documents\",\n        \tspanSomeLabelTip: \"each term must be present in at least one document defined by this range\",\n        \tspanAllLabel: \"all documents\",\n        \tspanAllLabelTip: \"each term must be present in all documents defined by this range\",\n        \tspanOnlyLabel: \"only documents\",\n        \tspanOnlyLabelTip: \"each term must be present in only the documents defined by this range\",\n        \trawFreqLabel: \"raw frequency\",\n        \trawFreqLabelTip: \"raw term frequencies for the term must be between these values (inclusively)\",\n        \trawFreqPercentileLabel: \"raw frequency percentile\",\n        \trawFreqPercentileLabelTip: \"raw term frequencies for the term must be between these percentile values (inclusively), this is useful for saying something like terms in the top 90th percentile which will provide 10% of words regardless of the variation in values.\",\n        \tdistributionsStdDevLabel: \"standard deviation of distributions\",\n        \tdistributionsStdDevLabelTip: \"the standard deviation of term distribution scores must be between the defined range of values (lower will be for values that are more consistent, higher will be for values that have greater variability)\",\n        \tdistributionsStdDevPercentileLabel: \"percentile of standard deviations of distributions\",\n        \tdistributionsStdDevPercentileLabelTip: \"the percentile of standard deviations of distributions must be between the defined range of values (lower will be for values that are more consistent, higher will be for values that have greater variability)\",\n        \ttermsLengthLabel: \"term length\",\n        \ttermsLengthLabelTip: \"the length (number of characters) of the term (word)\",\n        \ttermsLengthPercentileLabel: \"term length percentile\",\n        \ttermsLengthPercentileLabelTip: \"the percentile of the length (number of characters) of the term (word)\",\n        \tdistributionIncreasesLabel: \"increases in distribution values\",\n        \tdistributionIncreasesLabelTip: \"the number of increases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionConsecutiveIncreasesLabel: \"consecutive decreases in distribution values\",\n        \tdistributionConsecutiveIncreasesLabelTip: \"the number of consecutive decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionDecreasesLabel: \"decreases in distribution values\",\n        \tdistributionDecreasesLabelTip: \"the number of decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionConsecutiveDecreasesLabel: \"consecutive decreases in distribution values\",\n        \tdistributionConsecutiveDecreasesLabelTip: \"the number of consecutive decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionMaxLabel: \"distribution maximum\",\n        \tdistributionMaxLabelTip: \"the maximum of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionMinLabel: \"distribution minimum\",\n        \tdistributionMinLabelTip: \"the minimum of the distribution values must be between the defined range (inclusively)\",\n        \tpresetsGroup: \"pre-sets\",\n        \tpresetHighFreq: \"terms that are high frequency\",\n        \tpresetHighFreqLonger: \"terms that are longer and high frequency\",\n        \tpresetSingleDoc: \"higher frequency terms that only occur once\",\n        \tpresetIncreaseDistributions: \"terms that generally increase in frequency\",\n        \tpresetDecreaseDistributions: \"terms that generally decrease in frequency \",\n        \tpresetNearStartDistributions: \"terms that peak in distribution toward the beginning \",\n        \tpresetNearEndDistributions: \"terms that peak in distribution toward the end \",\n        \tpresetSporadicDistributions: \"terms whose distributions vary the most\",\n        \tvisibleTerms: \"max terms\",\n        \tscaling: \"scaling\",\n        \tscaleLinear: \"linear\",\n        \tscaleLog: \"logarithmic\",\n        \tscaleSqrt: \"square root\"\n        \t\n        },\n        api: {\n            limit: 500,\n            stopList: 'auto',\n            inDocuments: undefined,\n            spanSome: undefined,\n            spanAll: undefined,\n            spanOnly: undefined,\n            termLength: undefined,\n            termsLengthPercentile: undefined,\n            rawFreq: undefined,\n            rawFreqPercentile: undefined,\n            distributionsStdDev: undefined,\n            distributionsStdDevPercentile: undefined,\n            distributionIncreases: undefined,\n            distributionDecreases: undefined,\n            distributionConsecutiveIncreases: undefined,\n            distributionConsecutiveDecreases: undefined,\n            distributionMax: undefined,\n            distributionMin: undefined,\n            scaling: 'linear'\n        },\n        glyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n    \tstore: undefined,\n    \tterms: undefined,\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}\n    \t],\n    \tcontrols: undefined\n    },\n\n\n    constructor: function(config) {\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n        \n    initComponent: function() {\n    \t\n        this.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n        \n    \tvar controls = new Ext.util.MixedCollection({\n    \t\tallowFunctions: true\n    \t});\n    \tcontrols.addAll({\n    \t\tinDocuments: new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'inDocuments',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMin(1);\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar count = record.getDistributions().filter(function(val) {return val>0}).length;\n\t        \t\treturn count >= this.getLow() && count <= this.getHigh();\n\t        \t}\n    \t\t}),\n    \t\tspanSome :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanSome',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=low; i<high+1; i++) {\n\t        \t\t\tif (vals[i]>0) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t}),\n    \t\tspanAll :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanAll',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=low; i<high+1; i++) {\n\t        \t\t\tif (vals[i]==0) {return false}\n\t        \t\t}\n\t        \t\treturn true;\n\t        \t}\n    \t\t}),\n    \t\tspanOnly :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanOnly',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=0; i<vals.length; i++) {\n\t        \t\t\tif (i<low || i>high) {\n\t        \t\t\t\tif (vals[i]>0) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tif (vals[i]==0) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn true;\n\t        \t}\n    \t\t}),\n    \t\trawFreq :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'rawFreq',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('rawFreq')});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), val = record.get(\"rawFreq\");\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\trawFreqPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'rawFreqPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('rawFreq')});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n\t        \t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"rawFreq\")),\n\t        \t\t\tval = Math.round(ind*100/this.vals.length)\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionsStdDev :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'distributionsStdDev',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar allvals = Ext.Array.flatten(store.getRange().map(function(r) {return r.getDistributions()}));\n\t    \t\t\t// we'll scale to all available distributions, otherwise we're not making similar comparisons\n\t    \t\t\tvar scale = d3.scaleLinear().domain([d3.min(allvals),d3.max(allvals)]).range([0,100]);\n\t    \t\t\tstore.each(function(record) {\n\t    \t\t\t\tif (record.get(\"distributionsStdDev\")===undefined) {\n\t    \t\t\t\t\t// https://derickbailey.com/2014/09/21/calculating-standard-deviation-with-array-map-and-array-reduce-in-javascript/\n\t    \t\t\t\t\t// https://gist.github.com/Daniel-Hug/7273430\n\t\t    \t\t\t\tvar vals = record.getDistributions();\n\t\t    \t\t\t\tvar scaledVals = vals.map(function(v) {return scale(v)});\n\t\t    \t\t\t\tvar avg = Ext.Array.mean(scaledVals);\n\t\t\t\t\t\t\tvar squareDiffs = vals.map(function(value){\n\t\t\t\t\t\t\t\t    var diff = value - avg;\n\t\t\t\t\t\t\t\t    var sqrDiff = diff * diff;\n\t\t\t\t\t\t\t\t    return sqrDiff;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar avgSquareDiff = Ext.Array.mean(squareDiffs);\n\t\t\t\t\t\t\tvar stdDev = Math.sqrt(avgSquareDiff);\n\t\t\t\t\t\t\trecord.set(\"distributionsStdDev\", stdDev);\n\t    \t\t\t\t}\n\t    \t\t\t})\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('distributionsStdDev')});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n\t        \t\t\tval = record.get(\"distributionsStdDev\");\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionsStdDevPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'distributionsStdDevPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('distributionsStdDev')});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n        \t\t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"distributionsStdDev\")),\n        \t\t\t\tval = Math.round(ind*100/this.vals.length)\n        \t\t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\ttermsLength :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'terms',\n\t    \t\tname: 'termsLength',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('term').length});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), val = record.get(\"term\").length;\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\ttermsLengthPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'terms',\n\t    \t\tname: 'termsLengthPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('term').length});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n        \t\t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"term\").length),\n        \t\t\t\tval = Math.round(ind*100/this.vals.length)\n        \t\t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionIncreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionIncreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar increases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]>vals[i-1]) {\n\t        \t\t\t\tincreases++;\n\t        \t\t\t\tif (increases>high) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn increases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionConsecutiveIncreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionConsecutiveIncreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar increases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]>vals[i-1]) {\n\t        \t\t\t\tincreases++;\n\t        \t\t\t\tif (increases>high) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tincreases=0;\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn increases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionDecreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionDecreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar decreases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]<vals[i-1]) {\n\t        \t\t\t\tdecreases++;\n\t        \t\t\t\tif (decreases>high) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn decreases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionConsecutiveDecreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionConsecutiveDecreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar decreases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]<vals[i-1]) {\n\t        \t\t\t\tdecreases++;\n\t        \t\t\t\tif (decreases>high) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tdecreases = 0;\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn decreases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionMax :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionMax',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions(), val = Ext.Array.max(vals);\n\t        \t\tfor (var i=low;i<high;i++) { // look at every value in case there are duplicate values\n\t        \t\t\tif (vals[i]==val) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t}),\n    \t\tdistributionMin :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionMin',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions(), val = Ext.Array.min(vals);\n\t        \t\tfor (var i=low;i<high;i++) { // look at every value in case there are duplicate values\n\t        \t\t\tif (vals[i]==val) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t})\n    \t});\n\n    \tcontrols.each(function(control) {\n    \t\tvar val = this.getApiParam(control.getName()), vals = (val || \"\").split(\",\");\n    \t\tcontrol.setEnabled(val!==undefined);\n    \t\tif (vals.length==2) {\n    \t\t\tcontrol.setLow(parseInt(vals[0]))\n    \t\t\tcontrol.setHigh(parseInt(vals[1]))\n    \t\t}\n    \t\tcontrol.on(\"change\", function(control) {\n    \t\t\tif (control.getEnabled()) {\n    \t\t\t\tthis.setApiParam(control.getName(), control.getLow()+\",\"+control.getHigh());\n    \t\t\t} else {\n    \t\t\t\tthis.setApiParam(control.getName(), undefined);\n    \t\t\t}\n    \t\t\tthis.filterRecords();\n    \t\t}, this);\n    \t}, this);\n\n    \tthis.setControls(controls);\n    \t\n    \t// used below in preset handlers\n    \tvar me = this;\n    \tvar clearApiParamsForControls = function() {\n    \t\tvar currentParams = me.getApiParams();\n    \t\tvar params = {};\n    \t\tme.controls.each(function(control) {\n    \t\t\tcontrol.setEnabled(false, true);\n    \t\t\tvar name = control.getName();\n    \t\t\tif (name in currentParams) {\n    \t\t\t\tme.setApiParam(name, undefined)\n    \t\t\t}\n    \t\t})\n    \t}\n\n    \t\n    \tvar tbitems = [{\n    \t\ttext: this.localize(\"presetsGroup\"),\n    \t\tmenu: {\n    \t\t\titems: [{\n    \t\t\t\ttext: this.localize('presetHighFreq'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t    \tthis.filterRecords();\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetHighFreqLonger'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"termsLengthPercentile\").setEnabled(true, true).setValues(50,100, true);\n    \t\t\t\t\tthis.controls.getByKey(\"rawFreqPercentile\").setEnabled(true, true).setValues(50,100);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetSingleDoc'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"inDocuments\").setEnabled(true, true).setValues(1,1);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetIncreaseDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionIncreases\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.75),max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetDecreaseDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionDecreases\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.75),max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetNearStartDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionMax\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(0, Math.round(max*.2));\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetNearEndDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionMax\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.8), max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetSporadicDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"distributionsStdDevPercentile\").setEnabled(true, true).setValues(80, 100);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}]\n    \t\t}\n    \t}, {\n    \t\txtype: 'tbspacer'\n    \t}];\n    \t[\"frequencies\",\"coverage\",\"distributions\",\"terms\"].map(function(group) {\n    \t\ttbitems.push({\n    \t\t\ttext: this.localize(group+\"Group\"),\n    \t\t\tmenu: {\n    \t\t\t\titems: controls.filterBy(function(control) {return control.getGroup()==group}).getRange().map(function(control) {\n    \t\t\t\t\treturn {\n    \t\t\t\t\t\txtype: 'menucheckitem',\n    \t\t\t\t\t\tchecked: control.getEnabled(),\n\t\t\t\t\t\t\ttext: this.localize(control.getName()+\"Label\"),\n\t\t\t\t\t\t\ttooltip: this.localize(control.getName()+\"LabelTip\"),\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tbeforerender: function(cmp) {\n\t\t\t\t\t\t\t\t\tcmp.setChecked(control.getEnabled());\n\t\t\t\t\t\t\t\t\tcontrol.on(\"change\", function() {\n\t\t\t\t\t\t\t\t\t\tcmp.setChecked(control.getEnabled());\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclick: function(cmp) {\n\t\t\t\t\t\t\t\t\tcontrol.setEnabled(cmp.checked)\n\t\t\t\t\t\t\t\t\tcmp.getMenu().setDisabled(!cmp.checked)\n\t\t\t\t\t\t\t\t\tif (cmp.checked) {cmp.getMenu().show();}\n\t\t\t\t\t\t\t\t\telse {cmp.getMenu().hide()}\n\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t},\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\tdisabled: !control.getEnabled(),\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\txtype: 'multislider',\n\t\t\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\t\t\tminValue: control.getMin() || 0,\n\t\t\t\t\t\t\t\t\tmaxValue: control.getMax() || 0,\n\t\t\t\t\t\t\t\t\tvalues: [(control.getLow() || 0), (control.getHigh() || 0)],\n\t\t\t\t\t\t\t\t\ttipText: function(t) {\n\t\t\t\t\t\t\t\t\t\treturn control.getOffsetTipText() ? t.value+1 : t.value;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tlisteners: {\n    \t\t\t\t\t\t\t\t\tbeforerender: function(slider) {\n    \t\t\t\t\t\t\t\t\t\tslider.updateFromControl(control);\n    \t\t\t\t\t\t\t\t\t\tcontrol.on(\"change\", function() {\n    \t\t\t\t\t\t\t\t\t\t\tslider.updateFromControl(control);\n    \t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t\t\tchangecomplete: function(slider) {\n    \t\t\t\t\t\t\t\t\t\tcontrol.setValues(slider.getValues());\n    \t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tupdateFromControl: function(control) {\n\t\t\t\t\t\t\t\t\t\tthis.setMinValue(control.getMin() || 0);\n\t\t\t\t\t\t\t\t\t\tthis.setMaxValue(control.getMax());\n\t\t\t\t\t\t\t\t\t\tthis.setValue(0, control.getLow() || 0)\n\t\t\t\t\t\t\t\t\t\tthis.setValue(1, control.getHigh()===undefined ? (control.getMax() || 0) : control.getHigh())\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}, this)\n    \t\t\t}\n    \t\t});\n    \t}, this);\n    \t\n        Ext.apply(this, {\n            title: this.localize('title'),\n            layout: {\n            \ttype: 'hbox',\n            \talign: 'stretch'\n            },\n            listeners: {\n            \tafterrender: function() {\n            \t\tvar terms = this.getComponent(\"terms\"), threads = this.getComponent(\"threads\");\n            \t\t\n            \t\t// this is a quick and dirty implementation to mirror actions in the terms panel to the threads panel,\n            \t\t// but it should probably redone locally to the threads logic and using the tips\n            \t\tterms.on(\"termHovered\", function(src, term) {\n            \t\t\tvar thick = threads.getTargetEl().dom.querySelector(\"path[term=\"+term+\"]\");\n            \t\t\tif (thick) {\n                \t\t\tvar fadeIt = function(node, time) {\n                \t\t\t\topacity = node.getAttribute(\"opacity\");\n                \t\t\t\tif (opacity>0) {\n                \t\t\t\t\topacity-=.01;\n                \t\t\t\t\tnode.setAttribute(\"opacity\", opacity)\n                \t\t\t\t\ttime=time/2\n                \t\t\t\t\tExt.defer(fadeIt, time, this, [node, time]);\n                \t\t\t\t}\n                \t\t\t}   \n                \t\t\tthick.setAttribute(\"opacity\", 1);\n                \t\t\tfadeIt(thick, 1000);\n            \t\t\t}\n            \t\t})\n            \t}\n            },\n            items: [{\n            \titemId: 'terms',\n            \twidth: 100,\n            \tlayout: 'fit',\n            \tlisteners: {\n            \t\tfilterchange: function(store) {\n            \t\t\tvar el = this.getTargetEl(), width = el.getWidth(), height = el.getHeight(), len = store.getCount();\n            \t\t\tel.setHtml(\" \")\n            \t\t\tterms = store.getRange().map(function(r,i) {\n            \t\t\t\treturn {\n            \t\t\t\t\tterm: r.getTerm(),\n            \t\t\t\t\tcol: Voyant.application.getColorForTerm(r.getTerm(), true),\n            \t\t\t\t\tx: width/2,\n            \t\t\t\t\ty: i*height/len\n            \t\t\t\t}\n            \t\t\t});\n            \t\t\tterms.sort(function(a, b) {return a.term.localeCompare(b.term)});\n            \t\t\t\n            \t\t\t// attempts to use fisheye code failed with larger number or words http://bl.ocks.org/jczaplew/8603055\n\n            \t\t\t\n            \t\t\t\n          \t\t\t  var svg = d3.select(el.dom).append(\"svg\")\n      \t\t\t    .attr(\"width\", width)\n      \t\t\t    .attr(\"height\", height)\n      \t\t\t  .append(\"g\")\n      \t\t\t    .attr(\"transform\", \"translate(-.5,-.5)\");\n          \t\t\t  \n          \t\t\tvar textHeight = Math.ceil(height/terms.length);\n        \t\t\t  var text = svg.selectAll(\"ytext\")\n      \t\t\t    .data(terms)\n      \t\t\t  .enter().append(\"text\")\n      \t\t\t    .text(function(d,i){return d.term})\n      \t\t\t    .attr(\"class\", \"ytext\") \n      \t\t\t    .attr(\"text-anchor\", \"middle\")\n    \t\t\t  \t.attr(\"x\", width/2)\n    \t\t\t  \t.attr(\"y\", function(t, i) {return textHeight*i})\n      \t\t\t    .attr(\"fill\", function(d) {return Voyant.application.getColorForTerm(d.term, true)})\n\n            \t\t\tvar textHeight = Math.ceil(height/terms.length);\n\n            \t\t\t\n            \t\t\tvar fisheye = d3.fisheye.circular()\n\t            \t\t    .radius(50)\n\t            \t\t    .distortion(2);\n            \t\t\t\n            \t\t\tyFisheye = d3.fisheye.scale(d3.scaleIdentity).domain([0, height]);\n            \t\t\t\n            \t\t\tvar me = this;\n            \t\t\tsvg.on(\"mousemove\", function() {\n            \t\t\t\tvar mouse = d3.mouse(this);\n            \t\t\t\t\tcurrentItem = Math.round(mouse[1]*terms.length/height),\n            \t\t\t\t\tcurrentItem = Math.min(currentItem, terms.length-1);\n            \t\t\t\tfisheye.focus(mouse[1]);\n            \t\t\t\tyFisheye.focus(mouse[1]);\n            \t\t\t\t\n            \t\t\tvar nodes = text.nodes();\n            \t\t\tif (nodes[currentItem]) {\n                \t\t\tme.fireEvent(\"termHovered\", me, nodes[currentItem].textContent)\n            \t\t\t}\n            \t\t\t\n            \t\t\tvar fs = 14, y=Math.max(mouse[1],fs), fo=1;\n            \t\t\td3.select(nodes[currentItem])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t\t\n            \t\t\tvar yin = undefined;\n            \t\t\tfor (var i=currentItem-1;i>-1;i--) {\n            \t\t\t\tif (fs>=8) {\n            \t\t\t\t\ty-=fs\n            \t\t\t\t\tfs-=.5\n            \t\t\t\t} else {\n            \t\t\t\t\tif (yin==undefined) {\n            \t\t\t\t\t\tyin = y/i\n            \t\t\t\t\t}\n            \t\t\t\t\ty-=yin;\n            \t\t\t\t}\n            \t\t\t\tif (fo>.1) {fo-=.05}\n                \t\t\td3.select(nodes[i])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t}\n            \t\t\t\n            \t\t\tfs = 14, y=Math.max(mouse[1],fs), fo=1, yin=undefined;\n            \t\t\t\n\n            \t\t\tfor (var i=currentItem+1,len=terms.length;i<len;i++) {\n            \t\t\t\tif (fs>=8) {\n            \t\t\t\t\ty+=fs\n            \t\t\t\t\tfs-=.5\n            \t\t\t\t} else {\n            \t\t\t\t\tif (yin==undefined) {\n            \t\t\t\t\t\tyin = (height-y)/(len-i)\n            \t\t\t\t\t}\n            \t\t\t\t\ty+=yin;\n            \t\t\t\t}\n            \t\t\t\tif (fo>.1) {fo-=.05}\n                \t\t\td3.select(nodes[i])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t}\n\n            \t\t\t})\n\n            \t\t}\n            \t}\n            },{\n            \titemId: 'threads',\n//                html: '<canvas></canvas>',\n                layout: 'fit',\n                flex: 1,\n                listeners: {\n//                \tboxready: function() {\n//                \t\tthis.body.down(\"canvas\").dom.width=this.getTargetEl().getWidth();\n//                \t\tthis.body.down(\"canvas\").dom.height=this.getTargetEl().getHeight();\n//                \t},\n            \t\tfilterchange: function(store) {\n            \t\t\tvar el = this.getTargetEl(), width = el.getWidth(), height = el.getHeight();\n            \t\t\tel.setHtml(\" \"); // empty\n            \t\t\tterms = store.getRange().map(function(r) {return {\n            \t\t\t\tterm: r.getTerm(),\n            \t\t\t\tvals: r.getDistributions()\n            \t\t\t}})\n            \t\t\tvar svg = d3.select(el.dom).append(\"svg\")\n            \t\t      .attr(\"width\", el.getWidth())\n            \t\t      .attr(\"height\", el.getHeight());\n            \t\t\t\n            \t\t\tif (terms.length==0) {\n            \t\t\t\treturn this.up(\"panel\").toastInfo(\"No hits\")\n            \t\t\t}\n            \t\t\t\n            \t\t\tvar xincrement = width/terms[0].vals.length;\n            \t\t\t\n            \t\t\tvar scale, scaleApi = this.up('loom').getApiParam(\"scaling\");\n            \t\t\tif (scaleApi==\"sqrt\") {scale = d3.scaleSqrt()}\n            \t\t\telse if (scaleApi==\"log\") {scale = d3.scaleLog();}\n            \t\t\telse {scale = d3.scaleLinear();}\n            \t\t\t\n            \t\t\tvar yscale = scale\n            \t\t\t\t.domain([\n            \t\t\t\t\tMath.max(1e-6, Ext.Array.min(terms.map(function(t) {return Ext.Array.min(t.vals)}))),\n            \t\t\t\t\tMath.max(1e-6, Ext.Array.max(terms.map(function(t) {return Ext.Array.max(t.vals)})))\n            \t\t\t\t\t]).range([1e-6, height-2]);\n            \t\t\t\n//            \t\t\tconsole.warn(\n//            \t\t\t\t\tMath.max(1e-6, Ext.Array.min(terms.map(function(t) {return Ext.Array.min(t.vals)}))),\n//            \t\t\t\t\tMath.max(1e-6, Ext.Array.max(terms.map(function(t) {return Ext.Array.max(t.vals)})))\n//            \t\t\t\t\t);\n            \t\t\t\n            \t\t\tvar valueline = d3.line()\n            \t\t\t\t.curve(d3.curveCardinal)\n\t            \t\t    .x(function(d, i) { return (xincrement/2)+(xincrement*i)})\n\t            \t\t    .y(function(d) { return height-1-yscale(d)});\n            \t\t\t\n        \t\t\t    var tooltip = svg.append(\"g\")\n        \t\t\t    \t.attr(\"opacity\", 0);\n        \t\t\t    \n        \t\t\t    var tooltipbox = tooltip.append(\"rect\")\n        \t\t\t    \t.attr(\"fill\", \"white\")\n        \t\t\t    \t.attr(\"text-anchor\", \"middle\")\n        \t\t\t    \t.attr(\"alignment-baseline\", \"middle\")\n        \t\t\t    \t.attr(\"stroke\", \"rgba(0,0,0,.05)\")\n        \t\t\t    \t.attr(\"class\", \"rect\")\n        \t\t\t    \t.attr(\"x\", 100)\n        \t\t\t    \t.attr(\"y\", 100)\n        \t\t\t    \t.attr(\"width\", 70)\n        \t\t\t    \t.attr(\"height\", 16)\n        \t\t\t    \t.attr(\"opacity\", 1)\n        \t\t\t    \t\n        \t\t\t    var tooltiptext = tooltip\n        \t\t\t    \t.append(\"text\")\n        \t\t\t    \t.attr(\"text-anchor\", \"middle\")\n        \t\t\t    \t.attr(\"alignment-baseline\", \"middle\")\n        \t\t\t    \t.attr(\"x\", 100)\n        \t\t\t    \t.attr(\"y\", 100)\n//        \t\t\t    \t.attr(\"width\", 100)\n//        \t\t\t    \t.attr(\"height\", 12)\n        \t\t\t    \t.text(\"testing\")\n\n            \t\t\tterms.forEach(function(term) {\n            \t\t\t\tvar color = Voyant.application.getColorForTerm(term.term, true)\n            \t\t\t\t\n            \t\t\t\t// draw a first line, always visible\n            \t\t\t\tsvg.append(\"path\")\n            \t\t\t      .datum(term.vals)\n\t\t\t\t\t\t      .attr(\"fill\", \"none\")\n\t\t\t\t\t\t      .attr(\"stroke\", color)\n\t\t\t\t\t\t      .attr(\"opacity\", .5)\n\t\t\t\t\t\t      .attr(\"stroke-linejoin\", \"round\")\n\t\t\t\t\t\t      .attr(\"stroke-linecap\", \"round\")\n\t\t\t\t\t\t      .attr(\"stroke-width\", 1)\n\t\t\t\t\t\t      .attr(\"class\", \"line\")\n            \t\t\t      .attr(\"d\", valueline)\n\n            \t\t\t\t\n            \t\t\t    // draw a second line to make it easier to hover (line width 1 is harder to find)\n            \t\t\t\tsvg.append(\"path\")\n            \t\t\t      .datum(term.vals)\n\t\t\t\t\t\t      .attr(\"fill\", \"none\")\n\t\t\t\t\t\t      .attr(\"stroke\", color)\n\t\t\t\t\t\t      .attr(\"opacity\", 0)\n\t\t\t\t\t\t      .attr(\"stroke-width\", 3)\n\t\t\t\t\t\t      .attr(\"class\", \"line\")\n            \t\t\t      .attr(\"term\", term.term)\n            \t\t\t      .attr(\"d\", valueline)\n\t\t\t\t\t\t      .on('mouseover', function() { // on mouse out hide line, circles and text\n\t\t\t\t\t\t    \t  d3.select(this)\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 1);\n\t\t\t\t\t\t    \t  \n\t\t\t\t\t\t    \t  var coords = d3.mouse(this);\n\t\t\t\t\t\t    \t  \n\t\t\t\t\t\t    \t  tooltip\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 1)\n\t\t\t\t\t\t    \t  \t\n\t\t\t\t\t\t    \t  tooltipbox\n\t\t\t\t\t\t    \t  \t.attr(\"x\", coords[0]-35)\n\t\t\t\t\t\t    \t  \t.attr(\"y\", coords[1] -8+ (coords[1]>height/2 ? -18 : 18))\n\t\t\t\t\t\t\t    \t \n\t\t\t\t\t\t    \t  tooltiptext\n\t\t\t\t\t\t\t    \t  \t.text(term.term)\n\t\t\t\t\t\t\t    \t  \t.attr(\"fill\", color)\n\t\t\t\t\t\t\t    \t  \t.attr(\"x\", coords[0])\n\t\t\t\t\t\t\t    \t  \t.attr(\"y\", coords[1] + (coords[1]>height/2 ? -18 : 18))\n\n\t\t\t\t\t\t      })\n\t\t\t\t\t\t      .on('mouseout', function() { // on mouse out hide line, circles and text\n\t\t\t\t\t\t    \t  d3.select(this)\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 0);\n\t\t\t\t\t\t    \t  tooltip.attr(\"opacity\", 0)\n\t\t\t\t\t\t      })\n\t\t\t\t\t\t      \n\t\t\t\t\t\t      tooltip.raise(); // make sure this is at top level for legibility\n\n            \t\t\t}, this)\n            \t\t}\n\n                }\n            }],\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [tbitems[0], tbitems[2], tbitems[3], tbitems[4], tbitems[5]/*, {\n                \ttext: this.localize(\"controls\"),\n                \ttooltip: this.localize(\"controlsTip\"),\n                \tmenu: {\n                    \titems: tbitems\n                \t}\n                }*/,{\n        \t\t\tfieldLabel: this.localize('visibleTerms'),\n        \t\t\tlabelWidth: 70,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 25,\n\t            \tminValue: 25,\n\t            \tmaxValue: 5000,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"limit\")));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\t// maybe not necessary when value is smaller\n\t            \t\t\tthis.fireEvent(\"loadedCorpus\", this, this.getCorpus())\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },{\n                \ttext: this.localize(\"scaling\"),\n                \tmenu: {\n                \t\tdefaults: {\n                \t\t\txtype: 'menucheckitem',\n                \t\t\thandler: function(cmp) {\n                \t\t\t\tthis.setApiParam(\"scaling\", cmp.getItemId());\n                        \t\tthis.getComponent(\"threads\").fireEventArgs(\"filterchange\", [this.getStore()]);\n                \t\t\t},\n                \t\t\tscope: this,\n                \t\t\tlisteners: {\n                \t\t\t\tafterrender: function(cmp) {\n                \t\t\t\t\tcmp.setChecked(cmp.getItemId()==this.getApiParam(\"scaling\"))\n                \t\t\t\t},\n                \t\t\t\tscope: this\n                \t\t\t},\n                \t\t\tgroup: 'scaling'\n                \t\t},\n                \t\titems: [{\n                \t\t\ttext: this.localize(\"scaleLinear\"),\n                \t\t\titemId: 'linear'\n                \t\t},{\n                \t\t\ttext: this.localize(\"scaleLog\"),\n                \t\t\titemId: 'log'\n                \t\t},{\n                \t\t\ttext: this.localize(\"scaleSqrt\"),\n                \t\t\titemId: 'sqrt'\n                \t\t}]\n                \n                \t}\n                }]\n              }]\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tvar store = corpus.getDocumentsCount()==1 ? corpus.getDocumentTerms() : corpus.getCorpusTerms();\n        \tstore.on(\"load\", function() {\n        \t    this.updateControlsFromStore();\n\t\t    \tthis.filterRecords();\n        \t}, this);\n        \tstore.on(\"filterchange\", function() {\n        \t\tthis.getComponent(\"terms\").fireEventArgs(\"filterchange\", arguments);\n        \t\tthis.getComponent(\"threads\").fireEventArgs(\"filterchange\", arguments);\n        \t\t\n        \t}, this);\n        \tthis.setStore(store);\n        \tparams = this.getApiParams();\n        \tExt.apply(params, {\n        \t\twithDistributions: true\n        \t});\n        \tstore.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tthis.filterRecords();\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: params\n        \t});\n\n        }, this);\n        \n        this.callParent(arguments);\n    },\n\n    filterRecords: function() {\n    \tvar store = this.getStore();\n    \tstore.clearFilter();\n    \tvar limit = parseInt(this.getApiParam(\"limit\")), hit = 0;\n    \tstore.filterBy(function(record) {\n    \t\tvar keep = Ext.Array.every(this.getControls().getRange(), function(control) {\n    \t\t\treturn control.getEnabled()==false || control.getValidateRecord().call(control, record);\n    \t\t}, this);\n    \t\treturn keep && hit++<limit;\n    \t}, this)\n    },\n    \n    updateControlsFromStore: function() {\n    \tvar store = this.getStore();\n    \tthis.getControls().each(function(control) {\n    \t\tcontrol.suspendEvent(\"change\");\n    \t\tcontrol.initControl.call(this, store);\n    \t\tif (control.getMin()===undefined) {control.setMin(0);}\n    \t\tif (control.getLow()==undefined) {control.setLow(control.getMin())}\n    \t\tif (control.getMax()===undefined) {control.setMax(1);} // shouldn't happen\n    \t\tif (control.getHigh()==undefined) {control.setHigh(control.getMax())}\n    \t\tcontrol.resumeEvent(\"change\");\n    \t})\n    },\n    \n    revalidate: function() {\n    \tvar canvas = this.body.down('canvas').dom, ctx = canvas.getContext(\"2d\");\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n\n    \tvar controls = this.query('loomcontrol');\n    \t\n    \tvar loomTermRecords = new Voyant.panel.LoomTermRecords();\n    \tthis.getStore().each(function(record) {\n    \t\tvar vals = record.getDistributions().map(function(v) {return true;})\n    \t\tExt.Array.each(controls, function(control) {\n    \t\t\tif (control.getChecked()) {\n    \t\t\t\tif (control.validateRecord) {\n    \t\t\t\t\tvar newvals = control.validateRecord.call(this, control.getField(), record, record.getDistributions());\n//    \t\t\t\t\tconsole.warn(control.getName(), newvals)\n    \t\t\t\t\tif (Ext.isBoolean(newvals) && !newvals) {\n    \t\t\t\t\t\tvals = false;\n    \t\t\t\t\t\treturn false;\n    \t\t\t\t\t} else if (Ext.isArray(newvals)) {\n        \t\t\t\t\tfor (var i=0; i<vals.length; i++) {\n        \t\t\t\t\t\tvals[i] = vals[i] && newvals[i];\n        \t\t\t\t\t}\n        \t\t\t\t\treturn Ext.Array.some(vals, function(v) {return v})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n    \t\t});\n    \t\tif (Ext.isArray(vals) && Ext.Array.some(vals, function(v) {return v})) {\n    \t\t\tloomTermRecords.add(record);\n    \t\t}\n    \t})\n    \t\n    \tloomTermRecords.update(canvas, ctx);\n    }\n    \n});\n\nExt.define('Voyant.panel.LoomTermRecords', {\n\tconfig: {\n\t\ttermRecords: []\n\t},\n\tconstructor: function(config) {\n\t\tthis.setTermRecords([])\n\t    this.callParent(arguments);\n\t},\n\tadd: function(record) {\n\t\tthis.getTermRecords().push(new Voyant.panel.LoomTermRecord(record));\n\t},\n\tupdate: function(canvas, ctx) {\n\t\tvar min = Ext.Array.min(this.getTermRecords().map(function(r) {return Ext.Array.min(r.getValues())}))\n\t\tvar max = Ext.Array.max(this.getTermRecords().map(function(r) {return Ext.Array.max(r.getValues())}))\n\t\tthis.getTermRecords().forEach(function(r) {\n\t\t\tr.update(canvas, ctx, min, max)\n\t\t})\n\t}\n})\n\nExt.define('Voyant.panel.LoomTermRecord', {\n\tconfig: {\n\t\trecord: undefined,\n\t\tvalues: undefined,\n\t\tterm: undefined,\n\t\ttexts: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.setRecord(config);\n\t\tthis.setValues(config.getDistributions());\n\t\tvar term = config.getTerm();\n\t\tthis.setTerm(term);\n\t\tthis.setTexts(config.getDistributions().map(function(v) {\n\t\t\treturn new Ext.draw.sprite.Text({\n\t\t\t\ttype: 'text',\n\t\t\t\ttext: term\n\t\t\t})\n\t\t}))\n\t    this.callParent(arguments);\n\t},\n\tupdate: function(canvas, ctx, min, max) {\n\t\tvar values = this.getValues(), columnWidth = canvas.offsetWidth/(values.length),\n\t\t\theight = canvas.offsetHeight, term = this.getTerm();\n\t\tthis.getTexts().forEach(function(text, i) {\n\t\t\tvar y = values[i]*height/max;\n\t\t    ctx.fillText(term, (columnWidth/2)+(i*columnWidth), height-y);\n\t\t})\n\t}\n})\n\nExt.define('Voyant.util.LoomControl', {\n    extend: 'Ext.Base',\n    mixins: ['Ext.mixin.Observable'],\n    constructor: function(config) {\n    \tthis.mixins.observable.constructor.call(this, config);\n        this.callParent(arguments);\n    },\n    config: {\n    \tgroup: undefined,\n    \tname: undefined,\n    \tenabled: false,\n    \tmin: undefined,\n    \tmax: undefined,\n    \tlow: undefined,\n    \thigh: undefined,\n    \tinitControls: Ext.emptyFn,\n    \tvalidateRecord: Ext.emptyFn,\n\t\toffsetTipText: false\n    },\n    setMin: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setMax: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setLow: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setHigh: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setValues: function(low, high) {\n    \tthis.suspendEvent(\"change\");\n    \tif (Ext.isArray(low)) {\n        \tthis.setLow(low[0]);\n        \tthis.setHigh(low[1]);\n    \t} else {\n        \tthis.setLow(low);\n        \tthis.setHigh(high);\n    \t}\n    \tthis.resumeEvent(\"change\");\n    \tif (arguments.length < 3 || !arguments[2]) {this.fireEvent(\"change\", this);}\n    \treturn this;\n    },\n    setEnabled: function() {\n    \tthis.callParent(arguments);\n    \tif (arguments.length < 2 || !arguments[1]) {this.fireEvent(\"change\", this);}\n    \treturn this;\n    }\n    \n})","Ext.define('Voyant.panel.MicroSearch', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.microsearch',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tquery: undefined\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxTokens: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \ttokensPerSegment: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxVerticalLines: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxSegments: 0\n    },\n    constructor: function(config ) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'querysearchfield'\n                }]\n    \t\t}]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.rendered) {\n    \t\t\tthis.initialize();\n    \t\t}\n    \t\telse {\n    \t\t\tthis.on(\"afterrender\", function() {\n    \t\t\t\tthis.initialize();\n    \t\t\t}, this)\n    \t\t}\n\n    \t});\n    \t\n    \tthis.on('query', function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.updateSearchResults();\n    \t})\n    \t\n    },\n    \n    initialize: function() {\n\n    \tvar el = this.getTargetEl(), corpus = this.getCorpus();\n    \t\n\t\tvar lineSize = 5; // pixels, including margins below and above\n\t\tthis.setMaxVerticalLines(Math.floor((el.getHeight() - 10 /* margin of 5px */) / lineSize));\n\t\t\n\t\t// max segments\n\t\tvar gutterSize = 10;\n\t\tvar corpusSize = corpus.getDocumentsCount();\n\t\tvar gutter = corpusSize * gutterSize;\n\t\tvar columnSize = Math.floor((el.getWidth() - gutter - 10 /* margin of 5px */) / corpusSize);\n\t\tif (columnSize>200) {columnSize=200;}\n\t\tvar segmentWidth = 3; // each segment is 3 pixels\n\t\tvar maxSegmentsPerLine = Math.floor(columnSize / segmentWidth);\n\t\tif (maxSegmentsPerLine<1) {maxSegmentsPerLine=1;}\n\t\t\n\t\t// and the answer is...\n\t\tthis.setMaxSegments(maxSegmentsPerLine * this.getMaxVerticalLines());\n\t\t\n\t\tvar documentsStore = corpus.getDocuments();\n\t\tthis.setMaxTokens(documentsStore.max('tokensCount-lexical'));\n\n\t\tthis.setTokensPerSegment(this.getMaxTokens() < this.getMaxSegments() ? 1 : Math.ceil(this.getMaxTokens()/this.getMaxSegments()));\n\t\t\n\n\t\tvar canvas = \"<table cellpadding='0' cellspacing='0' style='height: 100%'><tr>\";\n\t\tthis.segments = [];\n\t\tdocumentsStore.each(function(document) {\n\t\t\tdocIndex = document.getIndex();\n\t\t\tcanvas+='<td style=\"overflow: hidden; vertical-align: top; width: '+columnSize+'px;\">'+\n\t\t\t\t'<div class=\"docLabel\" style=\"white-space: nowrap; width: '+columnSize+'px;\" data-qtip=\"'+document.getFullLabel()+'\">'+document.getFullLabel()+\"</div>\"+\n\t\t\t\t'<canvas style=\"display: block;\" width=\"'+columnSize+'\" height=\"'+el.getHeight()+'\" id=\"'+this.body.id+'-'+docIndex+'\">'+\n\t\t\t\t'</td>';\n\t\t\tif (docIndex+1<corpusSize) {canvas+='<td style=\"width: '+gutterSize+'px;\">&nbsp;</td>';}\n\t\t}, this);\n\t\tcanvas+='</tr></table>';\n\t\tel.update(canvas);\n\t\t\n\t\tthis.updateSearchResults();\n\t\t\n    \tif (!this.getApiParam('query')) {\n    \t\tvar me = this;\n    \t\treturn this.getCorpus().loadCorpusTerms({limit: 1, stopList: this.getApiParam('stopList'), categories: this.getApiParam(\"categories\")}).then(function(corpusTerms) {\n    \t\t\tvar term = corpusTerms.getAt(0).getTerm();\n    \t\t\tvar q = me.down('querysearchfield');\n    \t\t\tq.addValue(new Voyant.data.model.CorpusTerm({term: term}));\n    \t\t\tme.fireEvent(\"query\", me, [term])\n    \t\t});\n    \t}\n\n    },\n    \n    updateSearchResults: function() {\n    \tquery = this.getApiParam('query');\n    \tif (Ext.Array.from(query).length==0) { // draw simple lines\n        \tthis.getCorpus().getDocuments().each(function(document) {\n        \t\tvar distributions = this.redistributeDistributions(document, new Array(this.getMaxSegments()));\n        \t\tthis.drawDocumentDistributions(document, distributions);\n        \t}, this)\n    \t} else {\n    \t\tthis.mask(this.localize('loading'))\n    \t\tthis.getCorpus().getDocumentTerms().load({\n    \t\t\tparams: {\n    \t\t\t\tquery: Ext.Array.from(query).join('|'), // treat as one query\n        \t\t\twithDistributions: 'relative',\n        \t\t\tbins: this.getMaxSegments(),\n        \t\t\tcategories: this.getApiParam('categories')\n    \t\t\t},\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tthis.unmask();\n    \t\t\t\tvar max = 0, min = Number.MAX_VALUE, docs = [], m;\n    \t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\tvar doc = this.getCorpus().getDocument(record.getDocIndex());\n    \t\t\t\t\tvar distributions = this.redistributeDistributions(doc, record.getDistributions())\n    \t\t\t\t\tm = Ext.Array.max(distributions);\n    \t\t\t\t\tif (m>max) {max=m;}\n    \t\t\t\t\tdistributions.forEach(function(d) {\n    \t\t\t\t\t\tif (d && d<min) {\n    \t\t\t\t\t\t\tmin = d;\n    \t\t\t\t\t\t}\n    \t\t\t\t\t})\n    \t\t\t\t\tdocs[record.getDocIndex()] = this.redistributeDistributions(doc, record.getDistributions());\n    \t\t\t\t}, this);\n    \t\t\t\tdocs.forEach(function(distributions, i) {\n                    \tthis.drawDocumentDistributions(this.getCorpus().getDocument(i), distributions, min || Ext.Array.min(distributions), max || Ext.Array.max(distributions));\n    \t\t\t\t}, this)\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t})\n    \t}\n    },\n    \n    redistributeDistributions: function(doc, distributions) {\n\t\tvar segments = Math.ceil(doc.getLexicalTokensCount() / this.getTokensPerSegment());\n\n\t\t// redistribute if needed, we'll take the mean of the distribution values to maintain comparison across segments\n    \tif (distributions.length>segments) {\n    \t\tvar newdistributions = [];\n    \t\tfor (var i=0; i<distributions.length; i++) {\n    \t\t\tvar a = parseInt(i*segments/distributions.length);\n    \t\t\tif (newdistributions[a]) {newdistributions[a].push(distributions[i])}\n    \t\t\telse {newdistributions[a]=[distributions[i]];}\n    \t\t}\n\t\t\tdistributions = newdistributions\n    \t\tfor (var i=0; i<distributions.length; i++) {\n    \t\t\tdistributions[i] = Ext.Array.mean(distributions[i]);\n    \t\t}\n    \t}\n    \treturn distributions;\n    },\n    \n    drawDocumentDistributions: function(doc, distributions, min, max) {\n    \tvar canvas = this.getTargetEl().dom.querySelector(\"#\"+this.body.id+\"-\"+doc.getIndex());\n    \tvar c = canvas.getContext('2d');\n    \tvar x = 0, w = canvas.clientWidth, y = 0;\n    \tfor (var j=0; j<distributions.length;j++) {\n    \t\tc.fillStyle = distributions[j] ? \"rgba(250,0,0,\"+(((distributions[j]-min)*.8/(max-min))+.2)+\")\" : \"rgb(230,230,230)\";\n    \t\tc.fillRect(x,y,3,3)\n    \t\tx+=3;\n    \t\tif (x>=w) {x=0; y+=5}\n    \t}\n    \t\n    }\n});","Ext.define('Voyant.panel.Mandala', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.mandala',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @property stopList The stop list to use to filter results.\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\n    \t\t * @type String\n    \t\t * @private\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tquery: undefined,\n    \t\t\n    \t\tlabels: true\n    \t\t\n    \t},\n    \tglyph: 'xf1db@FontAwesome'\n\t},\n\t\n\tgutter: 5,\n\t\n\ttextFont: '12px sans-serif',\n\t\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n\t},\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<div style=\"text-align: center\"><canvas width=\"800\" height=\"600\"></canvas></div>',\n\t\t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \ttext: this.localize('add'),\n        \t\t\tglyph: 'xf067@FontAwesome',\n                \thandler: function() {\n                \t\tthis.editMagnet();\n                \t},\n                \tscope: this\n                },{\n                \ttext: this.localize('clear'),\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\n                \thandler: function() {\n                \t\tthis.setApiParam('query', undefined);\n                \t\tthis.updateFromQueries(true);\n                \t\tthis.editMagnet();\n                \t},\n                \tscope: this\n\t            },{\n\t                xtype: 'checkbox',\n\t                boxLabel: this.localize('labels'),\n\t                listeners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(this.getApiParam(\"labels\")===true);\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('labelsTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    change: function(cmp, val) {\n\t                    \tthis.setApiParam('labels', val);\n\t                    \tthis.draw();\n\t                    },\n\t                    scope: this\n\t                }\n\t            }]\n    \t\t}]\t\t\t\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('boxready', function(cmp) {\n\t\t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\");\n\t\t\tvar me = this;\n    \t\tcanvas.addEventListener('mousemove', function(evt) {\n    \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top,\n\t\t\t\tchange = false, docRadius = parseInt(me.textFont)/2;\n    \t\t\tif (me.documents) {\n    \t\t\t\tme.documents.forEach(function(doc) {\n    \t\t\t\t\tvar isHovering = x > doc.x-docRadius && x < doc.x+docRadius && y > doc.y-docRadius && y < doc.y+docRadius;    \t\t\t\t\t\n    \t\t\t\t\tif (isHovering!=doc.isHovering) {change = true;}\n    \t\t\t\t\tdoc.isHovering = isHovering;\n    \t\t\t\t})\n    \t\t\t}\n\t\t\t\tradius = parseInt(me.textFont)/2;\n\t\t\t\tfor (term in me.magnets) {\n\t\t\t\t\tvar isHovering = x > me.magnets[term].x-radius && x < me.magnets[term].x+radius && y > me.magnets[term].y-radius && y < me.magnets[term].y+radius;    \t\t\t\t\t\n\t\t\t\t\tif (isHovering!=me.magnets[term].isHovering) {change = true;}\n\t\t\t\t\tme.magnets[term].isHovering = isHovering;\n\t\t\t\t}\n\t\t\t\tif (change) {\n\t\t\t\t\tme.draw();\n\t\t\t\t}\n    \t    }, false);\n    \t\tcanvas.addEventListener('click', function(evt) {\n    \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top,\n\t\t\t\t\tdocRadius = parseInt(me.textFont)/2;\n\t\t\t\tfor (term in me.magnets) {\n\t\t\t\t\tif (x > me.magnets[term].x-radius && x < me.magnets[term].x+radius && y > me.magnets[term].y-radius && y < me.magnets[term].y+radius) {\n\t\t\t\t\t\tme.editMagnet(term);\n\t\t\t\t\t}\n\t\t\t\t}\n    \t    }, false);\n    \t})\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.documents = [];\n    \t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), ctx = canvas.getContext(\"2d\"), radius = canvas.width/2;\n    \t\tctx.font = this.textFont;\n    \t\tcorpus.getDocuments().each(function(document) {\n    \t\t\tvar label = document.getTinyTitle();\n    \t\t\tthis.documents.push({\n    \t\t\t\tdoc: document,\n    \t\t\t\tlabel: label,\n    \t\t\t\twidth: ctx.measureText(label).width,\n    \t\t\t\tx: radius,\n    \t\t\t\ty: radius,\n    \t\t\t\tmatches: [],\n    \t\t\t\tisHovering: false\n    \t\t\t});\n    \t\t}, this);\n    \t\tthis.updateDocs(canvas);\n    \t\tthis.draw();\n    \t\tthis.updateFromQueries();\n    \t}, this);\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"),\n    \t\t\tdiam = Math.min(this.getTargetEl().getWidth(), this.getTargetEl().getHeight());\n    \t\tcanvas.width = diam;\n    \t\tcanvas.height = diam;\n\t    \tthis.updateMagnets();\n\t    \tthis.updateDocs();\n    \t\tthis.draw(canvas)\n    \t})\n    },\n    \n    editMagnet: function(term) {\n    \tvar me = this, currentTerms = Ext.Array.from(me.getApiParam('query'));\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: this.localize(\"EditMagnet\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 300,\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'querysearchfield',\n\t\t\t\t\tcorpus: this.getCorpus(),\n\t\t\t\t\tstore: this.getCorpus().getCorpusTerms({\n\t\t\t\t\t\tproxy: {\n\t\t\t\t\t\t\textraParams: {\n\t\t\t\t\t\t\t\tstopList: this.getApiParam('stopList')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tstopList: this.getApiParam('stopList'),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(field) {\n\t\t\t\t\t\t\tif (term) {\n\t\t\t\t\t\t\t\tvar termObj = new Ext.create(\"Voyant.data.model.CorpusTerm\", {\n\t\t\t\t\t\t\t\t\tterm: term\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tfield.getStore().loadData(termObj, true)\n\t\t\t\t\t\t\t\tfield.setValue(termObj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: \"numberfield\",\n\t\t\t\t    fieldLabel: me.localize('rotateClockwise'),\n\t\t\t\t    minValue: 0,\n\t\t\t\t    maxValue: currentTerms.length-1,\n\t\t\t\t    value: 0,\n\t\t\t\t    stepValue: 1,\n\t\t\t\t    width: 200,\n\t\t\t\t    name: \"rotate\"\n\t\t\t\t}],\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"remove\"),\n\t\t\t\t\tglyph: 'xf0e2@FontAwesome',\n\t            \tflex: 1,\n\t\t            ui: 'default-toolbar',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar queries = Ext.Array.filter(Ext.Array.from(me.getApiParam('query')), function(query) {\n\t        \t\t\t\treturn query!=term\n\t        \t\t\t});\n\t        \t\t\tme.setApiParam('query', queries);\n\t        \t\t\tme.updateFromQueries(queries.length==0);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t\t\t\t},{xtype: 'tbfill'}, {\n\t            \ttext: this.localize(\"cancel\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize(\"update\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar val = btn.up('window').down('querysearchfield').getValue().join(\"|\")\n\t        \t\t\tif (val) {\n\n\t        \t\t\t\t// start by updating the term in place\n\t\t        \t\t\tvar position = -1;\n\t\t        \t\t\tfor (var i=0; i<currentTerms.length; i++) {\n\t\t        \t\t\t\tif (term==currentTerms[i]) {\n\t\t        \t\t\t\t\tposition=i;\n\t\t        \t\t\t\t\tcurrentTerms[i]=val;\n\t\t        \t\t\t\t\t\n\t\t\t\t        \t\t\t// see if we need to shift\n\t\t\t\t        \t\t\tvar rotate = btn.up('window').down('numberfield').getValue();\n\t\t\t\t        \t\t\tif (rotate) {\n\t\t\t\t        \t\t\t\tcurrentTerms.splice(i, 1);\n\t\t\t\t        \t\t\t\tvar newpos = i+rotate;\n\t\t\t\t        \t\t\t\tif (newpos>currentTerms.length) {newpos-=currentTerms.length+1;}\n\t\t\t\t        \t\t\t\tcurrentTerms.splice(newpos, 0, val);\n\t\t\t\t        \t\t\t}\n\t\t\t\t        \t\t\tbreak\n\t\t\t\t        \t\t\t\n\t\t        \t\t\t\t}\n\t\t        \t\t\t}\n\t\t        \t\t\tif (position==-1) { // not sure why it couldn't be found\n\t\t        \t\t\t\tcurrentTerms.push(val);\n\t\t        \t\t\t}\t\t        \t\t\t\n\t        \t\t\t}\n\t        \t\t\t\n\t        \t\t\tme.setApiParam('query', currentTerms);\n\t        \t\t\tme.updateFromQueries(currentTerms.length==0);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n    },\n    \n    updateFromQueries: function(allowEmpty) {\n\t\tthis.magnets = undefined;\n\t\tthis.documents.forEach(function(doc) {doc.matches=[]})\n\t\tthis.updateDocs();\n\t\tthis.draw();\n    \tif (this.documents) {\n    \t\tvar params = this.getApiParams();\n    \t\tif (!params.query) {params.limit=10;}\n        \tvar queries = Ext.Array.from(this.getApiParam('query'));\n        \tif (!allowEmpty || queries.length>0) {\n        \t\tthis.getCorpus().getCorpusTerms().load({\n        \t\t\tparams: Ext.apply(params, {withDistributions: true}),\n        \t\t\tcallback: function(records) {\n        \t\t    \tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), ctx = canvas.getContext(\"2d\");\n        \t\t    \t\tdiam = canvas.width, rad = diam /2;\n        \t\t    \tctx.font = this.textFont;\n        \t\t    \tvar magnets = {};\n        \t\t    \tfor (var i=0, len=records.length; i<len; i++) {\n        \t\t    \t\tvar term = records[i].getTerm();\n        \t\t    \t\trecords[i].getDistributions().forEach(function(val, i) {\n        \t\t    \t\t\tif (val>0) {\n        \t\t    \t\t\t\tthis.documents[i].matches.push(term)\n        \t\t    \t\t\t}\n        \t\t    \t\t}, this);\n        \t\t    \t\tmagnets[term] = {\n        \t\t    \t\t\trecord: records[i],\n        \t\t    \t\t\tcolour: this.getApplication().getColor(i),\n        \t\t    \t\t\twidth: ctx.measureText(term).width,\n        \t\t    \t\t\tisHovering: false\n        \t\t    \t\t}\n        \t\t    \t}\n\n        \t\t    \tthis.magnets = {};\n        \t\t    \t\n        \t\t    \t// try ordering by queries\n        \t\t    \tqueries.forEach(function(query) {\n        \t\t    \t\tif (magnets[query]) {\n            \t\t    \t\tthis.magnets[query] = magnets[query]\n            \t\t    \t\tdelete magnets[query]\n        \t\t    \t\t}\n        \t\t    \t}, this);\n        \t\t    \t\n        \t\t    \t// now for any leftovers\n        \t\t    \tfor (term in magnets) {\n        \t\t    \t\tthis.magnets[term] = magnets[term]\n        \t\t    \t}\n        \t\t    \t\n        \t\t    \tthis.setApiParam('query', Object.keys(this.magnets))\n        \t\t    \tthis.updateMagnets();\n        \t\t    \tthis.updateDocs();\n        \t\t    \tthis.draw();\n        \t\t\t},\n        \t\t\tscope: this\n        \t\t})\n        \t}\n    \t}\n    },\n    \n    updateMagnets: function(canvas) {\n    \tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), diam = canvas.width, rad = diam /2;\n    \tvar len = Object.keys(this.magnets || {}).length;\n    \tvar i = 0;\n    \tfor (var term in this.magnets) {\n    \t\tExt.apply(this.magnets[term], {\n\t\t\t\tx:  rad+((rad-this.gutter-50) * Math.cos(2 * Math.PI * i / len)),\n\t\t\t\ty:  rad+((rad-this.gutter-50) * Math.sin(2 * Math.PI * i / len))\n    \t\t})\n    \t\ti++;\n    \t}\n    },\n    \n    updateDocs: function(canvas) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\"), diam = canvas.width, rad = diam /2;\n    \tvar notMatching = [];\n    \tif (this.documents) {\n        \tthis.documents.forEach(function(doc, i) {\n        \t\tif (Ext.Array.from(doc.matches).length==0) {notMatching.push(i);} // will be set around perimeter below\n        \t\telse if (Ext.Array.from(doc.matches).length==1) { // try to set it away from magnet\n        \t\t\tvar x = (Math.random()*15)+15, y = (Math.random()*15)+15;\n        \t\t\tdoc.targetX = this.magnets[doc.matches[0]].x + (Math.round(Math.random())==0 ? x : -x);\n        \t\t\tdoc.targetY = this.magnets[doc.matches[0]].y + (Math.round(Math.random())==0 ? y : -y);\n        \t\t} else {\n        \t\t\t// determine the weighted position\n        \t\t\tvar x = 0, y = 0,\n        \t\t\t\tvals = doc.matches.map(function(term) {return this.magnets[term].record.getDistributions()[i]}, this),\n        \t\t\t\tmin = Ext.Array.min(vals), max = Ext.Array.max(vals);\n        \t\t\tvar weights = 0;\n        \t\t\tdoc.matches.forEach(function(term, j) {\n        \t\t\t\tweight = max==min ? 1 : ((vals[j]-min)+min)/((max-min)+min);\n        \t\t\t\tweights += weight;\n        \t\t\t\tx += this.magnets[term].x*weight;\n        \t\t\t\ty += this.magnets[term].y*weight;\n        \t\t\t\t\n        \t\t\t}, this)\n        \t\t\tdoc.targetX = x/weights\n        \t\t\tdoc.targetY = y/weights\n        \t\t}\n        \t}, this);\n        \t\n        \t// set around perimeter\n        \tfor (var i=0, len=notMatching.length; i<len; i++) {\n        \t\tExt.apply(this.documents[i], {\n    \t\t\t\ttargetX:  rad+((rad-this.gutter) * Math.cos(2 * Math.PI * i / len)),\n    \t\t\t\ttargetY:  rad+((rad-this.gutter) * Math.sin(2 * Math.PI * i / len))\n        \t\t})\n        \t}\n    \t}\n    },\n    \n    draw: function(canvas, ctx) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.font = this.textFont;\n    \tvar radius = canvas.width/2;\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n    \tvar labels = this.getApiParam('labels');\n    \t\n    \t// draw circle\n    \tctx.beginPath();\n    \tctx.strokeStyle = \"rgba(0,0,0,.1)\"\n        ctx.fillStyle = \"rgba(0,0,0,.02)\"\n    \tctx.arc(radius, radius, radius-this.gutter, 0, 2 * Math.PI, false);\n    \tctx.fill();\n    \tctx.lineWidth = 2;\n    \tctx.stroke();\n    \t\n    \t// determine if we're animating a move and need to come back\n    \tvar needRedraw = false;\n    \t\n    \t// draw documents\n    \t\n    \tif (this.documents && this.documents.length>0) {\n    \t\tvar needMove = false;\n    \t\t\n    \t\tvar noHovering = Ext.Array.each(this.documents, function(doc) {\n    \t\t\treturn !doc.isHovering\n    \t\t}, this);\n    \t\t\n    \t\tif (noHovering===true) {\n    \t\t\tnoHovering = Ext.Array.each(Object.keys(this.magnets || {}), function(term) {\n        \t\t\treturn !this.magnets[term].isHovering\n        \t\t}, this);\n    \t\t}\n\t\t\t// go through a first time to draw connecting lines underneath\n    \t\tvar hoveringTerms = {}; hoveringDocs = [];\n    \t\tthis.documents.forEach(function(document, j) {\n\t        \tdocument.matches.forEach(function(term, i) {\n\t        \t\tctx.beginPath();\n\t        \t\tctx.moveTo(document.x, document.y);\n\t        \t\tctx.lineTo(this.magnets[term].x, this.magnets[term].y);\n\t        \t\tif (noHovering===true) {\n\t\t        \t\tctx.strokeStyle = \"rgba(\"+this.magnets[term].colour.join(\",\")+\",.1)\";\n\t        \t\t} else {\n\t        \t\t\tif (document.isHovering || this.magnets[term].isHovering) {\n\t        \t\t\t\thoveringDocs[j]=true;\n\t        \t\t\t\thoveringTerms[term]=true;\n\t\t\t        \t\tctx.strokeStyle = \"rgba(\"+this.magnets[term].colour.join(\",\")+\",.5)\";\n\t        \t\t\t} else {\n\t\t        \t\t\tctx.strokeStyle = \"rgba(0,0,0,.02)\";\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\tctx.stroke();\n\t        \t}, this);\n    \t\t}, this);\n    \t\t\t\n\t\t\t// now a second time for labels/markers\n    \t\tvar halfSize = parseInt(this.textFont)/2, height = parseInt(this.textFont)+4;\n    \t\tthis.documents.forEach(function(document, i) {\n    \t\t\t\n    \t\t\t// draw marker/label\n    \t\t\tif (labels || document.isHovering || hoveringDocs[i]==true) {\n\t    \t\t    var width = document.width+4;\n\t\t\t        ctx.fillStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"white\" : \"rgba(255,255,255,.05)\"\n\t    \t\t    ctx.fillRect(document.x-(width/2), document.y-(height/2), width, height);\n\t\t\t        ctx.strokeStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"rgba(0,0,0,.2)\" : \"rgba(0,0,0,.05)\"\n\t    \t\t    ctx.strokeRect(document.x-(width/2), document.y-(height/2), width, height);\n\t\t\t        ctx.textAlign = \"center\";\n\t\t\t        ctx.fillStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"rgba(0,0,0,.8)\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.fillText(document.label, document.x, document.y);\n    \t\t\t} else {\n    \t\t    \tctx.beginPath();\n    \t\t        ctx.fillStyle = \"rgba(0,0,0,.8)\"\n    \t\t    \tctx.arc(document.x, document.y, halfSize, 0, 2 * Math.PI);\n    \t        \tctx.fill();\n    \t\t    \tctx.stroke();\n    \t\t\t}\n\t        \t\n\t        \t// determine if we need to move\n\t\t    \tvar dx = Math.abs(document.x - document.targetX), dy = Math.abs(document.y- document.targetY)\n\t\t    \tif (dx!=0 || dy!=0) {\n\t\t    \t\tif (dx<1) {document.x = document.targetX}\n\t\t    \t\telse {\n\t\t    \t\t\tdx/=2;\n\t\t    \t\t\tdocument.x = document.x > document.targetX ? document.x-dx : document.x+dx;\n\t\t    \t\t}\n\t\t    \t\tif (dy<1) {document.y = document.targetY}\n\t\t    \t\telse {\n\t\t    \t\t\tdy/=2;\n\t\t    \t\t\tdocument.y = document.y > document.targetY ? document.y-dy : document.y+dy;\n\t\t    \t\t}\n\t\t    \t\tneedRedraw = true;\n\t\t    \t}\n    \t\t}, this);\n    \t\t\n    \t\t// now magnets\n    \t\tvar i = 0, height = parseInt(this.textFont)+4;\n\t        ctx.textAlign = \"center\";\n\t        ctx.textBaseline=\"middle\";\n\t        for (var term in this.magnets) {\n\t        \tif (labels || term in hoveringTerms || this.magnets[term].isHovering) {\n\t    \t\t    var width = this.magnets[term].width+4;\n\t\t\t        ctx.fillStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ? \"white\" : \"rgba(255,255,255,.05)\";\n\t    \t\t    ctx.fillRect(this.magnets[term].x-(width/2), this.magnets[term].y-(height/2), width, height);\n\t\t\t        ctx.strokeStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ? \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.strokeRect(this.magnets[term].x-(width/2), this.magnets[term].y-(height/2), width, height);\n\t\t\t        ctx.textAlign = \"center\";\n\t\t\t        ctx.fillStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ?\"rgba(0,0,0,.8)\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.fillText(term, this.magnets[term].x, this.magnets[term].y);\n\t        \t} else {\n\t\t\t    \tctx.beginPath();\n\t\t\t        ctx.fillStyle = \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\"\n\t\t\t        ctx.strokeStyle = \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\"\n\t\t\t    \tctx.arc(this.magnets[term].x, this.magnets[term].y, 12, 0, 2 * Math.PI);\n\t\t        \tctx.fill();\n\t\t\t    \tctx.stroke();\n\t        \t}\n    \t\t}\n    \t}\n    \t\n\t\tif (needRedraw) {\n\t\t\tvar me = this;\n\t\t\tsetTimeout(function() {\n\t\t\t\tme.draw();\n\t\t\t}, 100);\n\t\t} else if (this.documents) {\n\t\t\tvar minDist = Math.max(radius/this.documents.length, 50), spring = .1\n\t\t\tfor (var i=0, len=this.documents.length; i<len; i++) {\n\t\t\t\tfor (var j=0; j<len; j++) {\n\t\t\t\t\tif (i<j) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar dx = this.documents[i].x  - this.documents[j].x,\n\t\t\t\t\t\t\tdy = this.documents[i].y - this.documents[j].y,\n\t\t\t\t\t\t\tdist = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\t\t\tif (dist < minDist) {\n\t\t\t\t\t\t\tvar ax = dx * spring, ay = dy * spring;\n\t\t\t\t\t\t\tthis.documents[i].targetX += ax;\n\t\t\t\t\t\t\tthis.documents[j].targetX -= ax;\n\t\t\t\t\t\t\tthis.documents[i].targetY += ay;\n\t\t\t\t\t\t\tthis.documents[j].targetY -= ay;\n\t\t\t\t\t\t\tneedRedraw = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (needRedraw) {\n\t\t\t\tvar me = this;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tme.draw();\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n    }\n    \n});","Ext.define('Voyant.panel.MicroOcp', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.microocp',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"MicroOCP\"\n    \t},\n    \tapi: {\n    \t\tconfig: undefined,\n    \t\tstopList: 'auto',\n    \t\turi: undefined\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \teditor: undefined\n    },\n    \n    constructor: function(config) {\n    \tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n\t\t\n\t\t\n\t    var store = Ext.create('Ext.data.Store', {\n\t        fields: [{\n\t            name: 'cocoa',\n\t            type: 'string'\n\t        }]});\n\t    \n\t    var microocp = this;\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: 'border',\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                groupId: 'tbar',\n                items: [{\n                \ttext: \"Create New Voyant Corpus\",\n                \thandler: function() {\n                \t\tvar items = this.down('grid').getSelectionModel().getSelection().map(function(item) {return item.get(\"cocoa\")});\n              // items = [\"one\",\"one two\",\"two\"]\n                \t\tif (items.length==0) {\n                \t\t\treturn this.showError({title: \"Error\", msg: \"No items are selected in the grid (on the right).\"})\n                \t\t}\n                \t\t// convert to map for faster lookup\n                \t\titemsMap = {};\n                \t\titems.forEach(function(item) {itemsMap[item]=true})\n                \t\t\n                \t\t\n\t\t\t\t\t\tvar str = this.getEditor().getValue();\n               // str = \"<one>this<one two>is<two>a</one>sentence<two> <one>another\"\n\t\t\t\t\t\tvar tags = /<(\\/)?(\\w+)(\\s(\\w+))?>/g;\n\t\t\t\t\t\tvar matches;\n\t\t\t\t\t\tvar tagsMap = {}\n\t\t\t\t\t\twhile ((matches = tags.exec(str)) != null) {\n\t\t\t\t\t\t\tvar isClose = matches[1]==\"/\", tag = matches[2], attr = matches[4],\n\t\t\t\t\t\t\t\titem = (matches[4] ? matches[2]+\" \"+matches[4] : matches[2]);\n\t\t\t\t\t\t\tif (isClose || item in itemsMap) {\n\t\t\t\t\t\t\t\tif (tag in tagsMap) {\n\t\t\t\t\t\t\t\t\ttagsMap[tag][tagsMap[tag].length-1].end = matches.index\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!isClose) {\n\t\t\t\t\t\t\t\t\tif (!(tag in tagsMap)) {tagsMap[tag] = []}\n\t\t\t\t\t\t\t\t\ttagsMap[tag].push({\n\t\t\t\t\t\t\t\t\t\tstart: matches.index+matches[0].length,\n\t\t\t\t\t\t\t\t\t\ttag: tag,\n\t\t\t\t\t\t\t\t\t\tattr: attr\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (item in itemsMap) {\n\t\t\t\t\t\t\t\tif (tag in tagsMap) {\n\t\t\t\t\t\t\t\t\ttagsMap[tag][tagsMap[tag].length-1].end = matches.index\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n                \t\t// this should be more robust\n                \t\tisGroupItems = this.getDockedComponent(1).down('checkbox').checked;\n\n                \t\tvar documents = [];\n                \t\tif (isGroupItems) {\n                \t\t\tvar docs = {};\n    \t\t\t\t\t\tfor (var tag in tagsMap) {\n    \t\t\t\t\t\t\ttagsMap[tag].forEach(function(entry,i) {\n    \t\t\t\t\t\t\t\tvar text = str.substring(entry.start, entry.end).replace(/<\\/?\\w+(\\s+\\w)*>/g, \"\").trim();\n    \t\t\t\t\t\t\t\tif (text) {\n    \t\t\t\t\t\t\t\t\tvar item = entry.tag+(entry.attr ? \" \"+entry.attr : \"\");\n    \t\t\t\t\t\t\t\t\tif (item in docs) {\n    \t\t\t\t\t\t\t\t\t\tdocs[item]+= text;\n    \t\t\t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\t\t\tdocs[item] = text;\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\tfor (var item in docs) {\n    \t\t\t\t\t\t\tdocuments.push({\n    \t\t\t\t\t\t\t\ttitle: item,\n    \t\t\t\t\t\t\t\ttext: docs[item]\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n                \t\t} else {\n    \t\t\t\t\t\tfor (var tag in tagsMap) {\n    \t\t\t\t\t\t\ttagsMap[tag].forEach(function(entry,i) {\n    \t\t\t\t\t\t\t\tvar text = str.substring(entry.start, entry.end).replace(/<\\/?\\w+(\\s+\\w)*>/g, \"\").trim();\n    \t\t\t\t\t\t\t\tif (text) {\n    \t\t\t\t\t\t\t\t\tdocuments.push({\n    \t\t\t\t\t\t\t\t\t\ttitle: entry.tag+(entry.attr ? \" \"+entry.attr : \"\")+\" \"+(i+1),\n    \t\t\t\t\t\t\t\t\t\ttext: text\n    \t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n                \t\t}\n\n                \t\tif (documents.length==0) {\n                \t\t\treturn this.showError({title: \"Error\", msg: \"No documents found.\"})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.mask();\n\t\t\t\t\t\tvar progress = Ext.Msg.progress(\"Creating\", \"Creating new corpus.\");\n\t\t\t\t\t\t// create new corpus\n\t\t\t\t\t\tvar me = this;\n\t\t\t\t\t\tnew Corpus({\n\t\t\t\t\t\t\tinputFormat: 'json',\n\t\t\t\t\t\t\tinput: Ext.JSON.encode({documents: documents}),\n\t\t\t\t\t\t\tjsonDocumentsPointer: \"/documents\",\n\t\t\t\t\t\t\tjsonTitlePointer: \"/title\",\n\t\t\t\t\t\t\tjsonContentPointer: \"/text\"\n\t\t\t\t\t\t}).then(function (corpus) {\n\t\t\t\t\t\t\tprogress.close();\n\t\t\t\t\t\t\tme.unmask();\n\t\t\t\t\t\t\tvar app = me.getApplication();\n\t\t\t\t\t\t\tme.openUrl(app.getBaseUrl()+\"?corpus=\"+corpus.getAliasOrId())\n\t\t\t\t\t\t});\n\n                \t\t\n                \t},\n                \tscope: this\n                },{\n                \txtype: 'checkbox',\n                \tboxLabel: \"Combine documents with the same tag attribute.\",\n                \tchecked: true\n                }]\n            }],\n    \t\titems: [{\n\t\t        \txtype: 'panel',\n    \t\t    \tautoScroll: true,\n\t\t        \tflex: 1,\n\t\t        \theight: '100%',\n\t\t        \talign: 'stretch',\n\t\t        \theader: false,\n\t\t        \tregion: 'center',\n\t\t        \tlisteners: {\n\t\t        \t\tboxready: function() {\n\t\t        \t\t\tvar me = this;\n\t\t\t\t\t\t\t/* TODO swap out ace for codemirror\n\t\t        \t\t\tvar editor = ace.edit(Ext.getDom(this.getEl()));\n\t\t        \t\t\tmicroocp.setEditor(editor); // set to the containing panel\n//\t\t        \t\t\teditor.setOptions({enableBasicAutocompletion: false, enableLiveAutocompletion: false});\n//\t\t        \t\t\teditor.setTheme(\"ace/theme/monokai\");\n\t\t        \t\t\teditor.getSession().setMode(\"ace/mode/xml\")\n//\t\t        \t\t\teditor.$blockScrolling = Infinity;\n//\t\t        \t\t\teditor.getSession().setUseWorker(true);\n//\t\t        \t\t\teditor.setTheme(this.getTheme());\n//\t\t        \t\t\teditor.getSession().setMode(this.getMode());\n//\t\t        \t\t\teditor.setOptions({minLines: 6, maxLines: this.getMode().indexOf(\"javascript\")>-1 ? Infinity : 10, autoScrollEditorIntoView: true, scrollPastEnd: true});\n//\t\t        \t\t\teditor.setHighlightActiveLine(false);\n\t\t        \t\t\teditor.renderer.setShowPrintMargin(false);\n\t\t        \t\t\teditor.renderer.setShowGutter(false);\n//\t\t        \t\t\teditor.setValue(this.getContent() ? this.getContent() : this.localize('emptyText'));\n//\t\t        \t\t\teditor.clearSelection();\n//\t\t        \t\t    editor.on(\"focus\", function() {\n//\t\t        \t\t    \tme.getEditor().renderer.setShowGutter(true);\n//\t\t        \t\t    }, this);\n\t\t        \t\t\teditor.$blockScrolling = Infinity\n\t\t        \t\t\teditor.setOptions({autoScrollEditorIntoView: true});\n\t\t        \t\t\teditor.setBehavioursEnabled(false); // disable auto-complete\n\t\t        \t\t\teditor.on(\"change\", function(delta) {\n\t\t        \t\t\t\treparse = false;\n\t\t        \t\t\t\tif (delta.action==\"insert\") {\n\t\t        \t\t\t\t\tif (delta.lines[0].indexOf(\">\")==0) { // close tag\n\t\t        \t\t\t\t\t\treparse = true\n\t\t        \t\t\t\t\t}\n\t\t        \t\t\t\t} else if (delta.action==\"remove\") {\n\t\t        \t\t\t\t\tfor (var i=0; i<delta.lines.length; i++) {\n\t\t        \t\t\t\t\t\tif (delta.lines[i].indexOf(\">\")>-1) {\n\t\t        \t\t\t\t\t\t\treparse = true;\n\t\t        \t\t\t\t\t\t\tbreak;\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t}\n\t\t        \t\t\t\t}\n\t\t        \t\t\t\tif (reparse) {\n\t\t        \t\t\t\t\tExt.defer(function() {\n\t\t        \t\t\t\t\t\tvar str = editor.getValue();\n\t\t        \t\t\t\t\t\tvar tags = /<(\\w+)(\\s(\\w+))?>/g;\n\t\t        \t\t\t\t\t\tvar matches;\n\t\t        \t\t\t\t\t\tvar expressions = {}\n\t\t        \t\t\t\t\t\twhile ((matches = tags.exec(str)) != null) {\n\t\t        \t\t\t\t\t\t\tif (matches[3]) {expressions[matches[1]+\" \"+matches[3]]=true}\n\t\t        \t\t\t\t\t\t\telse {expressions[matches[1]]=true}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\tvar store = this.up(\"panel\").down(\"grid\").getStore();\n\t\t        \t\t\t\t\t\tvar inStoreItems = {};\n\t\t        \t\t\t\t\t\tstore.getRange().forEach(function(item) {inStoreItems[item.get(\"cocoa\")]=true;});\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\tfor (item in expressions) {\n\t\t        \t\t\t\t\t\t\tif (!(item in inStoreItems)) {\n\t\t        \t\t\t\t\t\t\t\tstore.add({cocoa: item});\n\t\t        \t\t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\tfor (inStoreItem in inStoreItems) {\n\t\t        \t\t\t\t\t\t\tif (!(inStoreItem in expressions)) {\n\t\t        \t\t\t\t\t\t\t\tvar rec = store.findRecord(\"cocoa\", inStoreItem)\n\t\t        \t\t\t\t\t\t\t\tstore.remove(rec);\n\t\t        \t\t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t}, 100, me)\n\t\t        \t\t\t\t}\n\t\t        \t\t\t})\n\t\t            \t\tif (microocp.getApiParam(\"uri\")) {\n\t\t            \t\t\tNotebook.loadDataFromUrl(microocp.getApiParam(\"uri\")).then(function(data) {\n\t\t            \t\t\t\tmicroocp.getEditor().setValue(data);\n\t\t            \t\t\t})\n\t\t            \t\t}\n\t\t\t\t\t\t\t*/\n\n\t\t        \t\t}\n\n\t\t        \t}\n\t\t        }, {\n\t\t        \txtype: 'grid',\n\t\t        \tregion: 'east',\n\t\t        \theight: '100%',\n\t\t        \talign: 'stretch',\n//    \t\t    \tautoScroll: true,\n    \t\t    \tscrollable: true,\n    \t\t    \theader: false,\n\n\t\t        \twidth: 200,\n\t\t    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n\t\t    \t\t\tmode: 'SIMPLE'\n\t\t            }),\n\t\t            store: store,\n\t\t            columns: [ {\n\t\t                text: 'COCOA',\n\t\t                flex: 1,\n\t\t                dataIndex: 'cocoa'\n\t\t            }]\n\t\t        }]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.getApiParam('uri')) {return;}\n    \t\tvar me = this;\n    \t\tcorpus.getPlainText().then(function(text) {\n    \t\t\ttext = text.replace(/(\\r\\n|\\r|\\n)(\\r\\n|\\r|\\n)(\\r\\n|\\r|\\n)+/g,\"\\n\\n\")\n\t\t\t\t// TODO swap out ace for codemirror\n    \t\t\t// var editor = me.getEditor();\n    \t\t\t// editor.setValue(text).trim();\n    \t\t\t// editor.scrollToLine(1, true, true, function () {});\n    \t\t})\n    \t}, this);\n    \t\n    \tthis.on('afterrender', function(panel) {\n    \t\tExt.Msg.alert(\"MicroOCP\", \"MicroOCP is an experimental prototype that is intended to give a taste of working with the COCOA markup format (COunt and COncordance on the Atlas). Cocoa tags are like switches, you can place one and that tag remains in effect until the next instance of the tag, which can have an optional attribute (single word). As an enhancement to COCOA, you can also close a tag.<pre>&lt;speaker jack&gt;I'm falling &lt;speaker jill&gt;down the hill.&lt;/speaker&gt;</pre>\")\n    \t});\n    \t\n    \t\n    }\n        \n});\n","Ext.define('Voyant.panel.Reader', {\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.data.store.Tokens'],\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.reader',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstart: 0,\n    \t\tlimit: 1000,\n    \t\tskipToDocId: undefined,\n    \t\tquery: undefined\n    \t},\n    \tglyph: 'xf0f6@FontAwesome'\n\t},\n    config: {\n    \tinnerContainer: undefined,\n    \ttokensStore: undefined,\n    \tdocumentsStore: undefined,\n    \tdocumentTermsStore: undefined,\n    \texportVisualization: false,\n    \tlastScrollTop: 0,\n\t\tscrollIntoView: false,\n\t\tinsertWhere: 'beforeEnd',\n    \tlastLocationUpdate: new Date(),\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    \n    SCROLL_UP: -1,\n    SCROLL_EQ: 0,\n    SCROLL_DOWN: 1,\n    \n\tLOCATION_UPDATE_FREQ: 100,\n\t\n\tINITIAL_LIMIT: 1000, // need to keep track since limit can be changed when scrolling,\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function(config) {\n    \tvar tokensStore = Ext.create(\"Voyant.data.store.Tokens\", {\n    \t\tparentTool: this,\n    \t\tproxy: {\n    \t\t\textraParams: {\n    \t\t\t\tforTool: 'reader'\n    \t\t\t}\n    \t\t}\n    \t})\n    \tvar me = this;\n    \ttokensStore.on(\"beforeload\", function(store) {\n    \t\treturn me.hasCorpusAccess(store.getCorpus());\n    \t})\n    \ttokensStore.on(\"load\", function(s, records, success) {\n    \t\tif (success) {\n\t    \t\tvar contents = \"\";\n\t    \t\tvar documentFrequency = this.localize(\"documentFrequency\");\n\t    \t\tvar isPlainText = false;\n\t    \t\tvar docIndex = -1;\n\t    \t\tvar isLastNewLine = false;\n\t    \t\trecords.forEach(function(record) {\n\t    \t\t\tif (record.getPosition()==0) {\n\t    \t\t\t\tcontents+=\"<h3>\"+this.getDocumentsStore().getById(record.getDocId()).getFullLabel()+\"</h3>\";\n\t    \t\t\t}\n\t    \t\t\tif (record.getDocIndex()!=docIndex) {\n\t    \t\t\t\tisPlainText = this.getDocumentsStore().getById(record.getDocId()).isPlainText();\n\t    \t\t\t\tdocIndex = record.getDocIndex();\n\t    \t\t\t}\n\t    \t\t\tif (record.isWord()) {\n\t    \t\t\t\tisLastNewLine = false;\n\t    \t\t\t\tcontents += \"<span class='word' id='\"+ record.getId() + \"' data-qtip='\"+documentFrequency+\" \"+record.getDocumentRawFreq()+\"'>\"+ record.getTerm() + \"</span>\";\n\t    \t\t\t}\n\t    \t\t\telse {\n\t    \t\t\t\tvar newContents = record.getTermWithLineSpacing(isPlainText);\n\t    \t\t\t\tvar isNewLine = newContents.indexOf(\"<br />\")==0;\n\t    \t\t\t\tif (isLastNewLine && (isNewLine || newContents.trim().length==0)) {}\n\t    \t\t\t\telse {\n\t    \t\t\t\t\tcontents += newContents;\n\t    \t\t\t\t\tisLastNewLine = isNewLine;\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t}, this);\n\t    \t\tthis.updateText(contents);\n\t    \t\t\n\t    \t\tvar keyword = this.down('querysearchfield').getValue();\n\t    \t\tif (keyword != '') {\n//\t    \t\t\tthis.highlightKeywords(keyword);\n\t    \t\t}\n    \t\t}\n    \t}, this);\n    \tthis.setTokensStore(tokensStore);\n    \t\n    \tthis.on(\"query\", function(src, queries) {\n    \t\tthis.loadQueryTerms(queries);\n    \t}, this);\n    \t\n    \tthis.setDocumentTermsStore(Ext.create(\"Ext.data.Store\", {\n\t\t\tmodel: \"Voyant.data.model.DocumentTerm\",\n    \t\tautoLoad: false,\n    \t\tremoteSort: false,\n    \t\tproxy: {\n\t\t\t\ttype: 'ajax',\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\t\textraParams: {\n\t\t\t\t\ttool: 'corpus.DocumentTerms',\n\t\t\t\t\twithDistributions: true,\n\t\t\t\t\t// TODO handle positions\n\t\t\t\t\twithPositions: true,\n\t\t\t\t\tbins: 25,\n\t\t\t\t\tforTool: 'reader'\n\t\t\t\t},\n\t\t\t\treader: {\n\t\t\t\t\ttype: 'json',\n\t\t            rootProperty: 'documentTerms.terms',\n\t\t            totalProperty: 'documentTerms.total'\n\t\t\t\t},\n\t\t\t\tsimpleSortMode: true\n   \t\t    },\n   \t\t    listeners: {\n   \t\t    load: function(store, records, successful, opts) {\n   \t\t    \t\tstore.sort('docIndex', 'ASC');\n   \t\t    \t\tvar term; // store last accessed term\n   \t\t    \t\tstore.each(function(r) {\n   \t\t    \t\t\tterm = r.get('term');\n   \t\t    \t\t}, this);\n   \t\t    \t\t \n   \t\t    \t\tthis.highlightKeywords(term);\n//   \t\t    \t\t this.down('querysearchfield').setValue(term);\n   \t\t    \t},\n   \t\t    \tscope: this\n   \t\t    }\n    \t}));\n    \t\n    \tthis.on(\"afterrender\", function() {\n    \t\tvar centerPanel = this.down('panel[region=\"center\"]');\n    \t\tthis.setInnerContainer(centerPanel.getLayout().getRenderTarget());\n    \t\t\n    \t\t// scroll listener\n    \t\tcenterPanel.body.on(\"scroll\", function(event, target) {\n    \t\t\tvar scrollDir = this.getLastScrollTop() < target.scrollTop ? this.SCROLL_DOWN\n    \t\t\t\t\t\t\t\t: this.getLastScrollTop() > target.scrollTop ? this.SCROLL_UP\n\t\t\t\t\t\t\t\t\t: this.SCROLL_EQ;\n    \t\t\t\n    \t\t\t// scroll up\n    \t\t\tif (scrollDir == this.SCROLL_UP && target.scrollTop < 1) {\n    \t\t\t\tthis.fetchPrevious(true);\n    \t\t\t// scroll down\n    \t\t\t} else if (scrollDir == this.SCROLL_DOWN && target.scrollHeight - target.scrollTop < target.offsetHeight*1.5) {//target.scrollTop+target.offsetHeight>target.scrollHeight/2) { // more than half-way down\n    \t\t\t\tthis.fetchNext(false);\n    \t\t\t} else {\n    \t\t\t\tvar amount;\n    \t\t\t\tif (target.scrollTop == 0) {\n    \t\t\t\t\tamount = 0;\n    \t\t\t\t} else if (target.scrollHeight - target.scrollTop == target.clientHeight) {\n    \t\t\t\t\tamount = 1;\n    \t\t\t\t} else {\n    \t\t\t\t\tamount = (target.scrollTop + target.clientHeight * 0.5) / target.scrollHeight;\n    \t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar now = new Date();\n        \t\t\tif (now - this.getLastLocationUpdate() > this.LOCATION_UPDATE_FREQ || amount == 0 || amount == 1) {\n        \t\t\t\tthis.updateLocationMarker(amount, scrollDir);\n        \t\t\t}\n    \t\t\t}\n    \t\t\tthis.setLastScrollTop(target.scrollTop);\n    \t\t}, this);\n    \t\t\n    \t\t// click listener\n    \t\tcenterPanel.body.on(\"click\", function(event, target) {\n    \t\t\ttarget = Ext.get(target);\n    \t\t\tif (target.hasCls('word')) {\n    \t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(target);\n    \t\t\t\tvar term = target.getHtml();\n    \t\t\t\tvar data = [{\n    \t\t\t\t\tterm: term,\n    \t\t\t\t\tdocIndex: info.docIndex\n    \t\t\t\t}];\n    \t\t\t\tthis.loadQueryTerms([term]);\n    \t\t\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\n    \t\t\t}\n    \t\t}, this);\n    \t\t\n    \t\tif (this.getCorpus()) {\n    \t\t\tthis.load();\n\t    \t\tvar query = this.getApiParam('query');\n\t    \t\tif (query) {\n\t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n\t    \t\t}\n    \t\t}\n\t\t\tthis.on(\"loadedCorpus\", function() {\n    \t\t\tthis.load(true); // make sure to clear in case we're replacing the corpus\n\t    \t\tvar query = this.getApiParam('query');\n\t    \t\tif (query) {\n\t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n\t    \t\t}\n\t\t\t}, this);\n    \t}, this);\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tcls: 'voyant-reader',\n    \t    layout: 'fit',\n    \t    items: {\n    \t    \tlayout: 'border',\n    \t    \titems: [{\n    \t\t    \tbodyPadding: 10,\n    \t\t    \tregion: 'center',\n    \t\t    \tborder: false,\n    \t\t    \tautoScroll: true,\n    \t\t    \thtml: '<div class=\"readerContainer\"></div>'\n    \t\t    },{\n\t\t\t\t\txtype: 'readergraph',\n    \t\t    \tregion: 'south',\n    \t\t    \theight: 40,\n    \t\t    \tsplit: {\n    \t\t    \t\tsize: 2\n    \t\t    \t},\n    \t\t    \tsplitterResize: true,\n\t\t\t\t\tborder: false,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tdocumentRelativePositionSelected: function(src, data) {\n\t\t\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(data.docIndex);\n\t\t\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\t\t\tvar position = Math.floor(totalTokens * data.fraction);\n\t\t\t\t\t\t\tvar bufferPosition = position - (this.getApiParam('limit')/2);\n\t\t\t\t\t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: bufferPosition < 0 ? 0 : bufferPosition});\n\t\t\t\t\t\t\tthis.load(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n    \t\t    }]\n    \t    },\n    \t\t// TODO clearing search loads default document terms into chart but probably shouldn't\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \tglyph: 'xf060@FontAwesome',\n            \t\thandler: function() {\n            \t\t\tthis.fetchPrevious(true);\n            \t\t},\n            \t\tscope: this\n            \t},{\n            \t\tglyph: 'xf061@FontAwesome',\n            \t\thandler: function() {\n            \t\t\tthis.fetchNext(true);\n            \t\t},\n            \t\tscope: this\n            \t},{xtype: 'tbseparator'},{\n                    xtype: 'querysearchfield'\n                }]\n    \t\t}],\n    \t\tlisteners: {\n    \t\t\tloadedCorpus: function(src, corpus) {\n    \t    \t\tthis.getTokensStore().setCorpus(corpus);\n    \t    \t\tthis.getDocumentTermsStore().getProxy().setExtraParam('corpus', corpus.getId());\n    \t    \t\t\n    \t    \t\tvar docs = corpus.getDocuments();\n    \t    \t\tthis.setDocumentsStore(docs);\n    \t    \t\t\n    \t    \t\tif (this.rendered) {\n    \t    \t\t\tthis.load();\n        \t    \t\tif (this.hasCorpusAccess(corpus)==false) {\n        \t    \t\t\tthis.mask(this.localize(\"limitedAccess\"), 'mask-no-spinner')\n        \t    \t\t}\n        \t    \t\tvar query = this.getApiParam('query');\n        \t    \t\tif (query) {\n        \t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n        \t    \t\t}\n    \t    \t\t}\n    \t    \t\t\n    \t\t\t},\n            \ttermsClicked: function(src, terms) {\n            \t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n            \t\t\telse if (term.term) {queryTerms.push(term.term);}\n            \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tif (queryTerms.length > 0) {\n            \t\t\tthis.loadQueryTerms(queryTerms);\n            \t\t}\n        \t\t},\n        \t\tcorpusTermsClicked: function(src, terms) {\n        \t\t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tthis.loadQueryTerms(queryTerms);\n        \t\t},\n        \t\tdocumentTermsClicked: function(src, terms) {\n        \t\t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tthis.loadQueryTerms(queryTerms);\n        \t\t},\n        \t\tdocumentSelected: function(src, document) {\n        \t\t\tvar corpus = this.getTokensStore().getCorpus();\n        \t\t\tvar doc = corpus.getDocument(document);\n        \t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: 0});\n\t\t\t\t\tthis.load(true);\n        \t\t},\n        \t\tdocumentsClicked: function(src, documents, corpus) {\n        \t\t\tif (documents.length > 0) {\n            \t\t\tvar doc = documents[0];\n            \t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: 0});\n\t\t\t\t\t\tthis.load(true);\n            \t\t}\n        \t\t},\n        \t\ttermLocationClicked: function(src, terms) {\n    \t\t\t\tif (terms[0] !== undefined) {\n    \t\t\t\t\tvar term = terms[0];\n    \t\t\t\t\tvar docIndex = term.get('docIndex');\n    \t\t\t\t\tvar position = term.get('position');\n    \t\t\t\t\tvar bufferPosition = position - (this.getApiParam('limit')/2);\n    \t\t\t\t\tvar doc = this.getCorpus().getDocument(docIndex);\n    \t\t\t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: bufferPosition < 0 ? 0 : bufferPosition});\n    \t\t\t\t\tthis.load(true, {\n    \t\t\t\t\t\tcallback: function() {\n    \t\t\t\t\t\t\tvar el = this.body.dom.querySelector(\"#_\" + docIndex + \"_\" + position);\n    \t\t\t\t\t\t\tif (el) {\n    \t\t\t\t\t\t\t\tel.scrollIntoView();\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\tthis.highlightKeywords(term.get('term'), false);\n    \t\t\t\t\t\t},\n    \t\t\t\t\t\tscope: this\n    \t\t\t\t\t});\n    \t\t\t\t};\n        \t\t},\n        \t\tdocumentIndexTermsClicked: function(src, terms) {\n        \t\t\tif (terms[0] !== undefined) {\n    \t\t\t\t\tvar term = terms[0];\n    \t\t\t\t\tvar termRec = Ext.create('Voyant.data.model.Token', term);\n    \t\t\t\t\tthis.fireEvent('termLocationClicked', this, [termRec]);\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n    \t\t}\n    \t});\n    \t\n        this.callParent(arguments);\n    },\n    \n    loadQueryTerms: function(queryTerms) {\n    \tif (queryTerms && queryTerms.length > 0) {\n\t\t\tthis.getDocumentTermsStore().load({\n\t\t\t\tparams: {\n\t\t\t\t\tquery: queryTerms/*,\n    \t\t\t\tdocIndex: undefined,\n    \t\t\t\tdocId: undefined,\n    \t\t\t\tpage: undefined,\n    \t\t\t\tstart: undefined,\n    \t\t\t\tlimit: undefined*/\n    \t\t\t}\n\t\t\t});\n\t\t\tthis.down('readergraph').loadQueryTerms(queryTerms);\n\t\t}\n    },\n    \n    highlightKeywords: function(query, doScroll) {\n\t\tif (!Ext.isArray(query)) query = [query];\n\t\t\n\t\tthis.getInnerContainer().first().select('span[class*=keyword]').removeCls('keyword');\n\t\t\n\t\tvar spans = [];\n\t\tvar caseInsensitiveQuery = new RegExp('^'+query[0]+'$', 'i');\n\t\tvar nodes = this.getInnerContainer().first().select('span.word');\n\t\tnodes.each(function(el, compEl, index) {\n\t\t\tif (el.dom.firstChild && el.dom.firstChild.nodeValue.match(caseInsensitiveQuery)) {\n\t\t\t\tel.addCls('keyword');\n\t\t\t\tspans.push(el.dom);\n\t\t\t}\n\t\t});\n\t\t\n//\t\tif (doScroll && spans[0] !== undefined) {\n//\t\t\tExt.get(nodes[0]).scrollIntoView(reader).frame(\"ff0000\", 1, { duration: 2 });\n//\t\t}\n\t},\n    \n\tfetchPrevious: function(scroll) {\n\t\tvar readerContainer = this.getInnerContainer().first();\n\t\tvar first = readerContainer.first('.word');\n\t\tif (first != null && first.hasCls(\"loading\")===false) {\n\t\t\twhile(first) {\n\t\t\t\tif (first.hasCls(\"word\")) {\n\t\t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(first);\n\t\t\t\t\tvar docIndex = info.docIndex;\n\t\t\t\t\tvar start = info.position;\n\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(docIndex);    \t\t\t\t\t\t\n\t\t\t\t\tvar limit = this.getApiParam('limit');\n\t\t\t\t\tvar getPrevDoc = false;\n\t\t\t\t\tif (docIndex === 0 && start === 0) {\n\t\t\t\t\t\tvar scrollContainer = this.down('panel[region=\"center\"]').body;\n\t\t\t\t\t\tvar scrollNeeded = first.getScrollIntoViewXY(scrollContainer, scrollContainer.dom.scrollTop, scrollContainer.dom.scrollLeft);\n\t\t\t\t\t\tif (scrollNeeded.y != 0) {\n\t\t\t\t\t\t\tfirst.dom.scrollIntoView();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfirst.frame(\"red\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (docIndex > 0 && start === 0) {\n\t\t\t\t\t\tgetPrevDoc = true;\n\t\t\t\t\t\tdocIndex--;\n\t\t\t\t\t\tdoc = this.getDocumentsStore().getAt(docIndex);\n\t\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\t\tstart = totalTokens-limit;\n\t\t\t\t\t\tif (start < 0) {\n\t\t\t\t\t\t\tstart = 0;\n\t\t\t\t\t\t\tthis.setApiParam('limit', totalTokens);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlimit--; // subtract one to limit for the word we're removing. need to do this to account for non-lexical tokens before/after first word.\n\t\t\t\t\t\tstart -= limit;\n\t\t\t\t\t}\n\t\t\t\t\tif (start < 0) start = 0;\n\t\t\t\t\t\n\t\t\t\t\tvar mask = first.insertSibling(\"<div class='loading'>\"+this.localize('loading')+\"</div>\", 'before', false).mask();\n\t\t\t\t\tif (!getPrevDoc) {\n\t\t\t\t\t\tfirst.destroy();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar id = doc.getId();\n\t\t\t\t\tthis.setApiParams({'skipToDocId': id, start: start});\n\t\t\t\t\tthis.setInsertWhere('afterBegin')\n\t\t\t\t\tthis.setScrollIntoView(scroll);\n\t\t\t\t\tthis.load();\n\t\t\t\t\tthis.setApiParam('limit', this.INITIAL_LIMIT);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tfirst.destroy(); // remove non word\n\t\t\t\tfirst = readerContainer.first();\n\t\t\t}\n\t\t}\n\t},\n\t\n\tfetchNext: function(scroll) {\n\t\tvar readerContainer = this.getInnerContainer().first();\n\t\tvar last = readerContainer.last();\n\t\tif (last.hasCls(\"loading\")===false) {\n\t\t\twhile(last) {\n\t\t\t\tif (last.hasCls(\"word\")) {\n\t\t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(last);\n\t\t\t\t\tvar docIndex = info.docIndex;\n\t\t\t\t\tvar start = info.position;\n\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(info.docIndex);\n\t\t\t\t\tvar id = doc.getId();\n\t\t\t\t\t\n\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\tif (start + this.getApiParam('limit') >= totalTokens && docIndex == this.getCorpus().getDocumentsCount()-1) {\n\t\t\t\t\t\tvar limit = totalTokens - start;\n\t\t\t\t\t\tif (limit <= 1) {\n\t\t\t\t\t\t\tlast.dom.scrollIntoView();\n\t\t\t\t\t\t\tlast.frame(\"red\")\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setApiParam('limit', limit);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// remove any text after the last word\n\t\t\t\t\tvar nextSib = last.dom.nextSibling;\n\t\t\t\t\twhile(nextSib) {\n\t\t\t\t\t\tvar oldNext = nextSib;\n\t\t\t\t\t\tnextSib = nextSib.nextSibling;\n\t\t\t\t\t\toldNext.parentNode.removeChild(oldNext);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar mask = last.insertSibling(\"<div class='loading'>\"+this.localize('loading')+\"</div>\", 'after', false).mask();\n\t\t\t\t\tlast.destroy();\n\t\t\t\t\tthis.setApiParams({'skipToDocId': id, start: info.position});\n\t\t\t\t\tthis.setInsertWhere('beforeEnd');\n\t\t\t\t\tthis.setScrollIntoView(scroll);\n\t\t\t\t\tthis.load(); // callback not working on buffered store\n\t\t\t\t\tthis.setApiParam('limit', this.INITIAL_LIMIT);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlast.destroy(); // remove non word\n\t\t\t\tlast = readerContainer.last();\n\t\t\t}\n\t\t}\n\t},\n\t\n    load: function(doClear, config) {\n    \tif (doClear) {\n    \t\tthis.getInnerContainer().first().destroy(); // clear everything\n    \t\tthis.getInnerContainer().setHtml('<div class=\"readerContainer\"><div class=\"loading\">'+this.localize('loading')+'</div></div>');\n\t\t\tthis.getInnerContainer().first().first().mask();\n\t\t}\n    \tthis.getTokensStore().load(Ext.apply(config || {}, {\n    \t\tparams: Ext.apply(this.getApiParams(), {\n    \t\t\tstripTags: 'blocksOnly',\n    \t\t\tstopList: '' // token requests shouldn't have stopList\n    \t\t})\n    \t}));\n    },\n    \n    updateText: function(contents) {\n    \tvar loadingMask = this.getInnerContainer().down('.loading');\n    \tif (loadingMask) loadingMask.destroy();\n    \t// FIXME: something is weird here in tool/Reader mode, this.getInnerContainer() seems empty but this.getInnerContainer().first() gets the canvas?!?\n    \tvar inserted = this.getInnerContainer().first().insertHtml(this.getInsertWhere()/* where is this defined? */, contents, true); // return Element, not dom\n    \tif (inserted && this.getScrollIntoView()) {\n    \t\tinserted.dom.scrollIntoView(); // use dom\n    \t\t// we can't rely on the returned element because it can be a transient fly element, but the id is right in a deferred call\n    \t\tExt.Function.defer(function() {\n    \t\t\tvar el = Ext.get(inserted.id); // re-get el\n    \t\t\tif (el) {el.frame(\"red\")}\n    \t\t}, 100);\n    \t}\n    \tvar target = this.down('panel[region=\"center\"]').body.dom;\n    \tvar amount;\n\t\tif (target.scrollTop == 0) {\n\t\t\tamount = 0;\n\t\t} else if (target.scrollHeight - target.scrollTop == target.clientHeight) {\n\t\t\tamount = 1;\n\t\t} else {\n\t\t\tamount = (target.scrollTop + target.clientHeight * 0.5) / target.scrollHeight;\n\t\t}\n    \tthis.updateLocationMarker(amount);\n\t},\n\t\n\tupdateLocationMarker: function(amount, scrollDir) {\n\t\tvar readerWords = Ext.DomQuery.select('.word', this.getInnerContainer().down('.readerContainer', true));\n\t\tvar firstWord = readerWords[0];\n\t\tvar lastWord = readerWords[readerWords.length-1];\n\t\tif (firstWord !== undefined && lastWord !== undefined) {\n\t\t\tvar corpus = this.getCorpus();\n\t\t\tvar partialFirstDoc = false;\n\t\t\t\n\t\t\tvar info1 = Voyant.data.model.Token.getInfoFromElement(Ext.get(firstWord));\n\t\t\tvar info2 = Voyant.data.model.Token.getInfoFromElement(Ext.get(lastWord));\n\t\t\tif (info1.position !== 0) {\n\t\t\t\tpartialFirstDoc = true;\n\t\t\t}\n\n\t\t\tvar docTokens = {};\n\t\t\tvar totalTokens = 0;\n\t\t\tvar currIndex = info1.docIndex;\n\t\t\twhile (currIndex <= info2.docIndex) {\n\t\t\t\tvar tokens = corpus.getDocument(currIndex).get('tokensCount-lexical');\n\t\t\t\tif (currIndex === info2.docIndex) {\n\t\t\t\t\ttokens = info2.position; // only count tokens up until last displayed word\n\t\t\t\t}\n\t\t\t\tif (currIndex === info1.docIndex) {\n\t\t\t\t\ttokens -= info1.position; // subtract missing tokens, if any\n\t\t\t\t}\n\t\t\t\ttotalTokens += tokens;\n\t\t\t\tdocTokens[currIndex] = tokens;\n\t\t\t\tcurrIndex++;\n\t\t\t}\n\t\t\t\n\t\t\tvar tokenPos = Math.round(totalTokens * amount);\n\t\t\tvar docIndex = 0;\n\t\t\tvar currToken = 0;\n\t\t\tfor (var i = info1.docIndex; i <= info2.docIndex; i++) {\n\t\t\t\tdocIndex = i;\n\t\t\t\tcurrToken += docTokens[i];\n\t\t\t\tif (currToken >= tokenPos) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar remains = (currToken - tokenPos);\n\t\t\tvar tokenPosInDoc = docTokens[docIndex] - remains;\n\t\t\t\n\t\t\tif (partialFirstDoc && docIndex === info1.docIndex) {\n\t\t\t\ttokenPosInDoc += info1.position;\n\t\t\t}\n\t\t\t\t\n\t\t\tvar fraction = tokenPosInDoc / corpus.getDocument(docIndex).get('tokensCount-lexical');\n\n\t\t\tthis.down('readergraph').moveLocationMarker(docIndex, fraction, scrollDir);\n\t\t}\n\t},\n    \n    updateChart: function() {\n    \t\n    }\n});\n","Ext.define('Voyant.panel.SimpleDocReader', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.simpledocreader',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tdocIndex: undefined,\n    \t\tdocId: undefined\n    \t},\n    \tglyph: 'xf0f6@FontAwesome'\n\t},\n    config: {\n    },\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function(config) {\n    \tvar me = this;\n    \tExt.apply(this, {\n    \t\thtml: '<iframe style=\"width: 100%; height: 100%; border: none;\"></iframe>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \tglyph: 'xf060@FontAwesome',\n            \t\thandler: this.fetchPrevious,\n            \t\tscope: this\n            \t},{\n            \t\tglyph: 'xf061@FontAwesome',\n            \t\thandler: this.fetchNext,\n            \t\tscope: this\n                }]\n    \t\t}],\n    \t\tlisteners: {\n    \t\t\tloadedCorpus: function(src, corpus) {\n    \t\t\t\t\n    \t\t\t\t// we can keep the reader blank to begin\n    \t\t\t\tif (this.getApiParam(\"autoLoadOnLoadedCorpus\", \"false\")===\"true\") {return;}\n    \t\t\t\t\n    \t\t\t\tthis.fireEvent(\"documentSelected\", this, 0);\n    \t\t\t\t\n    \t\t\t},\n        \t\tdocumentSelected: function(src, document) {\n        \t\t\tthis.setApiParams({\n        \t\t\t\tdocIndex: this.getCorpus().getDocument(document).getIndex(),\n        \t\t\t\tdocId: undefined\n        \t\t\t});\n        \t\t\tthis.fetch();\n        \t\t},\n        \t\tscope: this\n    \t\t}\n    \t});\n    \t\n        this.callParent(arguments);\n    },\n    \n\tfetchPrevious: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {doc = this.getCorpus().getDocument(1);}\n\t\tif (doc.getIndex()>0) {\n\t\t\tthis.setApiParams({docIndex: doc.getIndex()-1, docId: undefined});\n\t\t\tthis.fetch();\n\t\t} else {\n\t\t\tthis.toastInfo(this.localize('noPrevious'))\n\t\t}\n\t},\n\t\n\tfetchNext: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {\n\t\t\tthis.setApiParams({docIndex: 0, docId: undefined});\n\t\t\treturn this.fetch();\n\t\t}\n\t\tif (doc.getIndex()<this.getCorpus().getDocumentsCount()-1) {\n\t\t\tthis.setApiParams({docIndex: doc.getIndex()+1, docId: undefined});\n\t\t\tthis.fetch();\n\t\t} else {\n\t\t\tthis.toastInfo(this.localize('noNext'))\n\t\t}\n\t},\n\t\n\tfetch: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {doc = this.getCorpus().getDocument(0);}\n\t\tvar iframe = this.getTargetEl().down(\"iframe\", true);\n\t\tiframe.setAttribute(\"src\", \"about:blank\")\n\t\tif (this.getApiParam(\"originalUrlMetadataKey\")) {\n\t\t\tvar url = doc.get(this.getApiParam(\"originalUrlMetadataKey\"));\n\t\t\tif (url) {\n\t\t\t\tiframe.setAttribute(\"src\", url)\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar params = {\n\t\t\tcorpus: this.getCorpus().getId(),\n\t\t\tdocIndex: doc.getIndex(),\n\t\t\ttool: 'corpus.DocumentTokens',\n\t\t\ttemplate: 'docTokensPlusStructure2html',\n\t\t\toutputFormat: 'html',\n\t\t\tlimit: 0\n\t\t}\n\t\tvar url = this.getTromboneUrl() + \"?\" + Ext.Object.toQueryString(params);\n\t\tiframe.setAttribute(\"src\", url);\n\n\t}\n});\n","Ext.define('Voyant.panel.ScatterPlot', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\trequires: ['Ext.chart.CartesianChart'],\r\n\talias: 'widget.scatterplot',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\tdocId: undefined,\r\n    \t\tanalysis: 'ca',\r\n    \t\tlimit: 50,\r\n    \t\tdimensions: 3,\r\n    \t\tbins: 10,\r\n    \t\tclusters: 3,\r\n    \t\tperplexity: 15,\r\n    \t\titerations: 1500,\r\n    \t\tcomparisonType: 'relative',\r\n    \t\tstopList: 'auto',\r\n    \t\ttarget: undefined,\r\n    \t\tterm: undefined,\r\n    \t\tquery: undefined,\r\n    \t\twhitelist: undefined,\r\n    \t\tlabel: ['summary', 'docs', 'terms'],\r\n    \t\tstoreJson: undefined\r\n    \t},\r\n\t\tglyph: 'xf06e@FontAwesome'\r\n    },\r\n\tconfig: {\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\r\n    \tcaStore: null,\r\n    \tpcaStore: null,\r\n    \ttsneStore: null,\r\n    \tdocSimStore: null,\r\n    \ttermStore: null,\r\n    \tchartMenu: null,\r\n    \tnewTerm: null,\r\n    \ttermsTimeout: null,\r\n    \thighlightData: {x: 0, y: 0, r: 0},\r\n        highlightTask: null\r\n\t},\r\n    \r\n    tokenFreqTipTemplate: null,\r\n    docFreqTipTemplate: null,\r\n    \r\n    constructor: function(config) {\r\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\r\n\t\tif (\"storeJson\" in config) {\r\n    \t\tvar json = JSON.parse(config.storeJson);\r\n    \t\tExt.apply(config, json);\r\n    \t}\r\n\t\tthis.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tthis.setCaStore(Ext.create('Voyant.data.store.CAAnalysis', {\r\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\r\n    \t}));\r\n    \tthis.setPcaStore(Ext.create('Voyant.data.store.PCAAnalysis', {\r\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\r\n    \t}));\r\n    \tthis.setTsneStore(Ext.create('Voyant.data.store.TSNEAnalysis', {\r\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\r\n    \t}));\r\n    \tthis.setDocSimStore(Ext.create('Voyant.data.store.DocSimAnalysis', {\r\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\r\n    \t}));\r\n    \t\r\n    \tthis.setTermStore(Ext.create('Ext.data.JsonStore', {\r\n\t\t\tfields: [\r\n\t\t\t\t{name: 'term'},\r\n\t\t\t\t{name: 'rawFreq', type: 'int'},\r\n\t\t\t\t{name: 'relativeFreq', type: 'number'},\r\n\t\t\t\t{name: 'coordinates', mapping : 'vector'},\r\n\t\t\t\t{name: 'category'}\r\n\t\t\t],\r\n\t\t\tsorters: [{property: 'rawFreq', direction: 'DESC'}],\r\n\t\t\tgroupField: 'category'\r\n\t\t}));\r\n    \t\r\n    \tthis.setChartMenu(Ext.create('Ext.menu.Menu', {\r\n    \t\titems: [\r\n    \t\t\t{text: this.localize('remove'), itemId: 'remove', glyph: 'xf068@FontAwesome'},\r\n    \t\t\t{text: this.localize('nearby'), itemId: 'nearby', glyph: 'xf0b2@FontAwesome'}\r\n    \t\t],\r\n    \t\tlisteners: {\r\n    \t\t\thide: function() {\r\n    \t\t\t\tvar series = this.down('#chart').getSeries();\r\n    \t\t\t\tseries[0].enableToolTips();\r\n    \t\t\t\tseries[1].enableToolTips();\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t}\r\n    \t}));\r\n    \t\r\n    \tthis.tokenFreqTipTemplate = new Ext.Template(this.localize('tokenFreqTip'));\r\n    \tthis.docFreqTipTemplate = new Ext.Template(this.localize('docFreqTip'));\r\n    \t\r\n        Ext.apply(this, {\r\n        \ttitle: this.localize('title'),\r\n        \tlayout: 'border',\r\n        \tautoDestroy: true,\r\n        \titems: [{\r\n    \t\t\titemId: 'chartParent',\r\n    \t\t\tregion: 'center',\r\n    \t\t\tlayout: 'fit',\r\n        \t\ttbar: {\r\n        \t\t\toverflowHandler: 'scroller',\r\n        \t\t\titems: [{\r\n        \t\t\t\txtype: 'querysearchfield',\r\n        \t\t\t\titemId: 'filterTerms',\r\n        \t\t\t\twidth: 150\r\n        \t\t\t},{\r\n                \t\ttext: this.localize('labels'),\r\n                \t\titemId: 'labels',\r\n                \t\tglyph: 'xf02b@FontAwesome',\r\n                \t\tmenu: {\r\n                \t\t\titems: [\r\n                \t\t\t    {text: this.localize(\"summaryLabel\"), itemId: 'summary', xtype: 'menucheckitem'},\r\n                \t\t\t    {text: this.localize(\"docsLabel\"), itemId: 'docs', xtype: 'menucheckitem'},\r\n                \t\t\t    {text: this.localize(\"termsLabel\"), itemId: 'terms', xtype: 'menucheckitem'}\r\n                \t\t\t],\r\n        \t\t\t\t\tlisteners: {\r\n        \t\t\t\t\t\tafterrender: function(menu) {\r\n        \t\t\t\t\t\t\tvar labels = this.getApiParam('label');\r\n        \t\t\t\t\t\t\tmenu.items.each(function(item) {\r\n        \t\t\t\t\t\t\t\titem.setChecked(labels.indexOf(item.getItemId())>-1)\r\n        \t\t\t\t\t\t\t})\r\n        \t\t\t\t\t\t},\r\n        \t\t\t\t\t\tclick: function(menu, item) {\r\n        \t\t\t\t\t\t\tvar labels = this.getApiParam(\"label\");\r\n        \t\t\t\t\t\t\tvar label = item.getItemId();\r\n        \t\t\t\t\t\t\tif (Ext.isString(labels)) {labels = [labels]}\r\n        \t\t\t\t\t\t\tif (item.checked && labels.indexOf(label)==-1) {\r\n        \t\t\t\t\t\t\t\tlabels.push(label)\r\n        \t\t\t\t\t\t\t} else if (!item.checked && labels.indexOf(label)>-1) {\r\n        \t\t\t\t\t\t\t\tlabels = labels.filter(function(item) {return item!=label})\r\n        \t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t\tthis.setApiParam(\"label\", labels);\r\n        \t\t\t\t\t\t\tthis.doLabels();\r\n        \t\t\t\t\t\t\tthis.queryById('chart').redraw();\r\n        \t\t\t\t\t\t},\r\n        \t\t\t\t\t\tscope: this\r\n        \t\t\t\t\t}\r\n                \t\t}\r\n                \t}]\r\n        \t\t\t\r\n        \t\t},\r\n        \t\tlisteners: {\r\n        \t\t\tquery: function(component, value) {\r\n        \t\t\t\tthis.getTermStore().filter([{property: 'term', value: value, anyMatch: true}]);\r\n        \t\t\t\tthis.filterChart(value);\r\n        \t\t\t},\r\n        \t\t\tscope: this\r\n        \t\t}\r\n    \t\t},{\r\n    \t\t\titemId: 'optionsPanel',\r\n        \t\ttitle: this.localize('options'),\r\n        \t\tregion: 'west',\r\n        \t\tsplit: true,\r\n        \t\tcollapsible: true,\r\n        \t\tcollapseMode: 'header',\r\n        \t\twidth: 135,\r\n        \t\tscrollable: 'y',\r\n        \t\tlayout: {\r\n        \t\t\ttype: 'vbox',\r\n        \t\t\talign: 'stretch'\r\n        \t\t},\r\n        \t\tdefaults: {\r\n        \t\t\txtype: 'button',\r\n        \t\t\tmargin: '5',\r\n        \t\t\tlabelAlign: 'top'\r\n        \t\t},\r\n        \t\titems: [{\r\n        \t\t\txtype: 'label',\r\n        \t\t\ttext: this.localize('input')\r\n        \t\t},{\r\n    \t\t\t\txtype: 'documentselectorbutton'\r\n    \t\t\t},{\r\n\t            \ttext: this.localize('freqsMode'),\r\n\t            \titemId: 'comparisonType',\r\n\t\t\t\t\tglyph: 'xf201@FontAwesome',\r\n\t\t\t\t    tooltip: this.localize('freqsModeTip'),\r\n\t\t\t\t    menu: {\r\n\t\t\t\t    \titems: [\r\n\t\t\t               {text: this.localize(\"rawFrequencies\"), itemId: 'comparisonType_raw', group: 'freqsMode', xtype: 'menucheckitem'},\r\n\t\t\t               {text: this.localize(\"relativeFrequencies\"), itemId: 'comparisonType_relative', group: 'freqsMode', xtype: 'menucheckitem'},\r\n\t\t\t               {text: this.localize(\"tfidf\"), itemId: 'comparisonType_tfidf', group: 'freqsMode', xtype: 'menucheckitem'}\r\n\t\t\t            ],\r\n       \t\t\t\t\tlisteners: {\r\n    \t\t\t\t\t\tclick: function(menu, item) {\r\n    \t\t\t\t\t\t\tif (item !== undefined) {\r\n    \t\t\t\t\t\t\t\tvar type = item.getItemId().split('_')[1];\r\n    \t\t\t\t\t\t\t\tif (type !== this.getApiParam('comparisonType')) {\r\n\t    \t\t\t\t\t\t\t\tthis.setApiParam('comparisonType', type);\r\n\t    \t\t\t\t\t\t\t\tthis.loadFromApis(true);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\tscope: this\r\n    \t\t\t\t    }\r\n\t\t\t\t    }\r\n        \t\t},{\r\n        \t\t\tfieldLabel: this.localize('numTerms'),\r\n        \t\t\titemId: 'limit',\r\n        \t\t\txtype: 'numberfield',\r\n        \t\t\tminValue: 5,\r\n        \t\t\tlisteners: {\r\n        \t\t\t\tchange: function(numb, newValue, oldValue) {\r\n        \t\t\t\t\tfunction doLoad() {\r\n        \t\t\t\t\t\tthis.setApiParam('limit', newValue);\r\n            \t\t\t\t\tthis.loadFromApis();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (oldValue !== null) {\r\n\t\t\t\t\t\t\t\tif (this.getTermsTimeout() !== null) {\r\n\t\t\t\t\t\t\t\t\tclearTimeout(this.getTermsTimeout());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (numb.isValid()) {\r\n\t\t\t\t\t\t\t\t\tthis.setTermsTimeout(setTimeout(doLoad.bind(this), 500));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n        \t\t\t\t},\r\n        \t\t\t\tscope: this\r\n        \t\t\t}\r\n        \t\t},{\r\n        \t\t\txtype: 'container',\r\n        \t\t\thtml: '<hr style=\"border: none; border-top: 1px solid #cfcfcf;\"/>'\r\n        \t\t},{\r\n        \t\t\txtype: 'label',\r\n        \t\t\ttext: this.localize('output')\r\n        \t\t},{\r\n            \t\ttext: this.localize('analysis'),\r\n            \t\titemId: 'analysis',\r\n            \t\tglyph: 'xf1ec@FontAwesome',\r\n                    overflowHandler: 'scroller',\r\n        \t\t\tmenu: {\r\n    \t\t\t\t\titems: [\r\n    \t\t\t\t\t    {text: this.localize('pca'), itemId: 'analysis_pca', group:'analysis', xtype: 'menucheckitem'},\r\n    \t\t\t\t\t    {text: this.localize('ca'), itemId: 'analysis_ca', group:'analysis', xtype: 'menucheckitem'},\r\n    \t\t\t\t\t    {text: this.localize('tsne'), itemId: 'analysis_tsne', group:'analysis', xtype: 'menucheckitem'},\r\n    \t\t\t\t\t    {text: this.localize('docSim'), itemId: 'analysis_docSim', group:'analysis', xtype: 'menucheckitem'}\r\n    \t\t\t\t\t],\r\n    \t\t\t\t\tlisteners: {\r\n    \t\t\t\t\t\tclick: function(menu, item) {\r\n    \t\t\t\t\t\t\tif (item !== undefined) {\r\n    \t\t\t\t\t\t\t\tvar analysis = item.getItemId().split('_')[1];\r\n    \t\t\t\t\t\t\t\tif (analysis !== this.getApiParam('analysis')) {\r\n    \t\t\t\t\t\t\t\t\tthis.doAnalysisChange(analysis);\r\n    \t\t\t\t\t\t\t\t\tthis.loadFromApis(true);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\tscope: this\r\n    \t\t\t\t\t}\r\n        \t\t\t}\r\n\t            },{\r\n\t            \tfieldLabel: this.localize('perplexity'),\r\n\t            \titemId: 'perplexity',\r\n\t            \txtype: 'slider',\r\n\t            \tminValue: 5,\r\n\t            \tmaxValue: 100,\r\n\t            \tincrement: 1,\r\n\t            \tlisteners: {\r\n\t            \t\tchangecomplete: function(slider, newValue) {\r\n\t            \t\t\tthis.setApiParam('perplexity', newValue);\r\n\t            \t\t\tthis.loadFromApis(true);\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \tfieldLabel: this.localize('iterations'),\r\n\t            \titemId: 'iterations',\r\n\t            \txtype: 'slider',\r\n\t            \tminValue: 100,\r\n\t            \tmaxValue: 5000,\r\n\t            \tincrement: 100,\r\n\t            \tlisteners: {\r\n\t            \t\tchangecomplete: function(slider, newValue) {\r\n\t            \t\t\tthis.setApiParam('iterations', newValue);\r\n\t            \t\t\tthis.loadFromApis(true);\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n            \t\ttext: this.localize('clusters'),\r\n            \t\titemId: 'clusters',\r\n            \t\tglyph: 'xf192@FontAwesome',\r\n            \t\tmenu: {\r\n            \t\t\titems: [\r\n            \t\t\t    {text: '1', itemId: 'clusters_1', group: 'clusters', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '2', itemId: 'clusters_2', group: 'clusters', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '3', itemId: 'clusters_3', group: 'clusters', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '4', itemId: 'clusters_4', group: 'clusters', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '5', itemId: 'clusters_5', group: 'clusters', xtype: 'menucheckitem'}\r\n            \t\t\t],\r\n    \t\t\t\t\tlisteners: {\r\n    \t\t\t\t\t\tclick: function(menu, item) {\r\n    \t\t\t\t\t\t\tif (item !== undefined) {\r\n    \t\t\t\t\t\t\t\tvar clusters = parseInt(item.getItemId().split('_')[1]);\r\n    \t\t\t\t\t\t\t\tif (clusters !== this.getApiParam('clusters')) {\r\n        \t\t\t\t\t\t\t\tthis.setApiParam('clusters', clusters);\r\n        \t\t\t\t\t\t\t\tthis.loadFromApis(true);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\tscope: this\r\n    \t\t\t\t\t}\r\n            \t\t}\r\n            \t},{\r\n            \t\ttext: this.localize('dimensions'),\r\n            \t\titemId: 'dimensions',\r\n            \t\tglyph: 'xf1b2@FontAwesome',\r\n            \t\tmenu: {\r\n            \t\t\titems: [\r\n            \t\t\t    {text: '2', itemId: 'dimensions_2', group: 'dimensions', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '3', itemId: 'dimensions_3', group: 'dimensions', xtype: 'menucheckitem'}\r\n            \t\t\t],\r\n    \t\t\t\t\tlisteners: {\r\n    \t\t\t\t\t\tclick: function(menu, item) {\r\n    \t\t\t\t\t\t\tif (item !== undefined) {\r\n    \t\t\t\t\t\t\t\tvar dims = parseInt(item.getItemId().split('_')[1]);\r\n    \t\t\t\t\t\t\t\tif (dims !== this.getApiParam('dimensions')) {\r\n        \t\t\t\t\t\t\t\tif (dims == 3 && this.getApiParam('analysis') == 'ca' && this.getCorpus().getDocumentsCount() == 3) {\r\n        \t\t\t\t\t\t\t\t\tdims = 2;\r\n        \t\t\t\t\t\t\t\t\t// TODO add info message 'Because of the nature of Correspondence Analysis, you can only use 2 dimensions with 3 documents.'\r\n        \t\t\t\t\t\t\t\t\treturn false;\r\n        \t\t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t\t\t\r\n        \t\t\t\t\t\t\t\tthis.setApiParam('dimensions', dims);\r\n        \t\t\t\t\t\t\t\tthis.loadFromApis(true);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\tscope: this\r\n    \t\t\t\t\t}\r\n            \t\t}\r\n        \t\t},{\r\n        \t\t\titemId: 'reloadButton',\r\n        \t\t\ttext: this.localize('reload'),\r\n        \t\t\tglyph: 'xf021@FontAwesome',\r\n        \t\t\thandler: function() {\r\n        \t\t\t\tthis.loadFromApis();\r\n        \t\t\t},\r\n        \t\t\tscope: this\r\n        \t\t}]\r\n        \t},{\r\n        \t\titemId: 'termsGrid',\r\n        \t\txtype: 'grid',\r\n        \t\ttitle: this.localize('terms'),\r\n        \t\tregion: 'east',\r\n        \t\twidth: 250,\r\n        \t\tsplit: true,\r\n        \t\tcollapsible: true,\r\n        \t\tcollapseMode: 'header',\r\n        \t\tforceFit: true,\r\n        \t\tfeatures: [{\r\n        \t\t\tftype: 'grouping',\r\n        \t\t\thideGroupedHeader: true,\r\n                    enableGroupingMenu: false\r\n        \t\t}],\r\n        \t\tbbar: {\r\n                    overflowHandler: 'scroller',\r\n        \t\t\titems: [{\r\n        \t\t\t\titemId: 'nearbyButton',\r\n                        xtype: 'button',\r\n                        text: this.localize('nearby'),\r\n                        glyph: 'xf0b2@FontAwesome',\r\n                        flex: 1,\r\n                        handler: function(btn) {\r\n                        \tvar sel = btn.up('panel').getSelection()[0];\r\n                        \tif (sel === undefined) {\r\n                        \t\tthis.toastError({\r\n                        \t\t\thtml: this.localize(\"noTermSelected\"),\r\n                        \t\t     anchor: btn.up(\"panel\").getTargetEl()\r\n                        \t\t });\r\n                        \t}\r\n                        \telse {\r\n\t                        \tvar term = sel.get('term');\r\n\t                        \tthis.getNearbyForTerm(term);\r\n                        \t}\r\n                        },\r\n                        scope: this\r\n                    },{\r\n                    \titemId: 'removeButton',\r\n                        xtype: 'button',\r\n                        text: this.localize('remove'),\r\n                        glyph: 'xf068@FontAwesome',\r\n                        flex: 1,\r\n                        handler: function(btn) {\r\n                        \tvar sel = btn.up('panel').getSelection()[0];\r\n                        \tif (sel === undefined) {\r\n                        \t\tthis.toastError({\r\n                        \t\t\thtml: this.localize(\"noTermSelected\"),\r\n                        \t\t     anchor: btn.up(\"panel\").getTargetEl()\r\n                        \t\t });\r\n                        \t}\r\n                        \telse {\r\n\t                        \tvar term = sel.get('term');\r\n\t                        \tthis.removeTerm(term);\r\n                        \t}\r\n                        },\r\n                        scope: this\r\n                    }]\r\n        \t\t\t\r\n        \t\t},\r\n        \t\ttbar: {\r\n                    overflowHandler: 'scroller',\r\n                    items: [{\r\n                    \txtype: 'querysearchfield',\r\n                    \titemId: 'addTerms',\r\n//                    \temptyText: this.localize('addTerm'),\r\n                    \tflex: 1\r\n                    }]\r\n                },\r\n        \t\tcolumns: [{\r\n        \t\t\ttext: this.localize('term'),\r\n    \t\t\t\tdataIndex: 'term',\r\n    \t\t\t\tflex: 1,\r\n                    sortable: true\r\n    \t\t\t},{\r\n    \t\t\t\ttext: this.localize('rawFreq'),\r\n    \t\t\t\tdataIndex: 'rawFreq',\r\n    \t\t\t\tflex: 0.75,\r\n    \t\t\t\tminWidth: 70,\r\n                    sortable: true\r\n    \t\t\t},{\r\n    \t\t\t\ttext: this.localize('relFreq'),\r\n    \t\t\t\tdataIndex: 'relativeFreq',\r\n    \t\t\t\tflex: 0.75,\r\n    \t\t\t\tminWidth: 70,\r\n                    sortable: true,\r\n                    hidden: true\r\n    \t\t\t}],\r\n    \t\t\tselModel: {\r\n    \t\t\t\ttype: 'rowmodel',\r\n    \t\t\t\tmode: 'SINGLE',\r\n    \t\t\t\tallowDeselect: true,\r\n    \t\t\t\ttoggleOnClick: true,\r\n                    listeners: {\r\n                        selectionchange: {\r\n                        \tfn: function(sm, selections) {\r\n//                        \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, selections);\r\n                        \t\tvar sel = selections[0];\r\n                        \t\tif (sel !== undefined) {\r\n\t                        \t\tvar term = sel.get('term');\r\n\t                        \t\tvar isDoc = sel.get('category') === 'document';\r\n\t                        \t\tthis.selectTerm(term, isDoc);\r\n\t                        \t\t\r\n\t                        \t\tif (isDoc) {\r\n\t                        \t\t\tthis.queryById('nearbyButton').disable();\r\n\t                        \t\t\tthis.queryById('removeButton').disable();\r\n\t                        \t\t} else {\r\n\t                        \t\t\tthis.queryById('nearbyButton').enable();\r\n\t                        \t\t\tthis.queryById('removeButton').enable();\r\n\t                        \t\t}\r\n                        \t\t} else {\r\n                        \t\t\tthis.selectTerm();\r\n                        \t\t}\r\n                        \t},\r\n                        \tscope: this\r\n                        }\r\n                    }\r\n                },\r\n        \t\tstore: this.getTermStore(),\r\n        \t\tlisteners: {\r\n        \t\t\texpand: function(panel) {\r\n        \t\t\t\tpanel.getView().refresh();\r\n        \t\t\t},\r\n        \t\t\tquery: function(component, value) {\r\n        \t\t\t\tif (value.length > 0 && this.getTermStore().findExact('term', value[0]) === -1) {\r\n\t                \t\tthis.setNewTerm(value);\r\n\t                \t\tthis.loadFromApis();\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tthis.setNewTerm(null);\r\n    \t\t\t\t\t}\r\n        \t\t\t},\r\n        \t\t\tscope: this\r\n        \t\t}\r\n        \t}]\r\n        });\r\n        \r\n        this.on('boxready', function(component, width, height) {\r\n\t\t\tif (width < 400) {\r\n\t\t\t\tthis.queryById('optionsPanel').collapse();\r\n\t\t\t\tthis.queryById('termsGrid').collapse();\r\n\t\t\t}\r\n\t\t\tif (this.config.storeClass && this.config.storeData) {\r\n\t\t\t\tthis.loadStoreFromJson(this.config.storeClass, this.config.storeData);\r\n\t\t\t}\r\n\t\t}, this);\r\n        \r\n        this.on('beforedestroy', function(component) {\r\n        \tvar oldChart = this.queryById('chart');\r\n        \tif (oldChart !== null) {\r\n        \t\tthis.queryById('chartParent').remove(oldChart);\r\n        \t}\r\n        }, this);\r\n        \r\n        // create a listener for corpus loading (defined here, in case we need to load it next)\r\n    \tthis.on('loadedCorpus', function(src, corpus) {\r\n    \t\tfunction setCheckItemFromApi(apiParamName) {\r\n    \t\t\tvar value = this.getApiParam(apiParamName);\r\n    \t\t\tvar menu = this.queryById(apiParamName);\r\n    \t\t\tvar item = menu.down('#'+apiParamName+'_'+value);\r\n    \t\t\titem.setChecked(true);\r\n    \t\t}\r\n    \t\tvar setCheckBound = setCheckItemFromApi.bind(this);\r\n    \t\t\r\n    \t\tsetCheckBound('analysis');\r\n    \t\tthis.doAnalysisChange(this.getApiParam('analysis'));\r\n    \t\t\r\n    \t\tsetCheckBound('comparisonType');\r\n    \t\tsetCheckBound('clusters');\r\n\r\n    \t\tthis.queryById('perplexity').setValue(this.getApiParam('perplexity'));\r\n    \t\tthis.queryById('iterations').setValue(this.getApiParam('iterations'));\r\n    \t\t\r\n    \t\tif (corpus.getDocumentsCount() == 3) {\r\n    \t\t\tthis.setApiParam('dimensions', 2);\r\n    \t\t}\r\n    \t\tsetCheckBound('dimensions');\r\n\r\n    \t\tthis.getCaStore().setCorpus(corpus);\r\n    \t\tthis.getPcaStore().setCorpus(corpus);\r\n    \t\tthis.getDocSimStore().setCorpus(corpus);\r\n    \t\tthis.loadFromApis();\r\n    \t}, this);\r\n    \t\r\n    \tthis.on('documentsSelected', function(src, docIds) {\r\n    \t\tthis.setApiParam('docId', docIds);\r\n    \t\tthis.loadFromApis();\r\n    \t}, this);\r\n        \r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    doAnalysisChange: function(analysis) {\r\n    \tthis.setApiParam('analysis', analysis);\r\n\t\tthis.queryById('nearbyButton').setDisabled(analysis === 'tsne');\r\n\t\tthis.queryById('reloadButton').setVisible(analysis === 'tsne');\r\n\t\tthis.queryById('perplexity').setVisible(analysis === 'tsne');\r\n\t\tthis.queryById('iterations').setVisible(analysis === 'tsne');\r\n\t\tif (analysis === 'ca') {\r\n\t\t\t// TODO handling for when there's no corpus\r\n\t\t\tif (this.getCorpus().getDocumentsCount() == 3) {\r\n\t\t\t\tthis.setApiParam('dimensions', 2);\r\n\t\t\t\tthis.queryById('dimensions').menu.items.get(0).setChecked(true); // need 1-2 docs or 4+ docs for 3 dimensions\r\n\t\t\t}\r\n\t\t}\r\n    },\r\n    \r\n    loadStoreFromJson: function(storeClass, storeData) {\r\n\t\tif (storeClass == 'Voyant.data.store.CAAnalysis') {\r\n\t\t\tthis.getCaStore().loadRawData(storeData);\r\n\t\t\tthis.doAnalysisChange('ca');\r\n\t\t\tthis.maskAndBuildChart.call(this, this.getCaStore());\r\n\t\t} else if (storeClass == 'Voyant.data.store.PCAAnalysis') {\r\n\t\t\tthis.getPcaStore().loadRawData(storeData);\r\n\t\t\tthis.doAnalysisChange('pca');\r\n\t\t\tthis.maskAndBuildChart.call(this, this.getPcaStore());\r\n\t\t} else if (storeClass == 'Voyant.data.store.TSNEAnalysis') {\r\n\t\t\tthis.getTsneStore().loadRawData(storeData);\r\n\t\t\tthis.doAnalysisChange('tsne');\r\n\t\t\tthis.maskAndBuildChart.call(this, this.getTsneStore());\r\n\t\t} else if (storeClass == 'Voyant.data.store.DocSimAnalysis') {\r\n\t\t\tthis.getDocSimStore().loadRawData(storeData);\r\n\t\t\tthis.doAnalysisChange('docSim');\r\n\t\t\tthis.maskAndBuildChart.call(this, this.getDocSimStore());\r\n\t\t}\r\n    },\r\n    \r\n    maskAndBuildChart: function(store) {\r\n    \tthis.queryById('chartParent').mask(this.localize('plotting'));\r\n    \tExt.defer(this.buildChart, 50, this, [store]);\r\n    },\r\n\r\n    buildChart: function(store) {\r\n    \tvar that = this; // needed for tooltip renderer\r\n    \t\r\n    \tvar oldChart = this.queryById('chart');\r\n    \tif (oldChart !== null) {\r\n    \t\tthis.queryById('chartParent').remove(oldChart);\r\n    \t}\r\n    \t\r\n    \tthis.queryById('termsGrid').getSelectionModel().deselectAll();\r\n    \t\r\n    \tvar rec = store.getAt(0);\r\n        var numDims = this.getApiParam('dimensions');\r\n        \r\n    \tvar summary = '';    \t\r\n    \tif (this.getApiParam('analysis') === 'pca') {\r\n    \t\t// calculate the percentage of original data represented by the dominant principal components\r\n\t\t\tvar pcs = rec.getPrincipalComponents();\r\n\t\t\tvar eigenTotal = 0;\r\n\t\t\tfor (var i = 0; i < pcs.length; i++) {\r\n\t\t\t\tvar pc = pcs[i];\r\n\t\t\t\teigenTotal += parseFloat(pc.get('eigenValue'));\r\n\t\t\t}\r\n\t\t\tif (eigenTotal == 0) {\r\n\t\t\t\t// do nothing\r\n\t\t\t} else {\r\n\t\t\t\tsummary = this.localize('pcTitle')+'\\n';\r\n\t\t\t\tvar pcMapping = ['xAxis', 'yAxis', 'fill'];\r\n\t\t\t\tfor (var i = 0; i < pcs.length; i++) {\r\n\t\t\t\t\tif (i >= numDims) break;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar eigenValue = pcs[i].get('eigenValue');\r\n\t\t\t\t\tvar percentage = eigenValue / eigenTotal * 100;\r\n\t\t\t\t\tsummary += this.localize('pc')+' '+(i+1)+' ('+this.localize(pcMapping[i])+'): '+Math.round(percentage*100)/100+'%\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n    \t} else if (this.getApiParam('analysis') === 'tsne') {\r\n    \t\t\r\n    \t} else {\r\n    \t\tsummary = this.localize('caTitle')+'\\n';\r\n    \t\tvar pcMapping = ['xAxis', 'yAxis', 'fill'];\r\n    \t\t\r\n    \t\tvar dimensions = rec.getDimensions();\r\n    \t\tfor (var i = 0; i < dimensions.length; i++) {\r\n    \t\t\tif (i >= numDims) break;\r\n    \t\t\t\r\n    \t\t\tvar percentage = dimensions[i].get('percentage');\r\n    \t\t\tsummary += this.localize('dimension')+' '+(i+1)+' ('+this.localize(pcMapping[i])+'): '+Math.round(percentage*100)/100+'%\\n';\r\n    \t\t}\r\n    \t}\r\n        \r\n        var maxFreq = 0;\r\n        var minFreq = Number.MAX_VALUE;\r\n        var maxFill = 0;\r\n        var minFill = Number.MAX_VALUE;\r\n        \r\n        \r\n        if (this.getApiParam('analysis') !== 'docSim') { // docSim doesn't return terms so keep the current ones\r\n\t        this.getTermStore().removeAll();\r\n        }\r\n\t        \r\n        var tokens = rec.getTokens();\r\n        var termData = [];\r\n        var docData = [];\r\n        tokens.forEach(function(token) {\r\n        \tvar freq = token.get('rawFreq');\r\n        \tvar category = token.get('category');\r\n        \tif (category === undefined) {\r\n        \t\tcategory = 'term'; // some analyses don't define categories\r\n        \t\ttoken.set('category', 'term');\r\n        \t}\r\n        \tvar isTerm = category === 'term';\r\n        \tif (isTerm) {\r\n\t        \tif (freq > maxFreq) maxFreq = freq;\r\n\t        \tif (freq < minFreq) minFreq = freq;\r\n        \t}\r\n        \tif (this.getTermStore().findExact('term', token.get('term') === -1)) {\r\n        \t\tthis.getTermStore().addSorted(token);\r\n        \t}\r\n        \tif (numDims === 3) {\r\n\t\t\t\tvar z = token.get('vector')[2];\r\n\t\t\t\tif (z !== undefined) {\r\n\t\t\t\t\tif (z < minFill) minFill = z;\r\n\t\t\t\t\tif (z > maxFill) maxFill = z;\r\n\t\t\t\t}\r\n\t\t\t}\r\n        \tvar tokenData = {\r\n        \t\tx: token.get('vector')[0], y: token.get('vector')[1] || 0, z: token.get('vector')[2] || 0,\r\n    \t\t\tterm: token.get('term'), rawFreq: freq, relativeFreq: token.get('relativeFreq'), cluster: token.get('cluster'), category: category,\r\n    \t\t\tdisabled: false\r\n        \t};\r\n        \tif (!isTerm) {\r\n        \t\tif (token.get('category') === 'bin') {\r\n        \t\t\ttokenData.term = tokenData.title = \"Bin \"+token.get('docIndex');\r\n        \t\t} else {\r\n\t        \t\ttokenData.docIndex = token.get('docIndex');\r\n\t        \t\tvar doc = this.getCorpus().getDocument(tokenData.docIndex);\r\n\t        \t\tif (doc !== null) {\r\n\t\t        \t\ttokenData.term = doc.getShortTitle();\r\n\t\t        \t\ttokenData.title = doc.getTitle();\r\n\t        \t\t}\r\n        \t\t}\r\n        \t\tdocData.push(tokenData);\r\n        \t} else {\r\n        \t\ttermData.push(tokenData);\r\n        \t}\r\n        }, this);\r\n        \r\n        var newCount = this.getTermStore().getCount();\r\n        this.queryById('limit').setRawValue(newCount);\r\n        this.setApiParam('limit', newCount);\r\n        \r\n        \r\n    \tvar termSeriesStore = Ext.create('Ext.data.JsonStore', {\r\n    \t\tfields: ['term', 'x', 'y', 'z', 'rawFreq', 'relativeFreq', 'cluster', 'category', 'docIndex', 'disabled'],\r\n    \t\tdata: termData\r\n    \t});\r\n    \tvar docSeriesStore = Ext.create('Ext.data.JsonStore', {\r\n    \t\tfields: ['term', 'x', 'y', 'z', 'rawFreq', 'relativeFreq', 'cluster', 'category', 'docIndex', 'disabled'],\r\n    \t\tdata: docData\r\n    \t});\r\n    \t\r\n    \tvar config = {\r\n        \titemId: 'chart',\r\n        \txtype: 'cartesian',\r\n        \tinteractions: ['crosszoom','panzoom','itemhighlight'],\r\n        \tplugins: {\r\n                ptype: 'chartitemevents'\r\n            },\r\n        \taxes: [{\r\n        \t\ttype: 'numeric',\r\n        \t\tposition: 'bottom',\r\n        \t\tfields: ['x'],\r\n        \t\tlabel: {\r\n                    rotate:{degrees:-30}\r\n            \t}\r\n        \t},{\r\n        \t\ttype: 'numeric',\r\n        \t\tposition: 'left',\r\n        \t\tfields: ['y']\r\n        \t}],\r\n        \tsprites: [{\r\n        \t\ttype: 'text',\r\n        \t\ttext: summary,\r\n        \t\tx: 70,\r\n        \t\ty: 70\r\n        \t}],\r\n        \tinnerPadding: {top: 25, right: 25, bottom: 25, left: 25},\r\n        \tseries: [{\r\n        \t\ttype: 'customScatter',\r\n        \t\txField: 'x',\r\n        \t\tyField: 'y',\r\n        \t\tstore: termSeriesStore,\r\n        \t\tlabel: {\r\n        \t\t\tfont: '14px Helvetica',\r\n        \t\t\tfield: 'term',\r\n        \t\t\tdisplay: 'over'\r\n        \t\t},\r\n        \t\ttooltip: {\r\n        \t\t\ttrackMouse: true,\r\n        \t\t\tstyle: 'background: #fff',\r\n        \t\t\trenderer: function (toolTip, record, ctx) {\r\n        \t\t\t\ttoolTip.setHtml(that.tokenFreqTipTemplate.apply([record.get('term'),record.get('rawFreq'),record.get('relativeFreq')]));\r\n        \t\t\t}\r\n        \t\t},\r\n        \t\tmarker: {\r\n        \t\t    type: 'circle'\r\n        \t\t},\r\n        \t\thighlight: {\r\n        \t\t\tfillStyle: 'yellow',\r\n                    strokeStyle: 'black'\r\n        \t\t},\r\n        \t\trenderer: function (sprite, config, rendererData, index) {\r\n    \t\t\t\tvar store = rendererData.store;\r\n    \t\t\t\tvar item = store.getAt(index);\r\n    \t\t\t\tif (item !== null) {\r\n\t    \t\t\t\tvar clusterIndex = item.get('cluster');\r\n\t    \t\t\t\tvar scatterplot = that;\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tif (clusterIndex === -1) {\r\n\t    \t\t\t\t\t// no clusters were specified in initial call\r\n\t    \t\t\t\t\tclusterIndex = 0;\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tvar fillAlpha = 0.65;\r\n\t    \t\t\t\tvar strokeAlpha = 1;\r\n\t    \t\t\t\tif (item.get('disabled') === true) {\r\n\t    \t\t\t\t\tfillAlpha = 0.1;\r\n\t    \t\t\t\t\tstrokeAlpha = 0.1;\r\n\t    \t\t\t\t} else if (numDims === 3 && item.get('z')) {\r\n\t    \t\t\t\t\tfillAlpha = scatterplot.interpolate(item.get('z'), minFill, maxFill, 0, 1);\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\tvar color = scatterplot.getApplication().getColor(clusterIndex);\r\n\t    \t\t\t\tconfig.fillStyle = 'rgba('+color.join(',')+','+fillAlpha+')';\r\n\t    \t\t\t\tconfig.strokeStyle = 'rgba('+color.join(',')+','+strokeAlpha+')';\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tvar freq = item.get('rawFreq');\r\n\t    \t\t\t\tvar radius = scatterplot.interpolate(freq, minFreq, maxFreq, 2, 20);\r\n\t    \t\t\t\tconfig.radius = radius;\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n        \t},{\r\n        \t\ttype: 'customScatter',\r\n        \t\txField: 'x',\r\n        \t\tyField: 'y',\r\n        \t\tstore: docSeriesStore,\r\n        \t\tlabel: {\r\n        \t\t\tfont: '14px Helvetica',\r\n        \t\t\tfield: 'term',\r\n        \t\t\tdisplay: 'over',\r\n        \t\t\tcolor: this.getDefaultDocColor(true)\r\n        \t\t},\r\n        \t\ttooltip: {\r\n        \t\t\ttrackMouse: true,\r\n        \t\t\tstyle: 'background: #fff',\r\n        \t\t\trenderer: function (toolTip, record, ctx) {\r\n        \t\t\t\ttoolTip.setHtml(that.docFreqTipTemplate.apply([record.get('title'),record.get('rawFreq')]));\r\n        \t\t\t}\r\n        \t\t},\r\n        \t\tmarker: {\r\n        \t\t    type: 'diamond'\r\n        \t\t},\r\n        \t\thighlight: {\r\n        \t\t\tfillStyle: 'yellow',\r\n                    strokeStyle: 'black'\r\n        \t\t},\r\n        \t\trenderer: function (sprite, config, rendererData, index) {\r\n    \t\t\t\tvar store = rendererData.store;\r\n    \t\t\t\tvar item = store.getAt(index);\r\n    \t\t\t\tif (item !== null) {\r\n\t    \t\t\t\tvar clusterIndex = item.get('cluster');\r\n\t    \t\t\t\tvar scatterplot = that;\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tvar color;\r\n\t    \t\t\t\tif (clusterIndex === -1 || scatterplot.getApiParam('analysis') !== 'docSim') {\r\n\t    \t\t\t\t\tcolor = scatterplot.getDefaultDocColor();\r\n\t    \t\t\t\t} else {\r\n\t    \t\t\t\t\tcolor = scatterplot.getApplication().getColor(clusterIndex);\t\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tvar a = 0.65;\r\n\t    \t\t\t\tif (numDims === 3 && item.get('z')) {\r\n\t    \t\t\t\t\ta = scatterplot.interpolate(item.get('z'), minFill, maxFill, 0, 1);\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tconfig.fillStyle = 'rgba('+color.join(',')+','+a+')';\r\n\t    \t\t\t\tconfig.strokeStyle = 'rgba('+color.join(',')+',1)';\r\n\t    \t\t\t\tconfig.radius = 5;\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n        \t\t\r\n        \t\t\r\n        \t}],\r\n        \tlisteners: {\r\n        \t\titemclick: function(chart, item, event) {\r\n        \t\t\tvar data = item.record.data;\r\n        \t\t\tif (data.category === 'doc') {\r\n        \t\t\t\tvar record = this.getCorpus().getDocument(data.docIndex);\r\n\t            \t\tthis.getApplication().dispatchEvent('documentsClicked', this, [record]);\r\n        \t\t\t} else if (data.category === 'term') {\r\n\t        \t\t\tvar record = Ext.create('Voyant.data.model.CorpusTerm', data);\r\n\t            \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, [record]);\r\n        \t\t\t}\r\n        \t\t},\r\n        \t\trender: function(chart) {\r\n        \t\t\tchart.body.on('contextmenu', function(event, target) {\r\n\t        \t\t\tevent.preventDefault();\r\n\t        \t\t\t\r\n\t\t            \tvar xy = event.getXY();\r\n\t\t            \tvar parentXY = Ext.fly(target).getXY();\r\n\t\t            \tvar x = xy[0] - parentXY[0];\r\n\t\t            \tvar y = xy[1] - parentXY[1];\r\n\t\t            \tvar chartItem = this.down('#chart').getItemForPoint(x,y);\r\n\t\t            \tif (chartItem != null && chartItem.record.get('category') === 'term') {\r\n\t\t            \t\tvar series = this.down('#chart').getSeries();\r\n\t\t            \t\tseries[0].disableToolTips();\r\n\t\t            \t\tseries[1].disableToolTips();\r\n\t\t            \t\t\r\n\t\t            \t\tvar term = chartItem.record.get('term');\r\n\t\t            \t\t\r\n\t\t            \t\tvar text = (new Ext.Template(this.localize('removeTerm'))).apply([term]);\r\n\t\t            \t\tthis.getChartMenu().queryById('remove').setText(text);\r\n\t\t            \t\ttext = (new Ext.Template(this.localize('nearbyTerm'))).apply([term]);\r\n\t\t            \t\tvar nearby = this.getChartMenu().queryById('nearby');\r\n\t\t            \t\tnearby.setText(text);\r\n\t\t            \t\tnearby.setDisabled(this.getApiParam('analysis') === 'tsne');\r\n\t\t            \t\t\r\n\t\t            \t\tthis.getChartMenu().on('click', function(menu, item) {\r\n\t\t            \t\t\tif (item !== undefined) {\r\n\t\t            \t\t\t\tvar term = chartItem.record.get('term');\r\n\t\t\t            \t\t\tif (item.getItemId() === 'nearby') {\r\n\t\t\t            \t\t\t\tthis.getNearbyForTerm(term);\r\n\t\t\t            \t\t\t} else {\r\n\t\t\t            \t\t\t\tthis.removeTerm(term);\r\n\t\t\t            \t\t\t}\r\n\t\t            \t\t\t}\r\n\t\t            \t\t}, this, {single: true});\r\n\t\t            \t\tthis.getChartMenu().showAt(xy);\r\n\t\t            \t}\r\n\t\t            }, this);\r\n        \t\t},\r\n        \t\tscope: this\r\n        \t}\r\n        };\r\n    \t\r\n    \tvar chart = Ext.create('Ext.chart.CartesianChart', config);\r\n    \tthis.queryById('chartParent').insert(0, chart);\r\n    \t\r\n    \tthis.queryById('chartParent').unmask();\r\n    \t\r\n    \tthis.doLabels();\r\n    \t\r\n    \tif (this.getNewTerm() !== null) {\r\n        \tthis.selectTerm(this.getNewTerm()[0]);\r\n        \tthis.setNewTerm(null);\r\n        }\r\n    },\r\n    \r\n    getDefaultDocColor: function(returnHex) {\r\n    \tvar color = this.getApplication().getColor(6, returnHex);\r\n    \treturn color;\r\n    },\r\n    \r\n    doLabels: function() {\r\n    \tvar chart = this.queryById('chart');\r\n    \tvar series = chart.getSeries();\r\n    \tvar summary = chart.getSurface('chart').getItems()[0];\r\n    \tvar labels = this.getApiParam(\"label\");\r\n    \tif (labels.indexOf(\"summary\")>-1) {summary.show();}\r\n    \telse {summary.hide();}\r\n    \tif (labels.indexOf(\"terms\")>-1) {series[0].getLabel().show();}\r\n    \telse {series[0].getLabel().hide();}\r\n    \tif (labels.indexOf(\"docs\")>-1) {series[1].getLabel().show();}\r\n    \telse {series[1].getLabel().hide();}\r\n    },\r\n    \r\n    selectTerm: function(term, isDoc) {\r\n    \tvar chart = this.down('#chart');\r\n    \tif (chart !== null) {\r\n\t    \tif (term === undefined) {\r\n\t\t\t\tchart.getSeries()[0].setHighlightItem(null);\r\n\t\t\t\tchart.getSeries()[1].setHighlightItem(null);\r\n\t    \t} else {\r\n\t\t    \tvar series, index;\r\n\t\t    \tif (isDoc === true) {\r\n\t\t    \t\tseries = chart.getSeries()[1];\r\n\t\t\t    \tindex = series.getStore().findExact('title', term);\r\n\t\t    \t} else {\r\n\t\t\t    \tseries = chart.getSeries()[0];\r\n\t\t\t    \tindex = series.getStore().findExact('term', term);\r\n\t\t    \t}\r\n\t\t    \tif (index !== -1) {\r\n\t\t    \t\tvar record = series.getStore().getAt(index);\r\n\t\t    \t\tvar sprite = series.getSprites()[0];\r\n\t\t    \t\t// constructing series item, like in the chart series source\r\n\t\t    \t\tvar item = {\r\n\t\t\t\t\t\tseries: series,\r\n\t\t                category: series.getItemInstancing() ? 'items' : 'markers',\r\n\t\t                index: index,\r\n\t\t                record: record,\r\n\t\t                field: series.getYField(),\r\n\t\t                sprite: sprite\r\n\t\t    \t\t};\r\n\t\t    \t\tseries.setHighlightItem(item);\r\n\t\t    \t\tif (isDoc) {\r\n\t\t    \t\t\tchart.getSeries()[0].setHighlightItem(null);\r\n\t\t    \t\t} else {\r\n\t\t    \t\t\tchart.getSeries()[1].setHighlightItem(null);\r\n\t\t    \t\t}\r\n\t\t    \t\t\r\n\t\t    \t\tvar point = this.getPointFromIndex(series, index);\r\n\t\t    \t\tthis.setHighlightData({x: point[0], y: point[1], r: 50});\r\n\t\t    \t\t\r\n\t\t    \t\tif (this.getHighlightTask() == null) {\r\n\t\t    \t\t\tthis.setHighlightTask(Ext.TaskManager.newTask({\r\n\t\t        \t\t\trun: this.doHighlight,\r\n\t\t        \t\t\tscope: this,\r\n\t\t        \t\t\tinterval: 25,\r\n\t\t        \t\t\trepeat: this.getHighlightData().r\r\n\t\t        \t\t}));\r\n\t\t    \t\t}\r\n\t\t    \t\tthis.getHighlightTask().restart();\r\n\t\t    \t}\r\n\t    \t}\r\n    \t}\r\n    },\r\n    \r\n    getPointFromIndex: function(series, index) {\r\n\t\tvar sprite = series.getSprites()[0];\r\n\t\tif (sprite.surfaceMatrix !== null) {\r\n\t\t\tvar matrix = sprite.attr.matrix.clone().prependMatrix(sprite.surfaceMatrix);\r\n\t\t\tvar dataX = sprite.attr.dataX[index];\r\n\t\t\tvar dataY = sprite.attr.dataY[index];\r\n\t\t\treturn matrix.transformPoint([dataX, dataY]);\r\n\t\t} else {\r\n\t\t\treturn [0,0];\r\n\t\t}\r\n    },\r\n    \r\n    doHighlight: function() {\r\n    \tvar chart = this.down('#chart');\r\n    \tif (this.getHighlightData().r > 0) {\r\n\t    \tvar surf = chart.getSurface();\r\n\t\t\tvar highlight = null;\r\n\t\t\tvar items = surf.getItems();\r\n\t\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif (item.id == 'customHighlight') {\r\n\t\t\t\t\thighlight = item;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (highlight == null) {\r\n\t\t\t\tsurf.add({\r\n\t\t\t\t\tid: 'customHighlight',\r\n\t\t\t\t\ttype: 'circle',\r\n\t\t\t\t\tstrokeStyle: 'red',\r\n\t\t\t\t\tfillStyle: 'none',\r\n\t\t\t\t\tradius: this.getHighlightData().r,\r\n\t\t\t\t\tx: this.getHighlightData().x,\r\n\t\t\t\t\ty: this.getHighlightData().y\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\thighlight.setAttributes({\r\n\t\t\t\t\tx: this.getHighlightData().x,\r\n\t\t\t\t\ty: this.getHighlightData().y,\r\n\t\t\t\t\tradius: this.getHighlightData().r\r\n\t\t\t\t});\r\n\t\t\t\tthis.getHighlightData().r -= 1.5;\r\n\t\t\t\tif (this.getHighlightData().r <= 0) {\r\n\t\t\t\t\tthis.getHighlightData().r = 0;\r\n\t\t\t\t\tsurf.remove(highlight, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tchart.redraw();\r\n    \t}\r\n    },\r\n    \r\n    filterChart: function(query) {\r\n    \tif (Ext.isString(query)) query = [query];\r\n    \tvar reQueries = [];\r\n    \tfor (var i = 0; i < query.length; i++) {\r\n    \t\tvar re = new RegExp(query[i]);\r\n    \t\treQueries.push(re);\r\n    \t}\r\n    \t\r\n    \t// filter terms\r\n    \tvar chart = this.queryById('chart');\r\n    \tvar series0 = chart.getSeries()[0];\r\n    \tvar label0 = series0.getLabel();\r\n    \tseries0.getStore().each(function(item) {\r\n    \t\tvar match = false;\r\n    \t\tif (reQueries.length == 0) match = true;\r\n    \t\telse {\r\n\t    \t\tfor (var i = 0; i < reQueries.length; i++) {\r\n\t    \t\t\tmatch = match || reQueries[i].test(item.get('term'));\r\n\t    \t\t\tif (match) break;\r\n\t    \t\t}\r\n    \t\t}\r\n    \t\titem.set('disabled', !match);\r\n    \t\tvar index = item.store.indexOf(item);\r\n    \t\tlabel0.setAttributesFor(index, {hidden: !match});\r\n    \t}, this);\r\n\r\n\t\tchart.redraw();\r\n    },\r\n    \r\n    getCurrentTerms: function() {\r\n    \tvar terms = [];\r\n    \tthis.getTermStore().each(function(r) {\r\n    \t\tif (r.get('category') === 'term') {\r\n    \t\t\tterms.push(r.get('term'));\r\n    \t\t}\r\n    \t});\r\n    \treturn terms;\r\n    },\r\n    \r\n    getNearbyForTerm: function(term) {\r\n    \tvar limit = Math.max(2000, Math.round(this.getCorpus().getWordTokensCount() / 100));\r\n\t\tthis.setApiParams({limit: limit, target: term});\r\n\t\tthis.loadFromApis();\r\n\t\tthis.setApiParam('target', undefined);\r\n    },\r\n    \r\n    removeTerm: function(term) {\r\n    \tvar series = this.down('#chart').getSeries()[0];\r\n    \tvar index = series.getStore().findExact('term', term);\r\n    \tseries.getStore().removeAt(index);\r\n    \t\r\n    \tindex = this.getTermStore().findExact('term', term);\r\n    \tthis.getTermStore().removeAt(index);\r\n    \t\r\n    \tvar newCount = this.getTermStore().getCount();\r\n        this.queryById('limit').setRawValue(newCount);\r\n    },\r\n    \r\n    loadFromApis: function(keepCurrentTerms) {\r\n    \tthis.queryById('chartParent').mask(this.localize('analyzing'));\r\n    \t\r\n    \tvar params = {};\r\n    \tvar terms = this.getCurrentTerms();\r\n    \tif (this.getNewTerm() !== null) {\r\n    \t\tterms = terms.concat(this.getNewTerm());\r\n    \t\tthis.setApiParam('limit', terms.length);\r\n    \t}\r\n    \tif (terms.length > 0) {\r\n    \t\tif (this.getNewTerm() !== null || keepCurrentTerms) {\r\n    \t\t\tparams.query = terms.join(',');\r\n    \t\t}\r\n//    \t\tparams.term = terms;\r\n    \t}\r\n    \tExt.apply(params, this.getApiParams());\r\n    \tif (params.target != null) {\r\n    \t\tparams.term = terms;\r\n    \t}\r\n    \tif (params.analysis === 'pca') {\r\n    \t\tthis.getPcaStore().load({\r\n\t    \t\tparams: params\r\n\t    \t});\r\n    \t} else if (params.analysis === 'tsne'){\r\n    \t\tthis.getTsneStore().load({\r\n\t    \t\tparams: params\r\n\t    \t});\r\n    \t} else if (params.analysis === 'docSim'){\r\n    \t\tthis.getDocSimStore().load({\r\n\t    \t\tparams: params\r\n\t    \t});\r\n    \t} else {\r\n    \t\tthis.getCaStore().load({\r\n\t    \t\tparams: params\r\n\t    \t});\r\n    \t}\r\n    },\r\n    \r\n    interpolate: function(lambda, minSrc, maxSrc, minDst, maxDst) {\r\n        return minDst + (maxDst - minDst) * Math.max(0, Math.min(1, (lambda - minSrc) / (maxSrc - minSrc)));\r\n    }\r\n});\r\n\r\n/*\r\n * Adds tool tip disabling.\r\n */\r\nExt.define('Ext.chart.series.CustomScatter', {\r\n\textend: 'Ext.chart.series.Scatter',\r\n\t\r\n\talias: 'series.customScatter',\r\n    type: 'customScatter',\r\n    seriesType: 'scatterSeries',\r\n\t\r\n\ttipsDisabled: false,\r\n\t\r\n\tenableToolTips: function() {\r\n\t\tthis.tipsDisabled = false;\r\n\t},\r\n\t\r\n\tdisableToolTips: function() {\r\n\t\tthis.tipsDisabled = true;\r\n\t},\r\n\t\r\n    showTip: function (item, xy) {\r\n    \tif (this.tipsDisabled) {\r\n    \t\treturn;\r\n    \t}\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    }\r\n});","Ext.define('Voyant.panel.StreamGraph', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.streamgraph',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tlimit: 5,\n    \t\tstopList: 'auto',\n    \t\tquery: undefined,\n    \t\twithDistributions: 'relative',\n    \t\tbins: 50,\n    \t\tdocIndex: undefined,\n    \t\tdocId: undefined\n    \t},\n\t\tglyph: 'xf1fe@FontAwesome'\n    },\n    \n    config: {\n    \tvisLayout: undefined,\n    \tvis: undefined,\n    \tmode: 'corpus',\n    \t\n    \tlayerData: undefined,\n    \t\n    \tgraphId: undefined,\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    \n    graphMargin: {top: 20, right: 60, bottom: 110, left: 80},\n    \n    MODE_CORPUS: 'corpus',\n    MODE_DOCUMENT: 'document',\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.setGraphId(Ext.id(null, 'streamgraph_'));\n    },\n    \n    initComponent: function() {\n        var me = this;\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\ttbar: new Ext.Toolbar({\n                overflowHandler: 'scroller',\n\t\t\t\titems: ['->',{\n\t\t\t\t\txtype: 'legend',\n\t\t\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\t\t\tfields: ['name', 'mark', 'active']\n\t\t\t\t\t}),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\titemclick: function(view, record, el, index) {\n\t\t\t\t\t\t\tvar isActive = Ext.fly(el.firstElementChild).hasCls('x-legend-inactive');\n\t\t\t\t\t\t\trecord.set('active', isActive);\n\t\t\t\t\t\t\tvar terms = this.getCurrentTerms();\n\t\t\t\t\t\t\tthis.setApiParams({query: terms, limit: terms.length, stopList: undefined, categories: this.getApiParam(\"categories\")});\n\t\t\t\t\t\t\tthis.loadFromCorpus();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},'->']\n\t\t\t}),\n\t\t\tbbar: {\n                overflowHandler: 'scroller',\n\t\t\t\titems: [{\n                \txtype: 'querysearchfield'\n                },{\n\t            \txtype: 'button',\n\t            \ttext: this.localize('clearTerms'),\n\t            \thandler: function() {\n\t            \t\tthis.setApiParams({query: undefined});\n\t            \t\tthis.loadFromRecords([]);\n\t            \t},\n\t            \tscope: this\n\t            },{\n\t            \txtype: 'corpusdocumentselector',\n\t            \tsingleSelect: true\n\t            },{\n\t            \ttext: this.localize('freqsMode'),\n\t\t\t\t\tglyph: 'xf201@FontAwesome',\n\t\t\t\t    tooltip: this.localize('freqsModeTip'),\n\t\t\t\t    menu: {\n\t\t\t\t    \titems: [{\n\t\t\t\t               text: this.localize('relativeFrequencies'),\n\t\t\t\t               checked: true,\n\t\t\t\t               itemId: 'relative',\n\t\t\t\t               group: 'freqsMode',\n\t\t\t\t               checkHandler: function(item, checked) {\n\t\t\t\t            \t   if (checked) {\n\t\t\t\t                \t   this.setApiParam('withDistributions', 'relative');\n\t\t\t\t                \t   this.loadFromCorpus();\n\t\t\t\t            \t   }\n\t\t\t\t               },\n\t\t\t\t               scope: this\n\t\t\t\t           }, {\n\t\t\t\t               text: this.localize('rawFrequencies'),\n\t\t\t\t               checked: false,\n\t\t\t\t               itemId: 'raw',\n\t\t\t\t               group: 'freqsMode',\n\t\t\t\t               checkHandler: function(item, checked) {\n\t\t\t\t            \t   if (checked) {\n\t\t\t\t                \t   this.setApiParam('withDistributions', 'raw');\n\t\t\t\t                \t   this.loadFromCorpus();\n\t\t\t\t            \t   }\n\t\t\t\t               },\n\t\t\t\t               scope: this\n\t\t\t           }]\n\t\t\t\t    }\n\t            },{\n\t            \txtype: 'slider',\n\t            \titemId: 'segmentsSlider',\n\t            \tfieldLabel: this.localize('segments'),\n\t            \tlabelAlign: 'right',\n\t            \tlabelWidth: 70,\n\t            \twidth: 150,\n\t            \tincrement: 10,\n\t            \tminValue: 10,\n\t            \tmaxValue: 300,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam('bins'));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({bins: newvalue});\n\t            \t\t\tthis.loadFromCorpus();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t            }]\n\t\t\t}\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tif (this.getCorpus().getDocumentsCount() == 1 && this.getMode() != this.MODE_DOCUMENT) {\n\t\t\t\tthis.setMode(this.MODE_DOCUMENT);\n\t\t\t}\n\t\t\tif (!('bins' in this.getModifiedApiParams())) {\n\t\t\t\tif (this.getMode() == this.MODE_CORPUS) {\n\t\t\t\t\tvar count = corpus.getDocumentsCount();\n\t\t\t\t\tvar binsMax = 100;\n\t\t\t\t\tthis.setApiParam('bins', count > binsMax ? binsMax : count);\n\t\t\t\t}\n\t\t\t}\n    \t\tif (this.isVisible()) {\n    \t\t\tthis.loadFromCorpus();\n    \t\t}\n        }, this);\n        \n        this.on('corpusSelected', function(src, corpus) {\n    \t\tif (src.isXType('corpusdocumentselector')) {\n    \t\t\tthis.setMode(this.MODE_CORPUS);\n    \t\t\tthis.setApiParams({docId: undefined, docIndex: undefined});\n    \t\t\tthis.setCorpus(corpus);\n        \t\tthis.loadFromCorpus();\n    \t\t}\n    \t});\n        \n        this.on('documentSelected', function(src, doc) {\n        \tvar docId = doc.getId();\n        \tthis.setApiParam('docId', docId);\n        \tthis.loadFromDocumentTerms();\n        }, this);\n        \n\t\tthis.on('query', function(src, query) {\n        \tvar terms = this.getCurrentTerms();\n        \tterms.push(query);\n        \tthis.setApiParams({query: terms, limit: terms.length, stopList: undefined});\n        \tif (this.getMode() === this.MODE_DOCUMENT) {\n        \t\tthis.loadFromDocumentTerms();\n        \t} else {\n        \t\tthis.loadFromCorpusTerms(this.getCorpus().getCorpusTerms());\n        \t}\n        }, this);\n\t\t\n        this.on('resize', this.resizeGraph, this);\n        \n        this.on('boxready', this.initGraph, this);\n        \n        me.callParent(arguments);\n    },\n    \n    loadFromCorpus: function() {\n    \tvar corpus = this.getCorpus();\n\t\tif (this.getApiParam('docId') || this.getApiParam('docIndex')) {\n\t\t\tthis.loadFromDocumentTerms();\n\t\t} else if (corpus.getDocumentsCount() == 1) {\n\t\t\tthis.loadFromDocument(corpus.getDocument(0));\n\t\t} else {\n\t\t\tthis.loadFromCorpusTerms(corpus.getCorpusTerms());\n\t\t}\n\t},\n\n    loadFromCorpusTerms: function(corpusTerms) {\n    \tvar params = this.getApiParams(['limit','stopList','query','withDistributions','bins','categories']);\n\t\t// ensure that we're not beyond the number of documents\n\t\tif (params.bins && params.bins > this.getCorpus().getDocumentsCount()) {\n\t\t\tparams.bins = this.getCorpus().getDocumentsCount();\n\t\t}\n\t\tcorpusTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tif (success) {\n\t\t    \t\tthis.setMode(this.MODE_CORPUS);\n\t\t\t    \tthis.loadFromRecords(records);\n\t\t    \t} else {\n\t\t\t\t\tVoyant.application.showResponseError(this.localize('failedGetCorpusTerms'), operation);\n\t\t    \t}\n\t\t    },\n\t\t    scope: this,\n\t\t    params: params\n    \t});\n    },\n    \n    loadFromDocument: function(document) {\n    \tif (document.then) {\n    \t\tvar me = this;\n    \t\tdocument.then(function(document) {me.loadFromDocument(document);});\n    \t} else {\n    \t\tvar ids = [];\n    \t\tif (Ext.getClassName(document)==\"Voyant.data.model.Document\") {\n        \t\tthis.setApiParams({\n        \t\t\tdocIndex: undefined,\n        \t\t\tquery: undefined,\n        \t\t\tdocId: document.getId()\n        \t\t});\n        \t\tif (this.isVisible()) {\n                \tthis.loadFromDocumentTerms();\n        \t\t}\n    \t\t}\n    \t}\n    },\n    \n    loadFromDocumentTerms: function(documentTerms) {\n    \tif (this.getCorpus()) {\n        \tdocumentTerms = documentTerms || this.getCorpus().getDocumentTerms({autoLoad: false});\n    \t\tdocumentTerms.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tif (success) {\n    \t\t    \t\tthis.setMode(this.MODE_DOCUMENT);\n    \t\t    \t\tthis.loadFromRecords(records);\n    \t\t    \t}\n    \t\t    \telse {\n    \t\t\t\t\tVoyant.application.showResponseError(this.localize('failedGetDocumentTerms'), operation);\n    \t\t    \t}\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: this.getApiParams(['docId','docIndex','limit','stopList','query','withDistributions','bins','categories'])\n        \t});\n    \t}\n    },\n    \n    loadFromRecords: function(records) {\n    \tvar legendData = [];\n    \tvar layers = [];\n    \trecords.forEach(function(record, index) {\n    \t\tvar key = record.getTerm();\n    \t\tvar values = record.get('distributions');\n    \t\tfor (var i = 0; i < values.length; i++) {\n    \t\t\tif (layers[i] === undefined) {\n    \t\t\t\tlayers[i] = {};\n    \t\t\t}\n    \t\t\tlayers[i][key] = values[i];\n    \t\t}\n    \t\tlegendData.push({id: key, name: key, mark: this.getApplication().getColorForTerm(key, true), active: true});\n    \t}, this);\n    \t\n    \tthis.setLayerData(layers);\n    \t\n    \tthis.down('[xtype=legend]').getStore().loadData(legendData);\n\n    \tthis.doLayout();\n    },\n    \n    doLayout: function(layers) {\n    \tvar layers = this.getLayerData();\n    \tif (layers !== undefined) {\n    \t\tvar me = this;\n    \t\t\n\t    \tvar keys = [];\n\t    \tthis.down('[xtype=legend]').getStore().each(function(r) { keys.push(r.getId()); });\n\t    \t\n\t    \tvar steps;\n\t    \tif (this.getMode() === this.MODE_DOCUMENT) {\n\t    \t\tsteps = this.getApiParam('bins');\n\t    \t} else {\n\t    \t\tvar bins = this.getApiParam('bins');\n\t    \t\tvar docsCount = this.getCorpus().getDocumentsCount();\n\t    \t\t\n\t    \t\tsteps = bins < docsCount ? bins : docsCount;\n\t    \t}\n\t    \t\n\t    \tthis.getVisLayout().keys(keys);\n\t    \tvar processedLayers = this.getVisLayout()(layers);\n\t    \t\n\t    \tvar width = this.body.down('svg').getWidth() - this.graphMargin.left - this.graphMargin.right;\n\t    \tvar x = d3.scaleLinear().domain([0, steps-1]).range([0, width]);\n\t    \t\n\t    \tvar min = d3.min(processedLayers, function(layer) {\n\t    \t\treturn d3.min(layer, function(d) { return d[0]; });\n\t    \t});\n\t    \tvar max = d3.max(processedLayers, function(layer) {\n\t    \t\treturn d3.max(layer, function(d) { return d[1]; });\n\t    \t});\n\t    \t\n\t    \tvar height = this.body.down('svg').getHeight() - this.graphMargin.top - this.graphMargin.bottom;\n\t    \tvar y = d3.scaleLinear().domain([min, max]).range([height, 0]);\n\t    \t\n\t    \tvar area = d3.area()\n\t\t    \t.x(function(d, i) { return x(i); })\n\t\t\t    .y0(function(d) { return y(d[0]); })\n\t\t\t    .y1(function(d) { return y(d[1]); })\n\t\t\t    .curve(d3.curveCatmullRom);\n\t    \t\n\t    \tvar xAxis;\n\t    \tif (this.getMode() === this.MODE_CORPUS) {\n\t    \t\tvar xAxisDomain = [];\n\t    \t\tthis.getCorpus().getDocuments().each(function(doc) {\n\t    \t\t\txAxisDomain.push(doc.getTinyLabel());\n\t    \t\t});\n\t    \t\tvar xAxisScale = d3.scalePoint().domain(xAxisDomain).range([0, width]);    \t\t\n\t    \t\txAxis = d3.axisBottom(xAxisScale);\n\t    \t} else {\n\t    \t\txAxis = d3.axisBottom(x);\n\t    \t}\n\t    \t\n\t    \tvar yAxis = d3.axisLeft(y);\n\t    \t\n\t    \tvar paths = this.getVis().selectAll('path').data(processedLayers, function(d) { return d; });\n\t    \t\n\t    \tpaths\n\t    \t\t.attr('d', function(d) { return area(d); })\n\t\t    \t.style('fill', function(d) { return me.getApplication().getColorForTerm(d.key, true); })\n\t\t\t\t.select('title').text(function (d) { return d.key; });\n\t    \t\n\t    \tpaths.enter().append('path')\n\t\t\t\t.attr('d', function(d) { return area(d); })\n\t\t\t\t.style('fill', function(d) { return me.getApplication().getColorForTerm(d.key, true); })\n\t\t\t\t.append('title').text(function (d) { return d.key; });\n\t    \t\n\t    \tpaths.exit().remove();\n\t    \t\n\t    \tthis.getVis().selectAll('g.axis').remove();\n\t    \t\n\t    \tthis.getVis().append('g')\n\t    \t\t.attr('class', 'axis x')\n\t    \t\t.attr('transform', 'translate(0,'+height+')')\n\t    \t\t.call(xAxis);\n\t    \t\n\t    \tvar xAxisText;\n\t    \tif (this.getMode() === this.MODE_CORPUS) {\n\t    \t\tthis.getVis().select('g.axis.x').selectAll('text').each(function() {\n\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t.attr('text-anchor', 'end')\n\t\t\t\t\t\t.attr('transform', 'rotate(-45)');\n\t    \t\t});\n\t    \t\t\n\t    \t\txAxisText = this.localize('documents');\n\t    \t} else {\n\t    \t\txAxisText = this.localize('documentSegments');\n\t    \t}\n\t    \tthis.getVis().select('g.axis.x').append(\"text\")\n\t\t\t\t.attr('text-anchor', 'middle')\n\t\t\t\t.attr('transform', 'translate('+width/2+', '+(this.graphMargin.bottom-30)+')')\n\t\t\t\t.attr('fill', '#000')\n\t\t\t\t.text(xAxisText);\n\t    \t\n\t    \tthis.getVis().append('g')\n\t\t\t\t.attr('class', 'axis y')\n\t\t\t\t.attr('transform', 'translate(0,0)')\n\t\t\t\t.call(yAxis);\n\t    \t\n\t    \tvar yAxisText;\n\t    \tif (this.getApiParam('withDistributions') === 'raw') {\n\t    \t\tyAxisText = this.localize('rawFrequencies');\n\t    \t} else {\n\t    \t\tyAxisText = this.localize('relativeFrequencies');\n\t    \t}\n\t    \tthis.getVis().select('g.axis.y').append(\"text\")\n\t\t\t\t.attr('text-anchor', 'middle')\n\t\t\t\t.attr('transform', 'translate(-'+(this.graphMargin.left-20)+', '+height/2+') rotate(-90)')\n\t\t\t\t.attr('fill', '#000')\n\t\t\t\t.text(yAxisText);\n    \t}\n    },\n    \n\tgetCurrentTerms: function() {\n    \tvar terms = [];\n    \tthis.down('[xtype=legend]').getStore().each(function(record) {\n    \t\tif (record.get('active')) {\n    \t\t\tterms.push(record.get('name'));\n    \t\t}\n    \t}, this);\n    \treturn terms;\n    },\n\t\n    initGraph: function() {\n    \tif (this.getVisLayout() === undefined) {\n\t    \tvar el = this.getLayout().getRenderTarget();\n\t    \t\n\t    \tthis.setVisLayout(d3.stack().offset(d3.stackOffsetWiggle).order(d3.stackOrderInsideOut));\n\t\t\tthis.setVis(d3.select(el.dom).append('svg').attr('id',this.getGraphId()).append('g').attr('transform', 'translate('+this.graphMargin.left+','+this.graphMargin.top+')'));\n\t\t\t\n\t\t\tthis.resizeGraph();\n    \t}\n    },\n    \n    resizeGraph: function() {\n    \tvar el = this.body;//getLayout().getRenderTarget();\n    \tvar width = el.getWidth();\n\t\tvar height = el.getHeight();\n\t\t\n\t\td3.select(el.dom).select('svg').attr('width', width).attr('height', height);\n\t\t\n\t\tthis.doLayout();\n    }\n});\n\n","/**\n * The Summary panel provides an overview of a corpus, and the content will\n * depend on whether the corpus includes one document or many.\n */\nExt.define('Voyant.panel.Summary', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.summary',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} stopList A list of words to exclude.\n    \t\t * \n    \t\t * Stopword lists can take one of several forms and they can be combined with commas:\n    \t\t * \n    \t\t * * *auto*: automatically detect the language (this is recommended and the default so it doesn't need to be specified)\n    \t\t * * specially named stopword lists including stop.ar.arabic-lucene.txt, stop.bg.bulgarian-lucene.txt, stop.br.breton-lucene.txt, stop.ca.catalan-lucene.txt, stop.ckb.kurdish-lucene.txt, stop.cn.chinese-lawrence.txt, stop.cz.czech-lucene.txt, stop.de.citelab.txt, stop.de.german.txt, stop.el.greek-lucene.txt, stop.en.glasgow.txt, stop.en.smart.txt, stop.en.taporware.txt, stop.es.spanish.txt, stop.eu.basque-luence.txt, stop.fa.farsi-lucene.txt, stop.fr.steffens.txt, stop.fr.veronis.txt, stop.ga.ga-irish.txt, stop.gl.galician-lucene.txt, stop.hi.hindi-lucene.txt, stop.hu.hungarian.txt, stop.hy.armenian-lucene.txt, stop.id.indonesian-lucene.txt, stop.it.italian.txt, stop.ja.japanese.txt, stop.lt.lithuanian-lucene.txt, stop.lv.latvian-lucene.txt, stop.mu.multi.txt, stop.nl.dutch.txt, stop.no.norwegian.txt, stop.ro.romanian-lucene.txt, stop.se.swedish-long.txt, stop.se.swedish-short.txt, stop.th.thai-lucene.txt, stop.tr.turkish-lucene.txt\n    \t\t * * individual words to be excluded\n    \t\t * * URLs that point to plain text UTF-8 files with one stopword per line (lines with leading hash symbols (#) are skipped)\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t\n    \t\tstart: 0,\n    \t\t\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} limit The number of items to include in most lists (document length, vocabulary density, most frequent terms).\n    \t\t */\n    \t\tlimit: 5,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} numberOfDocumentsForDistinctiveWords The number of items to include in the list of distinctive words (similar to the limit parameter but specific to distinctive words).\n    \t\t */\n    \t\tnumberOfDocumentsForDistinctiveWords: 10\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    autoScroll: true,\n    cls: 'corpus-summary',\n    \n    constructor: function(config ) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\titems: {\n    \t\t\titemId: 'main',\n    \t\t\tcls: 'main',\n    \t\t\tmargin: 10\n    \t\t},\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\tfieldLabel: this.localize('items'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 5,\n\t            \tminValue: 5,\n\t            \tmaxValue: 59,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"limit\"))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadSummary();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on(\"afterrender\", function() {\n        \tthis.body.addListener('click', function(e) {\n    \t\t\tvar target = e.getTarget(null, null, true);\n    \t\t\tif (target && target.dom.tagName == 'A') {\n    \t\t\t\tif (target.hasCls('document-id')) {\n    \t\t\t\t\tvar docId = target.getAttribute('val', 'voyant');\n    \t\t\t\t\tvar doc = this.getCorpus().getDocuments().getById(docId);\n    \t\t\t\t\tthis.dispatchEvent('documentsClicked', this, [doc]);\n    \t\t\t\t} else if (target.hasCls('corpus-type')) {\n    \t\t\t\t\tthis.dispatchEvent('termsClicked', this, [target.getHtml()]);\n    \t\t\t\t} else if (target.hasCls('document-type')) {\n    \t\t\t\t\tthis.dispatchEvent('documentIndexTermsClicked', this, [{\n    \t\t\t\t\t\tterm: target.getHtml(),\n    \t\t\t\t\t\tdocIndex: target.getAttribute(\"docIndex\", 'voyant')\n    \t\t\t\t\t}]);\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}, this);\n    \t})\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.rendered) {\n    \t\t\tthis.loadSummary();\n    \t\t}\n    \t\telse {\n    \t\t\tthis.on(\"afterrender\", function() {\n    \t\t\t\tthis.loadSummary();\n    \t\t\t}, this)\n    \t\t}\n\n    \t});\n    \t\n    \t// if we have a corpus, load it\n    \tif (config && config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus);\n    \t}\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar available = this.getWidth()-200;\n    \t\tthis.query(\"sparklineline\").forEach(function(spark) {\n    \t\t\tif (spark.getWidth()>available) {\n    \t\t\t\tspark.setWidth(available);\n    \t\t\t}\n    \t\t})\n    \t}, this)\n    },\n    \n    loadSummary: function() {\n    \t\n    \tvar me = this;\n    \t\n    \tvar main = this.queryById('main');\n    \t\n    \tmain.removeAll();\n    \tmain.add({\n    \t\thtml: this.getCorpus().getString()\n    \t});\n    \t\n    \tvar docs = this.getCorpus().getDocuments().getRange();\n    \tvar limit = this.getApiParam('limit');\n    \t\n    \tif (docs.length>1) {\n    \t\t\n    \t\tdocs.sort(function(d1, d2) {return d2.getLexicalTokensCount()-d1.getLexicalTokensCount()});\n        \tvar docsLengthTpl = new Ext.XTemplate('<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"document-id\" voyant:val=\"{id}\" data-qtip=\"{title}\">{shortTitle}</a><span style=\"font-size: smaller\"> (<span class=\"info-tip\" data-qtip=\"{valTip}\">{val}</span>)</span></a></tpl>')\n\n        \t\n        \tvar sparkWidth;\n        \tif (docs.length<25) {sparkWidth=docs.length*4;}\n        \telse if (docs.length<50) {sparkWidth=docs.length*2;}\n        \telse if (docs.length>100) {\n        \t\tvar available  = main.getWidth()-200;\n        \t\tsparkWidth = available < docs.length ? docs.length : available;\n        \t}\n        \t\n        \tvar numberOfTerms = this.localize('numberOfTerms');\n        \tmain.add({\n\t    \t\tcls: 'section',\n        \t\titems: [{\n\t\t    \t\tlayout: 'hbox',\n\t\t    \t\talign: 'bottom',\n\t\t    \t\titems: [{\n\t\t    \t\t\thtml: this.localize('docsLength'),\n\t\t    \t\t\tcls: 'header'\n\t\t    \t\t}, {\n\t\t    \t\t\txtype: 'sparklineline',\n\t\t    \t\t\tvalues: this.getCorpus().getDocuments().getRange().map(function(doc) {return doc.getLexicalTokensCount()}),\n\t\t                tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n\t\t                \tgetDocumentTitle: function(docIndex, len) {\n\t\t                \t\treturn '('+len+') '+this.panel.getCorpus().getDocument(docIndex).getTitle()\n\t\t                \t},\n\t\t                \tpanel: me \n\t\t                }),\n\t\t    \t\t\theight: 16,\n\t\t    \t\t\twidth: sparkWidth\n\t\t    \t\t}]\n\t\t    \t},{\n\t    \t\t\thtml: '<ul><li>'+this.localize('longest')+\" \"+docsLengthTpl.apply(docs.slice(0, docs.length>limit ? limit : parseInt(docs.length/2)).map(function(doc) {return {\n\t\t\t\t\t\tid: doc.getId(),\n\t\t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t\t\t\t\t\ttitle: doc.getTitle(),\n\t\t\t\t\t\tval: doc.getLexicalTokensCount(),\n\t\t\t\t\t\tvalTip: numberOfTerms\n\t\t\t\t\t}}))+'</li>'+\n\t    \t\t\t\t'<li>'+this.localize('shortest')+\" \"+docsLengthTpl.apply(docs.slice(-(docs.length>limit ? limit : parseInt(docs.length/2))).reverse().map(function(doc) {return {\n\t    \t\t\t\t\tid: doc.getId(),\n\t    \t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t    \t\t\t\t\ttitle: doc.getTitle(),\n\t    \t\t\t\t\tval: doc.getLexicalTokensCount(),\n\t    \t\t\t\t\tvalTip: numberOfTerms\n\t    \t\t\t\t}}))+'</li>'\n\t        \t}]\n        \t})\n        \t\n    \t\tdocs.sort(function(d1, d2) {return d2.getLexicalTypeTokenRatio()-d1.getLexicalTypeTokenRatio()});\n        \tmain.add({\n        \t\tcls: 'section',\n        \t\titems: [{\n\t\t    \t\tlayout: 'hbox',\n\t\t    \t\talign: 'bottom',\n\t\t    \t\tcls: 'section',\n\t\t    \t\titems: [{\n\t\t    \t\t\thtml: this.localize(\"docsDensity\"),\n\t\t    \t\t\tcls: 'header'\n\t\t    \t\t}, {\n\t\t    \t\t\txtype: 'sparklineline',\n\t\t    \t\t\tvalues: this.getCorpus().getDocuments().getRange().map(function(doc) {return Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000')}),\n\t\t                tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n\t\t                \tgetDocumentTitle: function(docIndex, len) {\n\t\t                \t\treturn '('+len+') '+this.panel.getCorpus().getDocument(docIndex).getTitle()\n\t\t                \t},\n\t\t                \tpanel: me \n\t\t                }),\n\t\t    \t\t\theight: 16,\n\t\t    \t\t\twidth: sparkWidth\n\t\t    \t\t}]\n\t\t    \t},{\n\t    \t\t\thtml: '<ul><li>'+this.localize('highest')+docsLengthTpl.apply(docs.slice(0, docs.length>limit ? limit : parseInt(docs.length/2)).map(function(doc) {return {\n\t\t\t\t\t\tid: doc.getId(),\n\t\t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t\t\t\t\t\ttitle: doc.getTitle(),\n\t\t\t\t\t\tval: Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000'),\n\t\t\t\t\t\tvalTip: numberOfTerms\n\t\t\t\t\t}}))+'</li>'+\n\t    \t\t\t\t'<li>'+this.localize('lowest')+docsLengthTpl.apply(docs.slice(-(docs.length>limit ? limit : parseInt(docs.length/2))).reverse().map(function(doc) {return {\n\t    \t\t\t\t\tid: doc.getId(),\n\t    \t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t    \t\t\t\t\ttitle: doc.getTitle(),\n\t    \t\t\t\t\tval: Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000'),\n\t    \t\t\t\t\tvalTip: numberOfTerms\n\t    \t\t\t\t}}))+'</li>'\n\t        \t}]\n        \t})\n \n        \t// words per sentence\n    \t\tdocs.sort(function(d1, d2) {return d2.getAverageWordsPerSentence()-d1.getAverageWordsPerSentence()});\n        \tmain.add({\n        \t\tcls: 'section',\n        \t\titems: [{\n\t\t    \t\tlayout: 'hbox',\n\t\t    \t\talign: 'bottom',\n\t\t    \t\tcls: 'section',\n\t\t    \t\titems: [{\n\t\t    \t\t\thtml: this.localize(\"averageWordsPerSentence\"),\n\t\t    \t\t\tcls: 'header'\n\t\t    \t\t}, {\n\t\t    \t\t\txtype: 'sparklineline',\n\t\t    \t\t\tvalues: this.getCorpus().getDocuments().getRange().map(function(doc) {return Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0')}),\n\t\t                tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n\t\t                \tgetDocumentTitle: function(docIndex, len) {\n\t\t                \t\treturn '('+len+') '+this.panel.getCorpus().getDocument(docIndex).getTitle()\n\t\t                \t},\n\t\t                \tpanel: me \n\t\t                }),\n\t\t    \t\t\theight: 16,\n\t\t    \t\t\twidth: sparkWidth\n\t\t    \t\t}]\n\t\t    \t},{\n\t    \t\t\thtml: '<ul><li>'+this.localize('highest')+docsLengthTpl.apply(docs.slice(0, docs.length>limit ? limit : parseInt(docs.length/2)).map(function(doc) {return {\n\t\t\t\t\t\tid: doc.getId(),\n\t\t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t\t\t\t\t\ttitle: doc.getTitle(),\n\t\t\t\t\t\tval: Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0'),\n\t\t\t\t\t\tvalTip: numberOfTerms\n\t\t\t\t\t}}))+'</li>'+\n\t    \t\t\t\t'<li>'+this.localize('lowest')+docsLengthTpl.apply(docs.slice(-(docs.length>limit ? limit : parseInt(docs.length/2))).reverse().map(function(doc) {return {\n\t    \t\t\t\t\tid: doc.getId(),\n\t    \t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t    \t\t\t\t\ttitle: doc.getTitle(),\n\t    \t\t\t\t\tval: Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0'),\n\t    \t\t\t\t\tvalTip: numberOfTerms\n\t    \t\t\t\t}}))+'</li>'\n\t        \t}]\n        \t})        \t\n    \t} else { // single document, we can still show word density and average words per sentence\n    \t\tvar doc = docs[0];\n    \t\tif (doc) {\n            \tmain.add({\n            \t\tcls: 'section',\n            \t\thtml:\"<b>\"+this.localize(\"docsDensity\")+\"</b> \"+Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000')\n            \t});    \t\t\n            \tmain.add({\n            \t\tcls: 'section',\n            \t\thtml: \"<b>\"+this.localize(\"averageWordsPerSentence\")+\"</b> \"+Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0')\n            \t});    \t\t\n    \t\t}\n    \t}\n    \t\n    \tmain.add({\n    \t\thtml: this.localize(\"mostFrequentWords\"),\n    \t\tcls: 'section',\n    \t\tlisteners: {\n    \t\t\tafterrender: function(container) {\n    \t\t\t\tcontainer.mask(me.localize(\"loading\"));\n    \t\t\t\tme.getCorpus().getCorpusTerms().load({\n    \t\t\t\t\tparams: {\n    \t\t\t\t\t\tlimit: me.getApiParam('limit'),\n    \t\t\t\t\t\tstopList: me.getApiParam('stopList'),\n    \t\t\t\t\t\tforTool: 'summary'\n    \t\t\t\t\t},\n    \t\t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\t\tif (success && records && records.length>0) {\n    \t\t\t\t\t\t\tcontainer.unmask();\n    \t\t\t\t\t\t\tExt.dom.Helper.append(container.getTargetEl().first().first(),\n\t\t\t   \t        \t\t\t new Ext.XTemplate('<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{id}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>')\n\t\t\t   \t        \t\t \t\t.apply(records.map(function(term) {\n\t\t\t   \t        \t\t \t\t\treturn {\n\t\t\t\t   \t        \t\t \t\t\tid: term.getId(),\n\t\t\t\t   \t        \t\t \t\t\tterm: term.getTerm(),\n\t\t\t\t   \t        \t\t \t\t\tval: term.getRawFreq()\n\t\t\t   \t        \t\t \t\t\t}\n\t\t   \t        \t\t \t\t}))\n\t\t   \t        \t\t \t)\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t})\n    \t\t\t}\n    \t\t},\n    \t\tscope: this\n    \t})\n    \t\n    \tif (docs.length>1) {\n        \tmain.add({\n        \t\thtml: this.localize(\"distinctiveWords\")+\"<ol></ol>\",\n        \t\tcls: 'section',\n        \t\titemId: 'distinctiveWords',\n        \t\tlisteners: {\n        \t\t\tafterrender: function(container) {\n        \t\t\t\tme.showMoreDistinctiveWords();\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t}\n    \t\n    },\n     \n    showMoreDistinctiveWords: function() {\n    \tvar distinctiveWordsContainer = this.queryById('distinctiveWords');\n    \tvar list = distinctiveWordsContainer.getTargetEl().selectNode(\"ol\");\n    \tvar count = Ext.dom.Query.select(\"li:not(.more)\", list).length;\n    \tvar numberOfDocumentsForDistinctiveWords = parseInt(this.getApiParam('numberOfDocumentsForDistinctiveWords'));\n    \tvar range = this.getCorpus().getDocuments().getRange(count, count+numberOfDocumentsForDistinctiveWords-1);\n    \tif (range && Ext.isArray(range)) {\n    \t\tvar docIndex = [];\n    \t\trange.forEach(function(doc) {\n    \t\t\tdocIndex.push(doc.getIndex())\n    \t\t})\n    \t\tif (docIndex.length>0) {\n    \t\t\tthis.getCorpus().getDocumentTerms().load({\n    \t\t\t\taddRecords: true,\n    \t\t\t\tparams: {\n    \t\t\t\t\tdocIndex: docIndex,\n    \t\t\t\t\tperDocLimit: parseInt(this.getApiParam(\"limit\")),\n    \t\t\t\t\tlimit: numberOfDocumentsForDistinctiveWords*parseInt(this.getApiParam(\"limit\")),\n\t\t\t\t\t\tstopList: this.getApiParam('stopList'),\n    \t\t\t\t\tsort: 'TFIDF',\n    \t\t\t\t\tdir: 'DESC',\n    \t\t\t\t\tforTool: 'summary'\n    \t\t\t\t},\n    \t\t\t\tscope: this,\n    \t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\tvar docs = {};\n    \t\t\t\t\tif (success && records && Ext.isArray(records)) { // TODO: why wouldn't we have records here?\n    \t\t\t\t\t\trecords.forEach(function(r, index, array) {\n    \t\t\t\t\t\t\tvar i = r.getDocIndex();\n    \t\t\t\t\t\t\tif (!(i in docs)) {docs[i]=[]};\n    \t\t\t\t\t\t\tdocs[i].push({\n    \t\t\t\t\t\t\t\tid: r.getId(),\n    \t\t\t\t\t\t\t\tdocIndex: r.getDocIndex(),\n    \t\t\t\t\t\t\t\ttype: r.getTerm(),\n    \t\t\t\t\t\t\t\tval: Ext.util.Format.number(r.get('rawFreq'),'0,000'),\n    \t\t\t\t\t\t\t\tdocId: r.get('docId')\n    \t\t\t\t\t\t\t});\n\n    \t\t\t\t\t\t});\n    \t\t\t\t\t\tvar len;\n    \t\t\t\t\t\tdocIndex.forEach(function(index) {\n    \t\t\t\t\t\t\tif (docs[index]) {\n        \t\t\t\t\t\t\tvar doc = this.getCorpus().getDocument(index);\n        \t\t\t\t\t\t\tlen = docs[index].length; // declare for template\n        \t\t    \t\t\t\tExt.dom.Helper.append(list, {tag: 'li', 'voyant:index': String(index), html: \n        \t\t    \t\t\t\t\t'<a href=\"#\" onclick=\"return false\" class=\"document-id document-id-distinctive\" voyant:val=\"'+doc.get('id')+'\">'+doc.getShortTitle()+'</a>'+\n        \t\t    \t\t\t\t\tthis.localize('colon')+ \" \"+new Ext.XTemplate(this.localize('documentType')).apply({types: docs[index]})+'.'\n        \t\t    \t\t\t\t});\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}, this);\n    \t\t\t\t\t\tdistinctiveWordsContainer.updateLayout()\n    \t\t\t\t\t\tlen = numberOfDocumentsForDistinctiveWords;\n    \t\t\t\t\t\tremaining = this.getCorpus().getDocuments().getTotalCount() - count - docIndex.length;\n    \t\t\t\t\t\tif (remaining>0) {\n        \t    \t\t\t\tvar tpl = new Ext.Template(this.localize('moreDistinctiveWords'));\n        \t\t\t\t\t\tvar more = Ext.dom.Helper.append(list, {tag: 'li', cls: 'more', html: tpl.apply([len>remaining ? remaining : len,remaining])}, true);\n        \t\t\t\t\t\tmore.on(\"click\", function() {\n        \t\t\t\t\t\t\tmore.remove();\n        \t\t\t\t\t\t\tthis.showMoreDistinctiveWords();\n        \t\t\t\t\t\t}, this)\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t});\n    \t\t}\n    \t}\n    }    \n});\n","Ext.define('Voyant.panel.TextualArc', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.textualarc',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @property stopList The stop list to use to filter results.\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\n    \t\t * @type String\n    \t\t * @private\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tdocIndex: 0,\n    \t\t\n    \t\tspeed: 50,\n    \t\t\n    \t\tminRawFreq: 2\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{\n    \t\txtype: 'container',\n    \t\titems: {\n    \t\t\txtype: 'numberfield',\n\t    \t\tname: 'minRawFreq',\n\t    \t\tminValue: 1,\n\t    \t\tmaxValue: 10,\n\t    \t\tvalue: 2,\n\t    \t\tlabelWidth: 150,\n\t    \t\tlabelAlign: 'right',\n\t    \t\tinitComponent: function() {\n\t    \t\t\tvar panel = this.up('window').panel;\n\t    \t\t\tthis.fieldLabel = panel.localize(this.fieldLabel);\n\t    \t\t\tthis.on(\"afterrender\", function(cmp) {\n\t\t\t        \tExt.tip.QuickTipManager.register({\n\t\t\t                 target: cmp.getEl(),\n\t\t\t                 text: panel.localize('minRawFreqTip')\n\t\t\t             });\n\t    \t\t\t});\n\t    \t\t\tthis.on('beforedestroy', function(cmp) {\n                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n                \t});\n\t    \t\t\tthis.callParent(arguments);\n\t    \t\t},\n\t    \t\tfieldLabel: 'minRawFreq'\n    \t\t}\n    \t}],\n    \tperim: [],\n    \tdiam: undefined\n\t},\n\t\n\ttokensFetch: 500,\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tthis.config.options[1].fieldLabel = this.localize(this.config.options[1].fieldLabel);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<canvas width=\"800\" height=\"600\"></canvas>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'combo',\n                \titemId: 'search',\n                \tqueryMode: 'local',\n                \tdisplayField: 'term',\n                \tvalueField: 'term',\n                \twidth: 90,\n                \temptyText: this.localize('search'),\n                \tforceSelection: true,\n                \tdisabled: true\n                },{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 0,\n\t\t\t\t\tmaxValue: 100,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n                    \t\tthis.isReading = val!==0\n                    \t\tthis.draw();\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t},{xtype: 'tbfill'}, {\n\t    \t\t\txtype: 'tbtext',\n\t    \t\t\thtml: this.localize('adaptation')\n\t    \t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('boxready', function(cmp) {\n\t\t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\");\n\t    \tthis.draw(canvas);\n\n    \t\tcanvas.addEventListener('mousemove', function(evt) {\n    \t\t\tif (cmp.documentTerms) {\n        \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top;\n        \t\t\t\n        \t\t\tvar currentTerms = {};\n        \t\t\tcmp.documentTerms.each(function(documentTerm) {\n        \t\t\t\tvar dx = documentTerm.get('x'), dy = documentTerm.get('y');\n        \t\t\t\tif (dx>x-15 && dx<x+15 && dy>y-15 && dy<y+15) {\n        \t\t\t\t\tcurrentTerms[documentTerm.getTerm()] = true;\n        \t\t\t\t\treturn false;\n        \t\t\t\t}\n        \t\t\t})\n        \t\t\t\n        \t\t\t// no need to do anything if there are no current terms and none found\n        \t\t\tif (Object.keys(cmp.currentTerms || {}).length==0 && Object.keys(currentTerms).length==0) {return;}\n\n        \t\t\tcmp.currentTerms = currentTerms;\n        \t\t\tcmp.draw(canvas); // otherwise redraw\n    \t\t\t}\n    \t\t\t\n    \t      }, false);\n    \t})\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n\t\t\tthis.loadDocument();\n    \t}, this);\n    \t\n    \tthis.on(\"documentselected\", function(src, doc) {\n    \t\tthis.setApiParam('docIndex', this.getCorpus().getDocument(doc).getIndex());\n    \t\tthis.loadDocument();\n    \t});\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar gutter = 20,\n\t\t\tavailableWidth = this.getTargetEl().getWidth() - gutter - gutter,\n\t\t\tavailableHeight = this.getTargetEl().getHeight() - gutter - gutter,\n\t\t\tdiam = Math.max(availableWidth, availableHeight), rad = diam /2,\n\t\t\tratio = Math.min(availableWidth, availableHeight) / diam,\n\t\t\tcanvas = this.getTargetEl().dom.querySelector(\"canvas\");\n    \t\t\n\t\t\tcanvas.width = this.getTargetEl().getWidth();\n\t\t\tcanvas.height = this.getTargetEl().getHeight();\n\t\t\tthis.setDiam(diam);\n\t\t\tthis.setPerim([]);\n\t\t\tvar i = parseInt(diam*.75)\n\t\t\twhile (this.getPerim().length<diam) {\n\t    \t\tthis.getPerim().push({\n\t    \t\t\tx:  gutter+(availableWidth/2)+(rad * (availableWidth>availableHeight ? 1 : ratio) * Math.cos(2 * Math.PI * i / diam)),\n\t    \t\t\ty:  gutter+(availableHeight/2)+(rad * (availableHeight>availableWidth ? 1 : ratio) * Math.sin(2 * Math.PI * i / diam))\n\t    \t\t})\n\t    \t\tif (i++==diam) {i=0;}\n\t\t\t}\n\t\t\t\n\t\t\t// TODO clear previous/current drawing\n    \t})\n    },\n    \n    draw: function(canvas, ctx) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n\t\tctx.fillStyle = \"rgba(0,0,0,.1)\";\n    \tthis.getPerim().forEach(function(p,i) {\n    \t\tif (i%3==0) {\n        \t\tctx.fillRect(p.x-5,p.y,10,1)\n    \t\t}\n    \t})\n    \tif (this.documentTerms) {\n        \tthis.drawTerms(canvas, ctx);\n        \tthis.drawReading(canvas,ctx);\n        \tif (this.isReading) {\n        \t\tvar me = this;\n        \t\tsetTimeout(function() {\n        \t\t\tme.draw();\n        \t\t}, 10)\n        \t}\n    \t}\n    },\n    \n    drawReading: function(canvas, ctx) {\n    \tctx = ctx || this.getTargetEl().dom.querySelector(\"canvas\").getContext(\"2d\");\n    \tvar delay = 2000-(parseInt(this.getApiParam('speed'))*1999/100);\n    \tif (this.isReading && this.documentTerms) {\n    \t\tvar current = parseInt(this.readingIndex * this.getPerim().length / this.lastToken);\n    \t\tctx.fillStyle = \"purple\";\n    \t\tctx.fillRect(this.getPerim()[current].x,this.getPerim()[current].y, 5, 5)\n\t\t\tvar first = this.readingStartTime == undefined;\n\t\t\tthis.readingStartTime = this.readingStartTime || new Date().getTime();\n\t\t\tvar delta = this.readingStartTime+delay-new Date().getTime();\n    \t\tif (this.sourceTerm && this.targetTerm) {\n    \t\t\tvar maxTail = 10;\n    \t\t\tif (first || delta<=0) {\n    \t\t\t\tthis.previousBeziers = this.previousBeziers || []; // this should be reset by tokens reader during first read\n        \t\t\tvar sx = this.sourceTerm.get('x'), sy = this.sourceTerm.get('y'), tx = this.targetTerm.get('x'), ty = this.targetTerm.get('y'),\n    \t\t\t\t\tpx = this.previousTerm ? this.previousTerm.get('x') : sx, py = this.previousTerm ? this.previousTerm.get('y') : sy,\n    \t\t\t\t\tround = 100, multiplier = .3;\n    \t\t\t\t\n        \t\t\tvar ix, iy, xd = Math.max(round, Math.abs(sx-tx) * .5), yd = Math.max(round, Math.abs(sy-ty) * .5);\n        \t\t\tix = sx > tx ? sx - xd : sx + xd;\n        \t\t\tiy = ty > sy ? sy + yd : sy - yd;\n    \t\t\t\tthis.previousBeziers.unshift([sx,sy,ix,iy,tx,ty]);\n    \t\t\t\tif (this.previousBeziers.length>maxTail) {this.previousBeziers.pop()}\n    \t\t\t}\n    \t\t\t\n    \t\t\tfor (var i=0; i<this.previousBeziers.length; i++) {\n\t        \t\tctx.strokeStyle=\"rgba(0,0,255,\"+(1-(i*.1))+\")\";\n    \t\t\t\tvar start = i+1 == this.previousBeziers.length ? 1-(delta/delay) : 0;\n    \t\t\t\tvar end = i==0 ? 1-(delta/delay) : 1;\n            \t\tthis.drawBezierSplit.apply(this, Ext.Array.merge([ctx], this.previousBeziers[i], [start], [end]));\n    \t\t\t}\n    \t\t\tif (delta<=0) {\n        \t\t\tthis.readingStartTime = undefined;\n        \t\t\tthis.read();\n    \t\t\t}\n    \t\t}\n    \t\tvar nextReadingIndex = this.readingIndex+1;\n    \t\tfor (var len=this.tokens.getCount(); nextReadingIndex<len; nextReadingIndex++) {\n    \t\t\tif (this.tokens.getAt(nextReadingIndex).getTerm().toLowerCase()==this.targetTerm.getTerm()) {\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t\tvar startReadingIndex = nextReadingIndex-parseInt(delta*(nextReadingIndex-this.readingIndex)/delay), count = this.tokens.getCount();\n    \t\tfor (; startReadingIndex<nextReadingIndex; startReadingIndex++) {\n    \t\t\tif (startReadingIndex < count && this.tokens.getAt(startReadingIndex).isWord()) {\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t\tvar tokens = this.tokens.getRange(startReadingIndex, len=Math.min(this.readingIndex+50, this.tokens.getCount())).map(function(token) {\n    \t\t\treturn token.getTerm();\n    \t\t})\n\t    \tctx.font = \"14px sans-serif\";\n    \t\tctx.fillStyle = \"rgba(0,0,0,.5)\";\n        \tctx.textAlign = \"left\";\n    \t\tctx.fillText(tokens.join(\"\"), canvas.width/4, canvas.height-5);\n    \t\tctx.clearRect(canvas.width*.75, canvas.height-20, canvas.width, 30)\n    \t} else if (this.documentTerms && this.documentTerms.getCount()<this.documentTerms.getTotalCount()) {\n    \t\tvar x = canvas.width / 4;\n    \t\tctx.strokeStyle=\"rgba(0,0,0,.5)\";\n    \t\tctx.fillStyle = \"rgba(0,0,0,.2)\";\n    \t\tctx.strokeRect(x,canvas.height-12,x*2,10);\n    \t\tctx.fillRect(x,canvas.height-12,(this.documentTerms.getCount()*x*2)/this.documentTerms.getTotalCount(),10);\n    \t}\n    },\n    \n    drawTerms: function(canvas, ctx) {\n    \tcanvas = canvas || this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.textAlign = \"center\";\n    \tif (this.documentTerms && this.getPerim().length > 0) {\n    \t\tthis.documentTerms.each(function(documentTerm) {\n    \t\t\tvar me = this, freq = documentTerm.getRawFreq(), term = documentTerm.getTerm(),\n    \t\t\t\tx = documentTerm.get('x'), y = documentTerm.get('y');\n    \t\t\tisCurrentTerm = me.currentTerms && (term in me.currentTerms);\n    \t\t\tisReadingTerm = this.sourceTerm && this.sourceTerm.getTerm() == term;\n    \t    \tctx.font = ((Math.log(freq)*(canvas.width*10/800)/Math.log(this.maxRawFreq))+(isCurrentTerm || isReadingTerm ? 10 : 5)) + \"px sans-serif\";\n    \t    \tif (isCurrentTerm) {\n    \t    \t\tctx.fillStyle = \"red\";\n    \t    \t} else if (isReadingTerm) {\n    \t    \t\tctx.fillStyle = \"blue\";\n    \t    \t} else {\n    \t    \t\tctx.fillStyle = \"rgba(0,0,0,\"+((freq*.9/this.maxRawFreq)+.1)+\")\";\n    \t    \t}\n    \t    \tif (isCurrentTerm || isReadingTerm) {\n    \t    \t\tctx.strokeStyle = isCurrentTerm ? \"rgba(255,0,0,.2)\" : \"rgba(0,255,0,.4)\";\n    \t    \t\tdocumentTerm.getDistributions().forEach(function(d, i) {\n    \t    \t\t\tif (d>0 && this.getPerim()[i]) {\n    \t    \t\t\t\tctx.beginPath();\n    \t    \t\t\t\tctx.moveTo(x, y);\n    \t    \t\t\t\tctx.lineTo(this.getPerim()[i].x,this.getPerim()[i].y);\n    \t    \t\t\t\tctx.stroke();\n    \t    \t\t\t}\n    \t    \t\t}, this)\n    \t    \t}\n    \t\t\tctx.fillText(term, x, y);\n    \t\t\t\n    \t\t}, this)    \t\t\n    \t}\n    },\n    \n    read: function(index) {\n    \tif (Ext.isNumber(index)) {this.readingIndex=index;}\n    \telse {this.readingIndex++;}\n    \tif (this.sourceTerm) {this.previousTerm=this.sourceTerm;}\n    \tfor (var i=this.readingIndex, len = this.tokens.getCount(); i<len; i++) {\n    \t\tvar token = this.tokens.getAt(i), term = token.getTerm().toLowerCase();\n    \t\tif (term in this.termsMap) {\n    \t\t\tthis.sourceTerm = this.termsMap[term];\n    \t\t\tif (this.sourceTerm.getRawFreq()>=1) {\n        \t\t\tthis.readingIndex = i;\n        \t\t\tbreak\n    \t\t\t}\n    \t\t}\n    \t}\n    \tfor (var i=this.readingIndex+1, len = this.tokens.getCount(); i<len; i++) {\n    \t\tvar token = this.tokens.getAt(i), term = token.getTerm().toLowerCase();\n    \t\tif (term in this.termsMap) {\n    \t\t\tthis.targetTerm = this.termsMap[term];\n    \t\t\tif (this.targetTerm.getRawFreq()>=1) {\n        \t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t}\n    \tif (!this.tokensLoading && this.tokens.getCount()-this.readingIndex<this.tokensFetch) {\n    \t\tthis.fetchMoreTokens();\n    \t}\n    \tthis.draw();\n    },\n    \n    \n    loadDocument: function() {\n    \tif (this.documentTerms) {this.documentTerms.destroy();this.documentTerms=undefined;}\n    \tthis.termsMap = {};\n    \tthis.draw();\n    \tvar doc =  this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex')));\n    \t// if we're not in a tab panel, set the document title as part of the header\n    \tif (!this.up(\"tabpanel\")) {\n        \tthis.setTitle(this.localize('title') + \" <span class='subtitle'>\"+doc.getFullLabel()+\"</span>\");\n    \t}\n    \tthis.lastToken = parseInt(doc.get('lastTokenStartOffset-lexical'));\n    \tthis.documentTerms = doc.getDocumentTerms({\n    \t\tproxy: {\n    \t\t\textraParams: {\n    \t\t\t\tstopList: this.getApiParam('stopList'),\n    \t\t\t\tbins: this.getDiam(),\n    \t\t\t\twithDistributions: 'raw',\n    \t\t\t\tminRawFreq: parseInt(this.getApiParam('minRawFreq'))\n    \t\t\t}\n    \t\t}\n    \t});\n    \tvar search = this.queryById('search');\n    \tsearch.setDisabled(true);\n    \tsearch.setStore(this.documentTerms);\n    \tthis.fetchMoreDocumentTerms();\n    },\n    \n    fetchMoreDocumentTerms: function() {\n    \tif (!this.documentTerms) {this.loadDocument(); return;}\n    \tthis.documentTerms.load({\n    \t\tparams: {\n    \t\t\tstart: this.documentTerms.getCount(),\n    \t\t\tlimit: this.documentTerms.getCount() == 0 ? 10 : 250\n    \t\t},\n    \t\tcallback: function(records) {\n    \t\t\tif (records.length>0) {\n            \t\tthis.maxRawFreq = this.documentTerms.max('rawFreq');\n            \t\trecords.forEach(function(documentTerm) {\n            \t\t\tvar x = y = 0;\n            \t\t\tdocumentTerm.get('distributions').forEach(function(d, i) {\n            \t\t\t\tx += (this.getPerim()[i].x*d);\n            \t\t\t\ty += (this.getPerim()[i].y*d);\n            \t\t\t}, this)\n            \t\t\tdocumentTerm.set('x', x/documentTerm.getRawFreq());\n            \t\t\tdocumentTerm.set('y', y/documentTerm.getRawFreq());\n            \t\t}, this);\n    \t\t\t\tExt.Function.defer(this.fetchMoreDocumentTerms, 0, this);\n    \t\t\t\tthis.draw();\n    \t\t\t} else {\n    \t\t\t\tthis.queryById('search').setDisabled(false);\n    \t\t\t\tthis.termsMap = {};\n    \t\t\t\tthis.documentTerms.each(function(documentTerm) {\n    \t\t\t\t\tthis.termsMap[documentTerm.getTerm()] = documentTerm;\n    \t\t\t\t}, this)\n    \t\t\t\tif (this.tokens) {this.tokens.removeAll(true)}\n    \t\t\t\tthis.fetchMoreTokens();\n    \t\t\t}\n    \t\t},\n    \t\taddRecords: true,\n    \t\tscope: this\n    \t})\n    },\n    \n    fetchMoreTokens: function() {\n\t\tif (!this.tokens) {\n\t\t\tthis.tokens = this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex'))).getTokens({\n\t\t\t\tproxy: {\n\t\t\t\t\textraParams: {\n\t    \t\t\t\tstripTags: 'all'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.noMoreTokens = false;\n\t\t} else if (this.noMoreTokens) {return;}\n\t\t\n\t\tvar first = this.tokens.getCount() == 0;\n\t\tthis.tokensLoading = true;\n\t\tvar speed = parseInt(this.getApiParam('speed'));\n    \tthis.tokens.load({\n    \t\tparams: {\n    \t\t\tstart: this.tokens.getCount(),\n    \t\t\tlimit: speed==50 && first ? 200 : Math.pow(110-speed, 2)\n    \t\t},\n    \t\tcallback: function(records) {\n    \t\t\tthis.tokensLoading = false;\n    \t\t\tif (records.length>0) {\n    \t\t\t\trecords.forEach(function(token) {\n    \t\t\t\t\tif (token.getTokenType()=='other') {\n    \t\t\t\t\t\ttoken.set('term', token.getTerm().replace(/\\s+/g, \" \"))\n    \t\t\t\t\t}\n    \t\t\t\t})\n        \t\t\tif (first) {\n        \t\t\t\tthis.previousBeziers = [];\n        \t\t\t\t// TODO\n//        \t\t\t\tif (this.getApiParam('speed') > 0) {\n\t        \t\t\t\tthis.isReading = true;\n\t        \t\t\t\tthis.read(0);\n//        \t\t\t\t}\n        \t\t\t}\n    \t\t\t} else {\n    \t\t\t\tthis.noMoreTokens = true;\n    \t\t\t}\n    \t\t},\n    \t\taddRecords: true,\n    \t\tscope: this\n\n    \t});\n    },\n    \n    /* The functions below adapted from http://www.pjgalbraith.com/drawing-animated-curves-javascript/ */\n    \n    /**\n     * Animates bezier-curve\n     * \n     * @param ctx       The canvas context to draw to\n     * @param x0        The x-coord of the start point\n     * @param y0        The y-coord of the start point\n     * @param x1        The x-coord of the control point\n     * @param y1        The y-coord of the control point\n     * @param x2        The x-coord of the end point\n     * @param y2        The y-coord of the end point\n     * @param duration  The duration in milliseconds\n     * @private\n     */\n    animatePathDrawing: function(ctx, x0, y0, x1, y1, x2, y2, duration) {\n        var start = null;\n        \n        var step = function animatePathDrawingStep(timestamp) {\n            if (start === null)\n                start = timestamp;\n            \n            var delta = timestamp - start,\n                progress = Math.min(delta / duration, 1);\n            \n            // Clear canvas\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            \n            // Draw curve\n            drawBezierSplit(ctx, x0, y0, x1, y1, x2, y2, 0, progress);\n            \n            if (progress < 1) {\n                window.requestAnimationFrame(step);\n            }\n        };\n        \n        window.requestAnimationFrame(step);\n    },\n    \n    /**\n     * Draws a splitted bezier-curve\n     * \n     * @param ctx       The canvas context to draw to\n     * @param x0        The x-coord of the start point\n     * @param y0        The y-coord of the start point\n     * @param x1        The x-coord of the control point\n     * @param y1        The y-coord of the control point\n     * @param x2        The x-coord of the end point\n     * @param y2        The y-coord of the end point\n     * @param t0        The start ratio of the splitted bezier from 0.0 to 1.0\n     * @param t1        The start ratio of the splitted bezier from 0.0 to 1.0\n     * @private\n     */\n    drawBezierSplit: function(ctx, x0, y0, x1, y1, x2, y2, t0, t1) {\n        ctx.beginPath();\n        \n        if( 0.0 == t0 && t1 == 1.0 ) {\n            ctx.moveTo( x0, y0 );\n            ctx.quadraticCurveTo( x1, y1, x2, y2 );\n        } else if( t0 != t1 ) {\n            var t00 = t0 * t0,\n                t01 = 1.0 - t0,\n                t02 = t01 * t01,\n                t03 = 2.0 * t0 * t01;\n            \n            var nx0 = t02 * x0 + t03 * x1 + t00 * x2,\n                ny0 = t02 * y0 + t03 * y1 + t00 * y2;\n            \n            t00 = t1 * t1;\n            t01 = 1.0 - t1;\n            t02 = t01 * t01;\n            t03 = 2.0 * t1 * t01;\n            \n            var nx2 = t02 * x0 + t03 * x1 + t00 * x2,\n                ny2 = t02 * y0 + t03 * y1 + t00 * y2;\n            \n            var nx1 = this.lerp ( this.lerp ( x0 , x1 , t0 ) , this.lerp ( x1 , x2 , t0 ) , t1 ),\n                ny1 = this.lerp ( this.lerp ( y0 , y1 , t0 ) , this.lerp ( y1 , y2 , t0 ) , t1 );\n            \n            ctx.moveTo( nx0, ny0 );\n            ctx.quadraticCurveTo( nx1, ny1, nx2, ny2 );\n        }\n        \n        ctx.stroke();\n        ctx.closePath();\n    },\n    \n    /**\n     * Linearly interpolate between two numbers v0, v1 by t\n     * @private\n     */\n    lerp: function(v0, v1, t) {\n        return ( 1.0 - t ) * v0 + t * v1;\n    }\n    \n    \n    \n});","\n// for mysterious reasons, Ext.require loads the scripts but produces a blank page, so use loadScript instead\n/*\nvar twicPath = Ext.Loader.getPath(\"resources\")+\"/twic/current\"\nExt.Loader.loadScript(twicPath+\"/css/twic.css\")\nExt.Loader.loadScript(twicPath+\"/lib/queue.min.js\")\nExt.Loader.loadScript(twicPath+\"/lib/textFlow.js\")\nExt.Loader.loadScript(twicPath+\"/lib/svg_helper_functions.js\")\nExt.Loader.loadScript(twicPath+\"/lib/class_syntax.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_level.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_panel.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_datashape.js\")\n*/\n\n\nExt.define('Voyant.panel.TopicContexts', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.topiccontexts',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    constructor: function(config) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tcls: 'twic_body'\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\n    },\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\t\t\n    \t\tthis.loadFromCorpus(corpus);\n    \t}\n    \t\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar url = Ext.Loader.getPath(\"resources\")+\"/twic/current/data/input/json\"\n        var twicLevel = TWiC.Level.prototype.Instance();\n        twicLevel.LoadJSON(url+\"/twic_corpusinfo.json\", url+\"/twic_corpusmap.json\");\n        var panel = this;\n\n        // Once JSON has loaded, create and start the level\n        twicLevel.m_queue.await(function(){\n\n            // Create components\n            var graphViews = [];\n            var infoViews = [];\n            var divName = \"dickinson\"; // NOTE: This needs to be added to twic_corpusinfo.json from serverside\n\n            // Topic bar setup\n            var topicBar = new TWiC.TopicBar({x:0, y:635}, // Position\n                                             {width:1280, height:165}, // Size\n                                             divName, // Name\n                                             twicLevel, []); // Level and linked view(s)\n            infoViews.push(topicBar);\n\n            // Document info bar setup\n            var docBar = new TWiC.DocumentBar({\"x\":1055, \"y\":0}, // Position\n                                              {\"width\":225, \"height\":635}, // Size\n                                              divName,  // Name\n                                              twicLevel, []); // Level and linked view(s)\n            infoViews.push(docBar);\n\n            // Graph setup\n            var corpusClusterView = new TWiC.CorpusClusterView({ \"x\":0, \"y\":0 }, // Position\n                                                               { \"width\":1055, \"height\":635}, // Size\n                                                               divName, // Name\n                                                               twicLevel, [topicBar, docBar]); // Level and linked view(s)\n            graphViews.push(corpusClusterView);\n\n            // Link the corpus cluster view to the topic bar as well\n            topicBar.m_linkedViews.push(corpusClusterView);\n\n            var body = panel.getLayout().getRenderTarget();\n\n            // Initialize the level\n            twicLevel.Initialize([0,0], // Position\n                                 {width: body.getWidth(), height: body.getHeight()}, // Size\n                                 divName, // Name\n                                 graphViews, infoViews, // TWiC graph and information panels\n                                 '#'+body.getId()\n            );\n\n            // Startup the level\n            twicLevel.Start();\n        }.bind(twicLevel));\n\n    }\n    \n})","Ext.define('Voyant.panel.TermsBerry', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.termsberry',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\tstopList: 'auto',\r\n    \t\tcontext: 2,\r\n        \tnumInitialTerms: 75,\r\n    \t\tquery: undefined,\r\n    \t\tdocIndex: undefined,\r\n    \t\tdocId: undefined,\r\n    \t\tcategories: undefined\r\n    \t},\r\n\t\tglyph: 'xf1db@FontAwesome'\r\n    },\r\n    config: {\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\r\n    \t\r\n    \tmode: undefined,\r\n    \t\r\n    \tscalingFactor: 3,\r\n    \t\r\n    \tminRawFreq: undefined,\r\n    \tmaxRawFreq: undefined,\r\n    \tmaxCollocateValue: undefined,\r\n    \tminFillValue: undefined,\r\n    \tmaxFillValue: undefined,\r\n    \t\r\n    \tcurrentData: {},\r\n    \tblacklist: {},\r\n    \t\r\n    \tvisLayout: undefined,\r\n    \tvis: undefined,\r\n    \tvisInfo: undefined,\r\n    \tvisId: undefined,\r\n    \t\r\n    \tcurrentNode: undefined,\r\n    \t\r\n    \ttip: undefined,\r\n    \tcontextMenu: undefined\r\n\t},\r\n    \r\n\tMODE_TOP: 'top',\r\n    MODE_DISTINCT: 'distinct',\r\n    \r\n    MIN_TERMS: 5,\r\n    MAX_TERMS: 500,\r\n    \r\n    COLLOCATES_LIMIT: 1000000, // a very large number so we get all of them\r\n    \r\n    MIN_SCALING: 1,\r\n    MAX_SCALING: 5,\r\n    \r\n    MIN_STROKE_OPACITY: 0.1,\r\n\tMAX_STROKE_OPACITY: 0.3,\r\n\t\r\n    layout: 'fit',\r\n    \r\n    constructor: function(config) {\r\n    \tthis.setMode(this.MODE_TOP);\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.setVisId(Ext.id(null, 'termspack_'));\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                   xtype: 'querysearchfield',\r\n                   clearOnQuery: true\r\n                },{\r\n                \txtype: 'button',\r\n                \ttext: this.localize('strategy'),\r\n                \tmenu: {\r\n\t                \titems: [{\r\n\t                \t\txtype: 'menucheckitem',\r\n\t                \t\tgroup: 'strategy',\r\n\t                \t\tchecked: this.getMode() === this.MODE_TOP,\r\n\t                \t\ttext: this.localize('topTerms'),\r\n\t                \t\tcheckHandler: function(item, checked) {\r\n\t                \t\t\tif (checked) {\r\n\t                \t\t\t\tthis.setMode(this.MODE_TOP);\r\n\t                \t\t\t\tthis.doLoad();\r\n\t                \t\t\t}\r\n\t                \t\t},\r\n\t                \t\tscope: this\r\n\t                \t},{\r\n\t                \t\txtype: 'menucheckitem',\r\n\t                \t\tgroup: 'strategy',\r\n\t                \t\tchecked: this.getMode() === this.MODE_DISTINCT,\r\n\t                \t\ttext: this.localize('distinctTerms'),\r\n\t                \t\tcheckHandler: function(item, checked) {\r\n\t                \t\t\tif (checked) {\r\n\t                \t\t\t\tthis.setMode(this.MODE_DISTINCT);\r\n\t                \t\t\t\tthis.doLoad();\r\n\t                \t\t\t}\r\n\t                \t\t},\r\n\t                \t\tscope: this\r\n\t                \t}]\r\n                \t}\r\n                },{\r\n\t                fieldLabel: this.localize('numTerms'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: this.MIN_TERMS,\r\n\t            \tmaxValue: this.MAX_TERMS,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam('numInitialTerms')));\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParam(\"numInitialTerms\", newvalue);\r\n\t            \t\t\tthis.doLoad();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                },{\r\n\t                fieldLabel: this.localize('context'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: 1,\r\n\t            \tmaxValue: 30,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(this.getApiParam('context'));\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParams({context: newvalue});\r\n\t            \t\t\tthis.doLoad();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                },{\r\n\t                fieldLabel: this.localize('scaling'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: this.MIN_SCALING,\r\n\t            \tmaxValue: this.MAX_SCALING,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(this.getScalingFactor());\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\t// use the inverse of the value since it'll make more sense to the user\r\n\t            \t\t\tvar value = Math.abs(newvalue-(this.MAX_SCALING+1));\r\n\t            \t\t\tthis.setScalingFactor(value);\r\n\t            \t\t\tthis.reload();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                }\r\n                ]\r\n    \t\t}]\r\n    \t});\r\n    \t\r\n    \tthis.setContextMenu(Ext.create('Ext.menu.Menu', {\r\n\t\t\trenderTo: Ext.getBody(),\r\n\t\t\titems: [{\r\n\t\t\t\txtype: 'box',\r\n\t\t\t\titemId: 'label',\r\n\t\t\t\tmargin: '5px 0px 5px 5px',\r\n\t\t\t\thtml: ''\r\n\t\t\t},{\r\n\t\t        xtype: 'menuseparator'\r\n\t\t\t},{\r\n\t\t\t\txtype: 'button',\r\n\t\t\t\ttext: 'Remove',\r\n\t\t\t\tstyle: 'margin: 5px;',\r\n\t\t\t\thandler: function(b, e) {\r\n\t\t\t\t\tvar node = this.getCurrentNode();\r\n\t\t\t\t\tif (node !== undefined) {\r\n\t\t\t\t\t\tdelete this.getCurrentData()[node.data.term];\r\n\t\t\t\t\t\tthis.getBlacklist()[node.data.term] = true;\r\n\t\t\t\t\t\tthis.setCurrentNode(undefined);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getContextMenu().hide();\r\n\t\t\t\t\tthis.reload();\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t}]\r\n\t\t}));\r\n    \t\r\n    \tthis.on('query', function(src, query) {\r\n    \t\tif (query.length > 0) {\r\n    \t\t\tthis.doLoad(query);\r\n    \t\t}\r\n\t\t}, this);\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    listeners: {\r\n    \tboxready: function() {\r\n\t\t\tthis.initVisLayout();\r\n    \t},\r\n    \t\r\n    \tresize: function(panel, width, height) {\r\n    \t\tif (this.getVisLayout() && this.getCorpus()) {\r\n    \t\t\tvar el = this.getLayout().getRenderTarget();\r\n    \t    \twidth = el.getWidth();\r\n    \t\t\theight = el.getHeight();\r\n    \t\t\t\r\n    \t\t\tel.down('svg').set({width: width, height: height});\r\n    \t\t\t\r\n    \t\t\tthis.getVisLayout().size([width, height]);\r\n    \t\t\t\r\n    \t\t\tthis.reload();\r\n    \t\t}\r\n    \t},\r\n    \t\r\n    \tloadedCorpus: function(src, corpus) {\r\n    \t\tif (this.isVisible()) {\r\n        \t\tthis.doLoad();\r\n    \t\t}\r\n    \t},\r\n    \tactivate: function() {\r\n    \t\tif (this.getCorpus()) {\r\n    \t\t\tthis.doLoad();\r\n    \t\t}\r\n    \t}\r\n    },\r\n    \r\n    doLoad: function(query) {\r\n\t\tthis.resetVis();\r\n\t\tif (query === undefined) {\r\n\t\t\tthis.resetMinMax();\r\n\t\t\tthis.setCurrentData({});\r\n\t\t}\r\n    \tif (this.getMode() === this.MODE_DISTINCT) {\r\n    \t\tthis.getDistinctTerms(query);\r\n    \t} else {\r\n    \t\tthis.getTopTerms(query);\r\n    \t}\r\n    },\r\n    \r\n    reload: function() {\r\n    \tvar data = this.processCollocates([]);\r\n\t\tif (data.length > 0) {\r\n\t\t\tthis.resetVis();\r\n\t\t\tthis.buildVisFromData(data);\r\n\t\t}\r\n    },\r\n    \r\n    resetMinMax: function() {\r\n    \tthis.setMinRawFreq(undefined);\r\n    \tthis.setMaxRawFreq(undefined);\r\n    \tthis.setMaxCollocateValue(undefined);\r\n    \tthis.setMinFillValue(undefined);\r\n    \tthis.setMaxFillValue(undefined);\r\n    },\r\n    \r\n    resetVis: function() {\r\n    \tvar vis = this.getVis();\r\n    \tif (vis) {\r\n        \tvis.selectAll('.node').remove();\r\n    \t}\r\n    },\r\n    \r\n    getTopTerms: function(query) {\r\n    \tvar limit = parseInt(this.getApiParam('numInitialTerms'));\r\n    \tvar stopList = this.getApiParam('stopList');\r\n    \tif (query !== undefined) {\r\n    \t\tlimit = undefined;\r\n    \t\tstopList = undefined;\r\n    \t}\r\n    \tthis.getCorpus().getCorpusTerms().load({\r\n    \t\tparams: {\r\n    \t\t\tquery: query,\r\n \t\t\t\tlimit: limit,\r\n \t\t\t\tstopList: stopList\r\n \t\t\t},\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tif (success) {\r\n\t\t    \t\tthis.loadFromRecords(records);\r\n\t\t    \t}\r\n\t\t    },\r\n\t\t    scope: this\r\n    \t});\r\n    },\r\n    \r\n    getDistinctTerms: function(query) {\r\n    \tvar limit = parseInt(this.getApiParam('numInitialTerms'));\r\n    \tvar stopList = this.getApiParam('stopList');\r\n    \tif (query !== undefined) {\r\n    \t\tlimit = undefined;\r\n    \t\tstopList = undefined;\r\n    \t}\r\n    \tvar perDocLimit = Math.ceil(parseInt(this.getApiParam('numInitialTerms')) / this.getCorpus().getDocumentsCount()); // ceil ensures there's at least 1 per doc\r\n    \tthis.getCorpus().getDocumentTerms().load({\r\n\t\t\tparams: {\r\n\t\t\t\tquery: query,\r\n\t\t\t\tlimit: limit,\r\n\t\t\t\tperDocLimit: perDocLimit,\r\n\t\t\t\tstopList: stopList,\r\n\t\t\t\tsort: 'TFIDF',\r\n\t\t\t\tdir: 'DESC'\r\n\t\t\t},\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tthis.loadFromRecords(records);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tscope: this\r\n    \t});\r\n    },\r\n    \r\n    loadFromQuery: function(query) {\r\n    \tthis.getCorpus().getCorpusTerms().load({\r\n    \t\tparams: {\r\n \t\t\t\tquery: query\r\n \t\t\t},\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tif (success) {\r\n\t\t    \t\tthis.loadFromRecords(records);\r\n\t\t    \t}\r\n\t\t    },\r\n\t\t    scope: this\r\n    \t});\r\n    },\r\n    \r\n    loadFromRecords: function(records) {\r\n    \tif (Ext.isArray(records) && records.length>0) {\r\n    \t\tvar maxFreq = this.getMaxRawFreq();\r\n    \t\tvar minFreq = this.getMinRawFreq();\r\n    \t\tvar minFillVal = this.getMinFillValue();\r\n    \t\tvar maxFillVal = this.getMaxFillValue();\r\n    \t\tvar terms = [];\r\n    \t\trecords.forEach(function(r) {\r\n    \t\t\tvar term = r.getTerm();\r\n    \t\t\tif (!this.getBlacklist()[term]) {\r\n\t    \t\t\tvar rawFreq = r.getRawFreq();\r\n\t    \t\t\tvar fillVal = this.getMode() === this.MODE_DISTINCT ? r.get('tfidf') : r.getInDocumentsCount();\r\n\t    \t\t\t\r\n\t    \t\t\tif (maxFreq === undefined || rawFreq > maxFreq) maxFreq = rawFreq;\r\n\t    \t\t\tif (minFreq === undefined || rawFreq < minFreq) minFreq = rawFreq;\r\n\t    \t\t\t\r\n\t    \t\t\tif (maxFillVal === undefined || fillVal > maxFillVal) maxFillVal = fillVal;\r\n\t    \t\t\tif (minFillVal === undefined || fillVal < minFillVal) minFillVal = fillVal;\r\n\t    \t\t\t\r\n\t    \t\t\tthis.getCurrentData()[term] = {\r\n\t    \t\t\t\tterm: term,\r\n\t    \t\t\t\trawFreq: rawFreq,\r\n\t    \t\t\t\trelativeFreq: r.get('relativeFreq'),//r.getRelativeFreq(),\r\n\t    \t\t\t\tfillValue: fillVal,\r\n\t    \t\t\t\tcollocates: []\r\n\t    \t\t\t};\r\n\t    \t\t\t\r\n\t    \t\t\tterms.push(term);\r\n    \t\t\t}\r\n    \t\t}, this);\r\n    \t\t\r\n    \t\tthis.setMaxRawFreq(maxFreq);\r\n    \t\tthis.setMinRawFreq(minFreq);\r\n    \t\tthis.setMinFillValue(minFillVal);\r\n    \t\tthis.setMaxFillValue(maxFillVal);\r\n    \t\t\r\n    \t\tthis.getCollocatesForQuery(terms);\r\n    \t}\r\n    },\r\n    \r\n    getCollocatesForQuery: function(query) {\r\n    \tvar whitelist = [];\r\n    \tfor (var term in this.getCurrentData()) {\r\n    \t\twhitelist.push(term);\r\n    \t}\r\n    \t \r\n    \tthis.setApiParams({\r\n    \t\tmode: 'corpus'\r\n    \t});\r\n    \tvar params = this.getApiParams();\r\n    \tthis.getCorpus().getCorpusCollocates().load({\r\n    \t\tparams: Ext.apply(Ext.clone(params), {query: query, collocatesWhitelist: whitelist, limit: this.COLLOCATES_LIMIT}),\r\n    \t\tcallback: function(records, op, success) {\r\n    \t\t\tif (success) {\r\n    \t\t\t\tthis.buildVisFromData(this.processCollocates(records));\r\n    \t\t\t}\r\n    \t\t},\r\n    \t\tscope: this\r\n    \t});\r\n    },\r\n    \r\n    processCollocates: function(records) {\r\n    \tvar currentTerms = this.getCurrentData();\r\n\r\n    \tvar maxCol = this.getMaxCollocateValue();\r\n    \t\r\n    \tfor (var i=0; i<records.length; i++) {\r\n    \t\tvar r = records[i];\r\n    \t\tvar term = r.getTerm();\r\n\t\t\tvar contextTerm = r.getContextTerm();\r\n\t\t\tvar contextFreq = r.getContextTermRawFreq();\r\n\t\t\t\r\n\t\t\tif (maxCol === undefined || contextFreq > maxCol) {\r\n\t\t\t\tmaxCol = contextFreq;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (currentTerms[term] === undefined) {\r\n\t\t\t\t// should not be here\r\n\t\t\t} else {\r\n\t    \t\tif (term != contextTerm) {\r\n\t    \t\t\tcurrentTerms[term].collocates.push({\r\n\t    \t\t\t\tterm: contextTerm, value: contextFreq\r\n\t    \t\t\t});\r\n\t    \t\t}\r\n\t\t\t}\r\n    \t}\r\n    \t\r\n    \tthis.setMaxCollocateValue(maxCol);\r\n    \t\r\n    \tvar data = [];\r\n    \tfor (var term in currentTerms) {\r\n//    \t\tif (currentTerms[term].collocates.length > 0) {\r\n    \t\t\tdata.push(currentTerms[term]);\r\n//    \t\t}\r\n    \t}\r\n    \treturn data;\r\n    },\r\n    \r\n    buildVisFromData: function(data) {\r\n    \tvar me = this;\r\n    \t\r\n    \tif (!this.getVis()) {return;} // not initialized\r\n    \t\r\n    \tvar rootId = '$$$root$$$';\r\n    \tdata.push({term: rootId, collocates:[], rawFreq:1});\r\n    \tvar root = d3.stratify()\r\n    \t\t.id(function(d) { return d.term; })\r\n    \t\t.parentId(function(d) {\r\n    \t\t\tif (d.term !== rootId) return rootId;\r\n\t\t\t\telse return '';\r\n\t\t\t})(data)\r\n\t\t\t.sort(function(a, b) { return a.rawFreq < b.rawFreq ? 1 : a.rawFreq > b.rawFreq ? -1 : 0; })\r\n\t\t\t.sum(function(d) { return Math.pow(d.rawFreq, 1/me.getScalingFactor()); });\r\n    \tthis.getVisLayout()(root);\r\n    \t\r\n    \t// join nodes with data\r\n    \tvar nodes = this.getVis().selectAll('.node').data(root.descendants());\r\n    \t\r\n    \t// update\r\n    \tnodes.attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; });\r\n    \tnodes.selectAll('circle').attr('r', function(d) { return d.r; });\r\n    \t\r\n    \tvar idGet = function(term) {\r\n    \t\treturn term.replace(/\\W/g, '_'); // remove non-word characters to create valid DOM ids\r\n    \t};\r\n    \t\r\n    \tvar collocateFill = d3.scalePow().exponent(1/3)\r\n\t\t\t.domain([0,this.getMaxCollocateValue()]).range(['#fff', '#bd3163']);\r\n    \t\r\n    \tvar defaultFill;\r\n    \tif (this.getMode() === this.MODE_DISTINCT) {\r\n    \t\tdefaultFill = d3.scalePow().exponent(1/5)\r\n    \t\t\t.domain([this.getMinFillValue(), this.getMaxFillValue()]).range(['#dedede', '#fff']);\r\n    \t} else {\r\n    \t\tdefaultFill = d3.scaleLinear()\r\n\t\t\t\t.domain([this.getMaxFillValue(), this.getMinFillValue()]).range(['#dedede', '#fff']);\r\n    \t}\r\n    \t\r\n    \t// roughly calculate font size based on available area and number of terms\r\n    \tvar size = this.getVisLayout().size();\r\n    \tvar layoutRadius = Math.min(size[0], size[1]) / 2;\r\n    \tvar layoutArea = Math.PI*(layoutRadius*layoutRadius);\r\n    \tvar totalTerms = data.length;\r\n    \tvar termArea = layoutArea / totalTerms;\r\n    \tvar termRadius = Math.sqrt(termArea / Math.PI);\r\n    \tvar minFontSize = termRadius / 3;\r\n    \tvar scalingInverse = Math.abs(this.getScalingFactor()-(this.MAX_SCALING+1));\r\n    \tscalingInverse = Math.max(1, scalingInverse-1); // substract one to avoid too large fonts\r\n    \tvar maxFontSize = minFontSize * scalingInverse;\r\n\r\n    \tvar textSizer = d3.scaleLinear()//pow().exponent(1/2)\r\n    \t\t.domain([this.getMinRawFreq(),this.getMaxRawFreq()]).range([minFontSize, maxFontSize]);\r\n    \t\r\n    \t// enter\r\n    \tvar node = nodes.enter().append('g')\r\n    \t\t.attr('class', 'node')\r\n    \t\t.style('visibility', function(d) { return d.depth > 0 ? 'visible' : 'hidden'; }) // hide root\r\n    \t\t.attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; })\r\n    \t\t.on('click', function(d) {\r\n    \t\t\tme.dispatchEvent('termsClicked', me, [d.data.term]);\r\n    \t\t})\r\n    \t\t.on('mouseover', function(d, i) {\r\n    \t\t\tme.setCurrentNode(d);\r\n    \t\t\t\r\n    \t\t\tme.getVis().selectAll('circle')\r\n    \t\t\t\t.style('stroke-width', 1)\r\n    \t\t\t\t.style('stroke', '#111')\r\n        \t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); });\r\n    \t\t\t\r\n    \t\t\td3.select(this).select('circle')\r\n    \t\t\t\t.style('fill', '#89e1c2')\r\n    \t\t\t\t.style('stroke', '#26926c')\r\n    \t\t\t\t.style('stroke-opacity', me.MAX_STROKE_OPACITY);\r\n    \t\t\t\r\n    \t\t\tvar fillLabel;\r\n    \t\t\tif (me.getMode() === me.MODE_DISTINCT) {\r\n    \t\t\t\tfillLabel = me.localize('tfidf');\r\n    \t\t\t} else {\r\n    \t\t\t\tfillLabel = me.localize('inDocs');\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (!me.getContextMenu().isVisible()) {\r\n\t    \t\t\tvar info = '<b>'+d.data.term+'</b> ('+d.data.rawFreq+')<br/>'+fillLabel+': '+d.data.fillValue;\r\n\t\t\t\t\tvar tip = me.getTip();\r\n\t\t\t\t\ttip.update(info);\r\n\t\t\t\t\ttip.show();\r\n    \t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < d.data.collocates.length; i++) {\r\n\t\t\t\t\tvar collocate = d.data.collocates[i];\r\n\t\t\t\t\tvar match = me.getVis().selectAll('.node').filter(function(d) { return d.data.term === collocate.term; });\r\n\t\t\t\t\tmatch.select('circle')\r\n\t\t\t\t\t\t.style('fill', function(d) { return collocateFill(collocate.value); })\r\n\t\t\t\t\t\t.style('stroke', '#bd3163')\r\n\t\t\t\t\t\t.style('stroke-opacity', me.MAX_STROKE_OPACITY);\r\n\t\t\t\t\tmatch.select('tspan.value').text(function(d) { return collocate.value; });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.on('mousemove', function() {\r\n\t\t\t\tme.getTip().setPosition(d3.event.pageX+5, d3.event.pageY-50);\r\n\t\t\t})\r\n\t\t\t.on('mouseout', function() {\r\n\t\t\t\tif (!me.getContextMenu().isVisible()) {\r\n\t\t\t\t\tme.setCurrentNode(undefined);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tme.getVis().selectAll('circle').style('stroke-opacity', me.MIN_STROKE_OPACITY).style('stroke', '#111')\r\n\t    \t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); });\r\n\t\t\t\tme.getVis().selectAll('tspan.value').text('');\r\n\t\t\t\tme.getTip().hide();\r\n//\t\t\t\tme.getVisInfo().text('');\r\n\t\t\t})\r\n\t\t\t.on('contextmenu', function(d, i) {\r\n\t\t\t\td3.event.preventDefault();\r\n\t\t\t\tme.getTip().hide();\r\n\t\t\t\tvar menu = me.getContextMenu();\r\n\t\t\t\tmenu.queryById('label').setHtml(d.data.term);\r\n\t\t\t\tmenu.showAt(d3.event.pageX+5, d3.event.pageY-50);\r\n\t\t\t});\r\n    \t\r\n    \tnode.append('circle')\r\n    \t\t.attr('id', function(d) {\r\n    \t\t\treturn idGet(d.data.term);\r\n\t\t\t})\r\n\t\t\t.attr('r', function(d) { return d.r; })\r\n\t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); })\r\n\t\t\t.style('stroke', '#111')\r\n\t\t\t.style('stroke-opacity', me.MIN_STROKE_OPACITY)\r\n\t\t\t.style('stroke-width', 1);\r\n    \t\r\n    \tnode.append('clipPath').attr('id', function(d) { return 'clip-' + idGet(d.data.term); })\r\n    \t\t.append('use').attr('xlink:href', function(d) { return '#' + idGet(d.data.term); });\r\n\t\t\r\n    \tvar text = node.append('text')\r\n    \t\t.attr('clip-path', function(d) { return 'url(#clip-' + idGet(d.data.term) + ')'; })\r\n    \t\t.style('font-family', function(d) { return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.data.term); })\r\n\t\t\t.style('text-anchor', 'middle')\r\n\t\t\t.style('cursor', 'default');\r\n\t\ttext.append('tspan')\r\n\t\t\t.attr('class', 'term')\r\n\t\t\t.attr('font-size', function(d) { return textSizer(d.data.rawFreq); })\r\n\t\t\t.attr('x', 0)\r\n\t\t\t.attr('y', function(d) { return textSizer(d.data.rawFreq)/4; })\r\n\t\t\t.text(function(d) { return d.data.term; });\r\n\t\ttext.append('tspan')\r\n\t\t\t.attr('class', 'value')\r\n\t\t\t.attr('font-size', function(d) { return textSizer(d.data.rawFreq)*0.75; })\r\n\t\t\t.attr('x', 0)\r\n\t\t\t.attr('y', function(d) { return textSizer(d.data.rawFreq)+1; });\r\n\t\t\r\n\t\t// exit\r\n    \tnodes.exit().remove();\r\n\t\t\r\n    },\r\n    \r\n    initVisLayout: function() {\r\n    \tvar el = this.getLayout().getRenderTarget();\r\n\t\tel.update(''); // make sure to clear existing contents (especially for re-layout)\r\n    \tvar width = el.getWidth();\r\n\t\tvar height = el.getHeight();\r\n\r\n\t\tvar me = this;\r\n\t\tthis.setVisLayout(\r\n\t\t\td3.pack().size([width, height]).padding(1.5)\r\n\t\t);\r\n\t\t\r\n\t\tvar svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('width', width).attr('height', height);\r\n\t\tthis.setVis(svg.append('g'));\r\n\t\t\r\n\t\tthis.setVisInfo(svg.append('text').attr('x', 10).attr('y', 10));\r\n\t\t\r\n\t\tif (this.getTip() === undefined) {\r\n\t\t\tthis.setTip(Ext.create('Ext.tip.Tip', {}));\r\n\t\t}\r\n    }\r\n});","/**\n * Terms Radio tool, a visualization for term distributions.\n * \n * <iframe src=\"../?corpus=austen&view=termsradio\" style=\"max-width: 600px; height: 600px\"></iframe>\n * \n * The typical use is not to instantiate this class directly, but to embed the tool from a corpus.\n * \n * \t\tvar austen;\n * \t\tnew Corpus(\"austen\").then(function(corpus) {\n * \t\t\tausten = corpus;\n * \t\t\tausten.embed('TermsRadio'); // simply embed\n * \t\t\tausten.embed('TermsRadio', {visibleBins: 8}); // embed with parameter\n * \t\t});\n * \n * @class Voyant.panel.TermsRadio\n * @author Mark Turcato\n * @author Andrew MacDonald\n */\nExt.define('Voyant.panel.TermsRadio', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.termsradio',\n\tconfig: {\n\t\t/**\n\t\t * @private\n\t\t */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tspeed: 50,\n\t\t/**\n\t\t * @private\n\t\t */\n\t\ttermsRadio: undefined\n\t},\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @private (this shouldn't be modified but it needs to be part of the parameters)\n    \t\t */\n    \t\twithDistributions: true,\n\n    \t\t/**\n    \t\t * @cfg {Number} bins How many document segments to show if the corpus has a single document (default is 10); otherwise, the number of bins corresponds to the number of documents in the corpus.\n    \t\t * \n    \t\t * Note that this often works in parallel with the {@link #bins} value.\n    \t\t */\n    \t\tbins: 5\n    \t\n    \t\t/**\n    \t\t * @cfg {Number} visibleBins How many segments or documents to show at once (default is 5).\n    \t\t * \n    \t\t * Note that this often works in parallel with the {@link #bins} value.\n    \t\t */\n    \t\t,visibleBins: 5\n    \t\t\n    \t\t/**\n    \t\t * @property docIdType The document type(s) to restrict results to.\n    \t\t * @type String|Array\n    \t\t * @default null\n    \t\t * @private\n    \t\t */\n    \t\t,docIdType: null\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} limit Determine the number of terms to show (larger numbers may make the graph unusable).\n    \t\t */\n    \t\t,limit: 50\n    \t\n    \t\t/**\n        \t * @property mode What mode to operate at, either document or corpus.\n        \t * @choices document, corpus\n    \t\t * @private\n        \t */\n    \t\t,mode: null\n    \t\t\n    \t\t/**\n        \t * @property position The current shifted position of the visualization.\n        \t * @type Integer\n        \t * @default 0\n    \t\t * @private\n        \t */\n    \t\t,position: 0\n    \t\t\n    \t\t/**\n    \t\t * @property selectedWords The words that have been selected.\n    \t\t * @type String|Array\n    \t\t * @default null\n    \t\t * @private\n    \t\t */\n    \t\t,selectedWords: []\n    \t\t\n\t\t\t/**\n\t\t\t * @cfg {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n\t\t\t * \n\t\t\t *  By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n\t\t\t *  \n\t\t\t * For more information see the <a href=\"#!/guide/search\">Stopwords documentation</a>.\n\t\t\t */\n    \t\t,stopList: 'auto'\n    \t\t\n    \t\t/**\n    \t\t * @property query The corpus type(s) to restrict results to.\n    \t\t * @type String\n    \t\t * @default null\n    \t\t * @private\n    \t\t */\n    \t\t,query: null\n    \t\t\n    \t\t/**\n    \t\t * @property yAxisScale The scale for the y axis.\n    \t\t * @type String\n    \t\t * @default log\n    \t\t * @private\n    \t\t */\n    \t\t,yAxisScale: 'log'\n    \t\t\t\n    \t\t,speed: 50\n    \t\t\n    \t\t/**\n    \t\t * @property slider Whether to show the slider\n    \t\t * @type Boolean\n    \t\t * @default true\n    \t\t */\n    \t\t,slider: undefined\n    \t},\n    \tglyph: 'xf201@FontAwesome'\n    }\n\t\n\t/**\n\t * @private\n\t */\n\t,constructor: function(config) {\n\t\t\n\t\tvar onLoadHandler = function(mode, store, records, success, operation) {\n\t\t\tthis.setApiParams({mode: mode});\n\n\t\t\tthis.getTermsRadio().loadRecords(records);\n\t\t\t\n\t\t\tvar query = this.getApiParam('query');\n\t\t\t// check for no results\n\t\t\tif (query) {\n\t\t\t\tif (records.length==0 || (records.length==1 && records[0].getRawFreq()==0)) {\n\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\thtml: this.localize(\"termNotFound\"),\n\t\t\t\t\t\talign: 'bl'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.getTermsRadio().highlightQuery(query, true);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.corpusStore = Ext.create(\"Voyant.data.store.CorpusTerms\", {\n\t\t\tlisteners : {\n\t\t\t\tload: {\n\t\t\t\t\tfn : onLoadHandler.bind(this, 'corpus'),\n\t\t\t\t\tscope : this\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.documentStore = Ext.create(\"Voyant.data.store.DocumentTerms\", {\n\t\t\tlisteners : {\n\t\t\t\tload: {\n\t\t\t\t\tfn : onLoadHandler.bind(this, 'document'),\n\t\t\t\t\tscope : this\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tExt.apply(config, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlegendMenu: Ext.create('Ext.menu.Menu', {\n\t\t\t\titems: [\n        \t\t\t{text: '', itemId: 'remove', glyph: 'xf068@FontAwesome'}\n        \t\t]\n        \t}),\n\t\t\ttbar: new Ext.Toolbar({\n                overflowHandler: 'scroller',\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'legend',\n\t\t\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\t\t\tfields : ['name', 'mark']\n\t\t\t\t\t}),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\titemclick: function(view, record, el, index) {\n\t\t\t\t\t\t\tvar term = record.get('name');\n\t\t\t\t\t\t\tif (this.getTermsRadio().isTermSelected(term)) {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().doTermDeselect(term);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().doTermSelect(term);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\titemcontextmenu: function(view, record, el, index, event) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t            \tvar xy = event.getXY();\n\t\t\t            \t\n\t\t\t            \tvar term = record.get('name');\n\t\t\t            \tvar text = (new Ext.Template(this.localize('removeTerm'))).apply([term]);\n\t\t            \t\tthis.legendMenu.queryById('remove').setText(text);\n\t\t            \t\t\n\t\t            \t\tthis.legendMenu.on('click', function(menu, item) {\n\t\t            \t\t\tif (item !== undefined) {\n\t\t            \t\t\t\tthis.doTermDeselect(term, true);\n\t\t            \t\t\t}\n\t\t            \t\t}, this, {single: true});\n\t\t            \t\tthis.legendMenu.showAt(xy);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tbbar: {\n                overflowHandler: 'scroller',\n\t            items: [{\n\t            \txtype: 'querysearchfield'\n\t            },{\n\t    \t\t\tglyph: 'xf04b@FontAwesome', // start with play button, which means we're paused\n\t    \t\t\titemId: 'play',\n\t    \t\t\thandler: function(btn) {\n\t    \t\t\t\tvar playing = btn.glyph==\"xf04c@FontAwesome\";\n\t    \t\t\t\tif (playing) {\n\t    \t\t\t\t\tthis.getTermsRadio().continueTransition = false;\n\t    \t\t\t\t\tthis.mask(this.localize(\"completingTransition\"))\n\t    \t\t\t\t\tbtn.setPlaying(false)\n\t    \t\t\t\t}\n\t    \t\t\t\telse {\n\t    \t\t\t\t\tthis.getTermsRadio().toggleRightCheck();\n\t    \t\t\t\t\tbtn.setPlaying(true);\n\t    \t\t\t\t}\n\t    \t\t\t},\n\t    \t\t\tscope: this,\n\t    \t\t\tsetPlaying: function(bool) {\n\t    \t\t\t\tthis.setGlyph(bool ? \"xf04c@FontAwesome\" : \"xf04b@FontAwesome\")\n\t    \t\t\t}\n\t    \t\t},{\n\t    \t\t\tglyph: 'xf0e2@FontAwesome',\n//\t    \t\t\ttext: this.localize('reset')\n\t    \t\t\ttooltip : this.localize('resetTip'),\n\t    \t\t\tlisteners : {\n\t    \t\t\t\tclick : {fn : function() {\n\t    \t\t\t\t\tthis.queryById(\"play\").setPlaying(false);\n\t\t\t\t\t\t\tthis.getTermsRadio().shiftCount = 0;\n\t\t\t\t\t\t\tthis.getTermsRadio().prepareData();\n\t\t\t\t\t\t\tthis.getTermsRadio().redraw();\n    \t\t\t\t\t}\t\t\t\t\n\t    \t\t\t\t\t,scope : this\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\tforId: 'terms',\n\t    \t\t\ttext: this.localize('terms')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'terms',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 5,\n\t    \t\t\tminValue : 5,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"limit\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadStore();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\tforId: 'speed',\n\t    \t\t\ttext: this.localize('speed')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'speed',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 5,\n\t    \t\t\tminValue : 5,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"speed\")))\n\t            \t\t\tthis.setSpeed(slider.getValue())\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({speed: newvalue});\n\t            \t\t\tthis.setSpeed(newvalue)\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\titemId: 'visibleSegmentsLabel',\n\t    \t\t\tforId: 'visibleBins',\n\t    \t\t\ttext: this.localize('visibleSegments')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'visibleBins',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 1,\n\t    \t\t\tminValue : 1,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"visibleBins\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({visibleBins: newvalue});\n\t\t\t\t\t\t\tthis.numVisPoints = newvalue;\n\t\t\t\t\t\t\tthis.loadStore();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (this.numVisPoints == this.getCorpus().getDocumentsCount()) {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().hideSlider();\n\t\t\t\t\t\t\t} else if (this.getApiParam(\"slider\") != 'false'){\n\t\t\t\t\t\t\t\tthis.getTermsRadio().showSlider();\n\t\t\t\t\t\t\t}\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\titemId: 'segmentsLabel',\n\t    \t\t\tforId: 'segments',\n\t    \t\t\ttext: this.localize('segments')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'segments',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 1,\n\t    \t\t\tminValue : 1,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"bins\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({bins: newvalue});\n\t\t\t\t\t\t\tthis.numDataPoints = newvalue;\n\t\t\t\t\t\t\tthis.loadStore();\n\t\t\t\t\t\t\tvar visibleBins = this.queryById('visibleBins');\n\t\t\t\t\t\t\tvisibleBins.setMaxValue(newvalue) // only relevant for doc mode\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t}]\n\t\t\t}\n\t\t});\n\t\t\n\t\t// need to add option here so we have access to localize\n\t\tthis.config.options.push({\n\t\t\txtype: 'combo',\n\t\t\tqueryMode : 'local',\n\t\t\ttriggerAction : 'all',\n\t\t\tforceSelection : true,\n\t\t\teditable : false,\n\t\t\tfieldLabel : this.localize('yScale'),\n\t\t\tlabelAlign : 'right',\n\t\t\tname : 'yAxisScale',\n\t\t\tvalueField : 'value',\n\t\t\tdisplayField : 'name',\n\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\tfields : ['name', 'value'],\n\t\t\t\tdata   : [{\n\t\t\t\t\tname : this.localize('linear'),   value: 'linear'\n\t\t\t\t},{\n\t\t\t\t\tname : this.localize('log'),  value: 'log'\n\t\t\t\t}]\n\t\t\t}),\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(combo) {\n\t\t\t\t\tcombo.setValue(this.getApiParam('yAxisScale'));\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.callParent(arguments);\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t\t\n\t\tthis.on('boxready', function(component) {\n\t\t\tvar sliderParam = this.getApiParam('slider');\n\t\t\tvar showSlider = sliderParam === undefined ? true : sliderParam === 'true';\n\t\t\tvar config = {\n\t\t\t\tparent: this,\n\t\t\t\tcontainer: this.body,\n\t\t\t\tshowSlider: showSlider\n\t\t\t};\n\t\t\tthis.setTermsRadio(new TermsRadio(config));\n\t\t}, this);\n\t\t\n\t\t/**\n\t\t * @event corpusTypesSelected\n\t\t * @type listener\n\t\t * @private\n\t\t */\n\t\tthis.addListener('corpusTermsClicked', function(src, terms){\n\t\t\tif (this.getCorpus().getDocumentsCount() > 1) {\n        \t\tterms.forEach(function(term) {\n        \t\t\tvar t = term.getTerm();\n        \t\t\tthis.setApiParams({query: t});\n        \t\t\tthis.loadStore();\n        \t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.addListener('documentTermsClicked', function(src, terms){\n\t\t\tif(src && src.xtype==this.xtype) {return false;}\n\t\t\t\n\t\t\tterms.forEach(function(term) {\n    \t\t\tvar t = term.getTerm();\n    \t\t\tthis.setApiParams({query: t});\n    \t\t\tthis.loadStore();\n    \t\t});\n\t\t});\n\t\t\n\t\tthis.on('query', function(src, query){\n\t\t\tthis.fireEvent(\"termsClicked\", src, query);\n\t    });\n\t\t\n\t\tthis.on(\"termsClicked\", function(src, terms) {\n\t\t\t// TODO load term distribution data\n\t\t\tterms.forEach(function(term) {\n\t\t\t\tvar queryTerm;\n    \t\t\tif (Ext.isString(term)) {queryTerm = term;}\n    \t\t\telse if (term.term) {queryTerm = term.term;}\n    \t\t\telse if (term.getTerm) {queryTerm = term.getTerm();}\n    \t\t\t\n    \t\t\t// TODO handling for multiple terms\n    \t\t\tthis.setApiParams({query: queryTerm});\n    \t\t\tthis.loadStore();\n    \t\t}, this);\n    \t});\n\t\t\n\t\tthis.on(\"loadedCorpus\", function(src, corpus) {\n    \t\tthis.documentStore.setCorpus(corpus);\n    \t\tthis.corpusStore.setCorpus(corpus);\n    \t\t\n    \t\tvar params = this.getApiParams();\n\t\t\tif (params.type) {\n\t\t\t\tdelete params.limit;\n\t\t\t}\n\t\t\tvar store;\n\t\t\t\n\t\t\tvar docsCount = this.getCorpus().getDocumentsCount();\n\t\t\tvar segments = this.queryById(\"segments\");\n\t\t\tvar visibleBins = this.queryById(\"visibleBins\");\n\t\t\tif (params.mode=='document' || docsCount == 1) {\n\t\t\t\tthis.setApiParam(\"mode\", \"document\");\n\t\t\t\tstore = this.documentStore;\n\t\t\t\tvisibleBins.setMaxValue(segments.getValue())\n\t\t\t} else {\n\t\t\t\tthis.setApiParam(\"mode\", \"corpus\");\n\t\t\t\tdelete params.bins;\n\t\t\t\tstore = this.corpusStore;\n\t\t\t\tsegments.hide();\n\t\t\t\tthis.queryById(\"segmentsLabel\").hide();\n\t\t\t\tvar visibleBins = this.queryById(\"visibleBins\");\n\t\t\t\tvisibleBins.setMaxValue(docsCount);\n\t\t\t\tif (parseInt(this.getApiParam(\"visibleBins\")>docsCount)) {\n\t\t\t\t\tvisibleBins.setValue(docsCount);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// select top 3 words\n\t\t\tstore.on('load', function(store, records) {\n\t\t\t\tfor (var i = 0; i < 3; i++) {\n\t\t\t\t\tvar r = records[i];\n\t\t\t\t\tif (r) {\n\t\t\t\t\t\tthis.getTermsRadio().highlightRecord(r, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this, {single: true});\n\t\t\tstore.load({params: params});\n    \t}, this);\t\t\n\t}\n\t\n    ,loadStore: function () {\n    \tthis.queryById('play').setPlaying(false);\n\t\tvar params = this.getApiParams();\n\t\tif(this.getApiParam('mode') === 'document') { \n\t\t\tthis.documentStore.load({params: params});\n\t\t}\n\t\tif(this.getApiParam('mode') === 'corpus') {\n\t\t\tdelete params.bins;\n\t\t\tthis.corpusStore.load({params: params});\n\t\t}\n\t}\n    \n});\n","/**\n * Trends tool, a line graph that shows term distributions.\n * \n * <iframe src=\"../?corpus=austen&view=trends\" style=\"max-width: 500px; height: 300px\"></iframe>\n * \n * The typical use is not to instantiate this class directly, but to embed the tool from a corpus.\n * \n * \t\tvar austen;\n * \t\tnew Corpus(\"austen\").then(function(corpus) {\n * \t\t\tausten = corpus;\n * \t\t\tausten.embed('Trends'); // simply embed\n * \t\t\tausten.embed('Trends', {query: '^lov*'}); // embed with query\n * \t\t});\n */\nExt.define('Voyant.panel.Trends', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.Documents'],\n\talias: 'widget.trends',\n\tconfig: {\n\t    /**\n\t     * @private\n\t     */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},\n\n    \t\t{\n    \t\t\tname: 'bins',\n\t\t    \txtype: 'slider',\n\t\t    \tlabelAlign: 'right',\n\t\t    \twidth: 200,\n\t\t    \tminValue: 2,\n\t\t    \tmaxValue: 100,\n\t        \tlisteners: {\n\t        \t\tafterrender: function(slider) {\n\t        \t\t\tvar trends = slider.up(\"window\").panel;\n\t        \t\t\tslider.setFieldLabel(trends.localize(\"segmentsSlider\"));\n\t        \t\t}\n\t        \t}    \t\t\n    \t\t},{\n                xtype: 'radiogroup',\n\t\t    \tlabelAlign: 'right',\n                columns: 3,\n                vertical: true,\n                name: 'withDistributions',\n                items: [{\n                    boxLabel: 'raw',\n                    name: 'withDistributions',\n                    inputValue: 'raw'\n                },{\n                    boxLabel: 'relative',\n                    name: 'withDistributions',\n                    inputValue: 'relative',\n                    style: 'margin-left: 1em;'\n                }],\n\t        \tlisteners: {\n\t        \t\tafterrender: function(radiogroup) {\n\t        \t\t\tvar panel = this.up(\"window\").panel;\n\t        \t\t\tthis.setFieldLabel(\"frequencies\");\n\t        \t\t\tvar val = panel.getApiParam(\"withDistributions\");\n\t        \t\t\tradiogroup.getBoxes().forEach(function(item) {\n\t        \t\t\t\titem.setBoxLabel(panel.localize(item.inputValue));\n\t        \t\t\t\titem.checked = item.inputValue==val;\n\t        \t\t\t});\n\t        \t\t\tthis.setValue({withDistributions: val});\n\t        \t\t}\n\t        \t}\n    \t\t},{xtype: 'colorpaletteoption'}]\n\t},\n    statics: {\n    \ti18n: {    \t\t\n    \t},\n    \tapi: {\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} limit Determine the number of terms to show (larger numbers may make the graph unusable).\n    \t\t */\n    \t\tlimit: 5,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n    \t\t * \n    \t\t *  By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n    \t\t *  \n    \t\t * For more information see the <a href=\"#!/guide/search\">Stopwords documentation</a>.\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String/String[]} query A query or array of queries (queries can be separated by a comma).\n    \t\t * \n    \t\t * For query syntax, see the <a href=\"#!/guide/search\">search documentation</a>.\n    \t\t */\n    \t\tquery: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} withDistributions Determine whether to show \"raw\" or \"relative\" frequencies (those are the two valid values).\n    \t\t * \n    \t\t * The default value is \"relative\" (unless there's only one document in the corpus, in which case raw frequencies are shown).\n    \t\t */\n    \t\twithDistributions: 'relative',\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} bins The number of segments to use.\n    \t\t * \n    \t\t * The default value will depend on the nature of the corpus:\n    \t\t * \n    \t\t * - corpus has one document: the default number of bins is 10\n    \t\t * - corpus has multiple documents:\n    \t\t *   - corpus has up to 100 documents: the default number is the size of the corpus\n    \t\t *   - corpus has more than 1000 documents: the default number is 100\n    \t\t */\n    \t\tbins: 10,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number/Number[]/String} docIndex The index of one or more documents, as a number, or numbers separated by commas or in an array.\n    \t\t * \n    \t\t * The first document's index is 0 and so on.\n    \t\t */\n    \t\tdocIndex: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String/String[]} docId The document ID of one or more documents, as a string, or strings separated by commas or in an array.\n    \t\t */\n    \t\tdocId: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} mode Force the mode to be either \"corpus\" (distribution of terms across documents) or \"document\" (distribution of terms within a document); usually this is correctly set by default according to whether the corpus has one document (\"document\") or more than one (\"corpus\").\n    \t\t */\n    \t\tmode: \"corpus\",\n    \t\t\n    \t\tchartType: 'barline',\n    \t\t\n    \t\tlabels: false\n    \t},\n\t\tglyph: 'xf201@FontAwesome'\n    },\n    \n    layout: 'fit',\n    documentTermsStore: undefined,\n    //segments: undefined,\n    \n    /**\n     * @private\n     */\n    constructor: function(config) {\n    \tthis.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                },{\n                \titemId: 'reset',\n                \ttext: this.localize(\"reset\"),\n                \ttooltip: this.localize(\"resetTip\"),\n                \thandler: function(btn) {\n                \t\tthis.setApiParams({\n                \t\t\tdocIndex: undefined,\n                \t\t\tmode: undefined,\n                \t\t\tquery: undefined\n                \t\t});\n                \t\tthis.loadCorpusTerms();\n                \t},\n                \tscope: this\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('display'),\n\t\t\t\t\ttooltip: this.localize('displayTip'),\n\t\t\t\t\tglyph: 'xf013@FontAwesome',\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tafterrender: function(menu) {\n\t\t\t\t\t\t\t\tvar val = this.getApiParam(\"chartType\");\n\t\t\t\t\t\t\t\tmenu.items.each(function(item) {\n\t\t\t\t\t\t\t\t\tif (item.getItemId()==val) {\n\t\t\t\t\t\t\t\t\t\titem.addCls(item.activeCls);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t},\n\t                    defaults: {\n\t                        xtype: 'menuitem',\n\t                        handler: function(item, checked) {\n\t                        \tif (item.xtype==\"menucheckitem\") { // labels\n\t\t                        \tthis.setApiParam(\"labels\", item.checked);\n\t                        \t} else {\n\t\t                        \tthis.setApiParam(\"chartType\", item.getItemId());\n\t                        \t}\n\t                        \tthis.loadCorpusTerms();\n\t                        },\n\t                        scope: this\n\t                    },\n\t                    items: [{\n\t                    \txtype: 'menucheckitem',\n\t                    \ttext: this.localize('labels'),\n\t                        tooltip: this.localize('labelsTip'),\n\t                        checked: this.getApiParam(\"labels\")===true || this.getApiParam(\"labels\")==\"true\"\n\t                    },'-',{\n\t                        itemId: 'area',\n\t                        text: this.localize('area'),\n\t                        tooltip: this.localize('areaTip'),\n\t                        glyph: 'xe76b@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'bar',\n\t                        text: this.localize('bar'),\n\t                        tooltip: this.localize('barTip'),\n\t                        glyph: 'xe768@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'line',\n\t                        text: this.localize('line'),\n\t                        tooltip: this.localize('lineTip'),\n\t                        glyph: 'xe773@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'stacked',\n\t                        text: this.localize('stacked'),\n\t                        tooltip: this.localize('stackedTip'),\n\t                        glyph: 'xe6c8@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'barline',\n\t                        text: this.localize('barline'),\n\t                        tooltip: this.localize('barlineTip'),\n\t                        glyph: 'xe779@Sencha-Examples'\n\t                    }]\n\t\t\t\t\t}\n\t\t\t\t}]\n            }]\n    \t});\n        this.callParent(arguments);\n    },\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \ttermsClicked: function(src, terms) {\n    \t\tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n    \t\t});\n    \t\tthis.setApiParam(\"query\", queryTerms && queryTerms.length>0 ? queryTerms : undefined);\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \tcorpusTermsClicked: function(src, terms) {\n    \t\tthis.setApiParam(\"query\", terms.map(function(term) {return term.getTerm()}));\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \tdocumentSelected: function(src, document) {\n\t\t\tthis.setApiParam(\"docIndex\", this.getCorpus().getDocument(document).getIndex());\n    \t\tthis.loadDocumentTerms();\n    \t},\n    \tdocumentsClicked: function(src, documents) {\n    \t\tif (documents.length==1) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, documents[0])\n    \t\t}\n    \t},\n    \tquery: function(src, query) {\n\t\t\tthis.fireEvent(\"termsClicked\", this, query)\n    \t}\n    },\n    \n    loadCorpusTerms: function(params) {\n    \t// if our corpus only has one document or if we have docIndex d\n    \tif (\n    \t\tthis.getCorpus().getDocumentsCount()<2 || // only one document\n    \t\tthis.getApiParam(\"mode\")==\"document\" || // in document mode\n    \t\tArray.from(this.getApiParam(\"docIndex\") || \"\").length>0 // we have a docIndex defined\n    \t\t) {\n    \t\treturn this.loadDocumentTerms();\n    \t}\n    \tif (!this.getApiParam(\"query\")) {\n        \tthis.getCorpus().getCorpusTerms().load({\n        \t\tparams: {\n        \t\t\tlimit: 5,\n        \t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tif (records.length==0) {\n        \t\t\t\tif (operation && operation.error) {\n        \t\t\t\t\tthis.showError(this.localize(\"noResults\")+\"<p style='color: red'>\"+operation.error+\"</p>\")\n        \t\t\t\t} else {\n        \t\t\t\t\tthis.showError(this.localize(\"noResults\"))\n        \t\t\t\t}\n        \t\t\t} else {\n            \t\t\tthis.setApiParam(\"query\", records.map(function(r) {return r.getTerm()}))\n            \t\t\tthis.loadCorpusTerms();\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t\treturn;\n    \t}\n    \tparams = params || {};\n    \t//this.segments.hide();\n    \tvar withDistributions = this.getApiParam(\"withDistributions\");\n    \tExt.applyIf(params, {\n    \t\tbins: this.getCorpus().getDocumentsCount(),\n\t\t\tlimit: 100, // should have query, so no limit \n\t    \tstopList: \"\" // automatic queries should be stopped already\n    \t});\n    \tvar docLabels = this.getCorpus().map(function(doc) {return doc.getTinyTitle()})\n    \tif (Ext.Array.unique(docLabels).length<docLabels.length) { // we have duplicates, add index\n    \t\tdocLabels = docLabels.map(function(doc,i) {return (i+1)+\")\"+ doc})\n    \t}\n    \tExt.applyIf(params, this.getApiParams());\n    \tthis.getCorpus().getCorpusTerms().load({\n    \t\tparams: params,\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tvar data = [], series = [], chartType = this.getApiParam('chartType');\n    \t\t\trecords.forEach(function(record, index) {\n    \t    \t\tvar term = record.get('term'), docIndex = record.get(\"docIndex\");\n    \t    \t\tvar color = this.getApplication().getColorForTerm(term, true);\n    \t    \t\trecord.get('distributions').forEach(function(r, i) {\n    \t    \t\t\tif (!data[i]) {\n    \t    \t\t\t\tdata[i] = {\"index\": docLabels[i]};\n    \t    \t\t\t}\n    \t    \t\t\tdata[i][\"_\"+index] = withDistributions=='relative' ? r.toFixed(7) : r;\n    \t    \t\t\tdata[i][\"term\"+index] = term;\n    \t    \t\t}, this);\n    \t    \t\t\n    \t    \t\t\n    \t    \t\tif (chartType!='bar') {\n    \t    \t\t\tvar kinds = chartType=='barline' ? [\"bar\",\"line\"] : [chartType];\n    \t    \t\t\tkinds.forEach(function(kind) {\n    \t    \t        \tseries.push({\n    \t    \t        \t\ttype: kind=='stacked' ? 'bar' : kind,\n    \t    \t    \t\t\ttitle: term,\n    \t    \t    \t\t\txField: 'index',\n    \t    \t    \t\t\tyField: '_'+index,\n    \t    \t    \t\t\tterm: term,\n    \t    \t    \t\t\tcolors: [color],\n    \t    \t    \t\t\tlabel: chartType=='barline' && kind=='bar' ? {\n    \t    \t    \t\t\t\tdisplay: 'none'\n    \t    \t    \t\t\t} : {\n    \t    \t    \t\t\t\tfield: \"term\"+index\n    \t    \t    \t\t\t}\n    \t    \t        \t})\n    \t    \t\t\t}, this);\n    \t    \t\t}\n    \t\t\t}, this);\n    \t\t\t\n    \t\t\tvar terms = records.map(function(r) {return r.getTerm()})\n    \t\t\tvar colors = terms.map(function(term) {\n\t    \t\t\treturn  this.getApplication().getColorForTerm(term, true);\n\t    \t\t}, this);\n\t    \t\tif (chartType=='bar') {\n\t\t    \t\tseries.push({\n\t\t    \t\t\ttype:'bar',\n\t\t    \t\t\ttitle: terms,\n\t\t\t    \t\tcolors: colors,\n\t\t    \t\t\txField: 'index',\n\t\t    \t\t\tyField: data.length>0 ? Object.keys(data[0]).filter(function(field) {return field.charAt(0)==\"_\"}) : undefined,\n    \t    \t\t\tlabel: {\n    \t    \t\t\t\tfield: records.map(function(r,i) {return \"term\"+i;})\n    \t    \t\t\t}\n\t\t    \t\t})\n\t    \t\t}\n\t    \t\t\n    \t    \tvar store = Ext.create('Ext.data.JsonStore', {\n    \t    \t\tfields: data.length>0 ? Object.keys(data[0]) : undefined,\n    \t    \t\tdata: data\n    \t    \t});\n    \t    \t\n    \t\t\tthis.buildChart({\n        \t\t\tstore: store,\n        \t\t\tseries: series,\n        \t\t\taxes: [{\n                \t\ttype: 'numeric',\n                \t\tposition: 'left',\n                \t\tincrement: 1,\n                \t\ttitle: {\n                \t\t\ttext: this.localize(this.getApiParam(\"withDistributions\")+\"Title\")\n                \t\t}\n        \t\t\t},{\n        \t\t\t\ttype: 'category',\n                \t\tposition: 'bottom',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(\"corpusTitle\")\n                \t\t}\n                \t\t\n        \t\t\t}]\n    \t\t\t})\n    \t\t},\n    \t\tscope: this\n    \t});\n  \n    },\n    \n    getItemToolTip: function (toolTip, record, ctx) {\n    \t\n    \tvar parts = ctx.field.split(\"_\"),\n    \t\tdocIndex = parts.length==2 ? ctx.index : parts[2],\n    \t\tpos = parseInt(parts[1]),\n    \t\ttitle = ctx.series.getTitle(),\n    \t\tterm = Ext.isArray(title) ? title[pos] : title,\n    \t\tcolors = ctx.series.getColors(),\n    \t\tcolor = colors.length==1 ? colors[0] : colors[pos];\n        var html = \"<span class='x-legend-item-marker' style='background:\"+color+\n        \t\t\"; left: 2px;'></span> <span style='padding-left: 1.2em; font-weight: bold;'>\"+\n        \t\tterm+\"</span>: \"+record.get(ctx.field)+\n    \t\t\t\"<br/><i>\"+this.getCorpus().getDocument(docIndex).getShortTitle()+\"</i>\"\n\t\tif (this.getApiParam(\"mode\")==\"corpus\") {\n    \t\thtml+=\"<div style='font-size: smaller'>\"+this.localize('dblClickItem')\n\t\t} else {\n\t\t\thtml+=\"<br/>\"+this.localize('segment')+\" \"+(ctx.index+1)\n\t\t}\n    \ttoolTip.setHtml(html);\n    },\n    \n\n    loadDocumentTerms: function(params) {\n    \tif (!this.getApiParam(\"query\")) {\n        \tthis.getCorpus().getCorpusTerms().load({\n        \t\tparams: {\n        \t\t\tlimit: this.getCorpus().getDocumentsCount()<2 ? 5 : 2,\n        \t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tthis.setApiParam(\"query\", records.map(function(r) {return r.getTerm()}))\n        \t\t\tthis.loadDocumentTerms();\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t\treturn;\n    \t}\n    \t//this.segments.show();\n    \tthis.setApiParam(\"mode\", \"document\"); // just to be sure\n    \tparams = params || {};\n    \tvar withDistributions = this.getApiParam(\"withDistributions\");\n    \tExt.applyIf(params, {\n\t\t\tlimit: 0, // always have query, so no limit, no stopList\n\t\t\tsort: 'termasc',\n\t\t\tstopList: undefined\n    \t});\n    \tvar docLabels = this.getCorpus().map(function(doc) {return doc.getTinyTitle()})\n    \tvar singleDoc;\n    \tif (this.getCorpus().getDocumentsCount()==1) {\n    \t\tsingleDoc=this.getCorpus().getDocument(0)\n    \t}\n    \telse {\n    \t\tsingleDoc=this.getCorpus().getDocument(this.getApiParam(\"docIndex\"))\n    \t}\n    \tExt.applyIf(params, this.getApiParams());\n    \t\n    \tthis.getCorpus().getDocumentTerms().load({\n    \t\tparams: params,\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tvar data = [], series = [],  chartType = this.getApiParam('chartType');\n    \t\t\tif (!singleDoc) { // legend is easier to read if sorted by term then doc\n        \t\t\trecords.sort(function(a,b) {\n        \t\t\t\tif (a.getTerm()==b.getTerm()) {\n        \t\t\t\t\treturn a.getDocIndex() - b.getDocIndex()\n        \t\t\t\t}\n        \t\t\t\treturn a.getTerm().localeCompare(b.getTerm())\n        \t\t\t})\n    \t\t\t}\n    \t\t\trecords.forEach(function(record, index) {\n    \t    \t\tvar term = record.get('term');\n    \t    \t\tvar docIndex = record.get('docIndex');\n    \t    \t\tvar color = singleDoc ? this.getApplication().getColorForTerm(term, true) : this.getApplication().getColor(docIndex, true);\n    \t    \t\tvar docIndex = record.get('docIndex');\n    \t    \t\trecord.get('distributions').forEach(function(r, i) {\n    \t    \t\t\tif (!data[i]) {\n    \t    \t\t\t\tdata[i] = {docIndex: docIndex, index: (i+1)};\n    \t    \t\t\t}\n    \t    \t\t\tdata[i][\"_\"+index+\"_\"+docIndex] = withDistributions=='relative' ? r.toFixed(7) : r;\n    \t    \t\t\tdata[i][\"term\"+index] = term;\n    \t    \t\t}, this);\n\n    \t    \t\tif (chartType!='bar') {\n    \t    \t\t\tvar kinds = chartType=='barline' ? [\"bar\",\"line\"] : [chartType];\n    \t    \t\t\tkinds.forEach(function(kind) {\n    \t    \t        \tseries.push({\n    \t    \t        \t\ttype: kind=='stacked' ? 'bar' : kind,\n    \t    \t    \t\t\ttitle: singleDoc ? term : (docIndex+1)+\") \"+term,\n    \t    \t    \t\t\txField: 'index',\n    \t    \t    \t\t\tyField: '_'+index+\"_\"+docIndex,\n    \t    \t    \t\t\tterm: term,\n    \t    \t    \t\t\tcolors: [color],\n    \t    \t    \t\t\tlabel: chartType=='barline' && kind=='bar' ? {\n    \t    \t    \t\t\t\tdisplay: 'none'\n    \t    \t    \t\t\t} : {\n    \t    \t    \t\t\t\tfield: \"term\"+index\n    \t    \t    \t\t\t}\n    \t    \t        \t})\n    \t    \t\t\t}, this);\n    \t    \t\t}\n    \t    \t\t\n    \t\t\t}, this);\n    \t\t\t\n\t    \t\tif (chartType=='bar') {\n\t    \t\t\tvar isOneTerm = Ext.Array.unique(records.map(function(r) {return r.getTerm()})).length;\n\t    \t\t\tvar terms = records.map(function(r) {return (1+r.get(\"docIndex\"))\t+\") \"+r.getTerm()})\n\t    \t\t\tvar colors = records.map(function(r) {\n\t\t    \t\t\treturn  isOneTerm ? this.getApplication().getColor(r.get(\"docIndex\"), true) : this.getApplication().getColorForTerm(r.getTerm(), true);\n\t\t    \t\t}, this);\n\n\t\t    \t\tseries.push({\n\t\t    \t\t\ttype:'bar',\n\t\t    \t\t\ttitle: terms.length>0 ? terms : this.localize(\"noResults\"),\n\t\t\t    \t\tcolors: colors,\n\t\t    \t\t\txField: 'index',\n\t\t    \t\t\tyField: data.length>0 ? Object.keys(data[0]).filter(function(field) {return field.charAt(0)==\"_\"}) : undefined,\n\t\t    \t\t\tlabel: {\n\t\t    \t\t\t\tfield: terms\n\t\t    \t\t\t}\n\t\t    \t\t})\n\t    \t\t}\n\n    \t\t\t\n    \t    \tvar store = Ext.create('Ext.data.JsonStore', {\n    \t    \t\tfields: data.length>0 ? Object.keys(data[0]) : undefined,\n    \t    \t\tdata: data\n    \t    \t});\n\n    \t\t\tthis.buildChart({\n        \t\t\tstore: store,\n        \t\t\tseries: series,\n        \t\t\taxes: [{\n                \t\ttype: 'numeric',\n                \t\tposition: 'left',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(this.getApiParam(\"withDistributions\")+\"Title\")\n                \t\t}\n        \t\t\t},{\n        \t\t\t\ttype: 'category',\n                \t\tposition: 'bottom',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(\"segmentsTitle\") + (singleDoc ? \" (\"+singleDoc.getShortTitle()+\")\" : \"\")\n                \t\t}\n                \t\t\n        \t\t\t}]\n    \t\t\t})\n    \t\t},\n    \t\tscope: this\n    \t});\n  \n    },\n\n    \n    buildChart: function(config) {\n    \tvar chartType = this.getApiParam('chartType'), labels = false;\n    \tif (this.getApiParam(\"labels\")===true || this.getApiParam(\"labels\")==\"true\") {labels=true}\n    \t\n    \tExt.applyIf(config, {\n    \t\tcls: this.getApiParam(\"mode\")\n    \t});\n\n    \tconfig.series.forEach(function(serie) {\n    \t\tExt.applyIf(serie, {\n\t\t\t\tstacked: serie.type=='bar' ? false : true,\n\t\t\t\tshowInLegend: chartType=='barline' && serie.type=='line' ? false : true,\n    \t\t\tsmooth: true,\n    \t\t\tshowMarkers: serie.type=='bar' ? false : true,\n    \t\t\tmarker: chartType=='barline' && serie.type=='line' ? null : {\n    \t\t\t    type: 'circle',\n    \t\t\t    radius: 2\n    \t\t\t},\n                style: {\n                    lineWidth: 1,\n                    fillOpacity: chartType=='barline' && serie.type=='bar' ? .01 : 1,\n                    strokeOpacity: chartType=='barline' && serie.type=='bar' ? .1 : 1\n                },\n                highlight: true,\n                highlightCfg: {\n                \tscaling: serie.type==\"bar\" ? 1.1 : 2\n                },\n    \t\t\tlabel: {\n//    \t\t\t\tdisplay: 'none'\n    \t\t\t},\n    \t\t\ttooltip: {\n                    trackMouse: true,\n                    renderer: this.getItemToolTip,\n                    scope: this\n    \t\t\t},\n                listeners: {\n                \titemclick: function(chart,item,event,eOpts ) {\n            \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n            \t\t\tif (this.blockClick) {return;} // set by dblclick to avoid menu disappearing\n            \t\t\tthis.blockClick = true // block other clicks within a sec\n            \t\t\tExt.defer(function() {\n            \t\t\t\tthis.blockClick = false;\n            \t\t\t}, 1000, this);\n                \t\tif (this.getApiParam(\"mode\")==\"document\") {\n                \t\t\tvar parts = item.field.split(\"_\"),\n                \t\t\t\tdocIndex = parts[2],\n                \t\t\t\tdoc = this.getCorpus().getDocument(docIndex),\n                \t\t\t\ttokens = doc.get('tokensCount-lexical'),\n                \t\t\t\tposition = parseInt(item.index  * tokens / parseInt(this.getApiParam(\"bins\")))\n                \t\t\tthis.dispatchEvent(\"documentIndexTermsClicked\", this, [{\n                    \t\t\tterm: item.series.term,\n                    \t\t\tdocIndex: parts[2],\n                    \t\t\tposition: position\n                    \t\t}]);                \t\t\t\n                \t\t} else {\n                \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n                \t\t\tvar me = this;\n                \t\t\tthis.clickTimer = setTimeout(function() {\n                    \t\t\tme.dispatchEvent(\"documentIndexTermsClicked\", me, [{\n                        \t\t\tterm: item.series.term,\n                        \t\t\tdocIndex: item.index\n                        \t\t}]);\n                \t\t\t}, 300)\n                \t\t\t\n                \t\t}\n                \t},\n                \titemdblclick: function(chart,item,event,eOpts )  {\n            \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n            \t\t\t// block future single clicks to allow menu to appear\n            \t\t\tthis.blockClick = true\n            \t\t\tExt.defer(function() {\n            \t\t\t\tthis.blockClick = false;\n            \t\t\t}, 1000, this);\n            \t\t\t// block future clicks\n                \t\tif (this.getApiParam(\"mode\")!=\"document\") {\n                \t\t\tvar m = Ext.create('Ext.menu.Menu', {\n                \t\t\t\titems: [{\n                \t    \t\t\t\ttext: this.localize(\"drillTerm\"),\n                \t    \t\t\t\ttooltip: this.localize(\"drillTermTip\"),\n//                \t    \t\t\t\tglyph: 'xf02d@FontAwesome',\n                \t    \t\t\t\thandler: function() {\n                \t    \t\t\t\t\tthis.setApiParams({\n                \t    \t\t\t\t\t\tmode: 'document',\n                \t    \t\t\t\t\t\tquery: item.series.term\n                \t    \t\t\t\t\t});\n                \t    \t\t\t\t\tthis.loadDocumentTerms();\n                \t    \t\t\t\t},\n                \t    \t\t\t\tscope: this\n                \t\t\t\t\t},{\n                \t    \t\t\t\ttext: this.localize(\"drillDocument\"),\n                \t    \t\t\t\ttooltip: this.localize(\"drillDocumentTip\"),\n//                \t    \t\t\t\tglyph: 'xf02d@FontAwesome',\n                \t    \t\t\t\thandler: function() {\n                \t    \t\t\t\t\tthis.setApiParams({\n                \t    \t\t\t\t\t\tmode: 'document',\n                \t    \t\t\t\t\t\tdocIndex: item.index\n                \t    \t\t\t\t\t});\n                \t    \t\t\t\t\tthis.loadDocumentTerms();\n                \t    \t\t\t\t},\n                \t    \t\t\t\tscope: this\n                \t\t\t\t\t}],\n                \t\t\t\t\tlisteners: {\n                \t\t\t\t\t\thide: function(m) {\n                \t\t\t\t\t\t\t// defer hiding otherwise click handler not called\n                \t\t\t\t\t\t\tExt.defer(function() {this.destroy()}, 200, m)\n                \t\t\t\t\t\t},\n                \t\t\t\t\t\tscope: this\n                \t\t\t\t\t}\n                \t\t\t}).showAt(event.pageX, event.pageY) \n                \t\t}\n                \t},\n                \tscope: this\n                }\n    \t\t})\n    \t\tExt.applyIf(serie.label, {\n                display: 'over',\n                field: 'index',\n                fontSize: 11,\n                translateY: chartType=='line' ? 9 : undefined\n    \t\t});\n    \t\tif (!labels) {serie.label.display=\"none\";} // hide label \n    \t}, this)\n    \tExt.applyIf(config, {\n    \t\tanimation: true,\n    \t    plugins: {\n    \t        ptype: 'chartitemevents',\n    \t        moveEvents: true\n    \t    },\n    \t\tlegend: {\n    \t\t\tdocked:'top',\n    \t\t\tlisteners: {\n    \t\t\t\titemclick: function(legend, record, dom, index) {\n    \t\t\t\t\t// make sure to hide related series\n    \t\t\t\t\tif (legend.getStore().getCount()<legend.chart.series.length && this.getApiParam(\"chartType\")==\"barline\") {\n        \t\t\t\t\tvar term = record.get(\"name\"), disabled = record.get(\"disabled\");\n        \t\t\t\t\tlegend.chart.series.forEach(function(serie) {\n        \t\t\t\t\t\tif (serie.getTitle()==term) {\n        \t\t\t\t\t\t\tserie.setHidden(disabled);\n        \t\t\t\t\t\t\t\n        \t\t\t\t\t\t}\n        \t\t\t\t\t})\n        \t\t\t\t\tlegend.chart.redraw(); // not working?\n    \t\t\t\t\t}\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}\n    \t\t},\n    \t\tinteractions: ['itemhighlight','crosszoom'],\n    \t    listeners: {}\n    \t});\n    \tExt.applyIf(config.listeners, {\n\t        itemhighlightchange: function (chart, item) {\n\t            chart.el.dom.style.cursor = item ? 'pointer' : '';\n\t        },\n\t        afterrender : function() {\n\t        \treturn // TODO: this seems to cause problems, perhaps not destroying properly?\n\t        \tExt.defer(function() { // seem to need to defer\n\t\t        \tExt.tip.QuickTipManager.register({\n\t\t        \t\ttarget: this.getTargetEl().down(\".x-legend-container\"),\n\t                 \ttext: this.localize(\"toggleTip\")\n\t\t        \t});\n\t        \t},1, this)\n\t        \t\n\t        },\n\t        scope: this\n    \t})\n    \tconfig.axes.forEach(function(axis) {\n    \t\tExt.applyIf(axis, {\n    \t\t\ttitle: {},\n    \t\t\tlabel: {}\n    \t\t})\n    \t\tExt.applyIf(axis.title, {scaling: .75});\n    \t\tExt.applyIf(axis.label, {scaling: .75});\n    \t\tif (axis.type=='category') {\n    \t\t\tvar titles = \"\";\n    \t\t\tconfig.store.each(function(r) {titles+=r.get(\"index\")})\n    \t\t\tif (titles.length>this.getTargetEl().getWidth()/9) {\n            \t\tExt.applyIf(axis.label, {rotate: {degrees:-30}});\n    \t\t\t}\n        \t\tExt.applyIf(axis, {\n        \t\t\tlabelInSpan: true\n        \t\t})\n    \t\t}\n    \t}, this)\n    \t    \t\n    \t// remove existing chart\n    \tthis.query('chart').forEach(function(chart) {this.remove(chart, true);}, this);\n    \t\n    \t// create new chart\n\t\tvar chart = Ext.create(\"Ext.chart.CartesianChart\", config);\n    \tthis.add(chart);\n    },\n    \n    reloadFromChart: function() {\n    \tvar chart = this.down('chart');\n    \tif (chart) {\n    \t\tvar terms = [];\n    \t\tchart.series.forEach(function(serie) {\n    \t\t\tterms.push(serie.getTitle());\n    \t\t});\n    \t\tthis.fireEvent(\"termsClicked\", this, terms);\n    \t}\n    }\n\n\n });","Ext.define('Voyant.panel.NoTool', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.notool',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttool: undefined\n    \t}\n    },\n    config: {\n    \thtml: undefined,\n    \tnotYetImplemented: [\"Centroid\",\"DocumentInputAdd\",\"DocumentTypeCollocateFrequenciesGrid\",\"EntitiesBrowser\",\"Equalizer\",\"FeatureClusters\",\"Flowerbed\",\"KwicsTagger\",\"Lava\",\"Mandala\",\"MicroSearch\",\"NetVizApplet\",\"PaperDrill\",\"RezoViz\",\"Sunburst\",\"Termometer\",\"Ticker\",\"TokensViz\",\"ToolBrowser\",\"ToolBrowserLarge\",\"VoyeurTagline\",\"WordCloud\",\"VoyeurTagline\",\"WordCountFountain\"]\n    },\n    constructor: function() {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title')\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n\tlisteners: {\n\t\tboxready: function(container, width, height) {\n\t\t\tvar tool = this.getApiParam(\"notool\");\n\n\t\t\tif (tool) {\n\t\t\t\tif (Ext.isArray(tool)) {tool=tool[0]}\n\t\t\t\t\n\t\t\t\tvar msg = \"\";\n\t\t\t\t\n\t\t\t\t// check to see if this is a tool that's recognized but not implemented\n\t\t\t\tvar oldTools = this.getNotYetImplemented();\n\t\t\t\tfor (var i=0, len=oldTools.length; i<len; i++) {\n\t\t\t\t\tif (tool==oldTools[i]) {\n\t\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t\t    message: new Ext.Template(this.localize('notImplemented')).applyTemplate([tool]),\n\t\t\t\t\t\t    buttons: Ext.Msg.YESNO,\n\t\t\t\t\t\t\tbuttonText: {yes: this.localize(\"currentButton\"), no: this.localize(\"oldButton\")},\n\t\t\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t\t\t    scope: this,\n\t\t\t\t\t\t    fn: function(btn) {\n\t\t\t\t\t\t    \tvar url;\n\t\t\t\t\t\t    \tif (btn=='yes') {\n\t\t\t\t\t\t    \t\turl = this.getNewUrl();\n\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \telse {\n\t\t\t\t\t\t    \t\turl = \"http://voyant-tools.org/tool/\"+tool+\"/\";\n\t\t\t\t\t\t\t    \tvar query = Ext.Object.fromQueryString(document.location.search)\n\t\t\t\t\t\t\t    \tdelete query['tool']\n\t\t\t\t\t\t\t    \tqueryString = Ext.Object.toQueryString(query);\n\t\t\t\t\t\t\t    \tif (queryString) {\n\t\t\t\t\t\t\t\t    \turl += \"?\"+queryString\n\t\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \twindow.location.replace(url);\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tExt.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: new Ext.Template(this.localize('badToolSpecified')).applyTemplate([tool]),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t    scope: this,\n\t\t\t\t    fn: function(btn) {\n\t\t\t\t    \twindow.location.replace(this.getNewUrl());\n\t\t\t\t    }\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t// no tool specified, so just redirect\n\t\t\telse if (!this.config.html) {\n\t\t\t\tExt.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('noToolSpecified'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t    scope: this,\n\t\t\t\t    fn: function(btn) {\n\t\t\t\t    \twindow.location.replace(this.getNewUrl());\n\t\t\t\t    }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\tgetNewUrl: function() {\n    \tvar query = Ext.Object.fromQueryString(document.location.search)\n    \tdelete query['tool']\n    \tqueryString = Ext.Object.toQueryString(query);\n    \treturn this.getApplication().getBaseUrl()+(queryString ? \"?\"+queryString : \"\")\n\t}\n});","Ext.define('Voyant.panel.VoyantFooter', {\n\textend: 'Ext.container.Container',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.voyantfooter',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n\theight: 18,\n\tcls: 'x-tab-bar-default voyant-footer',\n\tlisteners: {\n\t\tboxready: function(container, width, height) {\n\t\t\tvar parts = [\n\t\t\t\t\"<a href='\"+container.getBaseUrl()+\"docs/' target='voyantdocs'>\"+container.localize('voyantTools')+\"</a> \",\n\t\t\t\t\", <a href='https://csdh-schn.org/stefan-sinclair-in-memoriam/'>St&eacute;fan Sinclair</a> &amp; <a href='https://geoffreyrockwell.com'>Geoffrey Rockwell</a>\",\n\t\t\t\t\" (<a href='https://creativecommons.org/licenses/by/4.0/' target='_blank'><span class='cc'>c</span></a> \"+ new Date().getFullYear() +\")\",\n\t\t\t\t\" <a class='privacy' href='\"+this.getBaseUrl()+\"docs/#!/guide/about-section-privacy-statement' target='top'>\"+container.localize('privacy')+\"</a>\",\n\t\t\t\t\" v. \"+Voyant.application.getVersion()\n\t\t\t];\n\t\t\tvar footer = '';\n\t\t\tvar footerWidth = 0;\n\t\t\tvar partWidth;\n\t\t\tvar el = container.getEl();\n\t\t\tfor (var i=0;i<parts.length;i++) {\n\t\t\t\tpartWidth = el.getTextWidth(parts[i].replace(/data-qtip.+?--\u003e/,\">\").replace(/<.+?>/g, \"\"));\n\t\t\t\tif (footerWidth+partWidth < width) {\n\t\t\t\t\tfooter += parts[i];\n\t\t\t\t\tfooterWidth += partWidth;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontainer.update(footer);\n        \tExt.tip.QuickTipManager.register({\n                target: container.getTargetEl().dom.querySelector(\".privacy\"),\n                text: this.localize('privacyMsg')\n            });\n\t\t},\n\t\tbeforedestroy: function(container) {\n    \t\tExt.tip.QuickTipManager.unregister(container.getTargetEl().dom.querySelector(\".privacy\"));\n    \t}\n\t}\n});","Ext.define('Voyant.panel.VoyantHeader', {\n\textend: 'Ext.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.voyantheader',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    constructor: function(config) {\n    \tExt.apply(this, {\n    \t\tid: 'voyantheader',\n    \t\ttitle: '',\n    \t\tlayout : 'fit',\n    \t\thtml: '<div id=\"logo-container\"></div>',\n    \t\tcollapseMode : undefined,\n\t\t\tcollapsible: true,\n\t\t\tanimCollapse: false,\n\t\t\ttitleCollapse: false,\n\t\t\tfloatable: false,\n\t\t\theader: true,\n\t\t\thideCollapseTool: true,\n\t\t\tlisteners: {\n\t\t\t\tcollapse: this.onCollapse\n\t\t\t},\n\t\t\ttitleAlign: 'center'\n    \t});\n        this.callParent(arguments);\n        \n        Ext.applyIf(config, {\n    \t\tmoreTools: ['corpusset','scatterplot','termsradio'],\n\t\t\tincludeTools: {\n\t\t\t\tsave: true,\n\t\t\t\tplus: true,\n\t\t\t\thelp: true,\n\t\t\t\tlanguage: this.getLanguageToolMenu(),\n\t\t\t\thome: {\n\t\t\t\t\ttype: 'home',\n\t\t\t\t\ttooltip: this.localize(\"homeTip\"),\n\t\t\t\t\txtype: 'toolmenu',\n\t                glyph: 'xf015@FontAwesome',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar panel = this.up(\"panel\")\n\t        \t\t\tExt.Msg.confirm(panel.localize('home'), panel.localize('homeConfirm'), function(buttonId) {\n\t        \t\t\t\tif (buttonId=='yes') {\n\t        \t\t\t\t\tdocument.location.href = panel.getBaseUrl()\n\t        \t\t\t\t}\n\t        \t\t\t}, this);\n\t        \t\t}\n\t\t\t\t}\n\t\t\t}\n        })\n        \n    \tthis.mixins['Voyant.panel.Panel'].constructor.call(this, config);\n    },\n    \n    onCollapse: function(panel) {\n    \t// the title may be in flux when collapsing, so call defer setting of title\n    \tExt.defer(function() {this.setTitle(\"<img src='\"+this.getBaseUrl()+\"resources/images/voyant-logo-tiny.png' style='vertical-align: middle' alt='Voyant Tools' /> \"+this.localize('title'))}, 10, panel)\n    }\n});\n","Ext.define('Voyant.panel.CorpusSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.VoyantTabPanel','Voyant.panel.Cirrus', 'Voyant.panel.Summary', 'Voyant.panel.CorpusTerms', 'Voyant.panel.Reader', 'Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts', 'Voyant.panel.Phrases', 'Voyant.panel.DocumentTerms','Voyant.panel.CorpusCollocates','Voyant.panel.CollocatesGraph','Voyant.panel.StreamGraph','Voyant.panel.TermsBerry'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.corpusset',\n\tisConsumptive: true,\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tpanels: undefined\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'border',\n\theader: false,\n\titems: [{\n    \tregion: 'west',\n    \tflex: 3,\n    \tlayout: 'fit',\n        moreTools: ['cirrus','corpusterms'],\n        xtype: 'voyanttabpanel',\n    \tsplit: {width: 5},\n    \ttabBarHeaderPosition: 0,\n    \titems: [{\n\t    \txtype: 'cirrus'\n    \t},{\n\t    \txtype: 'corpusterms'\n    \t}, {\n    \t\txtype: 'collocatesgraph'\n    \t}]\n    },{\n        region: 'center',\n        flex: 3,\n        layout: 'fit',\n        xtype: 'voyanttabpanel',\n    \ttabBarHeaderPosition: 0,\n        items: [{\n\t        xtype: 'reader' // termsradio added and set to default during loadedCorpus below when in non-consumptive mode\n        },{\n\t        xtype: 'termsberry'\n        }]\n    }, {\n    \tregion: 'east',\n    \tflex: 3,\n    \tlayout: 'fit',\n        xtype: 'voyanttabpanel',\n    \tsplit: {width: 5},\n    \ttabBarHeaderPosition: 0,\n    \tmoreTools: ['trends','collocatesgraph','corpuscollocates'],\n        items: [{\n\t    \txtype: 'trends'\n        },{\n\t    \txtype: 'documentterms'\n        }]\n    }, {\n    \tregion: 'south',\n    \tflex: 2,\n    \tsplit: {width: 5},\n    \tlayout: 'border',\n//    \tlayout: {\n//    \t\ttype: 'hbox',\n//    \t\talign: 'stretch'\n//    \t},\n    \titems: [{\n\t\t\t\tlayout: 'fit',\n\t\t\t\tregion: 'center',\n    \t\t\tflex: 1,\n    \t        xtype: 'voyanttabpanel',\n    \t    \tsplit: {width: 5},\n    \t    \ttabBarHeaderPosition: 0,\n    \t\t\tmoreTools: ['summary','documents','phrases'],\n    \t\t\titems: [{\n\t    \t\t\txtype: 'summary'\n    \t\t\t},{\n\t    \t\t\txtype: 'documents'\n    \t\t\t},{\n\t    \t\t\txtype: 'phrases'\n    \t\t\t}]\n    \t\t},{\n\t\t\t\tlayout: 'fit',\n\t\t\t\tregion: 'east',\n    \t\t\tflex: 1,\n    \t        xtype: 'voyanttabpanel',\n    \t    \tsplit: {width: 5},\n    \t    \ttabBarHeaderPosition: 0,\n    \t\t\tmoreTools: ['contexts','documentterms'],\n    \t\t\titems: [{\n\t    \t\t\txtype: 'contexts'\n    \t\t\t},{\n\t    \t\t\txtype: 'bubblelines' // is set to default during loadedCorpus below when in non-consumptive mode\n    \t\t\t},{\n\t    \t\t\txtype: 'correlations'\n    \t\t\t}]\n    \t}]\n    }],\n    listeners: {\n    \tboxready: function() {\n    \t\tvar panelsString = this.getApiParam(\"panels\");\n    \t\tif (panelsString) {\n    \t\t\tvar panels = panelsString.toLowerCase().split(\",\");\n    \t\t\tvar tabpanels = this.query(\"voyanttabpanel\");\n    \t\t\tfor (var i=0, len=panels.length; i<len; i++) {\n    \t\t\t\tvar panel = panels[i];\n    \t\t\t\tif (panel && Ext.ClassManager.getByAlias('widget.'+panel) && tabpanels[i]) {\n    \t\t\t\t\tvar tabpanel = tabpanels[i];\n    \t\t\t\t\tif (tabpanel.getActiveTab().isXType(panel)) {continue;} // already selected\n    \t\t\t\t\ttabpanel.items.each(function(item, index) {\n    \t\t\t\t\t\tif (item.isXType(panel)) {\n    \t\t\t\t\t\t\tthis.setActiveTab(index)\n    \t\t\t\t\t\t\treturn false\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}, tabpanel)\n    \t\t\t\t\tif (tabpanel.getActiveTab().isXType(panel)) {continue;} // already switched\n    \t\t\t\t\ttabpanel.getActiveTab().replacePanel(panel); // switch to specified panel\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\t// add an easter egg\n    \t\tvar cirrus = this.down('cirrus');\n    \t\tvar me = this;\n    \t\tif (cirrus) {\n    \t\t\tvar toolbar = cirrus.down('toolbar');\n    \t\t\ttoolbar.add({xtype: 'tbfill'})\n    \t\t\ttoolbar.add({\n    \t\t\t\ttext: ' ',\n    \t\t\t\tlisteners: {\n    \t\t\t\t\tclick: {\n    \t\t\t\t\t\tfn: function() {\n\t        \t\t\t\t\tme.add({\n\t        \t\t\t\t\t\tregion: 'north',\n\t        \t\t\t\t\t\twidth: '100%',\n\t    \t\t\t\t\t\t\thtml: '<div align=\"center\"><table><tr><td><img src=\"http://stefansinclair.name/wordpress/wp-content/uploads/2011/07/Sinclair_Stefan_small.jpg\" style=\"height: 60px\"></td><td style=\"text-align: center; padding-left: 2em; padding-right: 2em;\">By Athena, you found us hidden<br>up here between the panels!</td><td><img src=\"http://geoffreyrockwell.com/images/home_09.jpg\" style=\"height: 60px\"></td></tr></table></div>'\n\t        \t\t\t\t\t})\n\t        \t\t\t\t}, single: true\n    \t\t\t\t\t},\n    \t\t\t\t\trender: function(b) {\n    \t\t\t\t\t\tb.getTargetEl().dom.className=''\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t});\n    \t\t}\n    \t\t\n    \t},\n    \tloadedCorpus: function(src, corpus) {\n    \t\tif (this.hasCorpusAccess(corpus)==false && !this.getApiParam('panels')) {\n    \t\t\tvar tabpanels = this.query(\"voyanttabpanel\");\n//    \t\t\ttabpanels[1].add({xtype: 'termsradio'}); // reader\n    \t\t\ttabpanels[1].setActiveTab(1); // reader\n    \t\t\ttabpanels[1].getActiveTab().fireEvent(\"loadedCorpus\", src, corpus); // make sure to load corpus\n    \t\t\ttabpanels[4].setActiveTab(1); // contexts\n    \t\t}\n    \t\tif (corpus.getDocumentsCount()>30) {\n    \t\t\tvar bubblelines = this.down('bubblelines');\n    \t\t\tif (bubblelines) {\n    \t\t\t\tbubblelines.up('voyanttabpanel').remove(bubblelines)\n    \t\t\t}\n    \t\t}\n    \t},\n    \tpanelChange: function(src) {\n    \t\tvar panels = [];\n    \t\tthis.query(\"voyanttabpanel\").forEach(function(item) {\n    \t\t\tpanels.push(item.getActiveTab().xtype)\n    \t\t})\n    \t\tthis.getApplication().setApiParam('panels', panels.join(','))\n    \t}\n    }\n})","Ext.define('Voyant.panel.ScatterSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.ScatterPlot','Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.scatterset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'hbox',\n\theader: false,\n\titems: [{\n    \tflex: 3,\n    \theight: '100%',\n        xtype: 'scatterplot'\n    },{\n    \tsplit: {width: 5},\n        flex: 1,\n    \theight: '100%',\n        layout: 'vbox',\n        defaults: {\n        \twidth: '100%',\n        \tflex: 1\n        },\n        items: [{\n        \txtype: 'documents',\n        \tcollapsible: true\n        },{\n        \txtype: 'trends',\n        \tcollapsible: true\n        },{\n        \txtype: 'contexts',\n        \tcollapsible: true\n        }]\n    }]\n})","Ext.define('Voyant.panel.Subset', { \n\t\n\t\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\talias: 'widget.subset',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tdocumentFilename: ['pubDate','title'],\n    \t\tdocumentFormat: 'SOURCE'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n\t\tinDocumentsCountOnly: false,\n\t\tstopList: 'auto',\n\t\tstore: undefined\n    },\n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);    \t\n    },\n    \n    \n    initComponent: function(config) {\n        var me = this;\n\n        Ext.applyIf(me, {\n        \tintroHtml: '',\n        \tfieldItems: [{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('titleLabel'),\n\t        \t\ttokenType: 'title'\n        \t\t},{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('authorLabel'),\n\t        \t\ttokenType: 'author'\n        \t\t},{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('lexicalLabel')\n        \t}],\n        \tfieldColumns: 2\n        });\n        \n        Ext.applyIf(me, {\n        \tintro: {\n        \t\tmargin: '5 0 5 0',\n        \t\tlayout: 'center',\n        \t\titems: {\n        \t\t\titemId: 'intro',\n            \t\thtml: me.introHtml\n        \t\t}\n        \t},\n        \tfields: {\n\t\t\t\txtype: 'container',\n        \t\tlayout: 'center',\n        \t\titems: {\n    \t\t\t\txtype: 'container',\n        \t\t\tmaxWidth: 1200,\n        \t\t\tlayout: {\n        \t\t\t\ttype: 'table',\n        \t\t\t\tcolumns: me.fieldColumns\n        \t\t\t},\n        \t\t\t// wrap in another container otherwise the tip won't work\n        \t\t\titems: me.fieldItems.map(function(item) {return {\n        \t\t\t\txtype: 'container',\n            \t\t\tdefaults: {\n            \t\t\t\tmargin: '5 10 5 10',\n                    \t\tinDocumentsCountOnly: me.getInDocumentsCountOnly(),\n                    \t\tstopList: me.getStopList(),\n                    \t\tshowAggregateInDocumentsCount: true,\n                    \t\tisDocsMode: true,\n                    \t\tflex: 1,\n                    \t\tmaxWidth: 800,\n                    \t\tlabelAlign: 'right'\n            \t\t\t},\n        \t\t\t\titems: Ext.applyIf(item, {\n        \t\t\t\t\tfieldLabel: me.localize((item.tokenType ? item.tokenType : 'lexical')+'Label')\n        \t\t\t\t})\n        \t\t\t}}, this)\n        \t\t}\n        \t},\n        \tfoot: {\n        \t\tlayout: 'center',\n        \t\tmargin: '20 0 0 0',\n        \t\titems: {\n        \t\t\txtype: 'container',\n        \t\t\tlayout: {\n        \t\t\t\ttype: 'hbox',\n        \t\t\t\talign: 'middle'\n        \t\t\t},\n        \t\t\tdefaults: {\n    \t        \t\tmargin: '0 5 0 5',\n//    \t        \t\tscale: 'large',\n    \t        \t\twidth: 200\n        \t\t\t},\n        \t\t\titems:  [{\n    \t        \t\txtype: 'button',\n    \t        \t\titemId: 'export',\n\t                    glyph: 'xf08e@FontAwesome',\n    \t        \t\ttext: this.localize('sendToVoyantButton'),\n    \t        \t\thandler: me.handleSendToVoyant,\n    \t        \t\tscope: me\n            \t\t},{\n    \t        \t\txtype: 'button',\n\t\t\t\t    \tglyph: 'xf019@FontAwesome',\n    \t        \t\titemId: 'download',\n    \t        \t\ttext: this.localize('downloadButton'),\n    \t        \t\thandler: me.handleExport,\n    \t        \t\tscope: me\n            \t\t},{\n            \t\t\txtype: 'container',\n            \t\t\thidden: true,\n            \t\t\titemId: 'statuscontainer',\n            \t\t\tlayout: 'vbox',\n            \t\t\titems: [{\n            \t\t\t\titemId: 'status',\n            \t\t\t\tbodyStyle: 'text-align: center',\n            \t\t\t\twidth: 200\n            \t\t\t},{\n            \t\t\t\txtype: 'container',\n            \t\t\t\twidth: 200,\n            \t\t\t\titems: {\n            \t    \t\t\txtype: 'sparklineline',\n            \t    \t\t\tchartRangeMin: 0,\n            \t    \t\t\titemId: 'sparkline',\n            \t    \t\t\tmargin: '0 0 0 10',\n            \t    \t\t\tvalues: [1,1],\n            \t    \t\t\theight: 20,\n            \t    \t\t\twidth: 200\n            \t\t\t\t}\n            \t\t\t}]\n            \t\t}]\n        \t\t}\n        \t}\n        })\n\n        Ext.applyIf(me, {\n        \titems: [me.intro, me.fields, me.foot]\n        });\n        \n    \tme.on('loadedCorpus', function(src, corpus) {\n    \t\tme.getStore().setCorpus(corpus);\n    \t\tif (me.getInitialConfig('introHtml')==undefined && me.getInitialConfig('intro')==undefined) {\n    \t\t\t me.queryById('intro').setHtml(corpus.getString())\n    \t\t}\n    \t}, me);\n    \t\n    \tme.on('query', function(src, queries) {\n    \t\tthis.performAggregateQuery(this.getAggregateQuery());\n    \t});\n    \t\n    \tme.setStore(Ext.create('Voyant.data.store.DocumentQueryMatches'))\n        me.callParent([config]);\n        \n    },\n    \n    handleSendToVoyant: function() {\n    \tif (!this.getStore().lastOptions || !this.getStore().lastOptions.params.query) {\n    \t\t// there's currently no query, so give the option of opening the current corpus in a new window\n    \t\tExt.Msg.alert(this.localize('sendToVoyantButton'), new Ext.XTemplate(this.localize('sendToVoyantNoQuery')).apply([this.getBaseUrl()+\"?corpus=\"+this.getStore().getCorpus().getId()]))\n    \t} else {\n    \t\t// try spawning a new corpus with the query\n    \t\tvar me = this;\n        \tthis.mask(\"Creating corpus\u2026\");\n        \tthis.getStore().load({\n        \t\tparams: {\n        \t\t\tquery: this.getStore().lastOptions.params.query,\n        \t\t\tcreateNewCorpus: true\n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tme.unmask();\n        \t\t\tif (success && records && records.length==1) {\n            \t\t\tvar corpus = operation.getProxy().getReader().metaData;\n        \t\t\t\tvar url = me.getBaseUrl()+\"?corpus=\"+corpus;\n        \t\t\t\tme.openUrl(url);\n        \t\t\t}\n        \t\t}\n        \t})\n    \t}\n    },\n    \n    handleExport: function() {\n    \tif (!this.getStore().lastOptions || !this.getStore().lastOptions.params.query) {\n    \t\tthis.downloadFromCorpusId(this.getStore().getCorpus().getId());\n    \t} else {\n    \t\tvar record = this.getStore().getAt(0);\n    \t\tif (this.getStore().lastOptions.params.query && record && record.getCount()==0) {\n    \t\t\tthis.showMsg({message: this.localize('noMatches')})\n    \t\t} else {\n    \t    \tthis.getStore().load({\n    \t    \t\tparams: {\n    \t    \t\t\tquery: this.getStore().lastOptions.params.query,\n    \t    \t\t\tcreateNewCorpus: true,\n    \t    \t\t\ttemporaryCorpus: true\n    \t    \t\t},\n    \t    \t\tcallback: function(records, operation, success) {\n    \t    \t\t\tif (success && records && records.length==1) {\n    \t    \t    \t\tthis.downloadFromCorpusId(operation.getProxy().getReader().metaData);\n    \t    \t\t\t}\n    \t    \t\t},\n    \t    \t\tscope: this\n    \t    \t})\n    \t\t}\n    \t}\n    },\n    \n    openDownloadCorpus: function(corpus) {\n\t\tvar url = this.getTromboneUrl()+\"?corpus=\"+corpus+\"&tool=corpus.CorpusExporter&outputFormat=zip\"+\n\t\t\t\"&zipFilename=DownloadedVoyantCorpus-\"+corpus+\".zip\"+\n\t\t\t(this.getApiParam(\"documentFormat\") ? \"&documentFormat=\"+this.getApiParam(\"documentFormat\") : '')+\n\t\t\t(this.getApiParam(\"documentFilename\") ? \"&documentFilename=\"+this.getApiParam(\"documentFilename\") : '')\n\t\tthis.openUrl(url)\n    },\n\n    performAggregateQuery: function(query) {\n    \tvar me = this, statuscontainer = me.queryById('statuscontainer'), status = me.queryById('status'), spark = me.queryById('sparkline');\n\t\tif (statuscontainer) {statuscontainer.show();}\n\t\tif (status) {status.setHtml(new Ext.XTemplate('{0:plural(\"documents\")} matching.').apply([0]))}\n\t\tif (spark) {spark.setValues([0,0]);}\n    \tif (query) {\n        \tvar docsCount = this.getStore().getCorpus().getDocumentsCount();\n        \tthis.getStore().load({\n        \t\tparams: {\n        \t\t\tquery: query,\n        \t\t\twithDistributions: true,\n        \t\t\tbins: docsCount > 100 ? 100 : docsCount \n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tvar exp = me.queryById('export');\n        \t\t\tvar spark = me.queryById('sparkline');\n        \t\t\tif (success && records && records.length==1) {\n        \t\t\t\tif (status) {\n        \t\t\t\t\tstatus.setHtml(new Ext.XTemplate('{0:plural(\"document\")} matching.').apply([records[0].getCount()]))\n        \t\t\t\t}\n        \t\t\t\tif (spark) {\n            \t\t\t\tspark.setValues(records[0].getDistributions())\n        \t\t\t\t}\n        \t\t\t}\n        \t\t}\n        \t})\n    \t} else if (this.getStore().lastOptions) { // set query to undefined so that send/export buttons work properly\n    \t\tthis.getStore().lastOptions.params.query = undefined\n    \t}\n    },\n    \n    getAggregateQuery: function() {\n\t\tvar aggregateQueries = [];\n\t\tExt.ComponentQuery.query('field', this).forEach(function(field) {\n\t\t\tif (field.getTokenType && field.getValue) {\n\t\t\t\tvar tokenType = field.getTokenType();\n\t\t\t\tvar vals = Ext.Array.from(field.getValue());\n\t\t\t\tif (vals.length>0) {\n\t\t\t\t\tif (vals.length>0) {\n        \t\t\t\taggregateQueries.push(\"+(\"+vals.map(function(val) {\n        \t\t\t\t\treturn tokenType+\":\"+val\n        \t\t\t\t}).join(\"|\")+\")\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn aggregateQueries.join(\" \");\n    }\n})\n","Ext.define('Voyant.panel.CollocatesSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.ScatterPlot','Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.collocatesset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'vbox',\n\theader: false,\n\titems: [{\n\t\tlayout: 'hbox',\n\t\talign: 'stretch',\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tflex: 2,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'corpusterms'\n        },{\n        \txtype: 'documentterms'\n        },{\n        \txtype: 'corpuscollocates'\n        }]\n    },{\n    \twidth: '100%',\n    \theight: '100%',\n    \tsplit: {width: 5},\n\t\tlayout: 'hbox',\n\t\tflex: 3,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'contexts'\n        },{\n        \txtype: 'collocatesgraph'\n        }]\n    }]\n})","Ext.define('Voyant.panel.BubblelinesSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.Bubblelines','Voyant.panel.Contexts', 'Voyant.panel.Reader'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.bubblelinesset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'vbox',\n\theader: false,\n\titems: [{\n\t\twidth: '100%',\n\t\theight: '100%',\n    \txtype: 'bubblelines',\n    \tflex: 5\n    },{\n    \twidth: '100%',\n    \theight: '100%',\n    \tsplit: {width: 5},\n\t\tlayout: 'hbox',\n\t\tflex: 4,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'contexts'\n        },{\n        \txtype: 'reader'\n        }]\n    }]\n})","Ext.define('Voyant.panel.CustomSet', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.customset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tlayout: undefined,\n\t\t\ttableLayout: undefined\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\theader: false,\n\theight: '100%',\n\twidth: '100%',\n\t\n    constructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // force api load\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n\t\tif (this.getApiParam('layout')) {\n\t\t\tExt.apply(this,{\n\t\t\t\tlayout: 'border',\n\t\t\t\titems: []\n\t\t\t})\n\t\t} else if (this.getApiParam('tableLayout')) {\n\t\t\tthis.initTableLayout();\n\t\t}\n\t\tthis.callParent()\n    },\n\t\n\tlisteners: {\n\t\tloadedCorpus: function(src, corpus) {\n\t\t\tif (this.getApiParam('layout')) { // not sure why, but we seem to need to fire event for child panels\n\t\t\t\tthis.query(\"panel\").forEach(function(p) {\n\t\t\t\t\tp.fireEvent(\"loadedCorpus\", src, corpus);\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tboxready: function(panel) {\n\t\t\tif (this.getApiParam('layout')) {\n\t\t\t\tthis.initBorderLayoutComponents();\n\t\t\t} else if (this.getApiParam('tableLayout')) {\n\t\t    \tthis.doTableSizing();\n\t\t    \tthis.on('resize', function(panel, newwidth, newheight, oldwidth, oldheight) {\n\t\t\t\t\tif (oldwidth !== undefined && oldheight !== undefined) {\n\t\t\t        \tvar widthRatio = newwidth/oldwidth;\n\t\t\t        \tvar heightRatio = newheight/oldheight;\n\t\t\t        \tthis.doTableSizing(widthRatio, heightRatio);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t} else {\n\t\t\t\tthis.showError(this.localize('noLayoutSpecified'))\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\t\n\tinitBorderLayoutComponents: function() {\n        var layoutString = decodeURI(this.getApiParam('layout'))\n        \t.replace(/r1/g, 'region')\n\t        .replace(/i1/g, 'items')\n\t        .replace(/s1/g, 'split')\n\t        .replace(/c1/g, 'collapsible')\n\t        .replace(/c2/g, 'collapsed')\n\t        .replace(/w1/g, 'width')\n\t        .replace(/h1/g, 'height')\n\t        .replace(/p1/g, '%')\n\t        .replace(/\"x1\":\"/g, '\"xtype\":\"')\n\t        .replace(/c3/g, 'center')\n\t        .replace(/n1/g, 'north')\n\t        .replace(/e1/g, 'east')\n\t        .replace(/s2/g, 'south')\n\t        .replace(/w2/g, 'west')\n\t    \t.replace(/\"xtype\":\"(\\w+)\"/g, function(match, tool) {\n            \tif (!Ext.ClassManager.getByAlias(\"widget.\"+tool.toLowerCase())) {\n\t\t            if (tool==\"Links\") {tool=\"CollocatesGraph\";}\n\t\t            else if (tool==\"CorpusGrid\") {tool=\"Documents\";}\n\t\t            else if (tool==\"CorpusSummary\") {tool=\"Summary\";}\n\t\t            else if (tool==\"CorpusTypeFrequenciesGrid\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentInputAdd\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentTypeCollocateFrequenciesGrid\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentTypeFrequenciesGrid\") {tool=\"DocumentTerms\";}\n\t\t            else if (tool==\"DocumentTypeKwicsGrid\") {tool=\"Contexts\";}\n\t\t            else if (tool==\"TypeFrequenciesChart\") {tool=\"Trends\";}\n\t\t            else if (tool==\"VisualCollocator\") {tool=\"CollocatesGraph\";}\n\t\t            else {tool=\"NoTool\"}\n            \t}\n            \treturn '\"xtype\":\"'+tool.toLowerCase()+'\"'+(tool==\"NoTool\" ? ',\"html\":\"'+new Ext.Template(panel.localize('noSuchTool')).applyTemplate([tool])+'\"' : '')\n\t\t    })\n        \n        var items;\n        try {\n            items = Ext.decode(layoutString);\n        } catch (e) {\n            items = {region: 'center', html: '<div>Error constructing layout:'+e+'</div>'};\n        }\n        \n        if (items == null) {\n        \titems = {region: 'center', html: '<div>Error: no layout information found.</div>'}\n        }\n        \n        this.addBorderLayouts(items);\n\n        this.on(\"add\", function(custom, cmp) {\n        \tcmp.on(\"boxready\", function(cmp) {\n//        \t\tcmp.query(\"panel\").forEach(function(p) {\n//        \t\t\tcustom;\n////        \t\t\tdebugger\n//        \t\t})\n        \t})\n        })\n        this.add(items);\n//        .on(\"boxready\", function() {\n//        \tdebugger\n//            if (this.getCorpus()) { // we may have loaded the corpus after the layout, so refire the event\n//            \tthis.getApplication().dispatchEvent(\"loadedCorpus\", this.getApplication(), corpus);\n//            }\n//        })\n        \n\t},\n\t\n\taddBorderLayouts: function(items) {\n    \tvar size = Ext.getBody().getSize();\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (Ext.isString(item.width)) {\n            \titem.width = Math.round(size.width * parseInt(item.width) / 100);\n            } else if (Ext.isString(item.height)) {\n            \titem.height = Math.round(size.height * parseInt(item.height) / 100);\n            }\n            if (item.items && item.items.length > 1) {\n                item.layout = 'border';\n                this.addBorderLayouts(item.items);\n            } else {\n                item.layout = 'fit';\n            }\n        }\n\t},\n\t\n\tinitTableLayout: function() {\n    \tExt.suspendLayouts();\n    \tvar tableLayout = decodeURI(this.getApiParam('tableLayout'));\n\n    \tif (tableLayout && tableLayout.charAt(0)!=\"{\" && tableLayout.charAt(0)!=\"[\") {\n    \t\tvar cells = [];\n    \t\ttableLayout.replace(/;/g,\",\").split(/,\\s*/).forEach(function(cell) {\n    \t\t\tcells.push(/^\"'/.test(cell) ? cell : '\"'+cell+'\"');\n    \t\t});\n    \t\ttableLayout = \"[\"+cells.join(\",\")+\"]\"; // treat as simple comma-separated string\n    \t}\n    \tvar layout = Ext.decode(tableLayout);\n    \tif (Ext.isArray(layout)) {\n    \t\tlayout = {\n        \t\tcells: layout\n        \t};\n    \t}\n    \tif (!layout.numCols && layout.cells && Ext.isArray(layout.cells)) {\n    \t\tif (layout.cells.length < 3) {\n    \t\t\tlayout.numCols = layout.cells.length;\n    \t\t} else if (layout.cells.length < 5) {\n    \t\t\tlayout.numCols = Math.ceil(layout.cells.length / 2);\n    \t\t} else {\n    \t\t\tlayout.numCols = Math.ceil(layout.cells.length / 3);\n    \t\t}\n    \t}\n        if (layout.numCols != null && layout.cells && Ext.isArray(layout.cells)) {\n        \tvar items = [];\n        \tfor (var i = 0; i < layout.cells.length; i++) {\n        \t\tvar cell = layout.cells[i];\n        \t\tif (Ext.isObject(cell)) {\n        \t\t\tcell.cellWidth = parseFloat(cell.width) || undefined;\n        \t\t\tcell.cellHeight = parseFloat(cell.height) || undefined;\n        \t\t\tdelete cell.width;\n        \t\t\tdelete cell.height;\n            \t\titems.push(cell);\n        \t\t} else if (Ext.isArray(cell)) {\n        \t\t\tvar colspan = 1, rowspan = 1; xtype = undefined;\n        \t\t\tif (cell[0] && Ext.isNumber(cell[0])) {\n        \t\t\t\tcolspan = cell[0];\n        \t\t\t\tcell.shift();\n        \t\t\t}\n        \t\t\tif (cell[0] && Ext.isString(cell[0])) {\n        \t\t\t\txtype = cell[0].toLowerCase();\n        \t\t\t\tcell.shift();\n        \t\t\t}\n        \t\t\tif (cell[0] && Ext.isNumber(cell[0])) {\n        \t\t\t\trowspan = cell[0];\n        \t\t\t}\n        \t\t\tif (xtype) {\n        \t\t\t\titems.push({\n        \t\t\t\t\tcolspan: colspan,\n        \t\t\t\t\trowspan: rowspan,\n        \t\t\t\t\txtype: xtype\n        \t\t\t\t})\n        \t\t\t}\n        \t\t} else if (Ext.isString(cell)) {\n        \t\t\titems.push({\n        \t\t\t\txtype: cell.toLowerCase(),\n        \t\t\t\tcolspan: 1,\n        \t\t\t\trowspan: 1\n        \t\t\t})\n        \t\t}\n        \t}\n        \tExt.apply(this, {\n        \t\tlayout: {\n        \t\t\ttype: 'table',\n        \t\t\twidth: '100%',\n    \t\t\t\theight: '100%',\n        \t\t\tcolumns: layout.numCols,\n        \t\t\ttableAttrs: {\n            \t\t\tstyle: {\n            \t\t\t\twidth: '100%',\n            \t\t\t\theight: '100%'\n            \t\t\t}\n            \t\t},\n            \t\ttdAttrs: {\n            \t\t\tstyle: {\n            \t\t\t\tpadding: '0px',\n            \t\t\t\tverticalAlign: 'top'\n            \t\t\t}\n            \t\t}\n        \t\t},\n        \t\tdefaults: { // place holder values to ensure that the children are rendered\n            \t\twidth: 10,\n            \t\theight: 10,\n            \t\tborder: true\n            \t},\n        \t\titems: items\n        \t});\n        } else {\n        \tthis.showError(\"badTableLayoutDefinition\")\n        }\n    \t\n    \tExt.resumeLayouts();\t\t\n\t},\n\tdoTableSizing: function(widthRatio, heightRatio) {\n    \tvar sizeMap = {};\n    \t\n    \tvar table = this.getTargetEl().down(\".x-table-layout\");\n    \tvar tableSize = table.getSize(false);\n    \t\n    \tvar rows = table.dom.rows;\n    \tfor (var i=0; i<rows.length; i++) {\n    \t\tvar cells = rows[i].cells;\n    \t\tfor (var j=0; j<cells.length; j++) {\n    \t\t\tvar cell = cells[j];\n    \t\t\tvar cellEl = Ext.get(cell);\n    \t\t\tvar panelEl = cellEl.down('.x-panel');\n    \t\t\tvar cmpId = panelEl.id;\n    \t\t\t\n    \t\t\tvar size;\n    \t\t\tif (widthRatio !== undefined && heightRatio !== undefined) {\n    \t\t\t\tsize = panelEl.getSize(false);\n    \t\t\t\tsize.width = size.width * widthRatio;\n            \t\tsize.height = size.height * heightRatio;\n            \t\t// FIXME multiple resize calls gradually reduce size\n    \t\t\t} else {\n    \t\t\t\tvar sizeObj = cellEl.getSize(false);\n    \t\t\t\t\n    \t\t\t\tvar cmp = Ext.getCmp(cmpId);\n    \t\t\t\tvar widthPercent = cmp.initialConfig.cellWidth;\n    \t\t\t\tvar heightPercent = cmp.initialConfig.cellHeight;\n    \t\t\t\t\n    \t\t\t\tif (widthPercent !== undefined) {\n    \t\t\t\t\tsizeObj.width = tableSize.width * (widthPercent/100);\n    \t\t\t\t\tcellEl.setWidth(sizeObj.width);\n    \t\t\t\t}\n    \t\t\t\tif (heightPercent !== undefined) {\n    \t\t\t\t\tsizeObj.height = tableSize.height * (heightPercent/100);\n    \t\t\t\t\tcellEl.setHeight(sizeObj.height);\n    \t\t\t\t}\n    \t\t\t\t\n    \t\t\t\tsize = sizeObj; \n    \t\t\t}\n    \t\t\t\n    \t\t\tsizeMap[cmpId] = size;\n    \t\t}\n    \t}\n    \t\n    \tfor (var id in sizeMap) {\n    \t\tvar size = sizeMap[id];\n    \t\tExt.getCmp(id).setSize(size);\n    \t}\n\n    \tthis.updateLayout();\n\t}\n})","Ext.define('Voyant.panel.Veliza', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n    xtype: 'veliza',\n\tautoScroll: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tscript: '',\n    \t\tmessage: undefined\n    \t},\n\t\tglyph: 'xf0e6@FontAwesome'\n    },\n    config: {\n    \tprevious: []\n    },\n    \n    constructor: function() {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        var me = this;\n        Ext.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tglyph: 'xf0e6@FontAwesome',\n    \t    layout: {\n    \t        type: 'border',\n    \t        align: 'stretch'\n    \t    },\n    \t\titems: [{\n    \t\t\titemId: 'chat',\n\t    \t\thtml: \"<form class='chat'></form>\",\n\t    \t\tregion: 'center',\n\t    \t\tflex: 2,\n\t    \t\tautoScroll: true\n    \t\t},{\n    \t\t\titemId: 'script',\n    \t\t\txtype: 'form',\n    \t\t\tregion: 'east',\n    \t\t\tsplit: true,\n    \t\t\ttitle: this.localize('scriptEditor'),\n        \t    layout: {\n        \t        type: 'vbox',\n        \t        align: 'stretch'\n        \t    },\n    \t\t\titems: [{\n    \t\t\t\thtml: new Ext.XTemplate(this.localize('scriptIntro')).apply([me.getBaseUrl()+\"docs/#!/guide/veliza\"])\n    \t\t\t},{\n    \t\t\t\txtype: 'textarea',\n    \t\t\t\tname: 'editor',\n    \t\t\t\tfieldStyle: \"white-space: pre\",\n    \t\t\t\tvalue: me.getApiParam('script'),\n    \t\t\t\tflex: 1,\n    \t\t\t\tlisteners: {\n    \t\t\t\t\tafterrender: function(editor) {\n    \t\t\t\t\t\tvar corpus = me.getApiParam('corpus');\n    \t\t\t\t\t\tif (!corpus) {return}\n    \t\t\t\t\t\teditor.mask(me.localize('loadingScript'));\n    \t\t\t\t\t\tExt.Ajax.request({\n    \t\t\t\t\t\t\turl: me.getTromboneUrl(),\n    \t\t\t\t\t\t\tparams: {\n    \t\t\t\t\t\t\t\ttool: 'corpus.Veliza',\n    \t\t\t\t\t\t\t\tscript: me.getApiParam('script'),\n    \t\t\t\t\t\t\t\tcorpus: corpus\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}).then(function(response) {\n    \t\t\t\t\t\t\tvar obj = Ext.decode(response.responseText);\n    \t\t\t\t\t\t\tif (obj && obj.veliza && obj.veliza.script) {\n    \t\t\t\t\t\t\t\teditor.setValue(obj.veliza.script);\n    \t\t\t\t\t\t\t\teditor.resetOriginalValue();\n    \t\t\t\t\t\t\t} else if (obj && obj.veliza && obj.veliza.id) {\n    \t\t\t\t\t\t\t\tme.setApiParam('script', obj.veliza.id);\n    \t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\tme.showError(me.localize('unableFetchScript'));\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\teditor.unmask()\n    \t\t\t\t\t\t}, function(response) {\n    \t\t\t\t\t\t\tme.showError(response)\n    \t\t\t\t\t\t})\n    \t\t\t\t\t},\n    \t\t\t\t\tscope: this\n    \t\t\t\t}\n    \t\t\t}],\n    \t\t\tcollapsed: true,\n    \t\t\tcollapsible: true,\n    \t\t\tflex: 1\n    \t\t}],\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'textfield',\n        \t\t\titemId: 'chatfield',\n        \t\t\temptyText: this.localize(\"typeAndEnter\"),\n        \t\t\tflex: 1,\n        \t\t\tlisteners: {\n                        specialkey: function(field, e){\n                            if (e.getKey() == e.ENTER) {\n                            \tme.handleUserSentence(field.getValue())\n                            \tfield.setValue(\"\");\n                            }\n                        }\n                    }\n                },{\n        \t\t\txtype: 'button',\n        \t\t\ttext: this.localize('send'),\n        \t\t\thandler: function() {\n        \t\t\t\tvar tf = this.up(\"toolbar\").down('textfield');\n        \t\t\t\tme.handleUserSentence(tf.getValue(), false);\n        \t\t\t\ttf.setValue('');\n        \t\t\t}\n        \t\t},{\n        \t\t\txtype: 'button',\n        \t\t\ttext: this.localize('fromCorpus'),\n        \t\t\thandler: function() {\n        \t\t\t\tme.handleUserSentence(\"\", true)\n        \t\t\t}\n        \t\t}]\n    \t\t}]\n        })\n             \n        this.callParent();\n        \n    \tthis.on('boxready', function(cmp) {\n    \t\tcmp.addSentence(\"fromThem\", \"Hello, I'm Veliza, and I'm here to talk to you about your texts (you may know my sister <a href='https://en.wikipedia.org/wiki/ELIZA' target='_blank'>Eliza</a> she's a famous psychotherapist). I'm just learning to talk about text documents, but please, let me know about any anxieties you're feeling about your texts. Type a message in the box below and hit enter. Or, if you're feeling playful, hit the <i>from text</i> bottom in the lower right-hand corner to fetch a sentence from the corpus.\");\n    \t\tthis.sendApiParamMessage();\n    \t})\n\n    }, \n    \n    sendApiParamMessage: function() {\n\t\tif (this.getApiParam('message')) {\n\t\t\tif (this.getCorpus()) {\n\t\t\t\tvar sentences = Ext.Array.from(this.getApiParam('message'));\n\t\t\t\tvar sentence = sentences.shift();\n\t\t\t\tif (sentence) {\n\t\t\t\t\tif (sentences) {\n\t\t\t\t\t\tthis.setApiParam(\"message\", sentences);\n\t\t\t\t\t}\n\t\t\t\t\tthis.handleUserSentence(sentence, undefined, true)\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// try to wait for the corpus to be loaded\n\t\t\t\tExt.defer(this.sendApiParamMessage, 100, this, [true])\n\t\t\t}\n\t\t}\n    },\n    \n    \n    handleUserSentence: function(sentence, fromCorpus, noScroll) {\n    \tsentence = sentence.trim();\n    \tif (sentence || fromCorpus) {\n    \t\tif (sentence) {\n    \t    \tthis.addSentence(\"myMessage\", sentence);\n    \t\t}\n\t    \tthis.mask();\n    \t\tvar me = this;\n    \t\tvar editor = this.getComponent('script').down('textarea');\n    \t\tExt.Ajax.request({\n    \t\t\turl: this.getApplication().getTromboneUrl(),\n    \t\t\tparams: {\n    \t\t\t\tcorpus: me.getCorpus() ? me.getCorpus().getId() : undefined,\n    \t\t\t\ttool: 'corpus.Veliza',\n    \t\t\t\tsentence: sentence,\n    \t\t\t\t//previous: this.getPrevious(),\n    \t\t\t\tfromCorpus: fromCorpus ? true : false,\n    \t\t\t\tscript: editor.isDirty() ? editor.getValue() : this.getApiParam('script'),\n    \t\t\t\tnoCache: Ext.id()\n    \t\t\t},\n    \t\t    success: function(response, opts) {\n    \t\t    \tme.unmask();\n    \t\t    \tvar response = Ext.decode(response.responseText);\n    \t\t    \tif (response.veliza.id) {\n    \t\t    \t\tme.setApiParam('script', response.veliza.id);\n    \t\t    \t\teditor.resetOriginalValue();\n    \t\t    \t}\n    \t\t    \tvar veliza = response.veliza.response;\n    \t\t    \tvar hidden = veliza.match(/<\\!-- (.+?) --\u003e/);\n    \t\t    \tif (hidden) {\n    \t\t    \t\tvar json =  Ext.decode(hidden[1]);\n    \t\t    \t\tfor (key in json.params) {\n    \t\t    \t\t\tjson.params[key] = json.params[key].trim();\n    \t\t    \t\t}\n    \t\t    \t\tveliza += \"<br/><iframe width='\"+(json.width ? json.width : '100%')+\"' height='\"+(json.height ? json.height : '250px')+\"' src='\"+me.getApplication().getBaseUrl()+'tool/'+json.tool+'/?corpus='+me.getCorpus().getId()+'&minimal=true&'+Ext.Object.toQueryString(json.params)+\"'></iframe>\"\n    \t\t    \t}\n    \t\t    \tvar sentence = response.veliza.sentence;\n    \t\t    \tme.setPrevious(response.veliza.previous);\n\n    \t\t    \tif (fromCorpus) {\n    \t\t    \t\tmeta = response.veliza.docIndex > -1 ? me.getCorpus().getDocument(response.veliza.docIndex).getShortLabel() : undefined;\n    \t\t    \t\tme.addSentence(\"myMessage\", sentence, meta);\n        \t\t\t    \tExt.Function.defer(function() {\n                \t\t    \tthis.addSentence(\"fromThem\", veliza);\n                \t\t    \tif (!noScroll) {\n                    \t\t    \tthis.body.scroll('b', Infinity)                \t\t    \t\t\n                \t\t    \t}\n        \t\t\t    \t}, 500, me);\n    \t\t    \t} else {\n        \t\t    \tme.addSentence(\"fromThem\", veliza);\n        \t\t    \tif (!noScroll) {\n            \t\t    \tme.body.scroll('b', Infinity)                \t\t    \t\t\n        \t\t    \t}\n    \t\t    \t}\n    \t\t    \tif (me.getApiParam(\"message\")) { // any more messages to show?\n    \t\t    \t\tme.sendApiParamMessage();\n    \t\t    \t}\n    \t\t    },\n    \t\t    failure: function(response, opts) {\n    \t\t    \tme.showResponseError(\"Unable to get response from Veliza.\", response);\n    \t\t    }\n    \t\t})\n    \t}\n    },\n\n    addSentence: function(speaker, sentence, meta) {\n    \tvar body = this.getComponent('chat').body;\n    \tvar el = body.down(\"form\").insertHtml('beforeEnd', '<div class=\"message\"><div class=\"'+speaker+'\"><p>'+sentence+'</p>'+(meta ? \"<date>\"+meta+\"</date>\" : \"\")+'</div></div>', true);\n    \tbody.scroll('b', Infinity);\n    }\n});","Ext.define('Voyant.panel.WordTree', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.wordtree',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tstopList: 'auto',\n    \t\tcontext: 10,\n    \t\tlimit: 100\n    \t},\n\t\tglyph: 'xf0e8@FontAwesome'\n    },\n    \n    config: {\n    \ttree: undefined,\n    \tkwicStore: undefined,\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \tnumBranches: 5,\n    \tlastClick: 1\n    },\n    \n    doubleClickDelay: 300,\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        Ext.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'querysearchfield'\n                },\n                \t'<span data-qtip=\"'+this.localize('poolTip')+'\" class=\"info-tip\">'+this.localize('pool')+\"</span>\"\n                , {\n                \txtype: 'slider',\n                \titemId: 'poolSlider',\n                \tminValue: 10,\n                \tvalue: 100,\n                \tmaxValue: 1000,\n                \tincrement: 5,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('limit'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('limit', slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                }, \n                \t'<span data-qtip=\"'+this.localize('branchesTip')+'\" class=\"info-tip\">'+this.localize('branches')+\"</span>\"\n    \t\t\t,{\n                \n                \txtype: 'slider',\n                \titemId: 'branchesSlider',\n                \tminValue: 2,\n                \tvalue: 5,\n                \tmaxValue: 15,\n                \tincrement: 1,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getNumBranches());\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setNumBranches(slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                },\n            \t'<span data-qtip=\"'+this.localize('contextTip')+'\" class=\"info-tip\">'+this.localize('context')+\"</span>\"\n            \t, {\n                \txtype: 'slider',\n                \titemId: 'contextSlider',\n                \tminValue: 3,\n                \tvalue: 10,\n                \tmaxValue: 20,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('context', slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                }]\n    \t\t}]\n        });\n        \n        this.setKwicStore(Ext.create('Voyant.data.store.Contexts', {\n        \tparentPanel: this,\n        \tproxy: {\n        \t\textraParams: {\n                \tstripTags: 'all'            \t\t\t\n        \t\t}\n        \t},\n        \tlisteners: {\n        \t\tload: function(store, records, success, operation) {\n        \t\t\tif (success) {\n        \t\t\t\tthis.parseRecords(records);\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t}\n        }));\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tvar corpusTerms = corpus.getCorpusTerms({autoLoad: false});\n    \t\tcorpusTerms.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tif (success && records.length>0) {\n    \t\t    \t\tvar firstTerm = records[0].getTerm();\n    \t\t    \t\tthis.setRoot(firstTerm);\n    \t\t    \t}\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: {\n    \t\t\t\tlimit: 1,\n    \t\t\t\tquery: this.getApiParam('query'),\n    \t\t\t\tstopList: this.getApiParam('stopList')\n    \t\t\t}\n        \t});\n        }, this);\n        \n        this.on('query', function(src, query) {\n    \t\tif (query !== undefined && query != '') {\n    \t\t\tthis.setRoot(query);\n    \t\t}\n        }, this);\n        \n        this.on('termsClicked', function(src, terms) {\n        \tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n    \t\t});\n    \t\tthis.setRoot(queryTerms);\n\t\t}, this);\n        \n        this.on('documentTermsClicked', function(src, terms) {\n    \t\tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n    \t\t});\n    \t\tthis.setRoot(queryTerms);\n    \t}, this);\n        \n        this.on('resize', function(panel, width, height) {\n        \tvar tree = this.getTree();\n        \tif (tree !== undefined) {\n        \t\ttree.visWidth(width).visHeight(height);\n        \t\t// TODO preserve expanded branches\n        \t\ttree.redraw();\n        \t}\n\t\t}, this);\n        \n        this.on('boxready', this.initGraph, this);\n        \n        this.callParent(arguments);\n    },\n    \n    parseRecords: function(records) {\n    \tvar parsedRecords = [];\n\t\tfor (var i = 0; i < records.length; i++) {\n\t\t\tvar r = records[i];\n\t\t\tvar pr = {\n\t\t\t\tid: i,\n\t\t\t\tprefix: r.getLeft().trim().split(/\\s+/),\n\t\t\t\thit: r.getMiddle(),\n\t\t\t\tsuffix: r.getRight().trim().split(/\\s+/)\n\t\t\t};\n\t\t\tparsedRecords.push(pr);\n\t\t}\n\t\t\n\t\t// find top tokens and sort records by them\n\t\tvar prefixTokenCounts = {};\n\t\tvar suffixTokenCounts = {};\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar pr = parsedRecords[i];\n\t\t\tvar prefixToken = pr.prefix[pr.prefix.length-1];\n\t\t\tvar suffixToken = pr.suffix[0];\n\t\t\tif (prefixTokenCounts[prefixToken]) {\n\t\t\t\tprefixTokenCounts[prefixToken]++;\n\t\t\t} else {\n\t\t\t\tprefixTokenCounts[prefixToken] = 1;\n\t\t\t}\n\t\t\tif (suffixTokenCounts[suffixToken]) {\n\t\t\t\tsuffixTokenCounts[suffixToken]++;\n\t\t\t} else {\n\t\t\t\tsuffixTokenCounts[suffixToken] = 1;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar sortableTokens = [];\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar pr = parsedRecords[i];\n\t\t\tvar prefixToken = pr.prefix[pr.prefix.length-1];\n\t\t\tvar suffixToken = pr.suffix[0];\n\t\t\t\n\t\t\tsortableTokens.push({\n\t\t\t\tsuffix: suffixToken, suffixCount: suffixTokenCounts[suffixToken],\n\t\t\t\tprefix: prefixToken, prefixCount: prefixTokenCounts[prefixToken]\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\tvar prioritizeSuffix = false;\n\t\t// multi-sort\n\t\tsortableTokens.sort(function(a, b) {\n\t\t\tvar s1 = a.suffixCount;\n\t\t\tvar s2 = b.suffixCount;\n\t\t\t\n\t\t\tvar p1 = a.prefixCount;\n\t\t\tvar p2 = b.prefixCount;\n\t\t\t\n\t\t\tif (prioritizeSuffix) {\n\t\t\t\tif (s1 > s2) return -1;\n\t\t\t\tif (s1 < s2) return 1;\n\t\t\t\tif (p1 > p2) return -1;\n\t\t\t\tif (p1 < p2) return 1;\n\t\t\t} else {\n\t\t\t\tif (p1 > p2) return -1;\n\t\t\t\tif (p1 < p2) return 1;\n\t\t\t\tif (s1 > s2) return -1;\n\t\t\t\tif (s1 < s2) return 1;\n\t\t\t}\n\t\t\t\n\t\t\treturn 0;\n\t\t});\n\t\t\n\t\tvar len = Math.min(this.getNumBranches(), sortableTokens.length);\n\t\tvar topSuffixTokens = [];\n\t\tvar topPrefixTokens = [];\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\ttopSuffixTokens.push(sortableTokens[i].suffix);\n\t\t\ttopPrefixTokens.push(sortableTokens[i].prefix);\n\t\t}\n\t\t\n\t\t// use top tokens to limit results\n\t\tvar prefixes = [], hits = [], suffixes = [], ids = [];\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar parsedRecord = parsedRecords[i];\n\t\t\tif (topSuffixTokens.indexOf(parsedRecord.suffix[0]) != -1 || topPrefixTokens.indexOf(parsedRecord.suffix[0]) != -1) {\n\t\t\t\tprefixes.push(parsedRecord.prefix);\n\t\t\t\thits.push(parsedRecord.hit);\n\t\t\t\tsuffixes.push(parsedRecord.suffix);\n\t\t\t\tids.push(parsedRecord.id);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar caseSensitive = false;\n\t\tvar fieldNames = [\"token\", \"POS\"];\n\t\tvar fieldDelim = \"/\";\n\t\tvar distinguishingFieldsArray = [\"token\", \"POS\"];\n\t\tthis.getTree().setupFromArrays(prefixes, hits, suffixes, ids, caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\t\t\n\t\tif (!this.getTree().succeeded()) {\n\t\t\tthis.toastInfo({\n   \t\t\t\thtml: this.localize(\"emptyText\"),\n   \t\t\t\talign: 'bl'\n   \t\t\t});\n\t\t}\n    },\n    \n    initGraph: function() {\n    \tvar el = this.getLayout().getRenderTarget();\n    \tvar w = el.getWidth();\n    \tvar h = el.getHeight();\n    \t\n    \tvar dt = new doubletree.DoubleTree();\n    \tdt.init('#'+el.getId())\n    \t\t.visWidth(w).visHeight(h)\n    \t\t.handlers({\n    \t\t\tclick: this.clickHandler.bind(this)\n    \t\t});\n    \t\n    \tthis.setTree(dt);\n    \t\n    \t// explicitly set dimensions\n//    \tel.setWidth(el.getWidth());\n//    \tel.setHeight(el.getHeight());\n    },\n    \n    clickHandler: function(node) {\n    \tvar now = new Date().getTime();\n    \tif (this.getLastClick() && now-this.getLastClick()<this.doubleClickDelay) {\n    \t\tthis.setLastClick(1);\n    \t\tvar terms = [], parent = node;\n        \twhile (parent != null) {\n        \t\tterms.push(parent.name);\n        \t\tparent = parent.parent;\n        \t}\n        \tthis.getApplication().dispatchEvent('termsClicked', this, [terms.reverse().join(\" \")]);\n    \t} else {\n    \t\tthis.setLastClick(now);\n    \t}\n    },\n    \n//    doubleClickHandler: function(node) {\n//// dispatch phrase click instead of recentering (which can be done with search)\n////    \tthis.setRoot(node.name);\n//    },\n//    \n    setRoot: function(query) {\n    \tthis.setApiParam('query', this.stripPunctuation(query));\n\t\tthis.getKwicStore().load({params: this.getApiParams()});\n    },\n    \n    reload: function() {\n    \tvar query = this.getApiParam('query');\n    \tif (query !== undefined) {\n    \t\tthis.setRoot(query);\n    \t}\n    },\n    \n    stripPunctuation: function(value) {\n    \tif (Ext.isString(value)) return value.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, '');\n    \telse {\n    \t\tvar values = [];\n    \t\tvalue.forEach(function(v) {\n    \t\t\tvalues.push(v.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, ''));\n    \t\t});\n    \t\treturn values;\n    \t}\n    \treturn '';\n    }\n});\n\n","Ext.define('Voyant.panel.WordWall', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel','Voyant.util.DiacriticsRemover'],\n    alias: 'widget.wordwall',\n    statics: {\n        i18n: {\n        },\n        api: {\n            limit: 500,\n            stopList: 'auto'\n        },\n        glyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n        visId: undefined,\n        vis: undefined,\n        simulation: undefined, // force layout\n        nodes: undefined, // svg nodes\n        tempNodes: undefined, // used to calculate text size and bounding boxes\n        zoom: undefined,\n\n        terms: undefined,\n        segments: undefined,\n\n        filterOutUniqueTerms: true, // whether to remove terms that don't appear in all segments\n\n        currentSegment: undefined,\n        segmentTerms: undefined,\n        segmentTermsQueue: [],\n\n        segmentDelay: 5000, // delay before displaying new segment data\n        segmentDelayTimer: undefined,\n        \n        webWorker: undefined,\n        isSimulating: false, // are we running a webworker simulation?\n        \n        transitionTime: 2000, // time to transition between old and new nodes\n        isTransitioning: false, // are we transitioning between nodes?\n        \n\n        minFreq: undefined,\n        maxFreq: undefined,\n        letterDistribution: undefined,\n        \n        frequencyScale: undefined,\n\n        xForceStrength: 0.2,\n        yForceStrength: 0.1,\n        \n        chargeStrength: -75,\n        chargeDistance: 100,\n\n        minFontSize: 7,\n        maxFontSize: 60\n    },\n\n    count: 0,\n\n    MIN_TERMS: 10,\n    MAX_TERMS: 2000,\n    \n    MIN_SCALING: 1,\n    MAX_SCALING: 20,\n    \n    debugMsg: false,\n\n    constructor: function(config) {\n        this.mixins['Voyant.util.DiacriticsRemover'].constructor.apply(this, arguments);\n\n        this.setVisId(Ext.id(null, 'wordwall_'));\n\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        Ext.apply(this, {\n            title: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [this.localize('terms'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: this.MIN_TERMS,\n                    maxValue: this.MAX_TERMS,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getApiParam('limit'));\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setApiParam('limit', slider.getValue());\n                            this.initLoad();\n                        },\n                        scope: this\n                    }\n                },this.localize('delay'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 1,\n                    maxValue: 60,\n                    increment: 1,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getSegmentDelay()/1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setSegmentDelay(slider.getValue()*1000);\n                            this.restartSegmentTimer();\n                        },\n                        scope: this\n                    }\n                },this.localize('transition'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 100,\n                    maxValue: 5000,\n                    increment: 1,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getTransitionTime());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setTransitionTime(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },this.localize('xStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getXForceStrength()*1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setXForceStrength(slider.getValue()/1000);\n                        },\n                        scope: this\n                    }\n                },this.localize('yStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getYForceStrength()*1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setYForceStrength(slider.getValue()/1000);\n                        },\n                        scope: this\n                    }\n                },this.localize('chargeStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: -1000,\n                    maxValue: 0,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getChargeStrength());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setChargeStrength(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },this.localize('chargeDistance'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getChargeDistance());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setChargeDistance(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },{\n                    xtype: 'button',\n                    text: this.localize('stop'),\n                    handler: function(b) {\n                        if (b.getText() === this.localize('stop')) {\n                            clearInterval(this.getSegmentDelayTimer());\n                            b.setText(this.localize('start'))\n                        } else {\n                            this.restartSegmentTimer();\n                            b.setText(this.localize('stop'));\n                        }\n                    },\n                    scope: this\n                },{\n                    itemId: 'status',\n                    xtype: 'tbtext',\n                    text: ''\n                }]\n            }]\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n            if (this.isVisible()) {\n                this.initLoad();\n            }\n        }, this);\n        \n        this.on('resize', function(panel, width, height) {\n            var vis = Ext.get(this.getVisId());\n            if (vis) {\n                var el = this.body;//this.getLayout().getRenderTarget();\n                var elHeight = el.getHeight();\n                var elWidth = el.getWidth();\n                \n                vis.el.dom.setAttribute('width', elWidth);\n                vis.el.dom.setAttribute('height', elHeight);\n//                this.getSimulation()\n//                    .force('x', d3.forceX(elWidth/2))\n//                    .force('y', d3.forceY(elHeight/2));\n            }\n        }, this);\n        \n        this.callParent(arguments);\n    },\n    \n    initVis: function() {\n        var el = this.getLayout().getRenderTarget();\n        el.update('');\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        var svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('class', 'wordWall').attr('width', width).attr('height', height);\n        var g = svg.append('g');\n        this.setVis(g);\n        \n        this.setNodes(g.append('g').attr('class', 'nodes').selectAll('.node'));\n\n        this.setTempNodes(g.append('g').attr('class', 'tempNodes').selectAll('text'));\n\n        if (this.getWebWorker() === undefined) {\n            this.setWebWorker(new Worker(this.getBaseUrl()+'resources/d3/WordWallWorker.js'));\n            this.getWebWorker().onmessage = this.handleWebWorkerMessage.bind(this);\n        }\n    },\n\n    initLoad: function() {\n        this.initVis();\n        \n        this.count = 0;\n\n        var params = this.getApiParams();\n        params.tool = 'corpus.CorpusSegmentTerms';\n        \n        Ext.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: params,\n            success: function(response) {\n                var data = Ext.decode(response.responseText);\n                this.setSegments(data.corpusSegmentTerms.segments);\n\n                var terms = data.corpusSegmentTerms.terms;\n                if (this.getFilterOutUniqueTerms()) {\n                    terms = terms.filter(function(el, index) { return el.rawFreqs.indexOf(0) == -1 });\n                }\n\n                this.setTerms(terms);\n                \n                this.setCurrentSegment(this.getSegments().length);\n                this.getNextSegment();\n\n                this.restartSegmentTimer();\n            },\n            failure: function(response) {\n                if (this.debugMsg) console.log('failed', response);\n            },\n            scope: this\n        })\n    },\n\n    restartSegmentTimer: function() {\n        clearInterval(this.getSegmentDelayTimer());\n\n        this.setSegmentDelayTimer(setInterval(function() {\n            this.updateNodePositions();\n        }.bind(this), this.getSegmentDelay()));\n    },\n\n    getNextSegment: function() {\n        var index = this.getCurrentSegment();\n        index++;\n        if (index >= this.getSegments().length) {\n            index = 0;\n        }\n        this.setCurrentSegment(index);\n        if (this.debugMsg) console.log('getNextSegment', index);\n        this.processTermsForSegment(this.getCurrentSegment());\n    },\n\n    processTermsForSegment: function(segmentIndex) {\n        var min = Number.MAX_VALUE;\n        var max = Number.MIN_VALUE;\n        var letterDistMap = {a:0,b:0,c:0,d:0,e:0,f:0,g:0,h:0,i:0,j:0,k:0,l:0,m:0,n:0,o:0,p:0,q:0,r:0,s:0,t:0,u:0,v:0,w:0,x:0,y:0,z:0};\n\n        this.getTerms().forEach(function(d) {\n            d.id = this.idGet(d.term);\n            // d.value = d.rawFreqs.reduce(function(sum, value) {\n            //     return sum+value;\n            // });\n            d.value = d.rawFreqs[segmentIndex];\n            if (d.value > 0) {\n                if (d.value < min) {\n                    min = d.value;\n                }\n                if (d.value > max) {\n                    max = d.value;\n                }\n\n                d.title = d.term+' ('+d.value+')';\n\n                var firstLetter = this.removeDiacritics(d.term.charAt(0)).toLowerCase();\n                d.letter = firstLetter;\n                if (letterDistMap[firstLetter] === undefined) {\n                    letterDistMap[firstLetter] = 0;\n                }\n                letterDistMap[firstLetter]++;\n            }\n        }, this);\n\n        this.setSegmentTerms(this.getTerms().filter(function(d) {\n            return d.value > 0;\n        }));\n\n        this.setMinFreq(min);\n        this.setMaxFreq(max);\n\n        var letterDist = [];\n        for (var letter in letterDistMap) {\n            var count = letterDistMap[letter];\n            var percent = count / this.getTerms().length;\n            letterDist.push({letter: letter, percent: percent});\n        }\n        letterDist.sort(function(a, b) {\n            if (a.letter < b.letter) return -1;\n            if (a.letter > b.letter) return 1;\n            return 0;\n        });\n        this.setLetterDistribution(letterDist);\n\n        this.calculateNodeSizes(this.getSegmentTerms());\n        this.runSimulation(this.getSegmentTerms());\n    },\n\n    // determine each node's font size and bounding box and store them for later use\n    calculateNodeSizes: function(terms) {\n        var nodes = this.getTempNodes().data(terms, function(d) { return d.id; });\n        \n        var fontSizer = function(value) {\n            var t = Math.min(1, terms.length / this.MAX_TERMS);\n            var exponent = t*2+1;\n            value = this.getFrequencyScale()(value);\n            var val = d3.scalePow().exponent(exponent).domain([0, 1]).range([this.getMinFontSize(), this.getMaxFontSize()])(value);\n            return val;\n        }.bind(this);\n\n        var bboxTotal = 0;\n\n        nodes.enter().append('text')\n            .attr('fill-opacity', 0)\n            .attr('font-family', function(d) { return 'Arial'; })//return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n            .attr('font-size', function(d) {\n                var fontSize = fontSizer(d.value);\n                d.fontSize = fontSize;\n                return fontSize;\n            })\n            .text(function(d) { return d.term; })\n            .each(function(d) {\n                var bbox = this.getBBox();\n                d.bbox = {};\n                d.bbox.x = bbox.x;\n                d.bbox.y = bbox.y;\n                d.bbox.width = bbox.width;\n                d.bbox.height = bbox.height;\n\n                bboxTotal += bbox.width*bbox.height;\n            })\n            .remove();\n\n        var el = this.getLayout().getRenderTarget();\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        // adapt font size to available space\n        var availableSpace = width*height;\n        if (bboxTotal > availableSpace*0.6) {\n            this.setMaxFontSize(this.getMaxFontSize()*0.9);\n            this.setMinFontSize(this.getMinFontSize()*0.9);\n            this.calculateNodeSizes(terms);\n        } else if (bboxTotal < availableSpace*0.5) {\n            this.setMaxFontSize(this.getMaxFontSize()*1.1);\n            this.setMinFontSize(this.getMinFontSize()*1.1);\n            this.calculateNodeSizes(terms);\n        }\n    },\n\n    runSimulation: function(terms) {\n        this.setIsSimulating(true);\n\n        var el = this.getLayout().getRenderTarget();\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        // pass all the info to the worker\n        if (this.debugMsg) console.time(\"runSim\");\n        this.getWebWorker().postMessage({\n            terms: terms,\n            width: width,\n            height: height,\n            minFreq: this.getMinFreq(),\n            maxFreq: this.getMaxFreq(),\n            xForceStrength: this.getXForceStrength(),\n            yForceStrength: this.getYForceStrength(),\n            chargeDistance: this.getChargeDistance(),\n            chargeStrength: this.getChargeStrength(),\n            letterDistribution: this.getLetterDistribution()\n        });\n    },\n\n    handleWebWorkerMessage: function(event) {\n        switch (event.data.type) {\n            case \"progress\":\n                var t = event.data.progress;\n                var percent = parseInt(t * 100);\n                this.getDockedItems()[1].getComponent('status').update(percent+'%');\n                break;\n            case \"msg\":\n                if (this.debugMsg) console.log(event.data.msg);\n                break;\n            case \"end\":\n                if (this.debugMsg) console.timeEnd(\"runSim\");\n                // TODO adjust segment delay if it's less than the runSim time\n                this.getDockedItems()[1].getComponent('status').update('');\n                this.setIsSimulating(false);\n                this.getSegmentTermsQueue().push(event.data.nodes);\n                break;\n        }\n    },\n\n    updateNodePositions: function() {\n        if (this.getIsTransitioning()) {\n            Ext.Function.defer(this.updateNodePositions, 100, this);\n        } else {\n            this.count++;\n            var nodes = this.getSegmentTermsQueue().shift();\n            if (this.debugMsg) console.log('queue length', this.getSegmentTermsQueue().length);\n            if (nodes === undefined) {\n                if (this.debugMsg) console.log('no nodes', this.count);\n                if (this.getIsSimulating() === false) {\n                    this.getNextSegment();\n                }\n            } else {\n                this.setIsTransitioning(true);\n                if (this.getSegmentTermsQueue().length == 0) {\n                    this.getNextSegment();\n                }\n                \n                var nodeUpdate = this.getNodes().data(nodes, function(d) { return d.id; });\n\n                nodeUpdate.transition().duration(this.getTransitionTime()).attr('transform', function(d) {\n                    var x = d.x;\n                    var y = d.y;\n                    return 'translate('+x+','+y+')';\n                });\n\n                var nodeEnter = nodeUpdate.enter().append('g')\n                    .attr('class', 'node')\n                    .attr('id', function(d) { return d.id; })\n                    .attr('transform', function(d) {\n                        var x = d.x;\n                        var y = d.y;\n                        return 'translate('+x+','+y+')';\n                    })\n                    .attr('fill-opacity', 0);\n\n                nodeEnter.append('title').text(function(d) { return d.title; });\n\n                nodeEnter.append('text')\n                    .attr('font-family', function(d) { return 'Arial'; })//return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n                    .attr('font-size', function(d) { return d.fontSize; })\n                    .attr('fill', function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('color', d.term); }.bind(this))\n                    .style('cursor', 'pointer')\n                    .style('user-select', 'none')\n                    .attr('alignment-baseline', 'middle')\n                    .text(function(d) { return d.term; });\n\n                nodeEnter.transition().duration(this.getTransitionTime()).attr('fill-opacity', 1);\n\n                var allNodes = nodeEnter.merge(nodeUpdate);\n\n                allNodes.select('text').transition().duration(this.getTransitionTime())\n                    .attr('font-size', function(d) { return d.fontSize; });\n\n                nodeUpdate.exit().transition().duration(this.getTransitionTime()).attr('fill-opacity', 0).remove();\n\n                setTimeout(function() {\n                    this.setIsTransitioning(false);\n                }.bind(this), this.getTransitionTime());\n\n                this.setNodes(allNodes);\n            }\n        }\n    },\n\n    updateMinFreq: function() {\n        this.setFrequencyScale(d3.scaleLog().domain([this.getMinFreq(), this.getMaxFreq()]).range([0, 1]));\n    },\n\n    updateMaxFreq: function() {\n        this.setFrequencyScale(d3.scaleLog().domain([this.getMinFreq(), this.getMaxFreq()]).range([0, 1]));\n    },\n\n    zoomToFit: function(paddingPercent, transitionDuration) {\n    \tvar bounds = this.getVis().node().getBBox();\n    \tvar width = bounds.width;\n    \tvar height = bounds.height;\n    \tvar midX = bounds.x + width/2;\n    \tvar midY = bounds.y + height/2;\n    \tvar svg = this.getVis().node().parentElement;\n    \tvar fullWidth = svg.clientWidth;\n    \tvar fullHeight = svg.clientHeight;\n    \tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n    \tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n \n    \td3.select(svg)\n    \t\t.transition()\n    \t\t.duration(transitionDuration || 500)\n    \t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n    },\n    \n    idGet: function(term) {\n        return term.replace(/\\W/g, '_');\n    }\n    \n});","// heavy lifting for the LDA from https://github.com/mimno/jsLDA with tweaks to fit into a Voyant object scope\n\nExt.define('Voyant.panel.Topics', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel','Voyant.widget.LiveSearchGrid'],\n\talias: 'widget.topics',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tnumTopics: 25,\n    \t\tlimit: 10,\n    \t\titerations: 100,\n    \t\tperDocLimit: 1000,\n    \t\tquery: undefined\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{xtype: 'stoplistoption'},{\n\t        xtype: 'numberfield',\n\t        name: 'perDocLimit',\n\t        fieldLabel: 'maximum words per document',\n\t        labelAlign: 'right',\n\t        value: 1000,\n\t        minValue: 1,\n\t        step: 100,\n\t        listeners: {\n    \t        afterrender: function(field) {\n    \t        \tvar win = field.up(\"window\");\n    \t        \tif (win && win.panel) {\n        \t        \tfield.setValue(parseInt(win.panel.getApiParam('perDocLimit')))\n    \t        \t\tfield.setFieldLabel(win.panel.localize(\"perDocLimit\"))\n    \t        \t}\n    \t        },\n\t\t        change: function(field, val) {\n\t\t        \tvar win = field.up(\"window\");\n\t\t        \tif (val>5000 && win && win.panel) {\n\t\t        \t\twin.panel.toastInfo({\n\t\t        \t\t\thtml: win.panel.localize(\"perDocLimitHigh\"),\n\t\t        \t\t\tanchor: win.getTargetEl(),\n\t\t        \t\t\talign: 'tr',\n\t\t        \t\t\tmaxWidth: 400\n\t\t        \t\t})\n\t\t        \t}\n\t\t        }\n\t        }\n\t    },{\n\t        xtype: 'numberfield',\n\t        name: 'iterations',\n\t        fieldLabel: 'iterations per run',\n\t        labelAlign: 'right',\n\t        value: 100,\n\t        minValue: 1,\n\t        maxValue: 10000,\n\t        step: 50,\n\t        listeners: {\n    \t        afterrender: function(field) {\n    \t        \tvar win = field.up(\"window\");\n    \t        \tif (win && win.panel) {\n        \t        \tfield.setValue(parseInt(win.panel.getApiParam('iterations')))\n    \t        \t\tfield.setFieldLabel(win.panel.localize(\"iterations\"))\n    \t        \t}\n    \t        }\n\t        }\n\t    }],\n    \t\n    \tcorpus: undefined,\n    \t\n    \tdocumentTopicSmoothing : 0.1,\n    \ttopicWordSmoothing : 0.01,\n    \tvocabularySize : 0,\n    \t vocabularyCounts : {},\n    \t stopwords : {},\n    \t docSortSmoothing : 10.0,\n    \t sumDocSortSmoothing : 10.0 * 25, // update?\n    \t requestedSweeps : 0,\n    \t wordTopicCounts : {},\n    \t topicWordCounts : [],\n    \t tokensPerTopic : [],\n    \t topicWeights : Array(25),\n    \t documents: [],\n    \t progress: undefined,\n    \t totalIterations: 0,\n    \t exportGridAll: false\n    \t\n    },\n    \n    zeros: function(count, val) {\n    \tval = val || 0;\n    \tvar ret = Array(count)\n    \tfor (var i=0; i<count; i++) {ret[i]=val;}\n    \treturn ret;\n    },\n    \n    constructor: function(config ) {\n    \tvar me = this;\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: {\n    \t        type: 'hbox',\n    \t        pack: 'start',\n    \t        align: 'stretch'\n    \t    },\n\t        store: {\n\t            fields: ['topic', 'scores'],\n\t            data: []\n\t        },\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"topic\"),\n    \t\t\ttooltip: this.localize(\"topicTip\"),\n    \t\t\tflex: 3,\n        \t\tdataIndex: 'topic',\n                sortable: false\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"scores\"),\n                tooltip: this.localize(\"scoresTip\"),\n                flex: 1,\n                dataIndex: 'scores',\n                widget: {\n                    xtype: 'sparklineline',\n                    tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n                    \tgetDocumentTitle: function(docIndex, score) {\n                    \t\treturn this.panel.getCorpus().getDocument(docIndex).getTitle()+\"<br>coverage: \"+Ext.util.Format.number(score*100, \"0,000.0\")+\"%\"\n                    \t},\n                    \tpanel: me \n                    })\n               }\n            }],\n            dockedItems: {\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items:[\n                       '<span class=\"info-tip\" data-qtip=\"'+this.localize('searchTip')+'\">'+this.localize('search')+'</span>'\n                    ,{\n                    xtype: 'textfield',\n                    name: 'searchField',\n                    hideLabel: true,\n                    width: 80,\n                    listeners: {\n                        change: {\n                            fn: me.onTextFieldChange,\n                            scope: me,\n                            buffer: 500\n                        }\n                    }\n                },\n                \t'<span class=\"info-tip\" data-qtip=\"'+this.localize('limitTermsTip')+'\">'+this.localize('limitTerms')+'</span>'\n                ,{ \n\t    \t\t\twidth: 80,\n                    hideLabel: true,\n\t    \t\t\txtype: 'slider',\n\t            \tincrement: 1,\n\t            \tminValue: 1,\n\t            \tmaxValue: 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"limit\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.postSweep();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },\n                \t'<span class=\"info-tip\" data-qtip=\"'+this.localize('numTopicsTip')+'\">'+this.localize('numTopics')+'</span>'\n                ,{ \n\t    \t\t\twidth: 80,\n                    hideLabel: true,\n\t    \t\t\txtype: 'slider',\n\t            \tincrement: 1,\n\t            \tminValue: 1,\n\t            \tmaxValue: 200,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"numTopics\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({numTopics: newvalue});\n\t            \t\t\tthis.loadFromExistingDocuments();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },{\n            \t\ttext: new Ext.Template(this.localize('runIterations')).apply([100]),\n            \t\titemId: 'iterations',\n\t\t\t\t\tglyph: 'xf04b@FontAwesome',\n            \t\ttooltip: this.localize('runIterationsTip'),\n            \t\thandler: this.runIterations,\n            \t\tscope: this\n            \t},{\n                \txtype: 'tbtext',\n                \titemId: 'done'\n                },{xtype: 'tbfill'}, {\n\t    \t\t\txtype: 'tbtext',\n\t    \t\t\thtml: this.localize('adaptation')\n\t    \t\t}]\n            }\n    \t});\n\n        this.callParent(arguments);\n        \n\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.resetData();\n        \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.setCorpus(corpus);\n    \t\tif (this.rendered) {\n    \t\t\tthis.initialize();\n    \t\t}\n    \t\telse {\n    \t\t\tthis.on(\"afterrender\", function() {\n    \t\t\t\tthis.initialize();\n    \t\t\t}, this)\n    \t\t}\n\n    \t});\n    \t\n    \tthis.on('query', function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.updateSearchResults();\n    \t})\n    \t\n    },\n    \n    loadStopwords: function() {\n    \tthis.mask(this.localize(\"loadingStopWords\"));\n    \tExt.Ajax.request({\n    \t    url: this.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.KeywordsManager',\n    \t\t\tstopList: this.getApiParam('stopList'),\n    \t\t\tcorpus: this.getCorpus() ? this.getCorpus().getAliasOrId() : undefined\n    \t    },\n    \t    success: function(response, req) {\n    \t    \tthis.unmask();\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar stopwords = {};\n    \t    \tjson.keywords.keywords.forEach(function(stop) {\n    \t    \t\tstopwords[stop]=1;\n    \t    \t})\n    \t    \tthis.setStopwords(stopwords);\n    \t    \tthis.loadDocuments();\n    \t    },\n    \t    scope: this\n    \t})\n    },\n    \n    loadDocuments: function() {\n    \tthis.mask(this.localize(\"loadingDocuments\"));\n    \tvar corpus = this.getCorpus();\n    \tif (corpus) {\n        \tExt.Ajax.request({\n        \t    url: this.getTromboneUrl(),\n        \t    params: {\n            \t\ttool: 'corpus.DocumentTokens',\n        \t\t\tcorpus: corpus.getAliasOrId(),\n        \t\t\toutputFormat: \"text\",\n        \t\t\ttemplate: \"docTokens2idsAndText\",\n        \t\t\tlimit: 0,\n        \t\t\tnoOthers: true,\n        \t\t\tperDocLimit: corpus.getDocumentsCount()==1 ? undefined : parseInt(this.getApiParam('perDocLimit'))\n        \t\t},\n        \t    success: function(response, req) {\n        \t    \tthis.unmask();\n        \t    \tthis.mask(this.localize(\"parsingDocuments\"));\n        \t    \tvar lines = response.responseText.trim().split(/(\\r\\n|\\r|\\n)/);\n        \t    \tif (lines.length==1) { // one document, so segment\n        \t    \t\tvar parts = lines[0].split(': ');\n        \t    \t\tif (parts.length>1) {\n            \t    \t\tvar doc = corpus.getDocument(parts[0]);\n            \t    \t\tvar allwords = parts[1].split(' ');\n            \t    \t\tvar totalWords = doc.getLexicalTokensCount();\n            \t    \t\tif (totalWords<10) {\n            \t    \t\t\tbins = totalWords\n            \t    \t\t} else if (totalWords<1000) {\n            \t    \t\t\tbins = 10\n            \t    \t\t} else {\n            \t    \t\t\tbins = 100\n            \t    \t\t}\n            \t    \t\tvar bins = 10;\n            \t    \t\tvar wordsPerBin = Math.floor(allwords.length/bins);\n            \t    \t\tfor (var i=0; i<bins; i++) {\n            \t    \t\t\tvar text = allwords.slice(i*wordsPerBin,(i*wordsPerBin)+wordsPerBin).join(\" \");\n                \t    \t\tthis.parseLine(parts[0]+\"-\"+i+\"\\t\"+parts[0]+\"-\"+i+\"\\t\"+text);\n            \t    \t\t}\n        \t    \t\t}\n        \t    \t} else {\n            \t    \tlines.forEach(function(line) {\n            \t    \t\tvar parts = line.split(': ');\n            \t    \t\tif (parts.length>1) {\n                \t    \t\tvar doc = corpus.getDocument(parts[0]);\n                \t    \t\tthis.parseLine(parts[0]+\"\\t\"+doc.getTinyLabel()+\"\\t\"+parts[1]);\n            \t    \t\t}\n            \t    \t}, this);\n        \t    \t}\n        \t    \tthis.unmask();\n        \t    \tthis.runIterations();\n        \t    },\n        \t    scope: this\n        \t})\n    \t}\n    },\n    \n    resetData: function() {\n    \tvar numTopics = parseInt(this.getApiParam('numTopics'));\n\t \tthis.setVocabularyCounts({});\n\t\tthis.setSumDocSortSmoothing(this.getDocSortSmoothing()*numTopics);\n\t\tthis.setRequestedSweeps(0);\n\t\tthis.setWordTopicCounts({});\n\t\tthis.setTopicWordCounts([]);\n\t\tthis.setTokensPerTopic(this.zeros(numTopics));\n\t\tthis.setTopicWeights(this.zeros(numTopics));\n\t\tthis.setDocuments([]);\n\t\tthis.setTotalIterations(0);\n    },\n    \n    loadFromExistingDocuments: function() {\n\n    \t// not quite efficient, but at least we don't have to reload from server\n    \tvar data = this.getDocuments().map(function(doc) {return doc.id+\"\\t\"+doc.date+\"\\t\"+doc.originalText});\n    \t\n    \tthis.resetData(); // reset all data before starting over\n    \t\n    \tdata.forEach(function(doc) {\n    \t\tthis.parseLine(doc);\n    \t}, this);\n    \t\n    \tthis.runIterations();\n    },\n    \n    runIterations: function() {\n    \tvar sweeps = this.getRequestedSweeps();\n    \tvar iterations = parseInt(this.getApiParam('iterations'));\n    \tsweeps+=parseInt(iterations);\n    \tthis.setTotalIterations(this.getTotalIterations()+iterations);\n    \tthis.setRequestedSweeps(sweeps)\n    \tif (!this.getProgress()) {\n    \t\tvar progress = Ext.MessageBox.show({\n    \t\t\ttitle: this.localize(\"runningIterations\"),\n    \t\t\tmessage: new Ext.Template(this.localize('runningIterationsCount')).apply([sweeps]),\n    \t\t\tprogress: true,\n    \t\t\tprogressText: '',\n    \t\t\ttarget: sweeps,\n    \t\t\tcustomUpdateProgress: function(val) {\n     \t\t\t   this.updateProgress((this.config.target-val)*this.config.target, \" iterations\");\n     \t\t   \t}\n    \t\t});\n    \t\tthis.setProgress(progress);\n    \t\tthis.updateProgress(sweeps);\n    \t}\n    \tthis.sweep();\n    },\n    \n    updateProgress: function(sweeps) {\n    \tvar progress = this.getProgress(), sweeps = this.getRequestedSweeps();\n    \tif (progress) {\n    \t\tvar target = progress.cfg.target;\n        \tvar val = (target-sweeps)/target;\n        \tprogress.updateProgress(val, (parseInt(val)*100) +\"% done\");\n    \t}\n    },\n    \n    sweep: function() {\n\n    \tvar startTime = Date.now(), numTopics = parseInt(this.getApiParam('numTopics')),\n    \t\tvocabularySize = this.getVocabularySize(), topicWordSmoothing = this.getTopicWordSmoothing(),\n    \t\ttokensPerTopic = this.getTokensPerTopic(), documents = this.getDocuments(),\n    \t\twordTopicCounts = this.getWordTopicCounts(), topicWeights = this.getTopicWeights(), \n    \t\tdocumentTopicSmoothing = this.getDocumentTopicSmoothing()\n    \t\t\n    \t\t\n    \tvar topicNormalizers = this.zeros(numTopics);\n    \tfor (var topic = 0; topic < numTopics; topic++) {\n    \t\ttopicNormalizers[topic] = 1.0 / (vocabularySize * topicWordSmoothing + tokensPerTopic[topic]);\n    \t}\n\n    \tfor (var doc = 0; doc < documents.length; doc++) {\n    \t\tvar currentDoc = documents[doc];\n    \t\tvar docTopicCounts = currentDoc.topicCounts;\n    \t\t\n    \t\tfor (var position = 0; position < currentDoc.tokens.length; position++) {\n    \t\t\tvar token = currentDoc.tokens[position];\n    \t\t\tif (token.isStopword) { continue; }\n\n    \t\t\ttokensPerTopic[ token.topic ]--;\n    \t\t\tvar currentWordTopicCounts = wordTopicCounts[ token.word ];\n    \t\t\tcurrentWordTopicCounts[ token.topic ]--;\n    \t\t\tif (currentWordTopicCounts[ token.topic ] == 0) {\n    \t\t\t  //delete(currentWordTopicCounts[ token.topic ]);\n    \t\t\t}\n    \t\t\tdocTopicCounts[ token.topic ]--;\n    \t\t\ttopicNormalizers[ token.topic ] = 1.0 / (vocabularySize * topicWordSmoothing + tokensPerTopic[ token.topic ]);\n\n    \t\t\tvar sum = 0.0;\n    \t\t\tfor (var topic = 0; topic < numTopics; topic++) {\n    \t\t\t\tif (currentWordTopicCounts[ topic ]) {\n    \t\t\t\t  topicWeights[topic] =\n    \t\t\t\t    (documentTopicSmoothing + docTopicCounts[topic]) *\n    \t\t\t\t    (topicWordSmoothing + currentWordTopicCounts[ topic ]) *\n    \t\t\t\t\ttopicNormalizers[topic];\n    \t\t\t\t}\n    \t\t\t\telse {\n    \t\t\t\t  topicWeights[topic] =\n    \t\t\t\t    (documentTopicSmoothing + docTopicCounts[topic]) *\n    \t\t\t\t\ttopicWordSmoothing *\n    \t\t\t\t\ttopicNormalizers[topic];\n    \t\t\t\t}\n    \t\t\t\tsum += topicWeights[topic];\n    \t\t\t}\n    \t\t    \n    \t\t\t// Sample from an unnormalized discrete distribution\n    \t\t\tvar sample = sum * Math.random();\n    \t\t    var i = 0;\n    \t\t    sample -= topicWeights[i];\n    \t\t    while (sample > 0.0) {\n    \t\t      i++;\n    \t\t      sample -= topicWeights[i];\n    \t\t \t}\n    \t\t\ttoken.topic = i;\n    \t\t\t\n    \t\t\ttokensPerTopic[ token.topic ]++;\n    \t\t\tif (! currentWordTopicCounts[ token.topic ]) {\n    \t\t\t\tcurrentWordTopicCounts[ token.topic ] = 1;\n    \t\t\t}\n    \t\t\telse {\n    \t\t\t\tcurrentWordTopicCounts[ token.topic ] += 1;\n    \t\t\t}\n    \t\t\tdocTopicCounts[ token.topic ]++;\n    \t\t\t\n    \t\t\ttopicNormalizers[ token.topic ] = 1.0 / (vocabularySize * topicWordSmoothing + tokensPerTopic[ token.topic ]);\n    \t\t}\n    \t}\n    \t\n    \tvar sweeps = this.getRequestedSweeps()-1;\n    \tthis.setRequestedSweeps(sweeps);\n    \tvar progress = this.getProgress();\n    \tif (sweeps>0) {\n    \t\tthis.updateProgress(sweeps);\n    \t\tExt.defer(this.sweep, 0, this);\n    \t} else {\n    \t\tprogress.close();\n    \t\tthis.setProgress(undefined);\n    \t\tthis.postSweep();\n    \t}\n    \t\n    },\n    \n    postSweep: function(){\n    \tthis.sortTopicWords();\n    \tvar store = this.getStore();\n    \tvar done = new Ext.Template(this.localize('totalDone')).apply([Ext.util.Format.number(parseInt(this.getTotalIterations()), \"0,000\")]);\n    \tthis.down('#done').setHtml(done);\n    \t\n\t\tvar numTopics = parseInt(this.getApiParam('numTopics')),\n\t\t\ttopicWordCounts = this.getTopicWordCounts(),\n\t\t\tdata = [], documents = this.getDocuments(),\n\t\t\tdocSortSmoothing = this.getDocSortSmoothing(),\n\t\t\tsumDocSortSmoothing = this.getSumDocSortSmoothing();\n\t\t\t\n\t\tvar limit = parseInt(this.getApiParam('limit'));\n\t\tfor (var topic = 0; topic < numTopics; topic++) {\n\t\t\tvar scores = documents.map(function (doc, i) {\n//\t\t\t\tconsole.warn(doc, doc.topicCounts[topic], docSortSmoothing, doc.tokens.length, sumDocSortSmoothing);\n\t\t\t\t  return (doc.topicCounts[topic] + docSortSmoothing) / (doc.tokens.length + sumDocSortSmoothing);\n\t\t\t});\n\t\t\t\n\t\t\tdata.push({\n\t\t\t\ttopic: this.topNWords(topicWordCounts[topic], limit),\n\t\t\t\tscores: scores\n\t\t\t})\n\t\t}\n    \tstore.loadData(data)\n    },\n    \n    topNWords: function(wordCounts, n) { return wordCounts.slice(0,n).map( function(d) { return d.word; }).join(\" \"); },\n    \n    sortTopicWords: function() {\n    \tvar topicWordCounts = this.getTopicWordCounts(), numTopics = parseInt(this.getApiParam('numTopics')),\n    \t\twordTopicCounts = this.getWordTopicCounts();\n\n    \t  topicWordCounts = [];\n    \t  for (var topic = 0; topic < numTopics; topic++) {\n    \t    topicWordCounts[topic] = [];\n    \t  }\n\n    \t  for (var word in wordTopicCounts) {\n    \t    for (var topic in wordTopicCounts[word]) {\n    \t      topicWordCounts[topic].push({\"word\":word, \"count\":wordTopicCounts[word][topic]});\n    \t    }\n    \t  }\n\n    \t  for (var topic = 0; topic < numTopics; topic++) {\n    \t    topicWordCounts[topic].sort(this.byCountDescending);\n    \t  }\n\n    \t  this.setTopicWordCounts(topicWordCounts);\n    },\n    \n    byCountDescending: function(a,b) {return b.count - a.count; },\n    \n    initialize: function() {\n    \t// make sure we have the right number of iterations in our label (especially after an options change)\n    \tvar val = new Ext.Template(this.localize('runIterations')).apply([Ext.util.Format.number(parseInt(this.getApiParam('iterations')), \"0,000\")]);\n    \tvar iterations = this.down('#iterations').setText(val)\n    \tthis.loadStopwords();\n    },\n    \n    parseLine: function ( line ) {\n    \t\n    \t// for simplicity, create locally scoped variables of these\n    \tvar stopwords = this.getStopwords(), vocabularyCounts = this.getVocabularyCounts(),\n\t    \ttokensPerTopic = this.getTokensPerTopic(), vocabularySize=this.getVocabularySize(),\n\t    \tvocabularyCounts = this.getVocabularyCounts(), documents = this.getDocuments(),\n\t    \tnumTopics = parseInt(this.getApiParam('numTopics')),\n\t    \twordTopicCounts = this.getWordTopicCounts();\n    \t\n    \t  if (line == \"\") { return; }\n    \t  var docID = documents.length;\n    \t  var docDate = \"\";\n    \t  var fields = line.split(\"\\t\");\n    \t  var text = fields[0];  // Assume there's just one field, the text\n    \t  if (fields.length == 3) {  // If it's in [ID]\\t[TAG]\\t[TEXT] format...\n    \t    docID = fields[0];\n    \t    docDate = fields[1]; // do not interpret date as anything but a string\n    \t    text = fields[2];\n    \t  }\n\n    \t  var tokens = [];\n    \t  var rawTokens = text.toLowerCase().split(' '); // xsl should only use space between tokens\n    \t  if (rawTokens == null) { return; }\n    \t  var topicCounts = this.zeros(numTopics);\n\n    \t  rawTokens.forEach(function (word) {\n    \t    if (word !== \"\") {\n    \t      var topic = Math.floor(Math.random() * numTopics);\n    \t\t  \n    \t\t  if (word.length <= 2) { stopwords[word] = 1; }\n    \t\t  \n    \t\t  var isStopword = stopwords[word];\n    \t\t  if (isStopword) {\n    \t\t\t  // Record counts for stopwords, but nothing else\n    \t\t\t  if (! vocabularyCounts[word]) {\n    \t\t\t\t  vocabularyCounts[word] = 1;\n    \t\t\t  }\n    \t\t\t  else {\n    \t\t\t  \tvocabularyCounts[word] += 1;\n    \t\t\t  }\n    \t\t  }\n    \t\t  else {\n    \t\t      tokensPerTopic[topic]++;\n    \t\t      if (! wordTopicCounts[word]) {\n    \t\t        wordTopicCounts[word] = {};\n    \t\t        vocabularySize++;\n    \t\t        vocabularyCounts[word] = 0;\n    \t\t      }\n    \t\t      if (! wordTopicCounts[word][topic]) {\n    \t\t        wordTopicCounts[word][topic] = 0;\n    \t\t      }\n    \t\t      wordTopicCounts[word][topic] += 1;\n    \t\t      vocabularyCounts[word] += 1;\n    \t\t      topicCounts[topic] += 1;\n    \t      }\n    \t      tokens.push({\"word\":word, \"topic\":topic, \"isStopword\":isStopword });\n    \t    }\n    \t  });\n    \t  this.setVocabularySize(vocabularySize); // set this scalar\n    \t  \n    \t  documents.push({ \"originalOrder\" : documents.length, \"id\" : docID, \"date\" : docDate, \"originalText\" : text, \"tokens\" : tokens, \"topicCounts\" : topicCounts});\n    \t}\n    \n});","\n// assuming Cirrus library is loaded by containing page (via voyant.jsp)\nExt.define('Voyant.panel.Via', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.via',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tlimit: 100,\n    \t\tdocIndex: undefined\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    config: {\n    \tmode: undefined,\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},\n    \t\t{\n\t    \t\txtype: 'listeditor',\n\t    \t\tname: 'whiteList'\n    \t    },\n    \t    {xtype: 'categoriesoption'}\n    \t]\n    },\n    \n    layout: 'fit',\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function (config) {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'corpusdocumentselector',\n        \t\t\tsingleSelect: true\n        \t\t},{\n        \t\t\tfieldLabel: this.localize('visible'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 10,\n\t            \tminValue: 10,\n\t            \tmaxValue: 1000,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"limit\"))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadFromCorpus(this.getCorpus());\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n    \tthis.callParent(arguments);\n    \t\n    \t\n    },\n    \n    listeners: {\n    \tresize: function(panel, width, height) {\n//    \t\tif (this.getCorpus()) {\n//        \t\tthis.loadFromCorpus(this.getCorpus())\n//    \t\t}\n    \t},\n    \t\n    \tloadedCorpus: function(src, corpus) {\n    \t\tvar langs = corpus.get(\"languageCodes\");\n    \t\tvar val = Ext.Array.each(langs, function(lang) {\n    \t\t\tif (lang!='en') {\n    \t\t\t\tthis.showError(this.localize('englishOnly'));\n    \t\t\t\treturn false;\n    \t\t\t}\n    \t\t}, this);\n    \t\tif (corpus.getWordTokensCount()>100000 && !this.getApiParam(\"docIndex\")) {\n    \t\t\tthis.setApiParam(\"docIndex\", 0)\n    \t\t}\n    \t\tthis.loadFromCorpus(corpus);\n    \t},\n    \t\n    \tcorpusSelected: function(src, corpus) {\n    \t\tthis.setApiParam(\"docIndex\", \"\");\n    \t\tthis.loadFromCorpus(corpus)\n    \t},\n    \t\n    \tdocumentSelected: function(src, document) {\n    \t\tthis.setApiParam(\"docIndex\", document.getIndex());\n    \t\tthis.loadFromCorpus(this.getCorpus())\n    \t}\n    \t\n    \t\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar me = this;\n    \tthis.mask(this.localize(\"loading\"))\n    \tvar params = this.getApiParams();\n    \tvar a = corpus.loadRelatedWords(params).then(function(relatedWords) {\n    \t\tme.unmask()\n    \t\tvar edges = relatedWords.map(function(item) {return {source: item.getSource(), target: item.getTarget()}})\n    \t\tvar graph = me.down(\"voyantnetworkgraph\");\n    \t\tif (graph) {\n    \t\t\tgraph.loadJson({edges: edges});\n    \t\t} else {\n    \t\t\tgraph = Ext.create(\"Voyant.widget.VoyantNetworkGraph\", {\n        \t\t\tedges: edges,\n        \t\t\tlisteners: {\n        \t\t\t\tnodeclicked: function(src, node) {\n        \t\t\t\t\tme.dispatchEvent('termsClicked', me, [node.term]);\n        \t\t\t\t}\n        \t\t\t}\n        \t\t})\n        \t\tme.add(graph)\n    \t\t}\n    \t}, function(response) {\n    \t\tme.unmask();\n    \t\tif (response.timedout) {\n    \t\t\tme.showError(me.localize('timedout'));\n    \t\t} else {\n        \t\tme.showError(response);\n    \t\t}\n    \t});\n    }\n});","Ext.define(\"Voyant.notebook.editor.button.Add\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperadd',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\t\tthis.callParent(arguments);\n\t},\n\tglyph: 'xf067@FontAwesome',\n\thandler: function(btn, e) {\n\t\tbtn.findParentByType('notebook').fireEvent(\"notebookWrapperAdd\", btn.findParentByType(\"notebookeditorwrapper\"), e);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.CodeConfig\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookcodeconfig',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttip: \"Configuration Options\",\n\t\t\ttitle: \"Cell Mode\",\n\t\t\tmodeCode: 'Code',\n\t\t\tmodeJavascript: 'Javascript (default)',\n\t\t\tmodeData: 'Data',\n\t\t\tmodeFile: 'File',\n\t\t\tmodeJson: 'JSON',\n\t\t\tmodeText: 'Text',\n\t\t\tmodeXml: 'XML',\n\t\t\tmodeHtml: 'HTML',\n\t\t\tok: \"OK\",\n\t\t\tcancel: \"Cancel\"\n\t\t},\n\t\tconfigWin: undefined,\n\t\tinitWindow: function(buttonInstance) {\n\t\t\tif (Voyant.notebook.editor.button.CodeConfig.configWin === undefined) {\n\t\t\t\tVoyant.notebook.editor.button.CodeConfig.configWin = new Ext.Window({\n\t\t\t\t\ttitle: buttonInstance.localize('title'),\n\t\t\t\t\tcloseAction: 'hide',\n\t\t\t\t\tlayout: 'fit',\n\t\t\t\t\twidth: 240,\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\t\talign: 'stretch'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbodyPadding: 10,\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t\t\t\t\ttitle: buttonInstance.localize(\"modeCode\"),\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeJavascript'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'javascript',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t\t\t\t\ttitle: buttonInstance.localize(\"modeData\"),\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeFile'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'file',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeJson'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'json',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeText'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'text',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},/*{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeCsv'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'csv',\n\t\t\t\t\t\t\t\tflex  : 1\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeTsv'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'tsv',\n\t\t\t\t\t\t\t\tflex  : 1\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t},*/{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeXml'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'xml',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeHtml'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'html',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t}]\n\t\t\t\t\t}],\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\ttext: buttonInstance.localize('ok'),\n\t\t\t\t\t\titemId: 'ok'\n\t\t\t\t\t},{\n\t\t\t\t\t\ttext:  buttonInstance.localize('cancel'),\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tshowConfigWindow: function(codeEditorInstance) {\n\t\t\tVoyant.notebook.editor.button.CodeConfig.configWin.down('radiofield[name=codeMode][inputValue=\"'+codeEditorInstance.getMode()+'\"]').setValue(true);\n\t\t\tVoyant.notebook.editor.button.CodeConfig.configWin.down('button#ok').setHandler(function(btn) {\n\t\t\t\tvar win = btn.up('window');\n\t\t\t\tvar form = win.down('form');\n\t\t\t\tif (form.isDirty()) {\n\t\t\t\t\tcodeEditorInstance.up('notebook').setIsEdited(true);\n\t\t\t\t\tvar values = form.getValues();\n\t\t\t\t\tcodeEditorInstance.switchModes(values.codeMode);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\twin.close();\n\t\t\t});\n\t\t\tVoyant.notebook.editor.button.CodeConfig.configWin.show();\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\ttooltip: this.localize('tip')\n\t\t})\n\t\t\n\t\tVoyant.notebook.editor.button.CodeConfig.initWindow(this);\n\n\t\tthis.callParent(arguments);\n\t},\n\tglyph: 'xf013@FontAwesome',\n\tlisteners: {\n\t\tclick: function(btn, e) {\n\t\t\tVoyant.notebook.editor.button.CodeConfig.showConfigWindow(btn.findParentByType(\"notebookeditorwrapper\"));\n\t\t}\n\t}\n});\n","Ext.define('Voyant.notebook.editor.button.Export', {\n\textend: 'Ext.button.Button',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.notebookwrapperexport',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttip: 'Export',\n\t\t\texportTitle: 'Export',\n\t\t\texportOpen: 'Export content into new window',\n\t\t\texportDownload: 'Download file to your machine',\n\t\t\texportCorpus: 'Open Corpus in Voyant Tools',\n\t\t\tcancelTitle: 'Cancel'\n\t\t},\n\t\texportWin: undefined,\n\t\tgetExportWindow: function(instance) {\n\t\t\tif (this.exportWin === undefined) {\n\t\t\t\tthis.exportWin = Ext.create('Ext.window.Window', {\n\t\t\t\t\ttitle: instance.localize('exportTitle'),\n\t\t\t\t\tcloseAction: 'hide',\n\t\t\t\t\tmodal: true,\n\t\t\t\t\twidth: 250,\n\t\t\t\t\tbodyPadding: 5,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\talign: 'stretch'\n\t\t\t\t\t},\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'button'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\titemId: 'corpus',\n\t\t\t\t\t\ttext: instance.localize('exportCorpus'),\n\t\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t\t\t\t\t\tmargin: '0 0 5 0',\n\t\t\t\t\t\thidden: true\n\t\t\t\t\t},{\n\t\t\t\t\t\titemId: 'open',\n\t\t\t\t\t\ttext: instance.localize('exportOpen'),\n\t\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t\t\t\t\t\tmargin: '0 0 5 0',\n\t\t\t\t\t},{\n\t\t\t\t\t\titemId: 'download',\n\t\t\t\t\t\tpreventDefault: false,\n\t\t\t\t\t\ttext: instance.localize('exportDownload'),\n\t\t\t\t\t\tglyph: 'xf019@FontAwesome',\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\ttext: instance.localize('cancelTitle'),\n\t\t\t\t\t\tglyph: 'xf00d@FontAwesome',\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar wrapper = instance.up('notebookrunnableeditorwrapper');\n\t\t\t\n\t\t\tvar notebook = wrapper.up('notebook');\n\t\t\tvar notebookId = notebook.getNotebookId() || 'spyral';\n\t\t\t\n\t\t\tvar input = wrapper.getInput();\n\t\t\tvar output = wrapper.getOutput();\n\t\t\tvar mode = wrapper.getMode();\n\n\t\t\tvar corpusButton = this.exportWin.down('#corpus');\n\t\t\tvar openButton = this.exportWin.down('#open');\n\t\t\tcorpusButton.setHidden(true);\n\t\t\topenButton.setHidden(false);\n\n\t\t\tvar fileName;\n\t\t\tvar fileType;\n\t\t\tvar fileContent;\n\t\t\tif (mode === 'file') {\n\t\t\t\topenButton.setHidden(true);\n\t\t\t\tfileName = input.fileName;\n\t\t\t\tfileType = output.type;\n\t\t\t\tfileContent = output;\n\t\t\t} else if (mode === 'javascript') {\n\t\t\t\t// corpus check\n\t\t\t\tif (Spyral.Util.isObject(output) && output.hasOwnProperty('corpusid') && Spyral.Util.isString(output.corpusid)) {\n\t\t\t\t\tcorpusButton.setHidden(false);\n\t\t\t\t\tcorpusButton.setHandler(function(btn) {\n\t\t\t\t\t\tvar url = Voyant.application.getBaseUrlFull()+'?corpus='+output.corpusid;\n\t\t\t\t\t\twindow.open(url);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Spyral.Util.isUndefined(output)) {\n\t\t\t\t\t// output is probably a document and couldn't be sent from sandbox\n\t\t\t\t\t// try getContent fallback\n\t\t\t\t\toutput = wrapper.getContent().output;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (Spyral.Util.isObject(output) || Spyral.Util.isArray(output)) {\n\t\t\t\t\tfileName = notebookId+'_'+wrapper.getCellId()+'.json';\n\t\t\t\t\tfileType = 'application/json';\n\t\t\t\t\tfileContent = JSON.stringify(output);\n\t\t\t\t} else if (Spyral.Util.isNode(output) || (Spyral.Util.isString(output) && output.match(/<\\/?\\w+.*?>/g) !== null)) {\n\t\t\t\t\tfileName = notebookId+'_'+wrapper.getCellId()+'.html';\n\t\t\t\t\tfileType = 'text/html';\n\t\t\t\t\tif (Spyral.Util.isString(output)) {\n\t\t\t\t\t\tfileContent = output;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfileContent = new XMLSerializer().serializeToString(output);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfileName = notebookId+'_'+wrapper.getCellId()+'.txt';\n\t\t\t\t\tfileType = 'text/plain';\n\t\t\t\t\tfileContent = output;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfileName = notebookId+'_'+wrapper.getDataName()+'.'+mode;\n\t\t\t\tfileType = 'text/'+mode;\n\t\t\t\tfileContent = input;\n\t\t\t\tif (mode === 'json') {\n\t\t\t\t\tfileType = 'application/json';\n\t\t\t\t} else if (mode === 'text') {\n\t\t\t\t\tfileName = notebookId+'_'+wrapper.getDataName()+'.txt';\n\t\t\t\t\tfileType = 'text/plain';\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar file = new File([fileContent], fileName, {lastModified: new Date().getTime(), type: fileType});\n\n\t\t\tthis.exportWin.down('#open').setHandler(function(btn) {\n\t\t\t\tvar myWindow = window.open();\n\t\t\t\tmyWindow.document.write(fileContent);\n\t\t\t\tmyWindow.document.close();\n\t\t\t\tmyWindow.focus();\n\t\t\t\tbtn.up('window').close();\n\t\t\t});\n\n\t\t\tthis.exportWin.addListener('show', function() {\n\t\t\t\tvar url = URL.createObjectURL(file);\n\t\t\t\tthis.exportWin.down('#download').getEl().set({\n\t\t\t\t\tdownload: fileName,\n\t\t\t\t\thref: url\n\t\t\t\t});\n\t\t\t}, this, { single: true });\n\n\t\t\treturn this.exportWin;\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tExt.apply(config, {\n\t\t\ttooltip: this.localize('tip')\n\t\t})\n\t\tthis.callParent(arguments);\n\t},\n\tglyph: 'xf08e@FontAwesome',\n\tlisteners: {\n\t\tclick: function(cmp) {\n\t\t\tvar wrapper = cmp.up('notebookrunnableeditorwrapper');\n\t\t\twrapper.results.updateCachedOutput().then(function(output) {\n\t\t\t\tVoyant.notebook.editor.button.Export.getExportWindow(cmp).show();\n\t\t\t});\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Counter\", {\n\textend: \"Ext.toolbar.TextItem\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappercounter',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\torder: 0,\n\t\tname: undefined\n\t},\n\tcls: 'notebookwrappercounter',\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttoolTip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tsetOrder: function(pos) {\n\t\tthis.callParent(arguments);\n\t\tthis.updateHtml();\n\t},\n\tupdateHtml: function() {\n\t\tvar pos = this.getOrder()+1;\n\t\tvar lnk = 'spyralcounter_'+pos;\n\t\tvar name = this.getName();\n\t\tthis.setHtml('<a name=\"'+name+'\" href=\"#'+name+'\">'+pos+'</a>');\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.MoveDown\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappermovedown',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf063@FontAwesome',\n\ttextAlign: 'left',\n\tlisteners: {\n\t\tclick: function() {\n        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperMoveDown\", this.findParentByType(\"notebookeditorwrapper\"));\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.MoveUp\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappermoveup',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf062@FontAwesome',\n\ttextAlign: 'left',\n\tlisteners: {\n\t\tclick: function() {\n        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperMoveUp\", this.findParentByType(\"notebookeditorwrapper\"));\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Remove\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperremove',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf014@FontAwesome',\n\ttextAlign: 'left',\n\tlisteners: {\n\t\tclick: function() {\n\t\t\tExt.Msg.show({\n\t\t\t\tbuttons: Ext.Msg.OKCANCEL,\n\t\t\t\ticon: Ext.MessageBox.QUESTION,\n\t\t\t\tmsg: this.localize(\"confirmRemove\"),\n\t\t\t\ttitle: this.localize(\"confirmRemoveTitle\"),\n\t\t\t\tfn: function(buttonId) {\n\t\t\t\t\tif (buttonId=='ok') {\n\t\t\t        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperRemove\", this.findParentByType(\"notebookeditorwrapper\"));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t})\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Run\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrun',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tglyph: 'xf04b@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\t\tthis.callParent(arguments);\n\t},\n\tlisteners: {\n\t\tclick: function(btn, e) {\n\t\t\tvar rew = btn.findParentByType(\"notebookrunnableeditorwrapper\");\n\t\t\trew.run.call(rew);\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.RunAll\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrunall',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tglyph: 'xf04e@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\t\tthis.callParent(arguments);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.RunUntil\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrununtil',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttip: \"Run multiple cells\",\n\t\t\trunUntil: \"Run up to here\",\n\t\t\trunUntilTip: \"Run previous code blocks and this one.\",\n\t\t\trunFrom: \"Run from here onwards\",\n\t\t\trunFromTip: \"Run this and following code blocks.\"\n\t\t}\n\t},\n\tglyph: 'xf050@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\n\t\tvar btn = this;\n\t\tthis.runMenu = Ext.create('Ext.menu.Menu', {\n\t\t\titems: [{\n\t\t\t\ttext: this.localize(\"runUntil\"),\n\t\t\t\ttooltip: this.localize(\"runUntilTip\"),\n\t\t\t\tglyph: 'xf049@FontAwesome',\n\t\t\t\thandler: function() {\n\t\t\t\t\tvar rew = btn.findParentByType(\"notebookrunnableeditorwrapper\");\n\t\t\t\t\tbtn.up('notebook').runUntil(rew);\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\ttext: this.localize(\"runFrom\"),\n\t\t\t\ttooltip: this.localize(\"runFromTip\"),\n\t\t\t\tglyph: 'xf050@FontAwesome',\n\t\t\t\thandler: function() {\n\t\t\t\t\tvar rew = btn.findParentByType(\"notebookrunnableeditorwrapper\");\n\t\t\t\t\tbtn.up('notebook').runFrom(rew);\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t},\n\thandler: function(btn, ev) {\n\t\tbtn.runMenu.showAt(ev.pageX, ev.pageY)\n\t}\n})","Ext.define(\"Voyant.notebook.editor.EditorWrapper\", {\n\textend: \"Ext.panel.Panel\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: \"widget.notebookeditorwrapper\",\n\tcls: \"notebook-editor-wrapper\",\n\tconfig: {\n\t\tcellId: undefined,\n\t\tcontent: '',\n\t\tisEditing: false\n\t},\n\tborder: false,\n\tbodyBorder: false,\n\tinitComponent: function() {\n\t\tthis.setCellId(this.config.cellId);\n\t\tthis.on(\"afterrender\", function(){\n\t\t\tthis.getDockedItems().forEach(function(tb) {\n\t\t\t\ttb.getTargetEl().setVisibilityMode(Ext.dom.Element.VISIBILITY);\n\t\t\t});\n\t\t\tthis.setActiveMode(false);\n\t\t\tthis.body.on(\"click\", function() {\n\t\t\t\tthis.removeCls(\"notebook-editor-wrapper-hover\");\n\t\t\t\tthis.setActiveMode(true); // added for touch devices\n\t\t\t}, this);\n\t\t\tthis.mon(this.getEl(), \"mouseover\", function() {\n\t\t\t\tthis.setActiveMode(true);\n\t\t\t}, this);\n\t\t\tthis.mon(this.getEl(), \"mouseout\", function() {\n\t\t\t\tthis.setActiveMode(false);\n\t\t\t}, this);\t\t\t\n\t\t}, this);\n\t\tthis.callParent(arguments);\n\t},\n\tsetActiveMode: function(mode) {\n\t\tthis.getDockedItems().forEach(function(tb) {\n\t\t\tif (tb.dock=='right') {\n\t\t\t\ttb.items.each(function(item) {\n\t\t\t\t\tif (item.hasCls(\"notebookwrappercounter\")==false) {\n\t\t\t\t\t\titem.getTargetEl().setVisibility(mode);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\ttb.getTargetEl().setVisibility(mode);\n\t\t\t}\n\t\t}, this);\n\t\tif (!this.getIsEditing()) {\n\t\t\tif (mode) {\n\t\t\t\tthis.body.addCls(\"notebook-editor-wrapper-hover\");\n\t\t\t} else {\n\t\t\t\tthis.body.removeCls(\"notebook-editor-wrapper-hover\");\n\t\t\t}\n\t\t}\n\t},\n\tgetContent: function() {\n\t\tthrow new Error('Subclass must override!');\n\t}\n})","Ext.define(\"Voyant.notebook.editor.RunnableEditorWrapper\", {\n\textend: \"Voyant.notebook.editor.EditorWrapper\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: \"widget.notebookrunnableeditorwrapper\",\n\tconfig: {\n\t\tisRun: false,\n\t\tmode: 'javascript'\n\t},\n\n\teditor: undefined,\n\tresults: undefined,\n\n\tconstructor: function(config) {\n\t\tthis.results.addListener('initialized', this.updateLayout, this);\n\n\t\tthis.callParent(arguments);\n\t},\n\n\t/**\n\t * Run the code in this editor.\n\t * @param {boolean} forceRun True to force the code to run, otherwise a check is performed to see if previous editors have already run.\n\t * @param {array} priorVariables Variables from prior cells that should be eval'd before this cell's code\n\t */\n\trun: function(forceRun, priorVariables) {\n\t\tif (this.results.getIsInitialized()) {\n\t\t\tif (priorVariables === undefined) {\n\t\t\t\tconsole.log('fetching prior vars');\n\t\t\t\tpriorVariables = this.up('notebook').getNotebookVariables(this);\n\t\t\t}\n\t\t\treturn this._run(priorVariables);\n\t\t} else {\n\t\t\treturn Ext.Promise.reject('Editor is not initialized');\n\t\t}\n\t},\n\t\n\t_run: function(priorVariables) {\n\t\tthis.results.clear();\n\n\t\tthis.editor.clearMarkers();\n\n\t\tvar code = this.editor.getValue();\n\n\t\tthis.setIsRun(true);\n\t\t\n\t\tvar runPromise = this.results.run(code, priorVariables);\n\t\trunPromise.otherwise(function(eventData) {\n\t\t\tif (eventData.error !== undefined) {\n\t\t\t\tvar location = eventData.error.location;\n\t\t\t\tif (location !== undefined) {\n\t\t\t\t\tthis.editor.addMarker(location, 'error');\n\t\t\t\t\tthis.editor.addLineMarker(location, 'error');\n\t\t\t\t}\n\t\t\t}\n\t\t}, this);\n\n\t\treturn runPromise;\n\t},\n\t\n\tgetInput: function() {\n\t\treturn this.editor.getValue();\n\t},\n\n\tgetVariables: function() {\n\t\tif (this.results.getHasRunError()) {\n\t\t\treturn [];\n\t\t} else {\n\t\t\treturn this.results.getVariables();\n\t\t}\n\t},\n\n\tgetOutput: function() {\n\t\tif (this.results.getHasRunError()) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn this.results.getCachedResultsValue();\n\t\t}\n\t},\n\n\t_reduceDataViewerOutput: function(output) {\n\t\tvar html = new DOMParser().parseFromString(output, 'text/html');\n\t\t\n\t\tvar container = html.querySelector('.spyral-dv-container');\n\t\tif (container !== null) {\n\t\t\t// if dataviewer, trim the content that will be saved\n\t\t\tfunction trimContent(parent, limit) {\n\t\t\t\tvar content = parent.querySelector('.spyral-dv-content .spyral-dv-right');\n\t\t\t\tif (content !== null) {\n\t\t\t\t\tvar toRemove = [];\n\t\t\t\t\tvar wasTrimmed = false;\n\t\t\t\t\tfor (var i = 0; i < content.children.length; i++) {\n\t\t\t\t\t\tif (i >= limit) {\n\t\t\t\t\t\t\ttoRemove.push(content.children[i]);\n\t\t\t\t\t\t\twasTrimmed = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttrimContent(content.children[i], limit);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttoRemove.forEach(function(node) { content.removeChild(node); });\n\t\t\t\t\tif (wasTrimmed) {\n\t\t\t\t\t\tcontent.insertAdjacentHTML('beforeend', '<span class=\"spyral-dv-content\">...</span>')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttrimContent(container, 10);\n\n\t\t\treturn container.outerHTML.replace(/spyral-dv-collapsed/g, 'spyral-dv-expanded'); // expand all nodes\n\t\t} else {\n\t\t\treturn output;\n\t\t}\n\t},\n\n\t/**\n\t * This is a method for getting string versions of input and output content.\n\t * Primarily used when saving the notebook.\n\t * @returns {Object}\n\t */\n\tgetContent: function() {\n\t\tvar output = this._reduceDataViewerOutput(this.results.getOutput());\n\t\treturn {\n\t\t\tinput: this.getInput(),\n\t\t\toutput: output,\n\t\t\tmode: this.getMode(),\n\t\t\texpandResults: this.results.getExpandResults()\n\t\t};\n\t}\n});\n","Ext.define(\"Voyant.notebook.editor.SandboxWrapper\", {\n\textend: \"Ext.Container\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: \"widget.sandboxwrapper\",\n\tstatics: {\n\t\ti18n: {}\n\t},\n\n\tconfig: {\n\t\tisInitialized: false,\n\n\t\tcachedPaddingHeight: undefined,\n\t\tcachedResultsHeight: undefined,\n\t\tcachedResultsValue: undefined,\n\t\tcachedResultsOutput: '',\n\t\tcachedResultsVariables: [],\n\n\t\trunPromise: undefined,\n\t\thasRunError: false,\n\n\t\tinitIntervalID: undefined,\n\t\tmaskTimeoutId: undefined,\n\n\t\temptyResultsHeight: 40,\n\t\tminimumResultsHeight: 120,\n\n\t\texpandResults: true\n\t},\n\n\tconstructor: function(config) {\n\t\tvar isExpanded = config.expandResults;\n\t\tvar sandboxSrcUrl = config.sandboxSrcUrl;\n\n\t\tExt.apply(this, {\n\t\t\titemId: 'parent',\n\t\t\tcls: 'notebook-code-results',\n\t\t\theight: this.getEmptyResultsHeight(),\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\txtype: 'container',\n\t\t\t\tflex: 1,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'absolute'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'uxiframe',\n\t\t\t\t\titemId: 'resultsFrame',\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\tanchor: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t\tsrc: sandboxSrcUrl,\n\t\t\t\t\trenderTpl: ['<iframe allow=\"midi; geolocation; microphone; camera; display-capture; encrypted-media;\" sandbox=\"allow-same-origin allow-scripts allow-modals allow-popups allow-forms allow-top-navigation-by-user-activation allow-downloads\" src=\"{src}\" id=\"{id}-iframeEl\" data-ref=\"iframeEl\" name=\"{frameName}\" width=\"100%\" height=\"100%\" frameborder=\"0\"></iframe>']\n\t\t\t\t},{\n\t\t\t\t\txtype: 'toolbar',\n\t\t\t\t\titemId: 'buttons',\n\t\t\t\t\thidden: true,\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\tstyle: { background: 'none', paddingTop: '6px', pointerEvents: 'none' },\n\t\t\t\t\tdefaults: { style: { pointerEvents: 'auto'} },\n\t\t\t\t\titems: ['->',{\n\t\t\t\t\t\titemId: 'expandButton',\n\t\t\t\t\t\tglyph: isExpanded ? 'xf066@FontAwesome' : 'xf065@FontAwesome',\n\t\t\t\t\t\ttooltip: isExpanded ? 'Contract Results' : 'Expand Results',\n\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\tthis._doExpandContract();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookwrapperexport'\n\t\t\t\t\t},{\n\t\t\t\t\t\tglyph: 'xf014@FontAwesome',\n\t\t\t\t\t\ttooltip: 'Remove Results',\n\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\tthis.resetResults();\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\txtype: 'component',\n\t\t\t\titemId: 'expandWidget',\n\t\t\t\theight: 20,\n\t\t\t\thidden: isExpanded ? true : false,\n\t\t\t\tstyle: {textAlign: 'center', fontSize: '26px', cursor: 'pointer', borderTop: '1px solid #DDD', color: '#000'},\n\t\t\t\thtml: '&#8943;',\n\t\t\t\tlisteners: {\n\t\t\t\t\tafterrender: function(cmp) {\n\t\t\t\t\t\tvar me = this;\n\t\t\t\t\t\tcmp.getEl().on('click', function() {\n\t\t\t\t\t\t\tme._doExpandContract();\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tinitComponent: function() {\n\t\tvar handleResultsScoped = this._handleResults.bind(this);\n\n\t\tthis.on('afterrender', function(cmp) {\n\t\t\tcmp.getEl().on('mouseover', function(event, el) {\n\t\t\t\tcmp.down('#buttons').setVisible(true);\n\t\t\t});\n\t\t\tcmp.getEl().on('mouseout', function(event, el) {\n\t\t\t\tcmp.down('#buttons').setVisible(false);\n\t\t\t});\n\n\t\t\twindow.addEventListener('message', handleResultsScoped);\n\n\t\t\tvar me = this;\n\t\t\tthis.setInitIntervalID(setInterval(function() {\n\t\t\t\tme._sendMessage({type: 'command', command: 'init'});\n\t\t\t}, 100));\n\t\t}, this);\n\n\t\tthis.on('removed', function() {\n\t\t\twindow.removeEventListener('message', handleResultsScoped);\n\t\t}, this);\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tclear: function() {\n\t\tif (this.isVisible() === false) {\n\t\t\tconsole.log(\"clearing but not visible!\", this);\n\t\t\tthis.show();\n\t\t}\n\t\tthis._sendMessage({type: 'command', command: 'clear'});\n\t},\n\n\tresetResults: function() {\n\t\tthis.setCachedResultsValue(undefined);\n\t\tthis.setCachedResultsOutput('');\n\t\tthis.setCachedResultsVariables([]);\n\t},\n\n\trun: function(code, priorVariables) {\n\t\tif (priorVariables === undefined) {\n\t\t\tpriorVariables = [];\n\t\t}\n\n\t\t// reset\n\t\tthis.resetResults();\n\t\tthis.setHasRunError(false);\n\t\tthis.getEl().removeCls(['error','success']);\n\n\t\tthis.setRunPromise(new Ext.Deferred());\n\n\t\tvar actualPromise = this.getRunPromise().promise;\n\t\tactualPromise.then(function() {\n\t\t\tthis.getEl().addCls('success');\n\t\t}, function() {\n\t\t\tthis.setHasRunError(true);\n\t\t\tthis.getEl().addCls('error');\n\t\t}, undefined, this);\n\n\t\tthis.mask('Running code...');\n\n\t\t// console.log('sending vars', priorVariables);\n\t\tthis._sendMessage({type: 'code', value: code, variables: priorVariables});\n\n\t\treturn actualPromise;\n\t},\n\n\tmask: function(maskMsg) {\n\t\tvar me = this;\n\t\tthis.setMaskTimeoutId(setTimeout(function() {\n\t\t\tme.superclass.mask.call(me, maskMsg, 'spyral-code-mask');\n\t\t}, 250)); // only mask long running code\n\t},\n\n\tunmask: function() {\n\t\tclearTimeout(this.getMaskTimeoutId());\n\t\tthis.superclass.unmask.call(this);\n\t},\n\n\tupdateHtml: function(html) {\n\t\tthis._sendMessage({type: 'command', command: 'update', html: html});\n\t},\n\n\tupdateValue: function(name, value) {\n\t\tthis._sendMessage({type: 'command', command: 'update', name: name, value: value});\n\t},\n\n\tgetValue: function() {\n\t\treturn this.getCachedResultsValue();\n\t},\n\n\tupdateCachedOutput: function() {\n\t\tvar me = this;\n\t\treturn new Ext.Promise(function (resolve, reject) {\n\t\t\tme._sendMessage({type: 'command', command: 'getContents'});\n\t\t\tme.on('sandboxMessage', function(eventData) {\n\t\t\t\tif (eventData.command === 'getContents') {\n\t\t\t\t\tme.setCachedResultsOutput(eventData.value);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('getOutput: received unexpected message',eventData);\n\t\t\t\t}\n\t\t\t\tresolve(me.getCachedResultsOutput());\n\t\t\t}, me, {single: true});\n\t\t});\n\t},\n\n\tgetOutput: function() {\n\t\treturn this.getCachedResultsOutput();\n\t},\n\n\tgetVariables: function() {\n\t\treturn this.getCachedResultsVariables();\n\t},\n\n\tgetResultsEl: function() {\n\t\tvar doc = this.down('#resultsFrame');\n\t\tif (doc) {\n\t\t\treturn doc;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t_sendMessage: function(messageObj) {\n\t\tthis.down('#resultsFrame').getWin().postMessage(messageObj, '*');\n\t},\n\n\t_handleResults: function(e) {\n\t\tvar frame = this.down('#resultsFrame').getFrame();\n\t\tif (e.source === frame.contentWindow) {\n\t\t\tvar me = this;\n\t\t\tvar eventData = e.data;//JSON.parse(td.decode(ev.target.result));\n\t\t\tif (eventData.type) {\n\t\t\t\tswitch (eventData.type) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\tconsole.log('iframe error:', eventData);\n\t\t\t\t\t\tme.unmask();\n\t\t\t\t\t\tme.getRunPromise().reject(eventData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'command':\n\t\t\t\t\t\t// console.log('iframe command:', eventData);\n\t\t\t\t\t\tswitch (eventData.command) {\n\t\t\t\t\t\t\tcase 'init':\n\t\t\t\t\t\t\t\tif (me.getIsInitialized() === false) {\n\t\t\t\t\t\t\t\t\tme.setIsInitialized(true);\n\t\t\t\t\t\t\t\t\tclearInterval(me.getInitIntervalID());\n\t\t\t\t\t\t\t\t\tme.fireEvent('initialized', me);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'clear':\n\t\t\t\t\t\t\t\tme._setHeight(0);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'result':\n\t\t\t\t\t\tconsole.log('iframe result:', eventData);\n\t\t\t\t\t\tme.unmask();\n\t\t\t\t\t\tme.getRunPromise().resolve(eventData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (eventData.value) {\n\t\t\t\t\tme.setCachedResultsValue(eventData.value);\n\t\t\t\t}\n\t\t\t\tif (eventData.output) {\n\t\t\t\t\tme.setCachedResultsOutput(eventData.output);\n\t\t\t\t}\n\n\t\t\t\tme.setCachedResultsVariables(eventData.variables);\n\n\t\t\t\tif (eventData.height > 0) {\n\t\t\t\t\tme._setHeight(eventData.height);\n\t\t\t\t}\n\n\t\t\t\tme.fireEvent('sandboxMessage', eventData);\n\t\t\t} else {\n\t\t\t\tconsole.warn('unrecognized message!', e);\n\t\t\t}\n\t\t}\n\t},\n\n\t_doExpandContract: function() {\n\t\tvar expandButton = this.down('#expandButton');\n\t\tif (this.getExpandResults()) {\n\t\t\tthis.setExpandResults(false);\n\t\t\texpandButton.setTooltip('Expand Results');\n\t\t\texpandButton.setGlyph('xf065@FontAwesome');\n\t\t} else {\n\t\t\tthis.setExpandResults(true);\n\t\t\texpandButton.setTooltip('Contract Results');\n\t\t\texpandButton.setGlyph('xf066@FontAwesome');\n\t\t}\n\t\t\n\t\tthis._setHeight();\n\t},\n\t\n\t/**\n\t * Set the height of the results component\n\t */\n\t_setHeight: function(height) {\n\t\tif (this.getCachedPaddingHeight() === undefined) {\n\t\t\t// compute and store parent padding, which we'll need when determining proper height\n\t\t\tvar computedStyle = window.getComputedStyle(this.getEl().dom);\n\t\t\tthis.setCachedPaddingHeight(parseFloat(computedStyle.getPropertyValue('padding-top'))+parseFloat(computedStyle.getPropertyValue('padding-bottom')) + 2); // extra 2 for border\n\t\t}\n\t\tif (height !== undefined) {\n\t\t\t// cache height\n\t\t\tthis.setCachedResultsHeight(height);\n\t\t} else {\n\t\t\theight = this.getCachedResultsHeight();\n\t\t\tif (height === undefined) {\n\t\t\t\tvar resultsEl = this.getResultsEl();\n\t\t\t\tif (resultsEl) {\n\t\t\t\t\theight = resultsEl.getHeight();\n\t\t\t\t} else {\n\t\t\t\t\theight = this.getEmptyResultsHeight();\n\t\t\t\t}\n\t\t\t\tthis.setCachedResultsHeight(height);\n\t\t\t}\n\t\t}\n\t\theight += this.getCachedPaddingHeight();\n\n\t\tvar resultsEl = this.getResultsEl();\n\t\tif (resultsEl) {\n\t\t\tvar expandWidget = this.down('#expandWidget');\n\t\t\tif (this.getExpandResults()) {\n\t\t\t\texpandWidget.hide();\n\t\t\t\t// console.log('setResultsHeight', Math.max(height, this.getEmptyResultsHeight()))\n\t\t\t\tthis.setHeight(Math.max(height, this.getEmptyResultsHeight()));\n\t\t\t\t// resultsEl.removeCls('collapsed');\n\t\t\t} else {\n\t\t\t\theight = Math.min(Math.max(height, this.getEmptyResultsHeight()), this.getMinimumResultsHeight());\n\t\t\t\tif (height < this.getMinimumResultsHeight()) {\n\t\t\t\t\texpandWidget.hide();\n\t\t\t\t} else {\n\t\t\t\t\texpandWidget.show();\n\t\t\t\t}\n\t\t\t\t// console.log('setResultsHeight', height)\n\t\t\t\tthis.setHeight(height);\n\t\t\t\t// resultsEl.addCls('collapsed');\n\t\t\t}\n\t\t}\n\n\t\t// this.fireEvent('sizeChanged', this);\n\t}\n});\n","Ext.define(\"Voyant.notebook.editor.CodeEditor\", {\n\textend: \"Ext.Component\",\n\talias: \"widget.notebookcodeeditor\", \n\tmixins: [\"Voyant.util.Localization\",'Voyant.notebook.util.Embed'],\n\tembeddable: [\"Voyant.notebook.editor.CodeEditor\"],\n\tcls: 'notebook-code-editor',\n\tconfig: {\n\t\t// theme: 'ace/theme/chrome',\n\t\tmode: 'javascript',\n\t\tcontent: '',\n\t\tdocs: undefined,\n\t\tisChangeRegistered: false,\n\t\teditor: undefined,\n\t\teditedTimeout: undefined,\n\t\tlines: 1, // tracks the number of lines in the editor\n\t\tmarkers: []\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tcontent: undefined\n\t\t},\n\t\tternServer: undefined\n\t},\n\n\tMIN_LINES: 6,\n\n\tconstructor: function(config) {\n\t\tthis.callParent(arguments);\n\t},\n\tlisteners: {\n\t\trender: function() {\n\t\t\tvar me = this;\n\t\t\tvar editorTarget = Ext.getDom(this.getEl());\n\t\t\tvar editor = CodeMirror(editorTarget, {\n\t\t\t\tmode: this._getModeConfig(this.getMode()),\n\t\t\t\tvalue: this.getContent(),\n\t\t\t\tlineNumbers: true,\n\t\t\t\tlineWrapping: true,\n\t\t\t\tstyleActiveLine: true,\n\t\t\t\tviewportMargin: 50, // lines rendered above and below current view\n\t\t\t\textraKeys: {\n\t\t\t\t\t'Shift-Enter': function() {\n\t\t\t\t\t\tme.up('notebookrunnableeditorwrapper').run();\n\t\t\t\t\t},\n\t\t\t\t\t'Shift-Ctrl-Enter': function() {\n\t\t\t\t\t\tvar wrapper = me.up('notebookrunnableeditorwrapper');\n\t\t\t\t\t\twrapper.up('notebook').runUntil(wrapper);\n\t\t\t\t\t},\n\t\t\t\t\t'Shift-Cmd-Enter': function() {\n\t\t\t\t\t\tvar wrapper = me.up('notebookrunnableeditorwrapper');\n\t\t\t\t\t\twrapper.up('notebook').runUntil(wrapper);\n\t\t\t\t\t},\n\t\t\t\t\t'Ctrl-/': function() {\n\t\t\t\t\t\teditor.toggleComment();\n\t\t\t\t\t},\n\t\t\t\t\t'Cmd-/': function() {\n\t\t\t\t\t\teditor.toggleComment();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar minHeight = ((this.MIN_LINES+1) * editor.defaultTextHeight()) + 'px';\n\t\t\tvar editorWrapperEl = editor.getWrapperElement();\n\t\t\teditorWrapperEl.style.height = 'auto';\n\t\t\teditorWrapperEl.style.minHeight = minHeight;\n\t\t\teditor.getScrollerElement().style.minHeight = minHeight;\n\t\t\t\n\t\t\teditor.on('change', function(editor, ev) {\n\t\t\t\tme.clearMarkers();\n\t\t\t\t\n\t\t\t\tvar lines = editor.lineCount();\n\t\t\t\tif (lines !== me.getLines()) {\n\t\t\t\t\tme.setLines(lines);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tvar height = editor.getWrapperElement().offsetHeight;\n\t\t\t\t\t\tme.setSize({height: height});\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\n\t\t\t\tif (me.getIsChangeRegistered() === false) {\n\t\t\t\t\tme.setIsChangeRegistered(true);\n\t\t\t\t\tvar wrapper = me.up('notebookrunnableeditorwrapper');\n\t\t\t\t\twrapper.setIsRun(false);\n\t\t\t\t\twrapper.up('notebook').setIsEdited(true);\n\t\t\t\t} else {\n\t\t\t\t\tif (!me.getEditedTimeout()) { // no timeout, so set it to 30 seconds\n\t\t\t\t\t\tme.setEditedTimeout(setTimeout(function() {\n\t\t\t\t\t\t\tme.setIsChangeRegistered(false);\n\t\t\t\t\t\t}, 30000));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tif (this.getMode() === 'javascript') {\n\t\t\t\tif (Voyant.notebook.editor.CodeEditor.ternServer === undefined) {\n\t\t\t\t\tvar defs = this.getDocs();\n\t\t\t\t\tvar url = this.up('notebook').getApplication().getBaseUrlFull();\n\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer = new CodeMirror.TernServer({\n\t\t\t\t\t\tdefs: defs,\n\t\t\t\t\t\tuseWorker: true,\n\t\t\t\t\t\tworkerScript: url+'resources/spyral/tern/worker.js',\n\t\t\t\t\t\tworkerDeps: ['tern_worker_deps.js']\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tObject.assign(editor.getOption('extraKeys'), {\n\t\t\t\t\t'Ctrl-Space': function(ed) { Voyant.notebook.editor.CodeEditor.ternServer.complete(ed); },\n\t\t\t\t\t'Ctrl-O': function(ed) { Voyant.notebook.editor.CodeEditor.ternServer.showDocs(ed); }\n\t\t\t\t});\n\t\t\t\teditor.on('cursorActivity', function(ed) { Voyant.notebook.editor.CodeEditor.ternServer.updateArgHints(ed); });\n\t\t\t}\n\n\t\t\tthis.setEditor(editor);\n\n\t\t\tthis._setModeOptions(this.getMode());\n\n\t\t\tme.fireEvent('resize', me);\n\n\t\t},\n\t\tremoved: function(cmp, container) {\n\t\t\tif (cmp.getEditor()) {\n\t\t\t\tcmp.setEditor(undefined);\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\n\t_getModeConfig: function(mode) {\n\t\tvar modeConfig = undefined;\n\t\tswitch (mode) {\n\t\t\tcase 'json':\n\t\t\t\tmodeConfig = { name: 'javascript', json: true };\n\t\t\t\tbreak;\n\t\t\tcase 'xml':\n\t\t\t\tmodeConfig = 'xml';\n\t\t\t\tbreak;\n\t\t\tcase 'html':\n\t\t\t\tmodeConfig = { name: 'xml', htmlMode: true }\n\t\t\tdefault:\n\t\t\t\tmodeConfig = 'javascript';\n\t\t}\n\t\treturn modeConfig;\n\t},\n\n\t_setModeOptions: function(mode) {\n\t\tvar options = {};\n\t\tswitch (mode) {\n\t\t\tcase 'json':\n\t\t\tcase 'javascript':\n\t\t\t\toptions.autoCloseBrackets = true;\n\t\t\t\toptions.matchBrackets = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\toptions.autoCloseBrackets = false;\n\t\t\t\toptions.matchBrackets = false;\n\t\t\t\tbreak;\n\t\t}\n\t\tfor (var key in options) {\n\t\t\tthis.getEditor().setOption(key, options[key]);\n\t\t}\n\t},\n\t\n\tswitchModes: function(mode) {\n\t\tconsole.log('mode', mode);\n\t\tthis.setMode(mode);\n\t\tif (this.rendered) {\n\t\t\tthis.getEditor().setOption('mode', this._getModeConfig(mode));\n\t\t\tthis._setModeOptions(mode);\n\t\t}\n\t},\n\t\n\tgetValue: function() {\n\t\treturn this.getEditor().getValue();\n\t},\n\n\taddMarker: function(location, type) {\n\t\ttype = type === undefined ? 'error' : type;\n\t\tvar cls = 'spyral-editor-'+type;\n\t\tvar row = location[0];\n\t\tvar col = location[1];\n\t\tcol--;\n\t\trow--;\n\t\tvar marker = this.getEditor().getDoc().markText(\n\t\t\t{line: row, ch: col},\n\t\t\t{line: row, ch: col+1},\n\t\t\t{className: cls}\n\t\t);\n\t\tthis.getMarkers().push(marker);\n\t},\n\n\taddLineMarker: function(location, type) {\n\t\ttype = type === undefined ? 'error' : type;\n\t\tvar cls = 'spyral-editor-'+type;\n\t\tvar row = location[0];\n\t\trow--;\n\t\tvar marker = this.getEditor().getDoc().addLineClass(row, 'gutter', cls);\n\t\tthis.getMarkers().push({marker: marker, where: 'gutter', cls: cls});\n\t},\n\n\tclearMarkers: function() {\n\t\tvar editor = this.getEditor();\n\t\tvar markers = this.getMarkers();\n\t\tmarkers.forEach(function(marker) {\n\t\t\tif (marker.marker) {\n\t\t\t\teditor.getDoc().removeLineClass(marker.marker, marker.where, marker.cls);\n\t\t\t} else {\n\t\t\t\tmarker.clear();\n\t\t\t}\n\t\t});\n\t\tthis.setMarkers([]);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.CodeEditorWrapper\", {\n\textend: \"Voyant.notebook.editor.RunnableEditorWrapper\",\n\trequires: [\"Voyant.notebook.editor.CodeEditor\",\"Voyant.notebook.editor.button.Run\",\"Voyant.notebook.editor.button.RunAll\"],\n\talias: \"widget.notebookcodeeditorwrapper\",\n\tcls: 'notebook-code-wrapper',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\n\tconstructor: function(config) {\n\t\tconfig.mode = 'javascript';\n\n\t\tthis.editor = Ext.create(\"Voyant.notebook.editor.CodeEditor\", {\n\t\t\tcontent: Ext.Array.from(config.input).join(\"\\n\"),\n\t\t\tdocs: config.docs,\n\t\t\tmode: config.mode\n\t\t});\n\n\t\tthis.results = Ext.create('Voyant.notebook.editor.SandboxWrapper', {\n\t\t\tsandboxSrcUrl: Spyral.Load.baseUrl+'spyral/sandbox.jsp', // 'https://beta.voyant-tools.org/spyral/sandbox.jsp',\n\t\t\texpandResults: config.expandResults,\n\t\t\tlisteners: {\n\t\t\t\tinitialized: function() {\n\t\t\t\t\t// pass along initialized\n\t\t\t\t\tthis.fireEvent('initialized', this);\n\n\t\t\t\t\tif (config.output !== undefined) {\n\t\t\t\t\t\tthis.results.updateHtml(config.output);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tExt.apply(this, {\n\t\t\tborder: false,\n\t\t\tdockedItems: [{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'left',\n\t\t\t    defaults: {\n\t\t\t    \ttextAlign: 'left'\n\t\t\t    },\n\t\t\t    items: [\n\t\t\t\t\t{\n\t\t\t\t\t\txtype: 'notebookwrapperadd'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookwrapperrun'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookwrapperrununtil'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookcodeconfig'\n\t\t\t\t\t}\n\t\t\t    ]\n\t\t\t},{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'right',\n\t\t\t    items: [{\n\t\t\t    \t\txtype: 'notebookwrappercounter',\n\t\t\t    \t\torder: config.order,\n\t\t\t    \t\tname: config.cellId\n\t\t\t    \t},{\n\t\t        \t\txtype: 'notebookwrapperremove'\n\t\t        \t},{\n\t\t\t        \txtype: 'notebookwrappermoveup'\n\t\t\t        },{\n\t\t\t        \txtype: 'notebookwrappermovedown'\n\t\t\t        }\n\t\t\t    ]\n\t\t\t}],\n\t\t\tlayout: 'anchor',\n\t\t\tdefaults: { anchor: '100%' },\n\t\t\titems: [this.editor, this.results]\n\t\t});\n\t\t\n\t\tthis.callParent(arguments);\n\t},\n\t\n\tswitchModes: function(mode) {\n\t\tif (mode !== 'javascript') {\n\t\t\tvar notebook = this.up('notebook');\n\t\t\tvar order = this.down('notebookwrappercounter').getOrder();\n\t\t\tnotebook.addData('', order, undefined, {mode: mode});\n\t\t\tnotebook.notebookWrapperRemove(this);\n\t\t} else {\n\t\t\tconsole.log('unhandled mode switch:',mode);\n\t\t}\n\t}\n})","Ext.define('Voyant.notebook.editor.TextEditor', {\n\textend: 'Ext.Component',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.notebooktexteditor',\n\tcls: 'notebook-text-editor',\n\tconfig: {\n\t\teditor: undefined,\n\t\tisEditRegistered: false,\n\t\tcurrentHeight: 0,\n\t\tisFresh: undefined,\n\t\tisEnabled: false\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tborder: false,\n\tconstructor: function(config) {\n\t\tconfig.isFresh = config.content ? false : true;\n\t\tExt.apply(this, {\n\t\t\thtml: config.content ? config.content : '<p style=\"text-align: center;\">'+this.localize('emptyText')+'</p>'\n\t\t});\n        this.callParent(arguments);\n\t},\n\tlisteners: {\n\t\tboxready: function(cmp) {\n\t\t\tthis.ownerCt.getTargetEl().on('click', function(e, t) {\n\t\t\t\tif (t.tagName !== 'A') {\n\t\t\t\t\tthis.handleClick();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\tremoved: function(cmp, container) {\n\t\t\t// properly remove editor\n\t\t\tif (this.getEditor()) {\n\t\t\t\tthis.getEditor().focusManager.blur(true); //focusManager bug workaround, see: https://dev.ckeditor.com/ticket/16825\n\t\t\t\tthis.getEditor().destroy();\n\t\t\t}\n\t\t}\n\t},\n\t\n\thandleClick: function() {\n\t\tif (!this.getEditor()) {\n\t\t\tthis._initEditor();\n\t\t} else {\n\t\t\tif (this.getIsEnabled() === false) {\n\t\t\t\tthis._enable();\n\t\t\t}\n\t\t}\n\t},\n\t\n\tgetContent: function() {\n\t\treturn this.getTargetEl().dom.innerHTML;\n\t},\n\n\t_initEditor: function() {\n\t\tvar el = this.getTargetEl();\n\t\t// when upgrading ckeditor, remember to copy stopediting and inserthtml4x plugins\n\t\tvar editor = CKEDITOR.inline(el.dom, {\n\t\t\ttoolbar: [\n\t\t\t\t{ name: 'basicstyles', items: [ 'Bold', 'Italic', '-', 'RemoveFormat' ] },\n\t\t\t\t{ name: 'paragraph', items: [ 'NumberedList', 'BulletedList', '-', 'Justify', 'Outdent', 'Indent', 'Blockquote', 'JustifyLeft', 'JustifyCenter', 'JustifyRight' ] },\n\t\t\t\t{ name: 'colors', items: [ 'TextColor', 'BGColor' ] },\n\t\t\t\t{ name: 'styles', items: [ 'Styles', 'Format' ] },\n\t\t\t\t{ name: 'links', items: [ 'Link', 'Unlink', 'Anchor'] },\n\t\t\t\t{ name: 'insert', items: [ 'Image', 'Table' ] },\n\t\t\t\t{ name: 'document', items: [ /*'inserthtml4x',*/ 'Sourcedialog', /*'Stopediting'*/] }\n\t\t\t],\n\t\t\t\n\t\t\textraPlugins: 'sourcedialog,justify,colorbutton',//,stopediting,inserthtml4x',\n\t\t\tallowedContent: true,\n\t\t\ttoolbarCanCollapse: false,\n\t\t\tstartupFocus: 'end'\n\t\t});\n\t\t\n\t\teditor.on('contentDom', function() {\n\t\t\tthis._enable();\n\t\t\tvar editable = editor.editable();\n\t\t\teditable.attachListener(editable, 'click', function(evt) {\n\t\t\t\t// prevent further listeners from firing, esp. the one that prevents links from working ( https://stackoverflow.com/a/45616460 )\n\t\t\t\tevt.stop();\n\t\t\t}, null, null, 0); // zero (i.e. very high) priority\n\t\t}, this);\n\n\t\teditor.on('focus', function(evt) {\n\t\t\tif (this.getIsFresh()) {\n\t\t\t\tthis.setIsFresh(false);\n\t\t\t\tthis.getTargetEl().update('<p></p>'); // insert paragraphs because otherwise ckeditor will do it automatically\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\teditor.on('blur', function(evt) {\n\t\t\tthis._disable();\n\t\t}, this);\n\n\t\teditor.on('change', function() {\n\t\t\tvar editorHeight = editor.container.$.clientHeight;\n\t\t\tif (editorHeight !== this.getCurrentHeight()) {\n\t\t\t\tthis.findParentByType('notebookeditorwrapper').setHeight(editorHeight);\n\t\t\t\tthis.setCurrentHeight(editor.container.$.clientHeight)\n\t\t\t}\n\t\t\tif (!this.getIsEditRegistered()) {\n\t\t\t\tthis.findParentByType('notebook').setIsEdited(true);\n\t\t\t\tthis.setIsEditRegistered(true);\n\n\t\t\t} else {\n\t\t\t\tvar me = this; // make sure to allow edits to be auto-saved every 30 seconds\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tme.setIsEditRegistered(false);\n\t\t\t\t}, 30000);\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.setEditor(editor);\n\t},\n\n\t_enable: function() {\n\t\tthis.getEditor().setReadOnly(false);\n\t\tthis.getEditor().focus();\n\n\t\tthis.findParentByType('notebookeditorwrapper').setIsEditing(true);\n\t\tthis.setIsEnabled(true);\n\t},\n\n\t_disable: function() {\n\t\tthis.getEditor().setReadOnly(true);\n\n\t\tthis.findParentByType('notebookeditorwrapper').setIsEditing(false);\n\t\tthis.setIsEnabled(false);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.TextEditorWrapper\", {\n\textend: \"Voyant.notebook.editor.EditorWrapper\",\n\trequires: [\"Voyant.notebook.editor.TextEditor\"],\n\talias: \"widget.notebooktexteditorwrapper\",\n\tcls: 'notebook-text-wrapper',\n\tconfig: {\n\t},\n\tminHeight: 85,\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\titems: [{\n\t\t\t\txtype: 'notebooktexteditor',\n\t\t\t\tcontent: Ext.Array.from(config.input).join(\"\")\n\t\t\t}],\n\t\t\tdockedItems: [{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'left',\n\t\t\t    items: [{\n\t\t\t\t    \txtype: 'notebookwrapperadd'\n\t\t\t\t\t}\n\t\t\t    ]\n\t\t\t},{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'right',\n\t\t\t    items: [{\n\t\t\t    \t\txtype: 'notebookwrappercounter',\n\t\t\t    \t\torder: config.order,\n\t\t\t    \t\tname: config.cellId\n\t\t\t    \t},{\n\t\t        \t\txtype: 'notebookwrapperremove'\n\t\t        \t},{\n\t\t\t        \txtype: 'notebookwrappermoveup'\n\t\t\t        },{\n\t\t\t        \txtype: 'notebookwrappermovedown'\n\t\t\t        }\n\t\t\t    ]\n\t\t\t}]\n\t\t});\n        this.callParent(arguments);\n\t},\n\t\n\tgetContent: function() {\n\t\treturn this.items.get(0).getContent();\n\t}\n\t\n})","Ext.define('Voyant.notebook.editor.FileInput', {\n\textend: 'Ext.container.Container',\n\talias: 'widget.notebookfileinput', \n\tmixins: ['Voyant.util.Localization'],\n\tcls: 'notebook-file-input',\n\tconfig: {\n\t\tdataUrl: undefined,\n\t\tresourceId: undefined,\n\t\tfile: undefined,\n\t\tfileName: undefined\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t\tfileUpload: 'File Upload',\n\t\t\tbuttonLabel: 'Choose a file...',\n\t\t\tdeleteMsg: 'The previously added file has been deleted. You will need to add a new file.'\n\t\t}\n\t},\n\n\tserverStorage: undefined,\n\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\theight: 125,\n\t\t\twidth: '100%',\n\t\t\tlayout: 'center',\n\t\t\titems: [{\n\t\t\t\txtype: 'voyantfilefield',\n\t\t\t\titemId: 'file',\n\t\t\t\tfieldLabel: this.localize('fileUpload'),\n\t\t\t\tlabelAlign: 'right',\n\t\t\t\tbuttonText: this.localize('buttonLabel'),\n\t\t\t\twidth: 350,\n\t\t\t\tlisteners: {\n\t\t\t\t\trender: function(cmp) {\n\t\t\t\t\t\tif (config.fileName) {\n\t\t\t\t\t\t\tcmp.inputEl.dom.value = config.fileName;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tchange: function(cmp, filename) {\n\t\t\t\t\t\tvar file = cmp.fileInputEl.dom.files[0];\n\t\t\t\t\t\tthis.setFile(file);\n\t\t\t\t\t\tthis.setFileName(filename);\n\t\t\t\t\t\tthis.setDataUrl(undefined);\n\t\t\t\t\t\tthis.setResourceId(undefined);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\n\t\tif (typeof Voyant.util.ServerStorage === 'undefined') {\n\t\t\tExt.define('Voyant.util.ServerStorage', {\n\t\t\t\textend: 'Voyant.util.Storage',\n\t\t\t\tgetTromboneUrl: function() {\n\t\t\t\t\treturn Voyant.application.getTromboneUrl();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.serverStorage = Ext.create('Voyant.util.ServerStorage');\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tgetDataUrl: function() {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar dataUrl = this.callParent();\n\t\tif (dataUrl === undefined) {\n\t\t\tif (this.getResourceId()) {\n\t\t\t\tthis.loadStoredFile().then(function(dataUrl) {\n\t\t\t\t\tdfd.resolve(dataUrl);\n\t\t\t\t}, function() {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tif (this.getFile()) {\n\t\t\t\t\tthis.storeFile().then(function(result) {\n\t\t\t\t\t\tdfd.resolve(result[1]);\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tdfd.reject();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdfd.resolve(dataUrl);\n\t\t}\n\n\t\treturn dfd.promise;\n\t},\n\n\tstoreFile: function() {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar file = this.getFile();\n\t\tif (file === undefined) {\n\t\t\tdfd.reject();\n\t\t} else {\n\t\t\tvar me = this;\n\t\t\tSpyral.Util.blobToDataUrl(file).then(function(data) {\n\t\t\t\tvar resourceId = Spyral.Util.id(32);\n\t\t\t\tme.serverStorage.storeResource(resourceId, data).then(function() {\n\t\t\t\t\tme.setResourceId(resourceId);\n\t\t\t\t\tme.setDataUrl(data);\n\t\t\t\t\tdfd.resolve([resourceId, data]);\n\t\t\t\t}, function() {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t})\n\t\t\t}, function(err) {\n\t\t\t\tdfd.reject(err);\n\t\t\t});\n\t\t}\n\n\t\treturn dfd.promise;\n\t},\n\n\tloadStoredFile: function() {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tvar resourceId = this.getResourceId();\n\t\tif (resourceId === undefined) {\n\t\t\tdfd.reject();\n\t\t} else {\n\t\t\tvar me = this;\n\t\t\tthis.serverStorage.getStoredResource(resourceId).then(function(dataUrl) {\n\t\t\t\tif (dataUrl !== undefined) {\n\t\t\t\t\tme.setDataUrl(dataUrl);\n\t\t\t\t\tdfd.resolve(dataUrl);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t}\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn dfd.promise;\n\t}\n});\n\nExt.define('Voyant.form.field.File', {\n\textend: 'Ext.form.field.File',\n\talias: 'widget.voyantfilefield',\n\tonFileChange: function(button, e, value) {\n\t\t// remove fakepath\n\t\tvar newValue = value.replace(/^.*(\\\\|\\/|\\:)/, ''); // TODO test in safari etc\n\n\t\treturn this.callParent([ button, e, newValue ]);\n\t}\n});","Ext.define(\"Voyant.notebook.editor.DataWrapper\", {\n\textend: \"Voyant.notebook.editor.RunnableEditorWrapper\",\n\trequires: [\"Voyant.notebook.editor.CodeEditor\", \"Voyant.notebook.editor.FileInput\"],\n\talias: \"widget.notebookdatawrapper\",\n\tcls: 'notebook-data-wrapper',\n\tstatics: {\n\t\ti18n: {\n\t\t\tdataNameAlphanum: 'The data name must contain alphanumeric characters only',\n\t\t\tdataNameAlphastart: 'The data name must not begin with a number'\n\t\t}\n\t},\n\tconfig: {\n\t\tdataName: undefined\n\t},\n\n\tconstructor: function(config) {\n\t\tconfig.mode = config.mode !== undefined ? config.mode : 'json';\n\n\t\tvar isFile = config.mode === 'file';\n\t\tvar resourceId = undefined;\n\t\tvar fileName = undefined;\n\t\tif (isFile) {\n\t\t\tresourceId = config.input.resourceId;\n\t\t\tfileName = config.input.fileName;\n\t\t}\n\n\t\tthis.editor = Ext.create(\"Voyant.notebook.editor.CodeEditor\", {\n\t\t\tcontent: Ext.Array.from(config.input).join(\"\\n\"),\n\t\t\tdocs: config.docs, // TODO\n\t\t\tmode: config.mode,\n\t\t\thidden: isFile\n\t\t});\n\n\t\tthis.fileInput = Ext.create('Voyant.notebook.editor.FileInput', {\n\t\t\tresourceId: resourceId,\n\t\t\tfileName: fileName,\n\t\t\thidden: !isFile\n\t\t});\n\n\t\tthis.results = Ext.create('Voyant.notebook.editor.SandboxWrapper', {\n\t\t\tsandboxSrcUrl: Spyral.Load.baseUrl+'spyral/sandbox.jsp', // 'https://beta.voyant-tools.org/spyral/sandbox.jsp',\n\t\t\texpandResults: config.expandResults,\n\t\t\tlisteners: {\n\t\t\t\tinitialized: function() {\n\t\t\t\t\t// pass along initialized\n\t\t\t\t\tthis.fireEvent('initialized', this);\n\n\t\t\t\t\tif (config.output !== undefined) {\n\t\t\t\t\t\tthis.results.updateHtml(config.output);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tExt.apply(this, {\n\t\t\tborder: false,\n\t\t\tdockedItems: [{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'left',\n\t\t\t    defaults: {\n\t\t\t    \ttextAlign: 'left'\n\t\t\t    },\n\t\t\t    items: [\n\t\t\t\t\t{\n\t\t\t\t\t\txtype: 'notebookwrapperadd'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookwrapperrun'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookwrapperrununtil'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookcodeconfig'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: \"notebookwrapperexport\"\n\t\t\t\t\t}\n\t\t\t    ]\n\t\t\t},{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'right',\n\t\t\t    items: [{\n\t\t\t    \t\txtype: 'notebookwrappercounter',\n\t\t\t    \t\torder: config.order,\n\t\t\t    \t\tname: config.cellId\n\t\t\t    \t},{\n\t\t        \t\txtype: 'notebookwrapperremove'\n\t\t        \t},{\n\t\t\t        \txtype: 'notebookwrappermoveup'\n\t\t\t        },{\n\t\t\t        \txtype: 'notebookwrappermovedown'\n\t\t\t        }\n\t\t\t    ]\n\t\t\t}],\n\t\t\tlayout: 'anchor',\n\t\t\tdefaults: { anchor: '100%' },\n\t\t\titems: [this.editor, this.fileInput, {\n\t\t\t\txtype: 'form',\n\t\t\t\tcls: 'notebook-data-input',\n\t\t\t\tbodyPadding: 6,\n\t\t\t\tbodyStyle: 'background-color: rgb(252, 252, 252);',\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\tpack: 'center'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\twidth: 350,\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\tfieldLabel: 'Data Name',\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tname: 'dataName',\n\t\t\t\t\tvalue: config.dataName,\n\t\t\t\t\tvalidator: function(val) {\n\t\t\t\t\t\tif (/^[a-zA-Z0-9_]+$/.test(val)) {\n\t\t\t\t\t\t\tif (/^\\D/.test(val)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn this.localize('dataNameAlphastart');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn this.localize('dataNameAlphanum')\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tallowBlank: false,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tchange: function(cmp, newVal, oldVal) {\n\t\t\t\t\t\t\tif (cmp.isValid()) {\n\t\t\t\t\t\t\t\tthis.setDataName(newVal);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setDataName(undefined);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tmargin: '0 0 0 6',\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: 'Assign',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tthis.up('notebook').setIsEdited(true);\n\t\t\t\t\t\tthis.run();\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}]\n\t\t\t}, this.results]\n\t\t});\n\t\t\n\t\tthis.callParent(arguments);\n\t},\n\n\tswitchModes: function(mode) {\n\t\tif (mode === 'javascript') {\n\t\t\tvar notebook = this.up('notebook');\n\t\t\tvar order = this.down('notebookwrappercounter').getOrder();\n\t\t\tnotebook.addCode('', order, undefined, {mode: 'javascript'});\n\t\t\tnotebook.notebookWrapperRemove(this);\n\t\t} else {\n\t\t\tthis.setMode(mode);\n\t\t\t\n\t\t\tif (mode === 'file') {\n\t\t\t\tthis.editor.hide();\n\t\t\t\tthis.fileInput.show();\n\t\t\t} else {\n\t\t\t\tthis.fileInput.hide();\n\t\t\t\tthis.editor.switchModes(mode);\n\t\t\t\tthis.editor.show();\n\t\t\t}\n\t\t\t\n\t\t\tthis.updateLayout();\n\t\t}\n\t},\n\n\t_getCode: function() {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar dataName = this.getDataName();\n\t\tif (dataName === undefined) {\n\t\t\tdfd.reject();\n\t\t}\n\n\t\tvar mode = this.getMode();\n\t\tif (mode === 'file') {\n\t\t\tthis.fileInput.getDataUrl().then(function(dataUrl) {\n\t\t\t\tvar code = dataName+'= Spyral.Util.dataUrlToBlob(`'+dataUrl+'`)';\n\t\t\t\tdfd.resolve(code);\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t});\n\t\t} else {\n\t\t\tvar code = this.editor.getValue();\n\t\t\tswitch(mode) {\n\t\t\t\tcase 'text':\n\t\t\t\t\tcode = dataName+'=`'+code+'`';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'json':\n\t\t\t\t\tcode = dataName+'= JSON.parse(`'+code+'`)';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'xml':\n\t\t\t\t\tcode = dataName+'= new DOMParser().parseFromString(`'+code+'`, \"application/xml\")';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'html':\n\t\t\t\t\tcode = dataName+'= new DOMParser().parseFromString(`'+code+'`, \"application/xml\")'; // also use xml for strict validation\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// TODO handle parse errors for xml/html\n\t\t\tdfd.resolve(code);\n\t\t}\n\n\t\treturn dfd.promise;\n\t},\n\n\t_run: function(priorVariables) {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar me = this;\n\t\tthis._getCode().then(function(code) {\n\t\t\tme.results.clear();\n\n\t\t\tif (me.getMode() !== 'file') {\n\t\t\t\tme.editor.clearMarkers();\n\t\t\t}\n\n\t\t\tme.setIsRun(true);\n\t\t\t\n\t\t\tme.results.run(code, priorVariables).then(function(eventData) {\n\t\t\t\tdfd.resolve(eventData);\n\t\t\t}, function(eventData) {\n\t\t\t\tif (eventData.error !== undefined) {\n\t\t\t\t\tvar location = eventData.error.location;\n\t\t\t\t\tif (location !== undefined) {\n\t\t\t\t\t\tme.editor.addMarker(location, 'error');\n\t\t\t\t\t\tme.editor.addLineMarker(location, 'error');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdfd.reject(eventData);\n\t\t\t});\n\t\t}, function() {\n\t\t\tdfd.reject('Error handling data');\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tgetInput: function() {\n\t\tvar mode = this.getMode();\n\t\tif (mode !== 'file') {\n\t\t\treturn this.editor.getValue();\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tresourceId: this.fileInput.getResourceId(),\n\t\t\t\tfileName: this.fileInput.getFileName()\n\t\t\t}\n\t\t}\n\t},\n\n\tgetContent: function() {\n\t\tvar content = this.callParent(arguments);\n\t\tcontent.dataName = this.getDataName();\n\t\treturn content;\n\t}\n});\n","Ext.define(\"Voyant.notebook.github.OctokitWrapper\", {\n\textend: \"Ext.Base\",\n\talias: \"octokitwrapper\",\n\n\toctokit: undefined,\n\n\tconstructor: function(config) {\n\t\tconst authToken = config.authToken;\n\t\tthis.octokit = new Octokit({\n\t\t\tauth: authToken,\n\t\t\tuserAgent: 'https://github.com/sgsinclair/Voyant'\n\t\t});\n\t},\n\n\tgetInfoForAuthenticatedUser: function() {\n\t\treturn this.octokit.users.getAuthenticated();\n\t},\n\n\tgetReposForAuthenticatedUser: function(affiliation='owner', page=0, per_page=10) {\n\t\treturn this.octokit.repos.listForAuthenticatedUser({\n\t\t\taffiliation,\n\t\t\tpage,\n\t\t\tper_page\n\t\t});\n\t},\n\n\tgetReposForUser: function(owner, page=0, per_page=10) {\n\t\treturn this.octokit.search.repos({\n\t\t\tq: 'user:'+owner,\n\t\t\tpage,\n\t\t\tper_page\n\t\t})\n\t},\n\n\tsearchWithinRepositories: function(query, page=0, per_page=10) {\n\t\tconsole.log(query);\n\t},\n\n\tgetRepoContents: function(repoId) {\n\t\tlet {owner, repo} = this.parseFullName(repoId);\n\t\treturn this.getBranchSHAs({owner, repo, branch: 'master'}).then(function(resp) {\n\t\t\treturn this.getTreeContentsRecursively(resp);\n\t\t}.bind(this));\n\t},\n\n\tgetTreeContentsRecursively: function(params) {\n\t\treturn this.octokit.git.getTree({\n\t\t\towner: params.owner,\n\t\t\trepo: params.repo,\n\t\t\ttree_sha: params.baseTreeSHA,\n\t\t\trecursive: 1,\n\t\t\theaders: {\n\t\t\t\t'If-None-Match': '' // cache busting\n\t\t\t}\n\t\t}).then(function (resp) {\n\t\t\treturn {\n\t\t\t\t...params,\n\t\t\t\tcontents: this.unflattenContents(resp.data.tree),\n\t\t\t\ttruncated: resp.data.truncated\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\n\tloadFile: function(repoId, path) {\n\t\tlet {owner, repo} = this.parseFullName(repoId);\n\t\tlet ref = 'master';\n\t\treturn this.octokit.repos.getContents({\n\t\t\towner, repo, ref, path\n\t\t}).then(function(resp) {\n\t\t\treturn {\n\t\t\t\towner, repo, ref, path,\n\t\t\t\tsha: resp.data.sha,\n\t\t\t\tfile: atob(resp.data.content)\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\n\t// SAVING\n\n\tdoesRepoExist: function(owner, repo) {\n\t\treturn this.getRepoContents(owner+'/'+repo).then(function(resp) {\n\t\t\treturn true;\n\t\t}.bind(this), function(err) {\n\t\t\tconsole.log(err);\n\t\t\treturn false;\n\t\t}.bind(this));\n\t},\n\n\tgetPermissionsForUser: function(owner, repo, username) {\n\t\treturn this.octokit.repos.getCollaboratorPermissionLevel({\n\t\t\towner, repo, username\n\t\t}).then(function(resp) {\n\t\t\treturn resp.data.permission;\n\t\t}.bind(this), function(err) {\n\t\t\treturn 'none';\n\t\t}.bind(this));\n\t},\n\n\tsaveFile: async function(owner, repo, path, content, branch, message, sha) {\n\t\tif (sha === undefined) {\n\t\t\tsha = await this.getLatestFileSHA({owner, repo, branch, path})\n\t\t}\n\t\treturn this.octokit.repos.createOrUpdateFile({owner, repo, path, content: btoa(content), branch, message, sha});\n\t},\n\n\t// UTILITIES\n\n\tparseFullName: function(fullName) {\n\t\tlet [owner, repo] = fullName.split('/');\n\t\treturn {owner, repo};\n\t},\n\n\tgetBranchSHAs: function(params) {\n\t\treturn this.octokit.repos.getBranch({\n\t\t\towner: params.owner,\n\t\t\trepo: params.repo,\n\t\t\tbranch: params.branch,\n\t\t\theaders: {\n\t\t\t\t'If-None-Match': '' // cache busting\n\t\t\t}\n\t\t}).then((resp) => {\n\t\t\treturn {\n\t\t\t\t...params,\n\t\t\t\tbaseTreeSHA: resp.data.commit.commit.tree.sha,\n\t\t\t\tparentCommitSHA: resp.data.commit.sha\n\t\t\t}\n\t\t})\n\t},\n\n\tgetLatestFileSHA: async function(params) {\n\t\tconst {owner, repo, branch, path} = params\n\t\tconst {data: {data: {repository: {object: result}}}} = await this.octokit.request({\n\t\t\tmethod: 'POST',\n\t\t\turl: '/graphql',\n\t\t\tquery: `{\n\t\t\t\trepository(owner: \"${owner}\", name: \"${repo}\") {\n\t\t\t\t\tobject(expression: \"${branch}:${path}\") {\n\t\t\t\t\t\t... on Blob {\n\t\t\t\t\t\t\toid\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}`\n\t\t}).catch(function(error) {\n\t\t\tconsole.log(error);\n\t\t});\n\t\tconst sha = result ? result.oid : undefined\n\t\treturn sha\n\t},\n\n\tunflattenContents: function(flatContents) {\n\t\tconst files = flatContents.filter(file=>file.type==='blob')\n\t\tvar result = {type: 'folder', name: '', path: '', contents: []}\n\t\tconst findSubFolder = (parentFolder, folderNameToFind) => {\n\t\t\t const subfolder = parentFolder.contents.find(el => {\n\t\t\t \treturn el.type === 'folder' && el.name === folderNameToFind\n\t\t\t })\n\t\t\treturn subfolder;\n\t\t}\n\t\tconst addSubFolder = (newFolderName, parentFolder) => {\n\t\t\tconst newSubFolder = {type: 'folder', name: newFolderName, path: `${parentFolder.path}/${newFolderName}`, contents:[]}\n\t\t\tparentFolder.contents.push(newSubFolder)\n\t\t\treturn newSubFolder;\n\t\t}\n\t\tconst addFile = (newFileName, parentFolder) => {\n\t\t\tconst newFile = {type: 'file', name: newFileName, path: `${parentFolder.path}/${newFileName}`}\n\t\t\tparentFolder.contents.push(newFile)\n\t\t}\n\t\tconst isFile = (pathSections, currentIndex) => {\n\t\t\treturn pathSections.length - 1 == currentIndex\n\t\t}\n\n\t\tfiles.forEach(file=>{\n\t\t\tconst pathSections = file.path.split('/')\n\t\t\tpathSections.reduce(function(parentFolder, pathSection, pathSectionIndex) {\n\t\t\t\tconst subFolder = findSubFolder(parentFolder, pathSection)\n\t\t\t\tif (subFolder) {\n\t\t\t\t\treturn subFolder\n\t\t\t\t} else if (isFile(pathSections, pathSectionIndex)) {\n\t\t\t\t\treturn addFile(pathSection, parentFolder)\n\t\t\t\t} else {\n\t\t\t\t\treturn addSubFolder(pathSection, parentFolder)\n\t\t\t\t}\n\t\t\t}, result)\n\t\t})\n\t\treturn result\n\t}\n});\n","Ext.define(\"Voyant.notebook.github.ReposBrowser\", {\n\textend: \"Ext.container.Container\",\n\txtype: \"githubreposbrowser\",\n\tconfig: {\n\t\trepoType: 'owner',\n\t\tselectedNode: undefined,\n\t\trepoId: undefined,\n\t\tpath: undefined\n\t},\n\n\toctokit: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\t\n\t\tthis.octokit = config.octokit;\n\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\talign: 'stretch',\n\t\t\t\tpack: 'start'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch',\n\t\t\t\t\tpack: 'start'\n\t\t\t\t},\n\t\t\t\tflex: 1,\n\t\t\t\titems: [{\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'accordion'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttitle: 'My Repositories',\n\t\t\t\t\t\tframe: true,\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\txtype: 'radiogroup',\n\t\t\t\t\t\t\tfieldLabel: 'Show repositories for which I am',\n\t\t\t\t\t\t\tlabelAlign: 'top',\n\t\t\t\t\t\t\tlayout: 'vbox',\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\tboxLabel: 'Owner',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'owner',\n\t\t\t\t\t\t\t\tchecked: true\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\tboxLabel: 'Collaborator',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'collaborator'\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\tboxLabel: 'Organization Member',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'organization_member'\n\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tchange: function(field, newValues, oldValue) {\n\t\t\t\t\t\t\t\t\tthis.setRepoType(newValues.repoType);\n\t\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\texpand: function() {\n\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: 'Public Repositories',\n\t\t\t\t\t\tframe: true,\n\t\t\t\t\t\tlayout: 'vbox',\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\tfieldLabel: 'Limit to user or organization',\n\t\t\t\t\t\t\tlabelAlign: 'top',\n\t\t\t\t\t\t\txtype: 'textfield'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: 'Search',\n\t\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\t\t\tlet repoOwner = button.prev('textfield').getValue();\n\t\t\t\t\t\t\t\tif (repoOwner !== '') {\n\t\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\t\tthis.octokit.getReposForUser(repoOwner, 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data.items);\n\t\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\texpand: function() {\n\t\t\t\t\t\t\t\tthis.clearTree();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t\t// ,{\n\t\t\t\t// \tpadding: '20 0 0 0',\n\t\t\t\t// \titems: [{\n\t\t\t\t// \t\tfieldLabel: 'Search within repositories',\n\t\t\t\t// \t\tlabelAlign: 'top',\n\t\t\t\t// \t\txtype: 'textfield'\n\t\t\t\t// \t},{\n\t\t\t\t// \t\txtype: 'button',\n\t\t\t\t// \t\ttext: 'Search',\n\t\t\t\t// \t\tmargin: '0 5 0 0',\n\t\t\t\t// \t\thandler: function(button) {\n\t\t\t\t// \t\t\tlet query = button.prev('textfield').getValue();\n\t\t\t\t// \t\t\tif (query !== '') {\n\t\t\t\t// \t\t\t\tthis.searchWithinRepositories(query);\n\t\t\t\t// \t\t\t}\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\tscope: this\n\t\t\t\t// \t},{\n\t\t\t\t// \t\txtype: 'button',\n\t\t\t\t// \t\ttext: 'Clear',\n\t\t\t\t// \t\thandler: function(button) {\n\t\t\t\t\t\t\t\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\tscope: this\n\t\t\t\t// \t}]\n\t\t\t\t// }\n\t\t\t\t]\n\t\t\t},{\n\t\t\t\tflex: 2,\n\t\t\t\tlayout: 'fit',\n\t\t\t\txtype: 'treepanel',\n\t\t\t\titemId: 'repoTree',\n\t\t\t\ttitle: 'Repositories',\n\t\t\t\tscrollable: true,\n\t\t\t\trootVisible: false,\n\t\t\t\tviewConfig: {\n\t\t\t\t\temptyText: 'No results',\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafteritemexpand: function(node, index, el) {\n\t\t\t\t\t\t\tif (node.hasChildNodes() === false) {\n\t\t\t\t\t\t\t\tswitch(node.data.type) {\n\t\t\t\t\t\t\t\t\tcase 'repo':\n\t\t\t\t\t\t\t\t\t\tlet tr = el.querySelector('tr');\n\t\t\t\t\t\t\t\t\t\tExt.fly(tr).addCls('x-grid-tree-loading');\n\t\t\t\t\t\t\t\t\t\tthis.octokit.getRepoContents(node.getId()).then(function(resp) {\n\t\t\t\t\t\t\t\t\t\t\tExt.fly(tr).removeCls('x-grid-tree-loading');\n\t\t\t\t\t\t\t\t\t\t\tthis.addRepoContentsToNode(node, resp);\n\t\t\t\t\t\t\t\t\t\t}.bind(this))\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'folder':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\titemclick: function(view, node, el) {\n\t\t\t\t\t\t\tthis.setSelectedNode(node);\n\t\t\t\t\t\t\tthis.fireEvent('nodeSelected', this, node.data.type, node);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstore: {\n\t\t\t\t\troot: {\n\t\t\t\t\t\tname: 'Root',\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function() {\n\t\t\t\t\tthis.down('#repoTree').setLoading(true);\n\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t},(error) => {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.callParent(arguments);\n\t},\n\n\tupdateSelectedNode: function(node, oldValue) {\n\t\tif (node !== undefined) {\n\t\t\tlet repoParent = node;\n\t\t\twhile (repoParent !== null && repoParent.data.type !== 'repo') {\n\t\t\t\trepoParent = repoParent.parentNode;\n\t\t\t}\n\n\t\t\tthis.setRepoId(repoParent.getId());\n\t\t\tthis.setPath(node.getId());\n\t\t} else {\n\t\t\tthis.setRepoId(undefined);\n\t\t\tthis.setPath(undefined);\n\t\t}\n\t},\n\n\tclearTree: function(setLoading) {\n\t\tlet repoTree = this.down('#repoTree');\n\t\tlet root = repoTree.getRootNode();\n\t\troot.removeAll();\n\t\trepoTree.getView().refresh();\n\n\t\tif (setLoading) {\n\t\t\trepoTree.setLoading(true);\n\t\t}\n\n\t\tthis.setSelectedNode(undefined);\n\t\tthis.fireEvent('nodeDeselected', this);\n\t},\n\n\taddReposToTree: function(rawRepos) {\n\t\tlet repoTree = this.down('#repoTree');\n\t\trepoTree.setLoading(false);\n\t\tlet root = repoTree.getRootNode();\n\t\tlet repos = rawRepos.map((repo) => {\n\t\t\treturn {\n\t\t\t\tid: repo.full_name,\n\t\t\t\ttext: repo.full_name,\n\t\t\t\tdescription: repo.description,\n\t\t\t\tleaf: false,\n\t\t\t\ttype: 'repo'\n\t\t\t}\n\t\t});\n\t\troot.appendChild(repos);\n\t},\n\n\taddRepoContentsToNode: function(node, octokitResponse) {\n\t\tfunction parseContents(content) {\n\t\t\tlet nodeConfig = {\n\t\t\t\tid: content.path,\n\t\t\t\ttext: content.name,\n\t\t\t\ttype: content.type,\n\t\t\t\tleaf: content.type === 'file'\n\t\t\t};\n\t\t\tif (nodeConfig.leaf === false) {\n\t\t\t\tnodeConfig.children = [];\n\t\t\t\tcontent.contents.forEach((child) => {\n\t\t\t\t\tnodeConfig.children.push(parseContents(child));\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn nodeConfig;\n\t\t}\n\t\tlet contents = parseContents(octokitResponse.contents);\n\t\tnode.appendChild(contents.children);\n\t}\n})","Ext.define(\"Voyant.notebook.github.FileSaver\", {\n\textend: \"Ext.container.Container\",\n\txtype: \"githubfilesaver\",\n\tconfig: {\n\t\tcurrentFile: undefined,\n\t\tusername: undefined\n\t},\n\n\toctokit: undefined,\n\tsaveData: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\t\n\t\tthis.octokit = config.octokit;\n\t\tthis.saveData = config.saveData;\n\n\t\tthis.setCurrentFile(config.currentFile);\n\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\tpack: 'start',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\txtype: 'githubreposbrowser',\n\t\t\t\toctokit: this.octokit,\n\t\t\t\titemId: 'repoBrowser',\n\t\t\t\tflex: 1,\n\t\t\t\tlisteners: {\n\t\t\t\t\tnodeSelected: function(src, type, node) {\n\t\t\t\t\t\tconst form = this.queryById('saveForm').getForm();\n\t\t\t\t\t\tconst [owner, repo] = src.getRepoId().split('/');\n\t\t\t\t\t\tform.setValues({owner, repo});\n\t\t\t\t\t\tif (type === 'file') {\n\t\t\t\t\t\t\tconst pathComponents = this.getPathComponents(src.getPath());\n\t\t\t\t\t\t\tform.setValues({...pathComponents});\n\t\t\t\t\t\t} else if (type === 'folder') {\n\t\t\t\t\t\t\tconst folder = src.getPath().replace(/^\\//, '');\n\t\t\t\t\t\t\tform.setValues({folder, file: ''});\n\t\t\t\t\t\t} else if (type === 'repo') {\n\t\t\t\t\t\t\tform.setValues({folder: '', file: ''});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tnodeDeselected: function(node) {\n\t\t\t\t\t\t// loadWin.queryById('load').setDisabled(true);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\tbodyPadding: '10',\n\t\t\t\theight: 200,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\tpack: 'start'\n\t\t\t\t},\n\t\t\t\txtype: 'form',\n\t\t\t\titemId: 'saveForm',\n\t\t\t\titems: [{\n\t\t\t\t\thtml: '<span class=\"x-panel-header-title-default\">Repository Path</span>'\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\tlayout: 'hbox',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\tlabelAlign: 'top'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tfieldLabel: 'GitHub User',\n\t\t\t\t\t\tname: 'owner',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t},{\n\t\t\t\t\t\tfieldLabel: 'Repository Name',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tname: 'repo'\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\thtml: '<span class=\"x-panel-header-title-default\">File Path</span>',\n\t\t\t\t\tmargin: '10 0 0 0',\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\tlayout: 'hbox',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\tlabelAlign: 'top'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tfieldLabel: 'Folder(s)',\n\t\t\t\t\t\tname: 'folder',\n\t\t\t\t\t\tallowBlank: true,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t},{\n\t\t\t\t\t\tfieldLabel: 'File Name',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tname: 'file'\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\t/*\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\t\talign: 'middle',\n\t\t\t\t\t\tpack: 'start'\n\t\t\t\t\t},\n\t\t\t\t\tmargin: '25 0 0 0',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'button'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttext: 'Save',\n\t\t\t\t\t\thandler: function () {\n\t\t\t\t\t\t\tthis.doSave(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t}\n\t\t\t\t\t// ,{\n\t\t\t\t\t// \ttext: 'Save as Pull Request',\n\t\t\t\t\t// \thandler: function () {\n\t\t\t\t\t// \t\tthis.doSave(true);\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tscope: this\n\t\t\t\t\t// }\n\t\t\t\t\t]\n\t\t\t\t},{\n\t\t\t\t\t*/\n\t\t\t\t\titemId: 'status',\n\t\t\t\t\thtml: '',\n\t\t\t\t\tmargin: '15 0 0 0'\n\t\t\t\t}],\n\t\t\t\tlisteners: {\n\t\t\t\t\tvaliditychange: function(form, valid) {\n\t\t\t\t\t\tthis.fireEvent('formValidityChange', this, valid);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function() {\n\t\t\t\t\tthis.initForm();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tinitForm: function() {\n\t\tthis.octokit.getInfoForAuthenticatedUser().then(function(resp) {\n\t\t\tconst username = resp.data.login;\n\t\t\tthis.setUsername(username);\n\n\t\t\tconst form = this.queryById('saveForm').getForm();\n\t\t\tconst currentFile = this.getCurrentFile();\t\t\t\n\t\t\tif (currentFile !== undefined) {\n\t\t\t\tconst pathComponents = this.getPathComponents(currentFile.path);\n\t\t\t\tform.setValues({\n\t\t\t\t\towner: currentFile.owner,\n\t\t\t\t\trepo: currentFile.repo,\n\t\t\t\t\t...pathComponents\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tform.setValues({owner: username});\n\t\t\t}\n\t\t}.bind(this))\n\t},\n\n\tgetPathComponents: function(path) {\n\t\tconst pathComponents = path.split('/');\n\t\tlet file = pathComponents[pathComponents.length-1];\n\t\tlet folder = '';\n\t\tif (pathComponents.length > 2) {\n\t\t\tfolder = pathComponents.slice(0, -1).join('/');\n\t\t}\n\t\treturn {\n\t\t\tfolder,\n\t\t\tfile\n\t\t}\n\t},\n\n\tdoSave: async function(isPR=false) {\n\t\tconst form = this.queryById('saveForm').getForm();\n\t\tif (form.isValid()) {\n\t\t\tconst {owner, repo, folder, file} = form.getValues();\n\t\t\tlet path = file;\n\t\t\tif (folder !== '') {\n\t\t\t\tpath = folder+'/'+file;\n\t\t\t}\n\t\t\tthis.setStatus('Checking repository');\n\t\t\tconst repoExists = await this.octokit.doesRepoExist(owner, repo);\n\t\t\tif (repoExists) {\n\t\t\t\tthis.setStatus('Checking permissions');\n\t\t\t\tconst permission = await this.octokit.getPermissionsForUser(owner, repo, this.getUsername());\n\t\t\t\tif (permission === 'none' || permission === 'read') {\n\t\t\t\t\tthis.setStatus('You don\\'t have permission to write to this repository', 'error');\n\t\t\t\t} else {\n\t\t\t\t\tthis.setStatus('Checking file');\n\t\t\t\t\tconst branch = 'master';\n\t\t\t\t\tconst content = this.saveData;\n\t\t\t\t\tconst fileData = {owner, repo, branch, path};\n\t\t\t\t\tconst sha = await this.octokit.getLatestFileSHA(fileData);\n\t\t\t\t\tif (sha !== undefined) {\n\t\t\t\t\t\tconst message = 'File updated by Spyral';\n\t\t\t\t\t\tthis.octokit.saveFile(owner, repo, path, content, branch, message, sha).then(function(resp) {\n\t\t\t\t\t\t\tthis.setStatus('File updated');\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tthis.fireEvent('fileSaved', this, fileData);\n\t\t\t\t\t\t\t}.bind(this), 500);\n\t\t\t\t\t\t}.bind(this), function(error) {\n\t\t\t\t\t\t\tthis.setStatus('Error: '+error.message, 'error');\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst message = 'File created by Spyral';\n\t\t\t\t\t\tthis.octokit.saveFile(owner, repo, path, content, branch, message).then(function(resp) {\n\t\t\t\t\t\t\tthis.setStatus('File created');\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tthis.fireEvent('fileSaved', this, fileData);\n\t\t\t\t\t\t\t}.bind(this), 500);\n\t\t\t\t\t\t}.bind(this), function(error) {\n\t\t\t\t\t\t\tthis.setStatus('Error: '+error.message, 'error');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setStatus('The specified repository does not exist', 'error');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setStatus('Form is not valid', 'error');\n\t\t}\n\t},\n\n\tsetStatus: function(message, type) {\n\t\tlet cls = '';\n\t\tif (type && type === 'error') {\n\t\t\tcls = 'x-form-invalid-under-default';\n\t\t}\n\t\tthis.queryById('status').setHtml(`<span class=\"${cls}\">${message}</span>`);\n\t}\n});\n","Ext.define(\"Voyant.notebook.github.GitHubDialogs\", {\n\textend: \"Ext.Component\",\n\trequires: ['Voyant.notebook.github.OctokitWrapper','Voyant.notebook.github.ReposBrowser','Voyant.notebook.github.FileSaver'],\n\talias: \"widget.githubdialogs\",\n\tconfig: {\n\t\trepoType: 'owner',\n\t\tcurrentFile: undefined\n\t},\n\n\tauthToken: undefined,\n\toctokitWrapper: undefined,\n\n\tcurrentWindow: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tthis.callParent(arguments);\n\t},\n\n\tclose: function() {\n\t\tif (this.currentWindow !== undefined) {\n\t\t\tthis.currentWindow.close();\n\t\t\tthis.currentWindow = undefined;\n\t\t}\n\t},\n\n\tshowAuthenticate: function(callback) {\n\t\tconst parent = this;\n\n\t\tlet authWin = undefined;\n\t\tauthWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: 'Authenticate with GitHub',\n\t\t\twidth: 750,\n\t\t\theight: 550,\n\t\t\tclosable: false,\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\talign: 'middle',\n\t\t\t\tpack: 'center'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\thtml: '<div style=\"margin-bottom: 10px;\">You must authorize Spyral to use GitHub on your behalf.</div>'\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Authorize with GitHub',\n\t\t\t\thandler: function(button) {\n\t\t\t\t\tfunction postMessageHandler(event) {\n\t\t\t\t\t\tif (event.origin === window.location.origin && event.data === 'oauth_cookie_set') {\n\t\t\t\t\t\t\twindow.removeEventListener(\"message\", postMessageHandler, false);\n\t\t\t\t\t\t\tevent.source.close();\n\t\t\t\t\t\t\tparent.initOctokitWrapper();\n\t\t\t\t\t\t\tbutton.up('window').close();\n\t\t\t\t\t\t\tcallback.call(parent);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twindow.open(Voyant.application.getBaseUrlFull()+'spyral/oauth', '_blank');\n\t\t\t\t\twindow.addEventListener(\"message\", postMessageHandler, false);\n\t\t\t\t}\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tparent.close();\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tauthWin.show();\n\n\t\tthis.currentWindow = authWin;\n\t},\n\n\tshowLoad: function() {\n\t\tconst parent = this;\n\n\t\tthis.authToken = this.getCookieValue('access-token');\n\t\tif (this.authToken === '') {\n\t\t\tthis.showAuthenticate(this.showLoad);\n\t\t\treturn;\n\t\t} else if (this.octokitWrapper === undefined) {\n\t\t\tthis.initOctokitWrapper();\n\t\t}\n\n\t\tlet loadWin = undefined;\n\t\tloadWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: 'Load from GitHub',\n\t\t\twidth: 750,\n\t\t\theight: 550,\n\t\t\tclosable: false,\n\t\t\tmaximizable: true,\n\t\t\tlayout: 'fit',\n\t\t\titems: {\n\t\t\t\txtype: 'githubreposbrowser',\n\t\t\t\toctokit: this.octokitWrapper,\n\t\t\t\titemId: 'repoBrowser',\n\t\t\t\tlisteners: {\n\t\t\t\t\tnodeSelected: function(src, type, node) {\n\t\t\t\t\t\tif (type === 'file') {\n\t\t\t\t\t\t\tloadWin.queryById('load').setDisabled(false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tloadWin.queryById('load').setDisabled(true);\t\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tnodeDeselected: function(node) {\n\t\t\t\t\t\tloadWin.queryById('load').setDisabled(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Load Selected',\n\t\t\t\titemId: 'load',\n\t\t\t\tdisabled: true,\n\t\t\t\thandler: function() {\n\t\t\t\t\tconst repoBrowser = loadWin.queryById('repoBrowser');\n\t\t\t\t\tthis.loadFile(repoBrowser.getRepoId(), repoBrowser.getPath());\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tparent.close();\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tloadWin.show();\n\n\t\tthis.currentWindow = loadWin;\n\t},\n\n\tshowSave: function(data) {\n\t\tconst parent = this;\n\n\t\tthis.authToken = this.getCookieValue('access-token');\n\t\tif (this.authToken === '') {\n\t\t\tthis.showAuthenticate();\n\t\t\treturn;\n\t\t} else if (this.octokitWrapper === undefined) {\n\t\t\tthis.initOctokitWrapper();\n\t\t}\n\n\t\tlet saveWin = undefined;\n\t\tsaveWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: 'Save to GitHub',\n\t\t\twidth: 750,\n\t\t\theight: 650,\n\t\t\tclosable: false,\n\t\t\tmaximizable: true,\n\t\t\tlayout: 'fit',\n\t\t\titems: {\n\t\t\t\txtype: 'githubfilesaver',\n\t\t\t\toctokit: this.octokitWrapper,\n\t\t\t\tcurrentFile: this.getCurrentFile(),\n\t\t\t\tsaveData: data,\n\t\t\t\titemId: 'fileSaver',\n\t\t\t\tlisteners: {\n\t\t\t\t\tformValidityChange: function(src, valid) {\n\t\t\t\t\t\tsaveWin.queryById('save').setDisabled(!valid);\n\t\t\t\t\t},\n\t\t\t\t\tfileSaved: function(src, fileData) {\n\t\t\t\t\t\tparent.fireEvent('fileSaved', parent, fileData);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Save',\n\t\t\t\titemId: 'save',\n\t\t\t\tdisabled: true,\n\t\t\t\thandler: function() {\n\t\t\t\t\tsaveWin.queryById('fileSaver').doSave();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tparent.close();\n\t\t\t\t\tparent.fireEvent('saveCancelled', parent);\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tsaveWin.show();\n\n\t\tthis.currentWindow = saveWin;\n\t},\n\n\tgetCookieValue: function(cookieName) {\n\t\tconst re = new RegExp('[; ]'+cookieName+'=([^\\\\s;]*)');\n\t\tconst sMatch = (' '+document.cookie).match(re);\n\t\tif (cookieName && sMatch) return unescape(sMatch[1]);\n\t\treturn '';\n\t},\n\n\tinitOctokitWrapper: function() {\n\t\tthis.authToken = this.getCookieValue('access-token');\n\t\tthis.octokitWrapper = new Voyant.notebook.github.OctokitWrapper({\n\t\t\tauthToken: this.authToken\n\t\t});\n\t},\n\n\tloadFileFromId: function(id) {\n\t\tconst parts = decodeURIComponent(id).split('/');\n\t\tif (parts.length >= 3) {\n\t\t\tconst repoId = parts[0]+'/'+parts[1];\n\t\t\tconst filePath = parts.slice(2).join('/');\n\t\t\tthis.loadFile(repoId, filePath);\n\t\t}\n\t},\n\n\tloadFile: function(repoId, filePath) {\n\t\tthis.authToken = this.getCookieValue('access-token');\n\t\tif (this.authToken === '') {\n\t\t\tthis.showAuthenticate(this.loadFile.bind(this, repoId, filePath));\n\t\t\treturn;\n\t\t} else if (this.octokitWrapper === undefined) {\n\t\t\tthis.initOctokitWrapper();\n\t\t}\n\t\tthis.octokitWrapper.loadFile(repoId, filePath).then((data) => {\n\t\t\tthis.setCurrentFile(data);\n\t\t\tthis.fireEvent('fileLoaded', this, data);\n\t\t});\n\t}\n})\n","Ext.define(\"Voyant.notebook.StorageDialogs\", {\n\textend: \"Ext.Component\",\n\trequires: [],\n\talias: \"\",\n\tconfig: {\n\t\taccessCode: undefined\n\t},\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tthis.callParent(arguments);\n\t},\n\t\n\tshowSave: function(data, metadata, notebookId='') {\n\t\tconst me = this;\n\t\tconst newNotebook = notebookId === '';\n\t\tconst title = newNotebook ? 'Save New Notebook' : 'Overwrite Existing Notebook';\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: title,\n\t\t\titems: [{\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 450,\n\t\t\t\tbodyPadding: 5,\n\t\t\t\tplugins: ['datatip'],\n\t\t\t\tlisteners: {\n\t\t\t\t\tbeforeshowtip: function(tip, config, msg) {\n\t\t\t\t\t\treturn !config.currentTarget.el.hasCls('x-form-invalid'); // don't show tooltip if the field is invalid because otherwise the two tips overlap\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlayout: 'anchor',\n\t\t\t\tdefaults: {\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 160,\n\t\t\t\t\twidth: 360,\n\t\t\t\t\tinputAttrTpl: 'spellcheck=\"false\"',\n\t\t\t\t\txtype: 'textfield'\n\t\t\t\t},\n    \t    \titems: [{\n\t\t\t\t\tfieldLabel: 'Notebook ID' + (newNotebook ? ' (optional)' : ''),\n\t\t\t\t\tname: 'notebookId',\n\t\t\t\t\tvalue: notebookId,\n\t\t\t\t\tallowBlank: true,\n\t\t\t\t\treadOnly: !newNotebook,\n\t\t\t\t\ttooltip: 'An ID used to identify this notebook. If left blank, one will be generated for you.',\n\t\t\t\t\tvalidator: function(val) {\n\t\t\t\t\t\tif (val == '') {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (val.match(/^[\\w-]{4,16}$/) === null) {\n\t\t\t\t\t\t\treturn 'The ID must be between 4 and 16 alphanumeric characters.'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\tfieldLabel: 'Access Code',\n\t\t\t\t\tname: 'accessCode',\n\t\t\t\t\tallowBlank: false,\n\t\t\t\t\tvalue: newNotebook ? this.generateAccessCode() : this.getAccessCode(),\n\t\t\t\t\ttooltip: 'The Access Code is required to overwrite this notebook.',\n\t\t\t\t\tvalidator: function(val) {\n\t\t\t\t\t\tif (val.match(/^[\\w-]{4,16}$/) === null) {\n\t\t\t\t\t\t\treturn 'The access code must be between 4 and 16 alphanumeric characters.'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\tfieldLabel: 'Email (optional)',\n\t\t\t\t\tname: 'email',\n\t\t\t\t\tallowBlank: true,\n\t\t\t\t\tvtype: 'email',\n\t\t\t\t\thidden: !newNotebook,\n\t\t\t\t\ttooltip: 'An email will be sent to this address with the Notebook URL and Access Code.'\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tbuttons: [{\n    \t        text: 'Cancel',\n\t            ui: 'default-toolbar',\n    \t        handler: function() {\n    \t            this.up('window').close();\n\t\t\t\t\tme.fireEvent('saveCancelled', me);\n    \t        }\n    \t    }, \" \", {\n    \t        text: 'Save',\n    \t        handler: function(button) {\n\t\t\t\t\tconst win = button.up('window');\n\t\t\t\t\tconst form = win.down('form').getForm();\n\t\t\t\t\tif (form.isValid()) {\n\t\t\t\t\t\tconst values = form.getValues();\n\t\t\t\t\t\tvalues.data = data;\n\t\t\t\t\t\tvalues.metadata = metadata;\n\t\t\t\t\t\tif (newNotebook && values.notebookId !== '') {\n\t\t\t\t\t\t\tme.doesNotebookIdExist(values.notebookId).then(function(exists) {\n\t\t\t\t\t\t\t\tif (exists) {\n\t\t\t\t\t\t\t\t\tform.findField('notebookId').markInvalid('That Notebook ID already exists.');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tme.doSave(values);\n\t\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbutton.setDisabled(true);\n\t\t\t\t\t\t\tme.doSave(values).then(function(didSave) {\n\t\t\t\t\t\t\t\tbutton.setDisabled(false);\n\t\t\t\t\t\t\t\tif (didSave) {\n\t\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tform.findField('accessCode').markInvalid('Invalid access code.');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n    \t        }\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tclose: function() {\n\t\t\t\t\tme.fireEvent('close', me); // need an additional close event in case the user uses the close tool / esc button\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t},\n\n\tdoesNotebookIdExist: function(id) {\n\t\tconst dfd = new Ext.Deferred();\n\n\t\tSpyral.Load.trombone({\n\t\t\ttool: 'notebook.GitNotebookManager',\n\t\t\taction: 'exists',\n\t\t\tid: id,\n\t\t\tnoCache: 1\n\t\t}).then(function(json) {\n\t\t\tvar exists = json.notebook.data === 'true';\n\t\t\tdfd.resolve(exists);\n\t\t}).catch(function(err) {\n\t\t\tconsole.log(err);\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tdoSave: function({notebookId, accessCode, email, data, metadata}) {\n\t\tconst me = this;\n\t\tmetadata.id = notebookId;\n\n\t\treturn Spyral.Load.trombone({\n\t\t\tmethod: 'POST',\n\t\t\ttool: 'notebook.GitNotebookManager',\n\t\t\taction: 'save',\n\t\t\tid: notebookId,\n\t\t\taccessCode: accessCode,\n\t\t\temail: email,\n\t\t\tdata: data,\n\t\t\tmetadata: JSON.stringify(metadata)\n\t\t}).then(function(json) {\n\t\t\tif (json.notebook.data !== 'true') {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tme.setAccessCode(accessCode);\n\t\t\t\tconst notebookId = json.notebook.id;\n\t\t\t\tme.fireEvent('fileSaved', me, notebookId);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}).catch(function(err) {\n\t\t\tme.fireEvent('fileSaved', me, null);\n\t\t\treturn false;\n\t\t});\n\t},\n\n\tgenerateAccessCode: function() {\n\t\tconst alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];\n\t\tlet code = '';\n\t\twhile (code.length < 6) {\n\t\t\tif (Math.random() < .3) {\n\t\t\t\tcode += Math.floor(Math.random()*9);\n\t\t\t} else {\n\t\t\t\tlet letter = alphabet[Math.floor(Math.random()*alphabet.length)];\n\t\t\t\tif (Math.random() < .5) {\n\t\t\t\t\tletter = letter.toUpperCase();\n\t\t\t\t}\n\t\t\t\tcode += letter;\n\t\t\t}\n\t\t}\n\t\treturn code;\n\t},\n\n\treset: function() {\n\t\tthis.setAccessCode(undefined);\n\t}\n})","Ext.define('Voyant.notebook.metadata.MetadataEditor', {\n\textend: 'Ext.form.Panel',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.metadataeditor',\n\tstatics: {\n\t\ti18n: {\n    \t\tmetadataTitle: \"Title\",\n    \t\tmetadataTip: \"Edit notebook metadata.\",\n    \t\tmetadataAuthor: \"Author(s)\",\n    \t\tmetadataKeywords: \"Keywords\",\n    \t\tmetadataDescription: \"Description\",\n    \t\tmetadataLicense: \"Licence\",\n    \t\tmetadataLanguage: \"Language\"\n\t\t}\n\t},\n\n\tconstructor: function(config) {\n\t\tExt.apply(this, config, {\n\t\t\ttrackResetOnLoad: true,\n\t\t\titems: {\n\t\t\t\tbodyPadding: 5,\n\n\t\t\t\t// Fields will be arranged vertically, stretched to full width\n\t\t\t\tlayout: 'anchor',\n\t\t\t\tdefaults: {\n\t\t\t\t\tanchor: '100%',\n\t\t\t\t\tlabelAlign: \"right\"\n\t\t\t\t},\n\n\t\t\t\t// The fields\n\t\t\t\tdefaultType: 'textfield',\n\t\t\t\titems: [{\n\t\t\t\t\tfieldLabel: this.localize(\"metadataTitle\"),\n\t\t\t\t\txtype: 'htmleditor',\n\t\t\t\t\tname: 'title',\n\t\t\t\t\theight: 100,\n\t\t\t\t\tenableAlignments : false,\n\t\t\t\t\tenableColors : false,\n\t\t\t\t\tenableFont : false,\n\t\t\t\t\tenableFontSize : false,\n\t\t\t\t\tenableLinks : false,\n\t\t\t\t\tenableLists : false\n\t\t\t\t},{\n\t\t\t\t\tfieldLabel: this.localize(\"metadataAuthor\"),\n\t\t\t\t\tname: 'author'\n\t\t\t\t},{\n\t\t\t\t\tfieldLabel: this.localize(\"metadataKeywords\"),\n\t\t\t\t\tname: 'keywords',\n\t\t\t\t\txtype: 'tagfield',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\txtype: 'store.json',\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{name: 'label'},\n\t\t\t\t\t\t\t{name: 'count', type: 'integer'}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tdisplayField: 'label',\n\t\t\t\t\tvalueField: 'label',\n\t\t\t\t\tqueryMode: 'local',\n\t\t\t\t\tfilterPickList: true,\n\t\t\t\t\tforceSelection: false,\n\t\t\t\t\tdelimiter: ',',\n\t\t\t\t\tcreateNewOnEnter: true,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(cmp) {\n\t\t\t\t\t\t\tSpyral.Load.trombone({\n\t\t\t\t\t\t\t\ttool: 'notebook.CatalogueFacets',\n\t\t\t\t\t\t\t\tfacets: 'facet.keywords',\n\t\t\t\t\t\t\t\tnoCache: 1\n\t\t\t\t\t\t\t}).then(function(json) {\n\t\t\t\t\t\t\t\tcmp.getStore().loadRawData(json.catalogue.facets[0].results);\n\t\t\t\t\t\t\t\t// need to reset value to make sure previously set keywords show up\n\t\t\t\t\t\t\t\tcmp.setValue(cmp.getValue());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'htmleditor',\n\t\t\t\t\tfieldLabel: this.localize(\"metadataDescription\"),\n\t\t\t\t\tname: 'description',\n\t\t\t\t\theight: 100,\n\t\t\t\t\tenableAlignments : false,\n\t\t\t\t\tenableColors : false,\n\t\t\t\t\tenableFont : false\n\t\t\t\t},{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tfieldLabel: this.localize(\"metadataLicense\"),\n\t\t\t\t\tname: 'license',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text'],\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\"text\": \"Apache License 2.0\"},\n\t\t\t\t\t\t\t{\"text\": \"BSD 3-Clause \\\"New\\\" or \\\"Revised\\\" license\"},\n\t\t\t\t\t\t\t{\"text\": \"BSD 2-Clause \\\"Simplified\\\" or \\\"FreeBSD\\\" license\"},\n\t\t\t\t\t\t\t{\"text\": \"Creative Commons Attribution (CC BY)\"},\n\t\t\t\t\t\t\t{\"text\": \"Creative Commons Attribution-ShareAlike (CC BY-SA)\"},\n\t\t\t\t\t\t\t{\"text\": \"Creative Commons Zero (CC0)\"},\n\t\t\t\t\t\t\t{\"text\": \"GNU General Public License (GPL)\"},\n\t\t\t\t\t\t\t{\"text\": \"GNU Library or \\\"Lesser\\\" General Public License (LGPL)\"},\n\t\t\t\t\t\t\t{\"text\": \"MIT license\"},\n\t\t\t\t\t\t\t{\"text\": \"Mozilla Public License 2.0\"},\n\t\t\t\t\t\t\t{\"text\": \"Common Development and Distribution License\"},\n\t\t\t\t\t\t\t{\"text\": \"Eclipse Public License\"}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tname: 'language',\n\t\t\t\t\tfieldLabel: this.localize(\"metadataLanguage\"),\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text'],\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\"text\": \"Bengali\"},\n\t\t\t\t\t\t\t{\"text\": \"Bhojpuri\"},\n\t\t\t\t\t\t\t{\"text\": \"Egyptian Arabic\"},\n\t\t\t\t\t\t\t{\"text\": \"English\"},\n\t\t\t\t\t\t\t{\"text\": \"French\"},\n\t\t\t\t\t\t\t{\"text\": \"German\"},\n\t\t\t\t\t\t\t{\"text\": \"Gujarati\"},\n\t\t\t\t\t\t\t{\"text\": \"Hausa\"},\n\t\t\t\t\t\t\t{\"text\": \"Hindi\"},\n\t\t\t\t\t\t\t{\"text\": \"Indonesian\"},\n\t\t\t\t\t\t\t{\"text\": \"Italian\"},\n\t\t\t\t\t\t\t{\"text\": \"Japanese\"},\n\t\t\t\t\t\t\t{\"text\": \"Javanese\"},\n\t\t\t\t\t\t\t{\"text\": \"Kannada\"},\n\t\t\t\t\t\t\t{\"text\": \"Korean\"},\n\t\t\t\t\t\t\t{\"text\": \"Mandarin\"},\n\t\t\t\t\t\t\t{\"text\": \"Marathi\"},\n\t\t\t\t\t\t\t{\"text\": \"Persian\"},\n\t\t\t\t\t\t\t{\"text\": \"Portuguese\"},\n\t\t\t\t\t\t\t{\"text\": \"Russian\"},\n\t\t\t\t\t\t\t{\"text\": \"Southern Min\"},\n\t\t\t\t\t\t\t{\"text\": \"Spanish\"},\n\t\t\t\t\t\t\t{\"text\": \"Standard Arabic\"},\n\t\t\t\t\t\t\t{\"text\": \"Swahili\"},\n\t\t\t\t\t\t\t{\"text\": \"Tamil\"},\n\t\t\t\t\t\t\t{\"text\": \"Telugu\"},\n\t\t\t\t\t\t\t{\"text\": \"Thai\"},\n\t\t\t\t\t\t\t{\"text\": \"Turkish\"},\n\t\t\t\t\t\t\t{\"text\": \"Urdu\"},\n\t\t\t\t\t\t\t{\"text\": \"Vietnamese\"},\n\t\t\t\t\t\t\t{\"text\": \"Western Punjabi\"},\n\t\t\t\t\t\t\t{\"text\": \"Wu Chinese\"},\n\t\t\t\t\t\t\t{\"text\": \"Yue Chinese\"}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}\n\t\t});\n\t\tthis.callParent(arguments);\n\t},\n\tloadMetadata: function(metadata) {\n\t\tif (metadata instanceof Spyral.Metadata) {\n\t\t\tthis.loadRecord(Ext.create('Voyant.data.model.NotebookMetadata', {\n\t\t\t\ttitle: metadata.title,\n\t\t\t\tauthor: metadata.author,\n\t\t\t\tdescription: metadata.description,\n\t\t\t\tkeywords: metadata.keywords,\n\t\t\t\tlanguage: metadata.language,\n\t\t\t\tlicense: metadata.license\n\t\t\t}));\n\t\t}\n\t}\n});\n\nExt.define('Voyant.data.model.NotebookMetadata', {\n\textend: 'Ext.data.Model',\n\tfields: [\n\t\t{name: 'title', type: 'string'},\n\t\t{name: 'author', type: 'string'},\n\t\t{name: 'description', type: 'string'},\n\t\t{name: 'keywords', type: 'string'},\n\t\t{name: 'language', type: 'string', defaultValue: 'English'},\n\t\t{name: 'license', type: 'string', defaultValue: 'Creative Commons Attribution (CC BY)'},\n\t\t{name: 'modified', type: 'date'},\n\t\t{name: 'created', type: 'date'}\n\t]\n});","Ext.define('Voyant.notebook.util.FormatConverter', {\n\timportFromHtml: function(html) {\n\t\tvar me = this;\n\n\t\tvar parser = new DOMParser();\n\t\tvar dom = parser.parseFromString(html, 'text/html');\n\t\t\n\t\tme.setMetadata(new Spyral.Metadata(dom));\n\t\t\n\t\tvar hasDomError = false;\n\t\tvar cells2Init = [];\n\t\tdom.querySelectorAll(\"section.notebook-editor-wrapper\").forEach(function(section) {\n\t\t\tvar classes = section.classList;\n\t\t\tif (classes.contains(\"notebooktexteditorwrapper\")) {\n\t\t\t\tvar editor = section.querySelector(\".notebook-text-editor\").innerHTML;\n\t\t\t\tme.addText(editor, undefined, section.id);\n\t\t\t} else if (classes.contains(\"notebookcodeeditorwrapper\") || classes.contains(\"notebookdatawrapper\")) {\n\t\t\t\tvar inputEl = section.querySelector(\".notebook-code-editor-raw\");\n\t\t\t\tvar typeRe = /\\beditor-mode-(\\w+)\\b/.exec(inputEl.className);\n\t\t\t\tvar editorType = typeRe[1];\n\t\t\t\tvar matchClass = 'notebookcodeeditorwrapper';\n\t\t\t\tif (editorType !== 'javascript') {\n\t\t\t\t\tmatchClass = 'notebookdatawrapper';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/* in an ideal world we could use inputEl.innerHTML to get the contents\n\t\t\t\t * except that since it's in a parsed DOM it's already been transformed\n\t\t\t\t *  significantly. For instance, all >, <, and & character appear in the\n\t\t\t\t * html entities form (which breaks things like && () => {}). You also\n\t\t\t\t * get strange artefacts like if you have \"<div>\" in your code it may add\n\t\t\t\t * </div> to the end of the innerHTML (to make sure tags are balanced).\n\t\t\t\t * and of course textContent or innerText won't work because that will\n\t\t\t\t * strip any of the HTML formatting out. What's left is to use the parsing\n\t\t\t\t * to ensure the order and to properly grab the IDs and then to do character\n\t\t\t\t * searches on the original string. */\n\t\t\t\tvar secPos = html.indexOf(\"<section id='\"+section.id+\"' class='notebook-editor-wrapper \"+matchClass+\"'>\");\n\t\t\t\tvar startPre = html.indexOf(\"<pre class='notebook-code-editor-raw editor-mode-\", secPos);\n\t\t\t\tstartPre = html.indexOf(\">\", startPre)+1; // add the length of the string\n\t\t\t\tvar endPre = html.indexOf(\"</pre>\\n<div class='notebook-code-results\", startPre);\n\t\t\t\t\n\t\t\t\t// check if we have valid values\n\t\t\t\tif (secPos===-1 || startPre === -1 || endPre === -1) {\n\t\t\t\t\thasDomError = true;\n\t\t\t\t\t// this might work, unless the js code includes HTML\n\t\t\t\t\tinput = editorType === \"javascript\" ? inputEl.innerText : inputEl.innerHTML;\n\t\t\t\t} else {\n\t\t\t\t\tinput = html.substring(startPre, endPre);\n\t\t\t\t}\n\n\t\t\t\tvar output = section.querySelector(\".notebook-code-results\").innerHTML;\n\t\t\t\tvar expandResults = section.querySelector(\".notebook-code-results\").classList.contains('collapsed') === false;\n\n\t\t\t\tif (editorType === 'javascript') {\n\t\t\t\t\tvar codeCell = me.addCode({\n\t\t\t\t\t\tinput: input,\n\t\t\t\t\t\toutput: output,\n\t\t\t\t\t\texpandResults: expandResults,\n\t\t\t\t\t\tmode: editorType\n\t\t\t\t\t}, undefined, section.id);\n\t\n\t\t\t\t\tcells2Init.push(codeCell);\n\t\t\t\t\tcodeCell.on('initialized', function() {\n\t\t\t\t\t\tvar cellIndex = cells2Init.indexOf(codeCell);\n\t\t\t\t\t\tif (cellIndex !== -1) {\n\t\t\t\t\t\t\tcells2Init.splice(cellIndex, 1);\n\t\t\t\t\t\t\tif (cells2Init.length === 0) {\n\t\t\t\t\t\t\t\tme.fireEvent('notebookInitialized');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('unknown cell initialized', codeCell);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// hack to get the data name from the dataviewer\n\t\t\t\t\tvar dataName = section.querySelector('.notebook-code-results .spyral-dv-left').firstChild.data;\n\t\t\t\t\tdataName = dataName.split(':')[0];\n\t\t\t\t\tvar dataCell = me.addData({\n\t\t\t\t\t\tinput: input,\n\t\t\t\t\t\toutput: output,\n\t\t\t\t\t\texpandResults: expandResults,\n\t\t\t\t\t\tdataName: dataName,\n\t\t\t\t\t\tmode: editorType\n\t\t\t\t\t}, undefined, section.id);\n\t\t\t\t\tcells2Init.push(dataCell);\n\t\t\t\t\tdataCell.on('initialized', function() {\n\t\t\t\t\t\tvar cellIndex = cells2Init.indexOf(dataCell);\n\t\t\t\t\t\tif (cellIndex !== -1) {\n\t\t\t\t\t\t\tcells2Init.splice(cellIndex, 1);\n\t\t\t\t\t\t\tif (cells2Init.length === 0) {\n\t\t\t\t\t\t\t\tme.fireEvent('notebookInitialized');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('unknown cell initialized', dataCell);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (hasDomError) {\n\t\t\tme.showError(me.localize(\"errorParsingDomInput\"))\n\t\t}\n\t},\n\n\tgetInnerHeaderHtml: function() {\n\t\tlet html = \"\";\n\t\tif (this.getMetadata().title) {\n\t\t\thtml += \"<div class='title'>\"+this.getMetadata().title+\"</div>\";\n\t\t}\n\t\tif (this.getMetadata().author) {\n\t\t\thtml += \"<div class='author'>\"+this.getMetadata().author+\"</div>\";\n\t\t}\n\t\treturn html;\n\t},\n\t\n\tgetInnerFooterHtml: function() {\n\t\tvar text = \"\", metadata = this.getMetadata();\n\t\tif (metadata.author || metadata.license) {\n\t\t\tvar text = \"&copy;\";\n\t\t\tif (metadata.author) {text+=\" \"+metadata.author;}\n\t\t\tif (metadata.license) {text+=\" (\"+metadata.license+\")\";}\n\t\t\ttext += \". \";\n\t\t}\n\t\tif (metadata.created || metadata.modified) {\n\t\t\tvar created = metadata.shortDate(\"created\"), modified = metadata.shortDate(\"modified\");\n\t\t\tif (created) {\n\t\t\t\ttext += this.localize(\"created\")+\" \"+created+\".\"\n\t\t\t}\n\t\t\tif (modified && created!=modified) {\n\t\t\t\ttext += \" \"+this.localize(\"modified\")+\" \"+modified+\".\"\n\t\t\t}\n\t\t\t\n\t\t}\n\t\treturn text;\n\t},\n\n\tgenerateExportHtml: function() {\n\t\tvar metadata = this.getMetadata();\n\t\tvar out = \"<!DOCTYPE HTML>\\n<html>\\n<head>\\n\\t<meta charset='UTF-8'>\\n\"+\n\t\t\tmetadata.getHeaders();\n\t\tvar aceChromeEl = document.getElementById(\"ace-chrome\");\n\t\tif (aceChromeEl) {out+=aceChromeEl.outerHTML+\"\\n\"}\n\t\t\n\t\t// TODO voyant-notebooks-styles has been removed\n\t\tvar stylesEl = document.getElementById(\"voyant-notebooks-styles\");\n\t\tif (stylesEl) {out+=stylesEl.outerHTML+\"\\n\"}\n\n\t\tout += \"<script> // this script checks to see if embedded tools seem to be available\\n\"+\n\t\t\t\"window.addEventListener('load', function() {\\n\"+\n\t\t\t\t\"var hostnames = {}, warned = false;\\n\"+\n\t\t\t\t\"document.querySelectorAll('iframe').forEach(function(iframeEl) {\\n\"+\n\t\t\t\t\t\"let url = new URL(iframeEl.src);\\n\"+\n\t\t\t\t\t\"if (!(url.hostname in hostnames) && !warned) {\\n\"+\n\t\t\t\t\t\t\"hostnames[url.hostname] = true; // mark as fetched\\n\"+\n\t\t\t\t\t\t\"fetch(url).catch(response => {\\n\"+\n\t\t\t\t\t\t\t\"warned = true;\\n\"+\n\t\t\t\t\t\t\t\"alert('This notebook seems to contain one ore more tools that may not be able to load. Possible reasons include a server no longer being accessible (especially if the notebook was generated from a local server), or because of security restrictions.'+url)\\n\"+\n\t\t\t\t\t\t\"})\\n\"+\n\t\t\t\t\t\"}\\n\"+\n\t\t\t\t\"})\\n\"+\n\t\t\t\"})\\n\"+\n\t\t\t\"\u003c/script>\\n\"+\n\t\t\t\"</head>\\n<body class='exported-notebook'>\\n\"+\n\t\t\t\"<header class='spyral-header'>\"+this.getInnerHeaderHtml()+\"</header>\\n\"+\n\t\t\t\"<article class='spyralArticle'>\\n\";\n\n\t\tthis.getComponent(\"cells\").items.each(function(item, i) {\n\t\t\tvar content = item.getContent();\n\t\t\tvar counter = item.down(\"notebookwrappercounter\");\n\n\t\t\t// reminder that the parsing in of notebooks depends on the stability of this syntax\n\t\t\tout+=\"<section id='\"+counter.name+\"' class='notebook-editor-wrapper \"+item.xtype+\"'>\\n\"+\n\t\t\t\"<div class='notebookwrappercounter'>\"+counter.getTargetEl().dom.innerHTML+\"</div>\";\n\n\t\t\tif (item.isXType('notebooktexteditorwrapper')) {\n\t\t\t\tout+=\"<div class='notebook-text-editor'>\"+content+\"</div>\\n\";\n\t\t\t} else {\t\n\t\t\t\tvar codeTextLayer = item.getTargetEl().query('.ace_text-layer')[0].cloneNode(true);\n\t\t\t\tcodeTextLayer.style.setProperty('height', 'auto'); // fix for very large height set by ace\n\n\t\t\t\t// reminder that the parsing in of notebooks depends on the stability of this syntax\n\t\t\t\tout+=\"<div class='notebook-code-editor ace-chrome'>\\n\"+codeTextLayer.outerHTML+\"\\n</div>\\n\"+\n\t\t\t\t\t\"<pre class='notebook-code-editor-raw editor-mode-\"+content.mode+\"'>\"+content.input+\"</pre>\\n\"+\n\t\t\t\t\t\"<div class='notebook-code-results\"+(content.expandResults ? '' : ' collapsed')+\"'>\\n\"+content.output+\"\\n</div>\\n\";\n\t\t\t}\n\n\t\t\tout+=\"</section>\\n\"\n\t\t})\n\t\tout += \"</article>\\n<footer class='spyral-footer'>\"+this.getInnerFooterHtml()+\"</footer>\\n</body>\\n</html>\";\n\t\treturn out;\n\t},\n\n\tgenerateExportMetadata: function(metadata) {\n\t\tvar clone = metadata.clone(); // use a clone so that altering title and description doesn't affect original\n\t\t\n\t\tif (clone.title) {\n\t\t\tclone.title = clone.title.replace(/<\\/?\\w+.*?>/g, '');\n\t\t}\n\t\tif (clone.description) {\n\t\t\tclone.description = clone.description.replace(/<\\/?\\w+.*?>/g, '');\n\t\t}\n\n\t\tif (clone.keywords) {\n\t\t\tif (Array.isArray(clone.keywords) === false) {\n\t\t\t\tclone.keywords = clone.keywords.split(/[\\s,]+/)\n\t\t\t}\n\t\t\tclone.keywords = clone.keywords.reduce(function(keywordsArray, keyword) {\n\t\t\t\tif (keyword.length > 0) {\n\t\t\t\t\tkeywordsArray.push(keyword.toLowerCase());\n\t\t\t\t}\n\t\t\t\treturn keywordsArray;\n\t\t\t}, []);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\tgenerateExportJson: function() {\n\t\tvar cells = [];\n\t\tthis.getComponent(\"cells\").items.each(function(item, i) {\n\t\t\tvar type;\n\t\t\tswitch(item.xtype) {\n\t\t\t\tcase 'notebookcodeeditorwrapper':\n\t\t\t\t\ttype = 'code';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'notebookdatawrapper':\n\t\t\t\t\ttype = 'data';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttype = 'text';\n\t\t\t}\n\t\t\tcells.push({\n\t\t\t\tcellId: item.getCellId(),\n\t\t\t\ttype: type,\n\t\t\t\tcontent: item.getContent()\n\t\t\t});\n\t\t});\n\n\t\tvar json = {\n\t\t\tmetadata: this.getMetadata(),\n\t\t\tcells: cells\n\t\t}\n\n\t\treturn JSON.stringify(json);\n\t},\n\n\n\t/*\n\t * Export dialog options below\n\t */\n\t\n\tgetExtraExportItems: function() {\n\t\treturn [{\n\t\t\tinputValue: 'html',\n\t\t\tboxLabel: this.localize('exportHtml')\n\t\t},{\n\t\t\tinputValue: 'htmlDownload',\n\t\t\tboxLabel: '<a href=\"#\">'+this.localize('exportHtmlDownload')+'</a>',\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(cmp) {\n\t\t\t\t\tvar name = (this.getNotebookId() || \"spyral\")+ \".html\";\n\t\t\t\t\tvar data = this.generateExportHtml();\n\t\t\t\t\tvar properties = {type: 'text/html'};\n\t\t\t\t\tvar file;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfile = new File([data], name, properties);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tfile = new Blob([data], properties);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar url = URL.createObjectURL(file);\n\t\t\t\t\tvar a = cmp.boxLabelEl.dom.querySelector(\"a\");\n\t\t\t\t\ta.setAttribute(\"download\", name);\n\t\t\t\t\ta.setAttribute(\"href\", url);\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},\n\t\t\thandler: function(cmp) {\n\t\t\t\tcmp.boxLabelEl.dom.querySelector(\"a\").click();\n\t\t\t\tcmp.up(\"window\").close();\n\t\t\t}\n\t\t}]\n\t},\n\t\n\texportHtml: function() {\n\t\tvar out = this.generateExportHtml();\n\t\tvar myWindow = window.open();\n\t\tmyWindow.document.write(out);\n\t\tmyWindow.document.close();\n\t\tmyWindow.focus();\n\t}\n})","Ext.define('Voyant.notebook.Catalogue', {\n\textend: 'Ext.Component',\n    mixins: ['Voyant.util.Localization'],\n\talias: 'widget.notebookcatalogue',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttitle: 'Spyral Notebooks Catalogue',\n\t\t\tbrowse: 'Browse Notebooks',\n\t\t\tkeywords: 'Keywords',\n\t\t\tauthor: 'Author',\n\t\t\tlanguage: 'Language',\n\t\t\tlicense: 'License',\n\t\t\tsearch: 'Search within notebooks',\n\t\t\tnoResults: 'No matching notebooks',\n\t\t\tsuggested: 'Suggested Notebooks',\n\t\t\tload: 'Load Selected Notebook',\n\t\t\tcancel: 'Cancel'\n\t\t}\n\t},\n\n\twindow: undefined,\n\t\n\tstore: undefined,\n\ttemplate: undefined,\n\n\tgettingFacets: false,\n\n\tconstructor: function() {\n\t\tthis.store = Ext.create('Ext.data.JsonStore', {\n\t\t\tfields: [\n\t\t\t\t{name: 'id'},\n\t\t\t\t{name: 'author'},\n\t\t\t\t{name: 'title'},\n\t\t\t\t{name: 'description'},\n\t\t\t\t{name: 'keywords'},\n\t\t\t\t{name: 'language'},\n\t\t\t\t{name: 'license'},\n\t\t\t\t{name: 'created', type: 'date'},\n\t\t\t\t{name: 'modified', type: 'date'},\n\t\t\t\t{name: 'version'}\n\t\t\t]\n\t\t});\n\t\tthis.template = new Ext.XTemplate(\n\t\t\t'<tpl for=\".\">',\n\t\t\t\t'<div class=\"catalogue-notebook\">',\n\t\t\t\t\t'<div class=\"id\">{id}</div>',\n\t\t\t\t\t'<div class=\"title nowrap\" title=\"{title}\">{title}</div>',\n\t\t\t\t\t'<div class=\"author nowrap\"><i class=\"fa fa-user\" aria-hidden=\"true\"></i> {author}</div>',\n\t\t\t\t\t'<div class=\"description\">{description}</div>',\n\t\t\t\t\t'<tpl if=\"keywords.length &gt; 0\">',\n\t\t\t\t\t\t'<div class=\"keywords nowrap\">',\n\t\t\t\t\t\t\t'<i class=\"fa fa-tags\" aria-hidden=\"true\"></i> ',\n\t\t\t\t\t\t\t'<tpl for=\"keywords\">',\n\t\t\t\t\t\t\t\t'<span>{.}</span>',\n\t\t\t\t\t\t\t'</tpl>',\n\t\t\t\t\t\t'</div>',\n\t\t\t\t\t'</tpl>',\n\t\t\t\t\t'<div class=\"dates\"><span class=\"date\"><i class=\"fa fa-clock-o\" aria-hidden=\"true\"></i> {[Ext.Date.format(values.modified, \"M j Y\")]}</span></div>',\n\t\t\t\t'</div>',\n\t\t\t'</tpl>'\n\t\t);\n\t\tthis.suggestedStore = Ext.create('Ext.data.JsonStore', {\n\t\t\tfields: [\n\t\t\t\t{name: 'id'},\n\t\t\t\t{name: 'author'},\n\t\t\t\t{name: 'title'},\n\t\t\t\t{name: 'description'},\n\t\t\t\t{name: 'keywords'},\n\t\t\t\t{name: 'language'},\n\t\t\t\t{name: 'license'},\n\t\t\t\t{name: 'created', type: 'date'},\n\t\t\t\t{name: 'modified', type: 'date'},\n\t\t\t\t{name: 'version'}\n\t\t\t]\n\t\t});\n\t\tthis.suggestedTemplate = new Ext.XTemplate(\n\t\t\t'<tpl for=\".\">',\n\t\t\t\t'<div class=\"catalogue-notebook\">',\n\t\t\t\t\t'<div class=\"title nowrap\" title=\"{title}\">{title}</div>',\n\t\t\t\t\t'<div class=\"description\">{description}</div>',\n\t\t\t\t'</div>',\n\t\t\t'</tpl>'\n\t\t);\n\t\tthis.callParent(arguments);\n\t},\n\n\tinitComponent: function(config) {\n\t\tthis.callParent(arguments);\n\t},\n\n\tshowWindow: function() {\n\t\tif (this.window === undefined) {\n\t\t\tthis.window = Ext.create('Ext.window.Window', {\n\t\t\t\ttitle: this.localize('title'),\n\t\t\t\twidth: '80%',\n\t\t\t\theight: '80%',\n\t\t\t\tmaximizable: true,\n\t\t\t\tmodal: true,\n\t\t\t\tcls: 'catalogue',\n\t\t\t\tlayout: 'border',\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'panel',\n\t\t\t\t\tregion: 'center',\n\t\t\t\t\tflex: 2,\n\t\t\t\t\tborder: true,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\talign: 'stretch'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'toolbar',\n\t\t\t\t\t\theight: 30,\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\t\t\tpack: 'center'\n\t\t\t\t\t\t},\n\t\t\t\t\t\titems: [{xtype:'tbspacer', flex: .1},{\n\t\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\t\titemId: 'queryfield',\n\t\t\t\t\t\t\temptyText: this.localize('search'),\n\t\t\t\t\t\t\tflex: .8,\n\t\t\t\t\t\t\tenableKeyEvents: true,\n\t\t\t\t\t\t\ttriggers: {\n\t\t\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\t\t\thidden: true,\n\t\t\t\t\t\t\t\t\tcls: 'fa-trigger form-fa-clear-trigger',\n\t\t\t\t\t\t\t\t\thandler: function(cmp) {\n\t\t\t\t\t\t\t\t\t\tcmp.setValue('');\n\t\t\t\t\t\t\t\t\t\tcmp.getTriggers()['cancel'].hide();\n\t\t\t\t\t\t\t\t\t\tthis.getNotebooks();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsearch: {\n\t\t\t\t\t\t\t\t\tcls: 'fa-trigger form-fa-search-trigger',\n\t\t\t\t\t\t\t\t\thandler: function(cmp) {\n\t\t\t\t\t\t\t\t\t\tthis.getNotebooks();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tkeyup: function(cmp, e) {\n\t\t\t\t\t\t\t\t\tif (e.getCharCode() === 13) {\n\t\t\t\t\t\t\t\t\t\tthis.getNotebooks();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (cmp.getValue().trim().length > 0) {\n\t\t\t\t\t\t\t\t\t\tcmp.getTriggers()['cancel'].show();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcmp.getTriggers()['cancel'].hide();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},{xtype:'tbspacer', flex: .1}]\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'dataview',\n\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\tpadding: 10,\n\t\t\t\t\t\tscrollable: 'vertical',\n\t\t\t\t\t\titemId: 'catalogue',\n\t\t\t\t\t\tstore: this.store,\n\t\t\t\t\t\ttpl: this.template,\n\t\t\t\t\t\titemSelector: 'div.catalogue-notebook',\n\t\t\t\t\t\toverItemCls: 'catalogue-notebook-over',\n\t\t\t\t\t\tselectedItemCls: 'catalogue-notebook-selected',\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\titemdblclick: function(view, record, el) {\n\t\t\t\t\t\t\t\tthis.fireEvent('notebookSelected', this, record.get('id'));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\txtype: 'panel',\n\t\t\t\t\tregion: 'west',\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\ttitle: this.localize('browse'),\n\t\t\t\t\tflex: 1,\n\t\t\t\t\titemId: 'facets',\n\t\t\t\t\tcls: 'facets',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'accordion',\n\t\t\t\t\t\tanimate: false,\n\t\t\t\t\t\tmulti: true,\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\talign: 'stretch',\n\t\t\t\t\t\ttitleCollapse: true,\n\t\t\t\t\t\thideCollapseTool: true\n\t\t\t\t\t},\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'grid',\n\t\t\t\t\t\trowLines: false,\n\t\t\t\t\t\thideHeaders: true,\n        \t\t\t\tselType: 'checkboxmodel',\n\t\t\t\t\t\tcolumns: [{ renderer: function(value, metaData, record) {return \"(\"+record.get('count')+\") \"+record.get('label')}, flex: 1 }],\n\t\t\t\t\t\tstore: {\n\t\t\t\t\t\t\txtype: 'store.json',\n\t\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t\t{name: 'label'},\n\t\t\t\t\t\t\t\t{name: 'count', type: 'integer'}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttitle: this.localize('keywords'),\n\t\t\t\t\t\tfacet: 'facet.keywords',\n\t\t\t\t\t\tflex: 3\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: this.localize('author'),\n\t\t\t\t\t\tfacet: 'facet.author',\n\t\t\t\t\t\tflex: 2\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: this.localize('language'),\n\t\t\t\t\t\tfacet: 'facet.language',\n\t\t\t\t\t\tflex: 1\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: this.localize('license'),\n\t\t\t\t\t\tfacet: 'facet.license',\n\t\t\t\t\t\tflex: 1\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\txtype: 'panel',\n\t\t\t\t\tregion: 'east',\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tcollapsed: false,\n\t\t\t\t\ttitle: this.localize('suggested'),\n\t\t\t\t\twidth: 250,\n\t\t\t\t\tlayout: 'fit',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'dataview',\n\t\t\t\t\t\tpadding: 10,\n\t\t\t\t\t\tscrollable: 'vertical',\n\t\t\t\t\t\titemId: 'suggestedNotebooks',\n\t\t\t\t\t\tstore: this.suggestedStore,\n\t\t\t\t\t\ttpl: this.suggestedTemplate,\n\t\t\t\t\t\titemSelector: 'div.catalogue-notebook',\n\t\t\t\t\t\toverItemCls: 'catalogue-notebook-over',\n\t\t\t\t\t\tselectedItemCls: 'catalogue-notebook-selected',\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\titemdblclick: function(view, record, el) {\n\t\t\t\t\t\t\t\tthis.fireEvent('notebookSelected', this, record.get('id'));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\tcloseAction: 'hide',\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttext: this.localize('cancel'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\thandler: function(but) {\n\t\t\t\t\t\tthis.window.close();\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('load'),\n\t\t\t\t\thandler: function(but) {\n\t\t\t\t\t\tvar record = this.window.down('#catalogue').getSelection()[0];\n\t\t\t\t\t\tif (record === undefined) {\n\t\t\t\t\t\t\trecord = this.window.down('#suggestedNotebooks').getSelection()[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (record) {\n\t\t\t\t\t\t\tthis.fireEvent('notebookSelected', this, record.get('id'))\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}]\n\t\t\t});\n\t\t\tthis.window.query('#facets > grid').forEach(function(facetCmp) {\n\t\t\t\tfacetCmp.getSelectionModel().on('selectionchange', this._loadFacets, this);\n\t\t\t}, this);\n\t\t} else {\n\t\t\t// reset catalogue\n\t\t\tthis.window.query('#facets > grid').forEach(function(facetCmp) {\n\t\t\t\tfacetCmp.getStore().clearFilter();\n\t\t\t\tfacetCmp.getSelectionModel().deselectAll();\n\t\t\t});\n\t\t\tthis.window.down('#queryfield').setValue('');\n\t\t\tthis.window.down('#catalogue').getSelectionModel().deselectAll();\n\t\t\tthis.window.down('#suggestedNotebooks').getSelectionModel().deselectAll();\n\t\t\tthis.store.removeAll();\n\t\t}\n\n\t\tif (this.suggestedStore.isLoaded() === false) {\n\t\t\tthis.getSuggestedNotebooks();\n\t\t}\n\n\t\tthis.window.show();\n\n\t\tthis._loadFacets();\n\t},\n\n\thideWindow: function() {\n\t\tif (this.window !== undefined) {\n\t\t\tthis.window.close();\n\t\t}\n\t},\n\n\t_getSelectedFacets: function() {\n\t\tvar facets = [];\n\t\tthis.window.query('#facets > grid').forEach(function(facetCmp) {\n\t\t\tfacetCmp.getSelection().forEach(function(record) {\n\t\t\t\tfacets.push([facetCmp.facet, record.get('label')]);\n\t\t\t})\n\t\t});\n\t\treturn facets;\n\t},\n\n\t_loadFacets: function() {\n\t\tif (this.gettingFacets === false) {\n\t\t\tthis.window.down('#facets').mask('Loading');\n\t\t\tthis.gettingFacets = true;\n\t\t\tvar facetQuery = this._getSelectedFacets().map(function(f) { return f.join('=') });\n\n\t\t\tvar me = this;\n\t\t\tSpyral.Load.trombone({\n\t\t\t\ttool: 'notebook.CatalogueFacets',\n\t\t\t\tquery: facetQuery,\n\t\t\t\tnoCache: 1\n\t\t\t}).then(function(json) {\n\t\t\t\tjson.catalogue.facets.forEach(function(facetResult) {\n\t\t\t\t\tvar facetCmp = me.window.query('#facets > grid[facet='+facetResult.facet+']')[0];\n\t\t\t\t\tvar store = facetCmp.getStore();\n\t\t\t\t\tstore.clearFilter();\n\t\t\t\t\tif (store.getCount() === 0) {\n\t\t\t\t\t\tstore.loadRawData(facetResult.results);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar matches = [];\n\t\t\t\t\t\tstore.each(function(record) {\n\t\t\t\t\t\t\tvar label = record.get('label');\n\t\t\t\t\t\t\tfor (var i = 0; i < facetResult.results.length; i++) {\n\t\t\t\t\t\t\t\tvar result = facetResult.results[i];\n\t\t\t\t\t\t\t\tif (result.label === label) {\n\t\t\t\t\t\t\t\t\trecord.set('count', result.count);\n\t\t\t\t\t\t\t\t\tmatches.push(label);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tstore.filterBy(function(record) { return matches.indexOf(record.get('label')) !== -1 });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tme.window.down('#facets').unmask();\n\t\t\t\tme.gettingFacets = false;\n\t\t\t\t\n\t\t\t\tme.getNotebooks();\n\t\t\t}).catch(function(err) {\n\t\t\t\tme.window.down('#facets').unmask();\n\t\t\t\tme.gettingFacets = false;\n\t\t\t});\n\t\t}\n\t},\n\n\tgetNotebooks: function(queries) {\n    \tif (!queries) {\n\t    \tqueries = [];\n\t\t\tvar facets = this._getSelectedFacets();\n\t    \tfacets.forEach(function(f) {\n\t\t\t\tqueries.push(f.join(':'));\n\t\t\t})\n\t\t\tvar queryfieldstring = this.window.down('#queryfield').getValue();\n\t\t\tif (queryfieldstring.trim().length > 0) {\n\t\t\t\tqueries.push(queryfieldstring);\n\t\t\t}\n\t\t\treturn this.getNotebooks(queries);\n    \t}\n\t\tif (queries.length === 0) {\n\t\t\tthis.window.down('#catalogue').getSelectionModel().deselectAll();\n\t\t\tthis.store.removeAll();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.window.down('#catalogue').mask('Loading');\n\t\tthis.window.down('#catalogue').getSelectionModel().deselectAll();\n\n\t\tvar me = this;\n\t\tSpyral.Load.trombone({\n\t\t\ttool: 'notebook.NotebookFinder',\n\t\t\tquery: queries,\n\t\t\tnoCache: 1\n\t\t}).then(function(json) {\n\t\t\tme.window.down('#catalogue').unmask();\n\t\t\tme.store.loadRawData(json.catalogue.notebooks);\n\t\t\tme.store.sort('modified', 'DESC');\n\t\t}).catch(function(err) {\n\t\t\tme.window.unmask()\n\t\t});\n\t},\n\n\tgetSuggestedNotebooks: function() {\n\t\tvar notebookIds = ['aboutspyral', 'homeALTA', 'startALTA', 'createALTA', 'smallerALTA', 'tableALTA'];\n\t\tvar query = 'id:'+notebookIds.join('|id:');\n\t\tvar me = this;\n\t\tSpyral.Load.trombone({\n\t\t\ttool: 'notebook.NotebookFinder',\n\t\t\tquery: query,\n\t\t\tparse: false,\n\t\t\tnoCache: 1\n\t\t}).then(function(json) {\n\t\t\tme.suggestedStore.loadRawData(json.catalogue.notebooks);\n\t\t\tme.suggestedStore.sort('modified', 'DESC');\n\t\t}).catch(function(err) {\n\t\t})\n\t}\n});\n","/*\n * @class Notebook\n * A Spyral Notebook. This should never be instantiated directly.\n */\nExt.define('Voyant.notebook.Notebook', {\n\talternateClassName: [\"Notebook\"],\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.notebook.editor.CodeEditorWrapper','Voyant.notebook.editor.TextEditorWrapper','Voyant.notebook.metadata.MetadataEditor','Voyant.notebook.StorageDialogs','Voyant.notebook.github.GitHubDialogs'],\n\tmixins: ['Voyant.panel.Panel','Voyant.notebook.util.FormatConverter'],\n\talias: 'widget.notebook',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"Spyral\",\n    \t\tcreated: \"Created\",\n    \t\tmodified: \"Modified\",\n    \t\tclickToEdit: \"Click to edit\",\n    \t\terrorLoadingNotebook: \"Error loading Spyral notebook\",\n    \t\tcannotLoadJson: \"Unable to parse JSON input.\",\n    \t\tcannotLoadJsonUnrecognized: \"Unable to recognize JSON input.\",\n    \t\tcannotLoadUnrecognized: \"Unable to recognize input.\",\n\t\t\tcannotLoadNotebookId: \"Unable to load the Spyral Notebook. It may no longer exist.\",\n    \t\topenTitle: \"Open\",\n    \t\topenMsg: \"Paste in Notebook ID, a URL or a Spyral data file (in HTML).\",\n    \t\texportHtmlDownload: \"HTML (download)\",\n    \t\terrorParsingDomInput: \"An error occurred while parsing the input of the document. The results might still work, except if the code contained HTML tags.\",\n\t\t\tmetadataEditor: \"Edit Metadata\",\n    \t\tmetadataReset: \"Reset\",\n    \t\tmetadataSave: \"Save\",\n    \t\tmetadataCancel: \"Cancel\"\n    \t},\n    \tapi: {\n    \t\tinput: undefined,\n    \t\tinputEncodedBase64Json: undefined,\n    \t\trun: undefined\n    \t}\n    },\n    config: {\n        /**\n         * @private\n         */\n    \tnotebookId: undefined,\n        /**\n         * @private\n         */\n    \tmetadata: undefined,\n        /**\n         * @private\n         */\n    \tisEdited: false,\n    \t/**\n    \t * @private\n    \t */\n    \tversion: \"3.0\",\n\t\t/**\n\t\t * @private\n\t\t * Which solution to use for storing notebooks, either: 'voyant' or 'github'\n\t\t */\n\t\tstorageSolution: 'voyant'\n\t},\n\t\n\tmetadataWindow: undefined,\n\tvoyantStorageDialogs: undefined,\n\tgithubDialogs: undefined,\n\tcatalogueWindow: undefined,\n\n\t// holds the content of the tern docs, for passing to the code editor\n\tspyralTernDocs: undefined,\n\tecmaTernDocs: undefined,\n\tbrowserTernDocs: undefined,\n    \n    /**\n     * @private\n     */\n    constructor: function(config) {\n    \tExt.apply(config, {\n    \t\ttitle: this.localize('title'),\n    \t\tincludeTools: {\n\t\t\t\t'help': true,\n\t\t\t\t'gear': true,\n    \t\t\t'save': true,\n    \t\t\t'saveIt': {\n    \t\t\t\ttooltip: this.localize(\"saveItTip\"),\n    \t\t\t\titemId: 'saveItTool',\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\tdisabled: true,\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttext: 'Save',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\t\thandler: this.showSaveDialog.bind(this, false),\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\ttext: 'Save As...',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\t\thandler: this.showSaveDialog.bind(this, true),\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},'-',{\n\t\t\t\t\t\ttext: 'Storage',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\ttext: 'Voyant',\n\t\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\t\tgroup: 'storageSolution',\n\t\t\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\t\t\thandler: this.setStorageSolution.bind(this, 'voyant'),\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\ttext: 'GitHub',\n\t\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\t\tgroup: 'storageSolution',\n\t\t\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\t\t\thandler: this.setStorageSolution.bind(this, 'github'),\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n    \t\t\t},\n    \t\t\t'new': {\n    \t\t\t\ttooltip: this.localize(\"newTip\"),\n    \t\t\t\tcallback: function() {\n    \t    \t\t\tlet url = this.getBaseUrl()+\"spyral/\";\n\t\t\t\t\t\tthis.getApplication().openUrl(url);\n    \t\t\t\t},\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf067@FontAwesome',\n    \t\t\t\tscope: this\n    \t\t\t},\n    \t\t\t'open': {\n    \t\t\t\ttooltip: this.localize(\"openTip\"),\n    \t\t\t\txtype: 'toolmenu',\n\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\tcallback: function(panel, tool) {\n\t\t\t\t\t\tconst storageSolution = this.getStorageSolution();\n\t\t\t\t\t\tif (storageSolution === undefined) {\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\ttool.toolMenu.hide()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (storageSolution === 'github') {\n\t\t\t\t\t\t\t\tthis.githubDialogs.showLoad();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tExt.Msg.prompt(this.localize(\"openTitle\"),this.localize(\"openMsg\"),function(btn, text) {\n\t\t\t\t\t\t\t\t\ttext = text.trim();\n\t\t\t\t\t\t\t\t\tif (btn==\"ok\") {\n\t\t\t\t\t\t\t\t\t\tthis.loadFromString(text);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, this, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this,\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttext: 'Load',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\tExt.Msg.prompt(this.localize(\"openTitle\"),this.localize(\"openMsg\"),function(btn, text) {\n\t\t\t\t\t\t\t\ttext = text.trim();\n\t\t\t\t\t\t\t\tif (btn==\"ok\") {\n\t\t\t\t\t\t\t\t\tthis.loadFromString(text);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this, true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\ttext: 'Load from GitHub',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\tthis.githubDialogs.showLoad();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n    \t\t\t},\n    \t\t\t'runall': {\n    \t\t\t\ttooltip: this.localize(\"runallTip\"),\n    \t\t\t\tcallback: this.runAll,\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf04e@FontAwesome',\n    \t\t\t\tscope: this\n    \t\t\t},\n    \t\t\t'metadata': {\n    \t\t\t\ttooltip: this.localize(\"metadataTip\"),\n    \t\t\t\tcallback: this.showMetadataEditor,\n\t\t\t\t\txtype: 'toolmenu',\n\t\t\t\t\tglyph: 'xf02c@FontAwesome',\n\t\t\t\t\tscope: this\n    \t\t\t},\n                'catalogue': {\n                    tooltip: 'catalogue',\n                    callback: function() {\n                        this.catalogueWindow.showWindow();\n                    },\n                    xtype: 'toolmenu',\n                    glyph: 'xf00b@FontAwesome',\n                    scope: this\n                }\n    \t\t},\n    \t\t\n\t\t\tscrollable: true,\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\talign: 'middle',\n\t\t\t\tpadding: '50 0'\n\t\t\t},\n\t\t\tdefaults: {\n\t\t\t\twidth: '100%',\n\t\t\t\tmaxWidth: 1100\n\t\t\t},\n    \t\titems: [{\n    \t\t\titemId: 'spyralHeader',\n    \t\t\tcls: 'spyral-header',\n    \t\t\tlisteners: {\n    \t\t\t\tafterrender: function(header) {\n    \t\t\t\t\tExt.tip.QuickTipManager.register({\n    \t\t\t\t\t\t  target: header.getId(),\n    \t\t\t\t\t\t  text: this.localize(\"clickToEdit\")\n    \t\t\t\t\t\t});\n    \t\t\t\t\tvar head = header;\n    \t\t\t\t\theader.getTargetEl().on(\"click\", function(header) {\n    \t\t\t\t\t\tthis.showMetadataEditor();\n    \t\t\t\t\t\thead.removeCls(\"editable\");\n    \t\t\t\t\t}, this);\n    \t\t\t\t\theader.mon(header.getEl(), \"mouseover\", function() {header.addCls(\"editable\")});\n    \t\t\t\t\theader.mon(header.getEl(), \"mouseout\", function() {header.removeCls(\"editable\")});\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}\n    \t\t},{\n    \t\t\txtype: 'container',\n    \t\t\titemId: 'cells',\n\t\t\t\tdefaults: {\n\t\t\t\t\tmargin: '10 0 10 0',\n\t\t\t\t\tpadding: '0 50 0 50'\n\t\t\t\t}\n    \t\t},{\n    \t\t\titemId: 'spyralFooter',\n    \t\t\tcls: 'spyral-footer',\n    \t\t\tlisteners: {\n    \t\t\t\tafterrender: function(footer) {\n    \t\t\t\t\tExt.tip.QuickTipManager.register({\n  \t\t\t\t\t\t  target: footer.getId(),\n  \t\t\t\t\t\t  text: this.localize(\"clickToEdit\")\n  \t\t\t\t\t\t});\n    \t\t\t\t\tvar foot = footer;\n    \t\t\t\t\tfooter.getTargetEl().on(\"click\", function(footer) {\n    \t\t\t\t\t\tthis.showMetadataEditor();\n    \t\t\t\t\t\tfoot.removeCls(\"editable\");\n    \t\t\t\t\t}, this);\n    \t\t\t\t\tfooter.mon(footer.getEl(), \"mouseover\", function() {footer.addCls(\"editable\")});\n    \t\t\t\t\tfooter.mon(footer.getEl(), \"mouseout\", function() {footer.removeCls(\"editable\")});\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}\n    \t\t}],\n    \t\tlisteners: {\n    \t\t\tafterrender: this.init,\n    \t\t\tnotebookWrapperMoveUp: this.notebookWrapperMoveUp,\n    \t\t\tnotebookWrapperMoveDown: this.notebookWrapperMoveDown,\n    \t\t\tnotebookWrapperRemove: this.notebookWrapperRemove,\n\t\t\t\tnotebookWrapperAdd: this.notebookWrapperAdd,\n\t\t\t\tnotebookInitialized: this.notebookInitialized,\n    \t\t\tscope: this\n    \t\t}\n    \t})\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t\tthis.mixins['Voyant.notebook.util.FormatConverter'].constructor.apply(this, arguments);\n\n\t\tthis.voyantStorageDialogs = new Voyant.notebook.StorageDialogs({\n\t\t\tlisteners: {\n\t\t\t\t'fileLoaded': function(src) {\n\n\t\t\t\t},\n\t\t\t\t'fileSaved': function(src, notebookId) {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t\tif (notebookId !== null) {\n\t\t\t\t\t\tvar id = this.getNotebookId();\n\t\t\t\t\t\tif (!id || notebookId!=id) {\n\t\t\t\t\t\t\tthis.setNotebookId(notebookId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\t\thtml: this.localize('saved'),\n\t\t\t\t\t\t\tanchor: 'tr'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setIsEdited(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// save error\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'saveCancelled': function() {\n\t\t\t\t},\n\t\t\t\t'close': function() {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.githubDialogs = new Voyant.notebook.github.GitHubDialogs({\n\t\t\tlisteners: {\n\t\t\t\t'fileLoaded': function(src, {owner, repo, ref, path, file}) {\n\t\t\t\t\tthis.githubDialogs.close();\n\t\t\t\t\tthis.loadFromString(file);\n\n\t\t\t\t\tconst id = encodeURIComponent(owner+'/'+repo+'/'+path);\n\t\t\t\t\tif (location.search.indexOf(id) === -1) {\n\t\t\t\t\t\tconst url = this.getBaseUrl()+'spyral/?githubId='+id;\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t}, 'Spyral Notebook: '+id, url);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'fileSaved': function(src, {owner, repo, branch, path}) {\n\t\t\t\t\tthis.githubDialogs.close();\n\t\t\t\t\tthis.unmask();\n\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\thtml: this.localize('saved'),\n\t\t\t\t\t\tanchor: 'tr'\n\t\t\t\t\t});\n\t\t\t\t\tthis.setIsEdited(false);\n\n\t\t\t\t\tconst id = encodeURIComponent(owner+'/'+repo+'/'+path);\n\t\t\t\t\tif (location.search.indexOf(id) === -1) {\n\t\t\t\t\t\tconst url = this.getBaseUrl()+'spyral/?githubId='+id;\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t}, 'Spyral Notebook: '+id, url);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'saveCancelled': function(src) {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.catalogueWindow = new Voyant.notebook.Catalogue({\n\t\t\tlisteners: {\n\t\t\t\tnotebookSelected: function(catalogue, notebookId) {\n\t\t\t\t\tcatalogue.hideWindow();\n\t\t\t\t\tthis.loadFromId(notebookId);\n\t\t\t\t\tthis.setNotebookId(notebookId);\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n    },\n    \n    init: function() {\n\t\twindow.onbeforeunload = function() {\n\t\t\tif (this.getIsEdited()) {\n\t\t\t\treturn ''; // return any string to prompt the browser to warn the user they have unsaved changes\n\t\t\t}\n\t\t}.bind(this);\n\n\t\t// need to load docs first\n\t\tExt.Promise.all([\n\t\t\tExt.Ajax.request({url: this.getApplication().getBaseUrlFull()+'resources/spyral/docs/spyral.json'}),\n\t\t\tExt.Ajax.request({url: this.getApplication().getBaseUrlFull()+'resources/spyral/docs/ecmascript.json'}),\n\t\t\tExt.Ajax.request({url: this.getApplication().getBaseUrlFull()+'resources/spyral/docs/browser.json'})\n\t\t]).then(function(responses) {\n\t\t\tthis.spyralTernDocs = Ext.JSON.decode(responses[0].responseText);\n\t\t\t// add docs for static / global functions TODO automate this at doc creation\n\t\t\tthis.spyralTernDocs.Corpus = this.spyralTernDocs.Spyral.Corpus;\n\t\t\tthis.spyralTernDocs.Table = this.spyralTernDocs.Spyral.Table;\n\t\t\tthis.spyralTernDocs.loadCorpus = this.spyralTernDocs.Spyral.Corpus.load;\n\t\t\tthis.spyralTernDocs.createTable = this.spyralTernDocs.Spyral.Table.create;\n\t\t\tthis.spyralTernDocs.show = this.spyralTernDocs.Spyral.Util.show;\n\t\t\tthis.spyralTernDocs.showError = this.spyralTernDocs.Spyral.Util.showError;\n\t\t\t\n\t\t\tthis.ecmaTernDocs = Ext.JSON.decode(responses[1].responseText);\n\t\t\tthis.browserTernDocs = Ext.JSON.decode(responses[2].responseText);\n\n\t\t\tthis.loadFromQueryParams();\n\t\t}.bind(this), function() {\n\t\t\tthis.loadFromQueryParams();\n\t\t}.bind(this))\n    },\n    \n    \n    reset: function() {\n\t\tthis.getScrollable().scrollTo(0, 0);\n\t\tthis.getScrollable().trackingScrollTop = 0;\n\t\tthis.getScrollable().trackingScrollLeft = 0;\n\n\t\tthis.setMetadata(new Spyral.Metadata());\n\t\tthis.voyantStorageDialogs.reset();\n    \tvar cells = this.getComponent(\"cells\");\n    \tcells.removeAll();\n\t},\n\n\tshowSaveDialog: function(saveAs) {\n\t\tthis.mask(this.localize('saving'));\n\t\tthis.getMetadata().setDateNow(\"modified\");\n\n\t\tExt.Promise.all(this.query('notebookrunnableeditorwrapper').map(function(cmp) {\n\t\t\treturn cmp.results.updateCachedOutput();\n\t\t})).then(function(result) {\t\n\t\t}, function(err) {\n\t\t\tconsole.warn('Error updating cached results');\n\t\t}).finally(function() {\n\t\t\tvar data = this.generateExportJson();\n\t\t\tvar metadata = this.generateExportMetadata(this.getMetadata());\n\t\n\t\t\tvar storageSolution = this.getStorageSolution();\n\t\t\t\n\t\t\tif (!saveAs && storageSolution === 'voyant' && this.getNotebookId() !== undefined && this.voyantStorageDialogs.getAccessCode() !== undefined) {\n\t\t\t\tthis.voyantStorageDialogs.doSave({\n\t\t\t\t\tnotebookId: this.getNotebookId(),\n\t\t\t\t\tdata: data,\n\t\t\t\t\tmetadata: metadata,\n\t\t\t\t\taccessCode: this.voyantStorageDialogs.getAccessCode()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (storageSolution === 'github') {\n\t\t\t\t\tthis.githubDialogs.showSave(data);\n\t\t\t\t} else {\n\t\t\t\t\tthis.voyantStorageDialogs.showSave(data, metadata, saveAs ? undefined : this.getNotebookId());\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\t\n\t// override toolable method\n\tgetExportUrl: function(asTool) {\n\t\treturn location.href; // we just provide the current URL\n\t},\n\n\tloadFromQueryParams: function() {\n\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search, true);\n\t\tvar isRun = Ext.isDefined(queryParams.run);\n\t\tvar spyralIdMatches = /\\/spyral\\/([\\w-]+)\\/?$/.exec(location.pathname);\n\t\tvar isGithub = Ext.isDefined(queryParams.githubId);\n\t\tif (\"inputJsonArrayOfEncodedBase64\" in queryParams) {\n\t\t\tlet json = Ext.decode(decodeURIComponent(atob(queryParams.inputJsonArrayOfEncodedBase64)));\n\t\t\tjson.forEach(function(block, index) {\n\t\t\t\tlet text = block;\n\t\t\t\tif (text.trim().indexOf(\"<\")==0) {\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t// assume first text block is metadata\n\t\t\t\t\t\tthis.setMetadata(new Spyral.Metadata({\n\t\t\t\t\t\t\ttitle: text\n\t\t\t\t\t\t}));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addText(text);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.addCode(text);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t} else if (queryParams.input) {\n\t\t\tif (queryParams.input.indexOf(\"http\")===0) {\n\t\t\t\tthis.loadFromUrl(queryParams.input, isRun);\n\t\t\t}\n\t\t} else if (spyralIdMatches) {\n\t\t\tthis.loadFromId(spyralIdMatches[1]);\n\t\t\tthis.setStorageSolution('voyant');\n\t\t} else if (isGithub) {\n\t\t\tthis.githubDialogs.loadFileFromId(queryParams.githubId);\n\t\t\tthis.setStorageSolution('github');\n\t\t} else {\n\t\t\tthis.addNew();\n\t\t\tthis.setIsEdited(false);\n\t\t}\n\t\t\n\t\tif (isRun) {\n\t\t\tvar me = this;\n\t\t\tExt.defer(function() {\n\t\t\t\tme.runAll()\n\t\t\t}, 100)\n\t\t}\n\t},\n\t\n    loadFromString: function(text) {\n    \ttext = text.trim();\n\t\tif (text.indexOf(\"http\") === 0) {\n\t\t\tthis.loadFromUrl(text);\n\t\t} else if (text.indexOf(\"{\") === 0) {\n\t\t\tthis.loadFromJson(text);\n\t\t} else if (/^[\\w-_]+$/.test(text)) {\n\t\t\tthis.loadFromId(text)\n\t\t} else if (text.indexOf(\"<\") !== 0 || text.indexOf(\"spyral\") === -1) {\n\t\t\treturn Ext.Msg.show({\n\t\t\t\ttitle: this.localize('errorLoadingNotebook'),\n\t\t\t\tmsg: this.localize('cannotLoadUnrecognized'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t} else {\n\t\t\tExt.batchLayouts(function() {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.importFromHtml(text); // old format\n\t\t\t}, this);\n\t\t}\n\t\treturn true;\n    },\n\n\tloadFromJson: function(text) {\n\t\tvar json;\n\t\ttry {\n\t\t\tjson = JSON.parse(text)\n\t\t} catch(e) {\n\t\t\treturn Ext.Msg.show({\n\t\t\t\ttitle: this.localize('errorLoadingNotebook'),\n\t\t\t\tmsg: this.localize('cannotLoadJson')+\"<br><pre style='color: red'>\"+e+\"</pre>\",\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t}\n\n\t\tif (!json.cells || !json.metadata) {\n\t\t\treturn Ext.Msg.show({\n\t\t\t\ttitle: this.localize('errorLoadingNotebook'),\n\t\t\t\tmsg: this.localize('cannotLoadJsonUnrecognized'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t}\n\n\t\tExt.batchLayouts(function() {\n\t\t\tthis.reset();\n\t\t\tthis.setMetadata(new Spyral.Metadata(json.metadata));\n\n\t\t\tvar cells2Init = [];\n\t\t\tjson.cells.forEach(function(cell) {\n\t\t\t\tvar cell2Init = undefined;\n\t\t\t\tswitch(cell.type) {\n\t\t\t\t\tcase 'text':\n\t\t\t\t\t\tthis.addText(cell.content, undefined, cell.cellId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'code':\n\t\t\t\t\t\tcell2Init = this.addCode(cell.content, undefined, cell.cellId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'data':\n\t\t\t\t\t\tcell2Init = this.addData(cell.content, undefined, cell.cellId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (cell2Init) {\n\t\t\t\t\tcell2Init.on('initialized', function() {\n\t\t\t\t\t\tvar cellIndex = cells2Init.indexOf(cell2Init);\n\t\t\t\t\t\tif (cellIndex !== -1) {\n\t\t\t\t\t\t\tcells2Init.splice(cellIndex, 1);\n\t\t\t\t\t\t\tif (cells2Init.length === 0) {\n\t\t\t\t\t\t\t\tthis.fireEvent('notebookInitialized', this);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('unknown cell initialized', cell2Init);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\tcells2Init.push(cell2Init);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}, this);\n\t},\n\n\tloadFromUrl: function(url, run) {\n    \tvar me = this;\n    \t// load as string and not HTML in case it's an older JSON format\n    \tSpyral.Load.text(url).then(function(text) {me.loadFromString(text)})\n    },\n    \n    loadFromId: function(id) {\n    \tthis.mask(this.localize(\"loading\"));\n    \tvar me = this;\n    \tSpyral.Load.trombone({\n\t    \t tool: 'notebook.GitNotebookManager',\n\t    \t action: 'load',\n\t    \t id: id,\n\t    \t noCache: 1\n    \t}).then(function(json) {\n    \t\tme.unmask();\n    \t\tme.loadFromString(json.notebook.data);\n\t\t\tif (json.notebook.id && json.notebook.id !== me.getNotebookId()) {\n\t\t\t\tme.setNotebookId(json.notebook.id);\n\t\t\t}\n\t    \tme.setIsEdited(false);\n    \t}).catch(function(err) {\n\t\t\tme.unmask();\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: me.localize('errorLoadingNotebook'),\n\t\t\t\tmsg: me.localize('cannotLoadNotebookId'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t});\n    },\n    \n    runUntil: function(upToCmp) {\n    \tvar containers = [];\n    \tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\tcontainers.push(item);\n    \t\tif (upToCmp && upToCmp===item) {return false;}\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    runFrom: function(fromCmp) {\n    \tvar containers = [], matched = false;\n    \tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n    \t\tif (fromCmp && fromCmp===item) {matched=true;}\n    \t\tif (matched) {\n    \t\t\tcontainers.push(item);\n    \t\t}\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    runAll: function() {\n    \tvar containers = [];\n    \tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\tcontainers.push(item);\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    _run: function(containers, prevVars) {\n    \tif (containers.length>0) {\n    \t\tvar container = containers.shift();\n\t\t\tvar me = this;\n    \t\tcontainer.run(true, prevVars).then(function(result) {\n\t\t\t\t// check for and remove older duplicates\n\t\t\t\tvar newVars = container.getVariables();\n\t\t\t\tif (prevVars === undefined) {\n\t\t\t\t\tprevVars = [];\n\t\t\t\t}\n\t\t\t\tnewVars.forEach(function(newVar) {\n\t\t\t\t\tfor (var i = 0; i < prevVars.length; i++) {\n\t\t\t\t\t\tvar prevVar = prevVars[i];\n\t\t\t\t\t\tif (newVar.name === prevVar.name) {\n\t\t\t\t\t\t\t// console.log('removing duplicate var:', prevVar.name);\n\t\t\t\t\t\t\tprevVars.splice(i, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tprevVars = prevVars.concat(newVars);\n\t\t\t\t\n\t\t\t\tExt.defer(me._run, 100, me, [containers, prevVars]);\n\t\t\t}, function(error) {\n\t\t\t\t// console.log('nb error', error);\n\t\t\t});\n    \t}\n\t},\n\n\tnotebookInitialized: function() {\n\t\t// run all data cells\n\t\t// var containers = [];\n    \t// Ext.Array.each(this.query(\"notebookdatawrapper\"), function(item) {\n\t\t// \tcontainers.push(item);\n    \t// }, this);\n    \t// this._run(containers, []);\n\t},\n\n\tgetNotebookVariables: function(upToCmp) {\n\t\tvar variables = [];\n\n\t\tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\tif (upToCmp && upToCmp===item) {return false;} // NB upToCmp exits earlier here than in runUntil\n\n\t\t\tif (item.getIsRun()) {\n\t\t\t\tvar newVars = item.getVariables();\n\t\t\t\tnewVars.forEach(function(newVar) {\n\t\t\t\t\tfor (var i = 0; i < variables.length; i++) {\n\t\t\t\t\t\tvar prevVar = variables[i];\n\t\t\t\t\t\tif (newVar.name === prevVar.name) {\n\t\t\t\t\t\t\tvariables.splice(i, 1); // remove older duplicate var\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvariables = variables.concat(newVars);\n\t\t\t}\n\t\t});\n\n\t\treturn variables;\n\t},\n\n\tgetNotebookBlocks: function(upToCmp) {\n\t\tvar blocks = [];\n\n\t\tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\tif (upToCmp && upToCmp===item) {return false;} // NB upToCmp exits earlier here than in runUntil\n\n\t\t\tblocks.push(item.getInput());\n\t\t});\n\n\t\treturn blocks;\n\t},\n\n\n\t\n\taddNew: function() {\n\t\t// TODO metadata defaults\n\t\tthis.setMetadata(new Spyral.Metadata({\n\t\t\ttitle: \"<h1>Spyral Notebook</h1>\",\n\t\t\tlanguage: \"English\"\n\t\t}));\n\t\tthis.addText(\"<p>This is a Spyral Notebook, a dynamic document that combines writing, code and data in service of reading, analyzing and interpreting digital texts.</p><p>Spyral Notebooks are composed of text blocks (like this one) and code blocks (like the one below). You can <span class='marker'>click on the blocks to edit</span> them and add new blocks by clicking add icon that appears in the left column when hovering over a block.</p>\");\n\t\tthis.addCode('');\n\t},\n    \n    addText: function(block, order, cellId) {\n    \treturn this._add(block, order, 'notebooktexteditorwrapper', cellId);\n    },\n \n    addCode: function(block, order, cellId, config) {\n\t\tconfig = config || {};\n\t\tconfig.docs = [this.spyralTernDocs, this.ecmaTernDocs, this.browserTernDocs];\n    \treturn this._add(block, order, 'notebookcodeeditorwrapper', cellId, config);\n    },\n\n\taddData: function(block, order, cellId, config) {\n    \treturn this._add(block, order, 'notebookdatawrapper', cellId, config);\n    },\n    \n    _add: function(block, order, xtype, cellId, config) {\n    \tif (Ext.isString(block)) {\n    \t\tblock = {input: block}\n    \t}\n    \tvar cells = this.getComponent(\"cells\");\n\t\torder = (typeof order === 'undefined') ? cells.items.length : order;\n\t\tcellId = (typeof cellId === 'undefined') ? Spyral.Util.id() : cellId;\n    \treturn cells.insert(order, Ext.apply(block, {\n    \t\txtype: xtype,\n    \t\torder: order,\n    \t\tcellId: cellId\n    \t}, config))\n    },\n\n    \n\tnotebookWrapperMoveUp: function(wrapper) {\n\t\tvar cells = this.getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tif (i==0) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: this.localize('error'),\n\t\t\t\tmsg: this.localize('cannotMoveHigher'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.WARNING\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tcells.move(i, i-1);\n\t\t\tthis.redoOrder();\n\t\t}\n\t},\n\t\n\tnotebookWrapperMoveDown: function(wrapper) {\n\t\tvar cells = this.getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tif (i==cells.items.getCount()-1) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: this.localize('error'),\n\t\t\t\tmsg: this.localize('cannotMoveLower'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.WARNING\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tcells.move(i, i+1);\n\t\t\tthis.redoOrder();\n\t\t}\n\t},\n\t\n\tnotebookWrapperRemove: function(wrapper) {\n\t\tvar cells = this.getComponent(\"cells\");\n\t\tcells.remove(wrapper);\n\t\tif (cells.items.length==0) {\n\t\t\tthis.addText(\"(Click to edit).\")\n\t\t}\n\t\tthis.redoOrder();\n\t},\n\t\n\tnotebookWrapperAdd: function(wrapper, e) {\n\t\tvar cells = this.getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tvar runnable = wrapper.getXTypes(wrapper).indexOf('notebookrunnableeditorwrapper') !== -1;\n\t\tvar cmp;\n\t\tif ((!runnable && !e.hasModifier()) || (runnable && e.hasModifier())) {\n\t\t\tcmp = this.addCode('',i+1);\n\t\t} else {\n\t\t\tcmp = this.addText('',i+1);\n\t\t}\n\t\tcmp.getTargetEl().scrollIntoView(this.getTargetEl(), null, true, true);\n\t\tthis.redoOrder();\n\t},\n\n    redoOrder: function() {\n    \tthis.query(\"notebookwrappercounter\").forEach(function(counter, i) {\n    \t\tcounter.setOrder(i);\n\t\t})\n\t\tthis.setIsEdited(true);\n    },\n    \n    setIsEdited: function(val) {\n    \t// TODO: perhaps setup autosave\n    \tif (this.getHeader()) {\n        \tthis.getHeader().down(\"#saveItTool\").setDisabled(val === false);\n        \tif (!val) {\n        \t\tthis.query(\"notebookcodeeditor\").forEach(function(editor) {\n        \t\t\teditor.setIsChangeRegistered(false);\n        \t\t})\n        \t\tthis.query(\"notebooktexteditor\").forEach(function(editor) {\n        \t\t\teditor.setIsEditRegistered(false);\n        \t\t})\n        \t}\n    \t}\n\t\tthis.callParent(arguments);\n    },\n    \n    setNotebookId: function (id) {\n    \tif (id) {\n    \t\t// update URL if needed\n    \t\tif (location.pathname.indexOf(\"/spyral/\"+id) === -1) {\n    \t\t\tlet url = this.getBaseUrl()+\"spyral/\"+id+\"/\";\n    \t\t\twindow.history.pushState({\n\t\t\t\t\turl: url\n\t\t\t\t}, '', url);\n    \t\t}\n    \t}\n\t\tthis.callParent(arguments);\n    },\n\t\t\n\tupdateMetadata: function() {\n\t\tvar metadata = this.getMetadata();\n\t\tdocument.title = metadata.title.replace(/<\\/?\\w+.*?>/g, '')+' - Spyral';\n\n\t\tthis.getComponent(\"spyralHeader\").update(this.getInnerHeaderHtml());\n\t\tthis.getComponent(\"spyralFooter\").update(this.getInnerFooterHtml());\n\n\t\tthis.setIsEdited(true);\n\t},\n\n\tshowMetadataEditor: function() {\n\t\tif (this.metadataWindow === undefined) {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\tthis.metadataEditor = Ext.create('widget.metadataeditor', {\n\t\t\t\tanchor: '100%'\n\t\t\t});\n\t\t\tthis.metadataWindow = Ext.create('Ext.window.Window', {\n\t\t\t\ttitle: this.localize('metadataEditor'),\n\t\t\t\tautoScroll: true,\n\t\t\t\twidth: 600,\n\t\t\t\tcloseAction: 'hide',\n\t\t\t\tlayout: 'anchor',\n\t\t\t\titems: this.metadataEditor,\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttext: this.localize('metadataCancel'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tthis.up('window').close();\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('metadataReset'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tme.metadataEditor.reset();\n\t\t\t\t\t}\n\t\t\t\t}, \" \", {\n\t\t\t\t\ttext: this.localize('metadataSave'),\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tvar form = me.metadataEditor.getForm();\n\t\t\t\t\t\tme.getMetadata().set(form.getValues());\n\t\t\t\t\t\tme.updateMetadata();\n\t\t\t\t\t\tthis.up('window').close();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t})\n\t\t}\n\n\t\tvar metadata = this.getMetadata();\n\t\tif (metadata === undefined) {\n\t\t\tmetadata = new Spyral.Metadata();\n\t\t\tthis.setMetadata(metadata);\n\t\t}\n\n\t\tthis.metadataEditor.loadMetadata(metadata);\n\n\t\tthis.metadataWindow.show();\n\t}\n});","Ext.define('Voyant.VoyantApp', {\n\t\n    extend: 'Ext.app.Application',\n\tmixins: ['Voyant.util.Deferrable','Voyant.util.Localization','Voyant.util.Api','Voyant.util.Colors'],\n\trequires: ['Voyant.util.ResponseError'],\n    \n    name: 'VoyantApp',\n    \n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\tpalette: 'default',\n\t\t\tcategories: 'auto',\n    \t\tlang: undefined,\n    \t\tdebug: undefined\n    \t}\n    },\n    \n    config: {\n    \tbaseUrl: undefined,\n\t\ttromboneUrl: undefined,\n\t\tcategoriesManager: undefined\n    },\n    \n    constructor: function(config) {\n    \tthis.setBaseUrl(this.config.baseUrl);\n    \t\n    \t// set the Trombone URL from the baseURL // TODO: maybe allow this to be overridden\n\t\tthis.setTromboneUrl(this.config.baseUrl+'trombone');\n\t\t\n    \t// set the application for the Corpus so that we can use a simple constructor\n\t\tVoyant.application = this;\n\t\t\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\n\t\tthis.mixins['Voyant.util.Colors'].constructor.apply(this, arguments);\n\n\t\tthis.setCategoriesManager(new Spyral.Categories());\n\t\t// inheritance/mixin hack\n\t\t// var catProps = Object.getOwnPropertyNames(categories).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(categories)));\n\t\t// catProps.forEach(function(propName) {\n\t\t// \tif (this[propName] === undefined) {\n\t\t// \t\tif (typeof categories[propName] === 'function') {\n\t\t// \t\t\tthis[propName] = categories[propName].bind(this);\n\t\t// \t\t} else {\n\t\t// \t\t\tthis[propName] = categories[propName];\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }, this)\n\t\t\n\t\tthis.getCategoriesManager().addFeature('color');\n\t\tthis.getCategoriesManager().addFeature('font', '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif');\n\t\t\n\t\t// call the parent constructor\n\t\tthis.callParent(arguments);\n\t\t\n\t\t// override Voyant.util.Colors methods to add palette api param\n\t\tvar _getColor = this.getColor;\n\t\tthis.getColor = function(index, returnHex) {\n\t\t\treturn _getColor.apply(this, [this.getApiParam('palette'), index, returnHex]);\n\t\t}\n\t\tvar _getColorForTerm = this.getColorForTerm;\n\t\tthis.getColorForTerm = function(term, returnHex) {\n\t\t\treturn _getColorForTerm.apply(this, [this.getApiParam('palette'), term, returnHex]);\n\t\t}\n    },\n    getBaseUrl: function() {\n    \tvar baseUrl = this.callParent();\n    \treturn baseUrl.indexOf(\"//\")==0 ? location.protocol+baseUrl : baseUrl;\n    },\n    \n    getBaseUrlFull: function() {\n    \treturn window.location.origin+this.getBaseUrl(); // maybe doesn't work in all browsers?\n    },\n\n    getRelativeUrl: function() {\n    \tvar url = window.location.pathname.substring(this.getBaseUrl().length);\n    \tvar relative = \"\";\n    \tfor (var i=0, len=url.split(\"/\").length-1; i<len; i++) {\n    \t\trelative+=\"../\"\n    \t}\n    \treturn relative;\n    },\n    \n    getTools: function() {\n    \treturn [{type: 'maximize'},{type: 'help'}]\n    },\n    \n    launch: function() {\n    \tExt.tip.QuickTipManager.init();\n    \tExt.apply(Ext.tip.QuickTipManager.getQuickTip(), {\n    \t    showDelay: 50 // shorten the delay before showing\n    \t});\n    \t\n\t\tthis.callParent(arguments);\n    },\n    \n    tromboneCall: function(config) {\n    \tvar config = config ? config : {};\n    \tExt.applyIf(config, {\n    \t\turl: this.getTromboneUrl()\n    \t});\n    \tif (!config.success && !config.failure && !config.callback) {\n        \tExt.applyIf(config, {\n        \t\turl: this.getTromboneUrl(),\n        \t    scope: this,\n        \t    callback: function(response, success, options) {\n        \t    \tthis.dispatchEvent(config.tool+\"Loaded\", response, success, options)\n        \t    }\n        \t});\n    \t};\n    \tExt.Ajax.request(config);\n    },\n    \n    getViewport: function() {\n    \treturn Ext.ComponentQuery.query('viewport')[0];\n    },\n\n    dispatchEvent: function(eventName, src) {\n    \tvar viewport = this.getViewport();\n\t\tvar panels = viewport.query(\"panel,chart\");\n\t\tvar isHeard = false;\n\n\t\t// tell the app\n\t\tif (this.hasListener && this.hasListener(eventName)) {\n\t\t\tthis.fireEvent.apply(this, arguments);\n\t\t\tisHeard = true\n\t\t}\n\t\t\n\t\t// tell the panels, except the current one\n\t\tfor (var i=0; i<panels.length; i++) {\n\t\t\tif (panels[i].hasListener && panels[i].hasListener(eventName)) {\n\t\t\t\tif (src && src.getId && panels[i].getId && src.getId()==panels[i].getId()) {\n\t\t\t\t\tcontinue; // don't send to self\n\t\t\t\t}\n\t\t\t\tisHeard = true;\n\t\t\t\tpanels[i].fireEvent.apply(panels[i], arguments);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!isHeard) {\n\t\t\t// let the application know that we have an unhandledEvent\n\t\t\tvar args = [\"unhandledEvent\", src, eventName];\n\t\t\tfor (var i=2; i<arguments.length; i++) {args.push(arguments[i])}\n\t\t\tthis.fireEvent.apply(this, args);\n\t\t}\n    },\n    \n\tshowResponseError: function(config, response) {\n\t\tthis.showError(Ext.create(\"Voyant.util.ResponseError\", {msg: (Ext.isString(config) ? config : config.msg), response: response}))\n\t},\n\t\n\tshowError: function(config, response) {\n\t\tif (config instanceof Voyant.util.ResponseError) {\n\t\t\tconfig = {\n\t\t\t\tmessage: config.getMsg()+\"<p class='error'>\\n\"+config.getError()+\" \u2026 \"+\n\t\t\t\t\t\"<a href='#' onclick=\\\"window.open('').document.write(unescape('<pre>\"+escape(config.getDetails())+\"</pre>')); return false;\\\">more</a></p>\"\n\t\t\t}\n\t\t} else if (config instanceof Ext.data.operation.Operation) {\n\t\t\treturn this.showError(Ext.create(\"Voyant.util.ResponseError\", config.getError()))\n\t\t} else {\n\t\t\tif (Ext.isString(config)) {\n\t\t\t\tconfig = {message: config}\n\t\t\t} else if (Ext.isObject(config)) {\n\t\t\t\tif (config.responseText) {\n\t\t\t\t\t// rebundle as error (without nice message)\n\t\t\t\t\treturn this.showResponseError(config.statusText, config);\n\t\t\t\t} else if (config.statusText) {\n\t\t\t\t\treturn this.showResponseError(config.statusText, config)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// maybe handle other forms\n\t\t}\n\t\t\n\n\t\tExt.applyIf(config, {\n\t\t\ttitle: this.localize(\"error\"),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.MessageBox.ERROR,\n\t\t    autoScroll: true\n\t\t})\n\t\tExt.Msg.show(config);\n\t},\n\t\n\tgetToolConfigFromToolXtype: function(xtype) {\n\t\tcls = Ext.ClassManager.getByAlias(\"widget.\"+xtype);\t\t\n\t\treturn {\n\t\t\txtype: xtype,\n\t\t\ttitle: this._localizeClass(cls, \"title\"),\n\t\t\ttooltip: { // this needs to be an object for compatibility (other configs can be changed)\n\t\t\t\ttext: this._localizeClass(cls, \"helpTip\")\n\t\t\t},\n\t\t\tglyph: cls && cls.glyph ? cls.glyph : 'xf12e@FontAwesome'\n\t\t};\n\t},\n\n\t/**\n\t * Opens a URL in a new window (handling the case when popup windows aren't allowed).\n\t * @param {String} url The URL to open.\n\t * @private\n\t */\n\topenUrl: function(url) {\n\t\tvar win = window.open(url);\n\t\tif (!win) { // popup blocked\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: \"Popup Blocked\",\n\t\t\t\tbuttonText: {ok: \"Close\"},\n\t\t\t\ticon: Ext.MessageBox.INFO,\n\t\t\t\tmessage: \"A popup window was blocked. <a href='\"+url+\"' target='_blank' class='link'>Click here</a> to open the new window.\",\n\t\t\t\tbuttons: Ext.Msg.OK\n\t\t\t});\n\t\t}\n\t}\n\n    \n});","Ext.define('Voyant.VoyantCorpusApp', {\n\t\n    extend: 'Voyant.VoyantApp',\n    \n    name: 'VoyantCorpusApp',\n\n    requires: ['Voyant.panel.CorpusSet','Voyant.data.model.Corpus','Voyant.panel.VoyantHeader', 'Voyant.panel.VoyantFooter', 'Voyant.panel.CorpusCreator', 'Voyant.panel.Cirrus', 'Voyant.panel.Summary', 'Voyant.panel.DreamScape', 'Voyant.panel.CorpusTerms', 'Voyant.panel.Reader', 'Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts', 'Voyant.panel.DocumentTerms','Voyant.panel.CorpusCollocates','Voyant.panel.CollocatesGraph','Voyant.panel.Phrases','Voyant.panel.ScatterPlot','Voyant.panel.TopicContexts','Voyant.panel.TermsRadio','Voyant.panel.TermsBerry', 'Voyant.panel.Embedder'],\n    \n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttoolFlow: undefined\n    \t}\n    },\n    \n\tconstructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n\t},\n\t\n    config: {\n    \tcorpus: undefined,\n    \tcorpusAccess: undefined,\n    \tmoreTools: [{\n\t\t\ti18n: 'moreToolsScaleCorpus',\n\t\t\tglyph: 'xf065@FontAwesome',\n\t\t\titems: ['cirrus','corpusterms','bubblelines','correlations','corpuscollocates','dreamscape','loom','mandala','microsearch','streamgraph','phrases','documents','summary','trends','scatterplot','termsradio','topics','veliza','wordtree']\n    \t},{\n\t\t\ti18n: 'moreToolsScaleDocument',\n\t\t\tglyph: 'xf066@FontAwesome',\n\t\t\titems: ['bubbles','cirrus','contexts','documentterms','reader','textualarc','trends','knots','topics']\n    \t},{\n\t\t\ti18n: 'moreToolsTypeViz',\n\t\t\tglyph: 'xf06e@FontAwesome',\n\t\t\titems: ['cirrus','bubblelines','bubbles','collocatesgraph','dreamscape','loom','knots','mandala','microsearch','streamgraph','scatterplot','textualarc','trends','termsberry','termsradio','wordtree']\n\t\t},{\n\t\t\ti18n: 'moreToolsTypeGrid',\n\t\t\tglyph: 'xf0ce@FontAwesome',\n\t\t\titems: ['corpusterms','corpuscollocates','correlations','phrases','contexts','documentterms','documents','topics']\n\t\t},{\n\t\t\t\n\t\t\ti18n: 'moreToolsTypeOther',\n\t\t\tglyph: 'xf035@FontAwesome',\n\t\t\titems: ['reader','summary','veliza','embedder']\n    \t}]\n    },\n    \n    launch: function(config) {\n\t\tthis.callParent(arguments);\n\t\t\n    \tif (this.hasQueryToLoad()) {\n        \tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n        \tif (!queryParams.corpus && this.getCorpusId && this.getCorpusId()) {\n        \t\tqueryParams.corpus = this.getCorpusId();\n        \t}\n        \tif (config && config.useCache) { // for large corpora\n        \t\tqueryParams.useCache = config.useCache;\n        \t}\n        \tthis.loadCorpusFromParams(queryParams);\n        \t\n        \tif (queryParams.palette) {\n        \t\tif (queryParams.palette.indexOf(\",\")>-1) { // treat as inline\n        \t    \tvar palette = Ext.decode(queryParams.palette);\n        \t    \tthis.addColorPalette(queryParams.palette, palette);\n        \t\t} else {\n            \t\tthis.loadColorPaletteForCorpus(queryParams.corpus, queryParams.palette);\n        \t\t}\n        \t}\n    \t} else {\n    \t\tvar viewport = this.getViewport();\n    \t\tif (viewport) {\n    \t\t\tvar corpuscreator = viewport.down(\"corpuscreator\")\n    \t\t\tif (corpuscreator) {\n    \t\t\t\tvar toast = corpuscreator.toastInfo({\n    \t\t\t\t\thtml: this.localize('didYouKnowText'),\n    \t\t\t\t\ttitle: this.localize('didYouKnow'),\n    \t\t\t\t\tanchor: corpuscreator.down(\"textareafield\"),\n    \t\t\t\t\talign: 'tr',\n    \t\t\t\t\tlisteners: {\n    \t\t\t\t\t\tbeforeclose: {\n    \t\t\t\t\t\t\tfn: function() {\n    \t\t\t\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n    \t\t\t\t\t\t\t\t\tif (tool.type==\"gear\" || tool.type=='help') {\n    \t\t\t\t\t\t\t\t\t\ttool.getEl().frame(\"#ff0000\", 1, { duration: 3000 })\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t});\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\tscope: corpuscreator\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t});\n    \t\t\t}\n    \t\t}\n    \t}\n    },\n    \n    loadCorpusFromParams: function(params) {\n\t\tvar me = this;\n\t\tvar view = me.getViewport()\n\t\tview.mask(this.localize(\"fetchingCorpus\"));\n\t\tif (params.archive) { // fix a few URLs we know about\n\t\t\tif (Ext.isString(params.archive)) {params.archive=[params.archive]}\n\t\t\tparams.archive = params.archive.map(function(archive) {\n\t\t\t\treturn archive.replace('/blogs.sub.uni-hamburg.de/hup/lhn/', '/wikis.sub.uni-hamburg.de/lhn/index.php/')\n\t\t\t\t\t.replace('/hup.sub.uni-hamburg.de/', '/wikis.sub.uni-hamburg.de/')\n\t\t\t})\n\t\t}\n\t\t\n\t\tthis.validateCorpusLoadParams(params);\n\n\t\tnew Voyant.data.model.Corpus(params).then(function(corpus) {\n\t\t\tview.unmask();\n\t\t\tme.setCorpus(corpus);\n\t\t\tif (me.validateCorpusAccess()) {\n\t\t\t\tme.dispatchEvent('loadedCorpus', this, corpus);\n\t\t\t}\n\t\t}).otherwise(function() {\n\t\t\tview.unmask();\n\t\t})\n    },\n    \n    validateCorpusLoadParams: function(params) {\n    \t// leave untouched by default, this can be overridden\n    },\n    \n    validateCorpusAccess: function() {\n\t\tvar me = this, view = me.getViewport(), corpus = this.getCorpus();\n\t\tif (corpus && corpus.requiresPassword() && !me.getViewport().query(\"panel\").every(function(panel) {\n\t\t\treturn !panel.isConsumptive\n\t\t})) {\n\t\t\tvar noPasswordAccess = corpus.getNoPasswordAccess();\n\t\t\tvar passWin = Ext.create('Ext.window.Window', {\n\t            title: me.localize('passwordRequiredTitle'),\n\t\t\t    layout: 'fit',\n\t\t\t    items: {\n\t\t\t    \tpadding: 10,\n\t                flex: 1,\n\t                width: 300,\n\t                layout: {\n\t                    type: 'vbox',\n\t                    align: 'stretch'\n\t                },\n\t                items: [\n\t                    {\n\t                        html: '<p>'+me.localize('passwordRequiredMessage')+'</p>' + (noPasswordAccess=='NONCONSUMPTIVE' ? '<p>'+me.localize('nonConsumptiveMessage')+\"</p>\" : \"\")+'</p>'\n\t                    },{\n\t                    \txtype: 'textfield',\n\t                    \tfieldLabel: me.localize('password')\n\t                    }\n\t                ],\n\t                bbar: {\n\t//                \tui: 'footer',\n\t                \tlayout: {pack: 'center'},\n\t                \titems: [{\n\t                    \ttext: me.localize('passwordValidateButton'),\n\t                    \tui: 'default',\n\t                    \thandler: function() {\n\t                    \t\tvar password = passWin.query(\"textfield\")[0].getValue().trim();\n\t                    \t\tif (password.length==0) {\n\t                    \t\t\tme.showError({\n\t                    \t\t\t\tmessage: me.localize('noPasswordGiven')\n\t                    \t\t\t})\n\t                    \t\t\treturn;\n\t                    \t\t}\n\t                    \t\tpassWin.mask();\n\t                    \t\tExt.Ajax.request({\n\t                    \t\t\t  url: me.getTromboneUrl(),\n\t                    \t\t\t  params: {\n\t                    \t\t\t\t  corpus: corpus.getId(),\n\t                    \t\t\t\t  passwordForSession: password\n\t                    \t\t\t  },\n\t                    \t\t\t  method: 'POST',\n\t                    \t\t\t  success: function(result, request) {\n\t                    \t\t\t\t  passWin.unmask();\n\t                    \t\t\t\t  var access = result.responseText;\n\t                    \t\t\t\t  if (access==\"ADMIN\" || access==\"ACCESS\") {\n\t\t\t                    \t\t\t    passWin.close();\n\t\t\t                    \t\t\t    view.unmask();\n\t\t\t                    \t\t\t    me.setCorpusAccess(access);\n\t\t\t\t\t            \t\t\t\tme.dispatchEvent('loadedCorpus', this, corpus);\n\t                    \t\t\t\t  }\n\t                    \t\t\t\t  else {\n\t  \t\t                    \t\t\tme.showError({\n\t\t\t                    \t\t\t\tmessage: me.localize('badPassword')\n\t\t\t                    \t\t\t})\n\t                    \t\t\t\t  }\n\t                    \t\t\t  },\n\t                    \t\t\t  failure: function(result, request) {\n\t                    \t\t\t\t  passWin.unmask();\n\t  \t\t                    \t\t\tme.showError({\n\t\t\t                    \t\t\t\tmessage: me.localize('passwordValidationError')\n\t\t\t                    \t\t\t})\n\t                    \t\t\t  } \n\t                    \t\t});\n\t                    \t}\n\t                    },{\n\t                    \ttext: me.localize('nonConsumptiveButton'),\n\t                    \thidden: corpus.getNoPasswordAccess()=='NONE',\n\t                    \thandler: function() {\n\t                    \t\tpassWin.mask();\n\t                    \t\tExt.Ajax.request({\n\t                    \t\t\t  url: me.getTromboneUrl(),\n\t                    \t\t\t  params: {\n\t                    \t\t\t\t  corpus: corpus.getId(),\n\t                    \t\t\t\t  passwordForSessionRemove: true\n\t                    \t\t\t  },\n\t                    \t\t\t  method: 'POST',\n\t                    \t\t\t  callback: function(result, request) { // do this even if request fails\n\t                    \t\t\t\t  passWin.unmask();\n\t                    \t\t\t\t  passWin.close();\n\t                    \t\t\t\t  view.unmask();\n\t                    \t\t\t\t  me.dispatchEvent('loadedCorpus', me, corpus);\n\t                    \t\t\t  }\n\t                    \t\t});\n\t                    \t}\n\t                    }]\n\t                }\n\t            }\n\t\t\t}).show();\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true\n\t\t}\n    },\n    \n    hasQueryToLoad: function(params) {\n    \tif (!params) {\n    \t\tparams = Ext.Object.fromQueryString(document.location.search);\n    \t}\n    \treturn params.corpus || params.input || (this.getCorpusId && this.getCorpusId()); // TODO: should this include \"archive\" from V1?\n    },\n    \n    loadColorPaletteForCorpus: function(corpusId, paletteId) {\n\t\tExt.Ajax.request({\n    \t    url: this.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.StoredResource',\n        \t\tretrieveResourceId: paletteId,\n    \t\t\tcorpus: corpusId\n    \t    },\n    \t    success: function(response, req) {\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar value = json.storedResource.resource;\n    \t    \tvar palette = Ext.decode(value);\n    \t    \tthis.addColorPalette(paletteId, palette);\n    \t    },\n    \t    failure: function(response) {\n    \t    \tthis.setApiParam('palette', undefined);\n    \t    },\n    \t    scope: this\n    \t});\n\t},\n\t\n\tloadCategoryData: function(id) {\n\t\treturn this.getCategoriesManager().load(id, {\n\t\t\ttrombone: Voyant.application.getTromboneUrl()\n\t\t});\n\t},\n\n\tsaveCategoryData: function(data) {\n\t\treturn this.getCategoriesManager().save({}, {\n\t\t\ttrombone: Voyant.application.getTromboneUrl()\n\t\t});\n\t},\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.setCorpus(corpus);\n    \t\t\n    \t\t// let's load the categories based on the corpus\n        \tif (this.getApiParam(\"categories\")) {\n\t\t\t\tthis.loadCategoryData(this.getApiParam(\"categories\")).then(function() {\n\t\t\t\t\t// assign colors\n\t\t\t\t\tfor (var category in this.getCategoriesManager().getCategories()) {\n\t\t\t\t\t\tvar color = this.getCategoriesManager().getCategoryFeature(category, 'color');\n\t\t\t\t\t\tif (color !== undefined) {\n\t\t\t\t\t\t\tvar rgb = this.hexToRgb(color);\n\t\t\t\t\t\t\tvar terms = this.getCategoriesManager().getCategoryTerms(category);\n\t\t\t\t\t\t\tfor (var i = 0; i < terms.length; i++) {\n\t\t\t\t\t\t\t\tthis.setColorForTerm(terms[i], rgb);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind(this));\n        \t}    \t\n\n    \t\t\n    \t\tthis.on(\"unhandledEvent\", function(src, eventName, data) {\n\t\t\t\tvar url = this.getBaseUrl() + '?corpus='+corpus.getAliasOrId();\n\t\t\t\tvar api = this.getModifiedApiParams() || {}; // use application, not tool\n\t\t\t\tdelete api.view; // make sure we show default view\n\t\t\t\tif (eventName=='termsClicked') {\n\t\t\t\t\t// data can be a simple array of terms or an array of term objects\n\t\t\t\t\tif (Ext.isArray(data) && typeof data[0] !== 'string' && 'term' in data[0] && 'docIndex' in data[0]) {\n\t\t\t\t\t\tlet termsObj = {};\n\t\t\t\t\t\tlet docIndObj = {};\n\t\t\t\t\t\tdata.forEach(function(datum) {\n\t\t\t\t\t\t\ttermsObj[datum.term]=true;\n\t\t\t\t\t\t\tdocIndObj[datum.docIndex]=true;\n\t\t\t\t\t\t})\n\t\t\t\t\t\tapi.query=Object.keys(termsObj);\n\t\t\t\t\t\tapi.docIndex=Object.keys(docIndObj);\n\t\t\t\t\t} else {\t\t\t\t\t\t\n\t\t\t\t\t\tapi.query=data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (eventName=='documentsClicked') {\n\t\t\t\t\tvar docIndex = [];\n\t\t\t\t\tif (data.forEach) {\n\t\t\t\t\t\tdata.forEach(function(doc) {\n\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tapi.docIndex=docIndex\n\t\t\t\t}\n\t\t\t\telse if (eventName=='corpusTermsClicked') {\n\t\t\t\t\tif (data.map) {\n\t\t\t\t\t\tapi.query = data.map(function(corpusTerm) {return corpusTerm.getTerm()});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (eventName=='documentTermsClicked') {\n\t\t\t\t\tif (data.map) {\n\t\t\t\t\t\tapi.query = data.map(function(documentTerm) {return documentTerm.getTerm()});\n\t\t\t\t\t\tapi.docIndex = data.map(function(documentTerm) {return documentTerm.getDocIndex()});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (console) {console.warn(\"Unhandled event: \"+eventName, data)}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (api.toolFlow) {\n\t\t\t\t\tvar toolFlow = Ext.Array.from(api.toolFlow.split(\",\"));\n\t\t\t\t\tapi.view = toolFlow.shift();\n\t\t\t\t\tif (toolFlow.length>0) {\n\t\t\t\t\t\tapi.toolFlow = toolFlow.join(\",\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete api.toolFlow\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\turl += \"&\"+Ext.Object.toQueryString(api)\n\t\t\t\tthis.openUrl(url)\n\t\t\t})\n    \t}\n    }\n\n});","Ext.define('Voyant.panel.DocumentClusters', {\n\textend: 'Ext.panel.Panel',\n\talias: 'widget.documentclusters',\n\ttitle: \"Document Clusters\"\n})\n\n//\textend: 'Ext.panel.Panel',\n//\talias: 'widget.rezoviz',\n//\ttitle: \"RezoViz\"\n//})\nExt.define('Voyant.VoyantCorpusToolsetApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\trequires: ['Voyant.panel.Contexts','Voyant.panel.CollocatesGraph','Voyant.panel.Trends'],\n\tname : 'VoyantCorpusToolsetApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    }, {\n         \t   xtype: 'tabpanel',\n        \t   region: 'center',\n\t\t    \tsplit: true,\n        \t   items: [{\n        \t\t   xtype: 'cirrus',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'corpusterms',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documents',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'rezoviz',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'trends',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documentclusters',\n                   collapsible: true\n        \t   }],\n        \t   flex: 6\n           }]\n\t\t});\n        this.callParent(arguments);\n\t}\n});","Ext.define('Voyant.VoyantDefaultApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\tmixins: ['Voyant.util.Api'],\n\tname : 'VoyantDefaultApp',\n\tconstructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tview: 'corpusset',\n\t\t\tstopList: 'auto',\n\t\t\tpanels: undefined,\n\t\t\trtl: undefined\n\t\t}\n\t},\n\t\n\tlisteners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.viewport.down('voyantheader').collapse();\n    \t\tthis.viewport.down('#toolsContainer').setActiveItem(1);\n    \t\tvar corpusId = this.getCorpusId && this.getCorpusId() ? this.getCorpusId() : undefined;\n    \t\tif (window.history.pushState && !corpusId) {\n    \t\t\t// add the corpusId to the url\n    \t\t\tvar corpusId = corpus.getAliasOrId();\n        \t\tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n        \t\t\n    \t\t\tvar url = this.getBaseUrl()+'?corpus='+corpusId;\n    \t\t\tfor (var key in queryParams) {\n    \t\t\t\tif (key !== 'corpus') {\n    \t\t\t\t\tvar vals = Ext.isString(queryParams[key]) ? [queryParams[key]] : queryParams[key];\n    \t\t\t\t\tif (Ext.isArray(vals)) {\n    \t\t\t\t\t\tvals.forEach(function(val) {\n    \t    \t\t\t\t\turl += '&'+key+'='+val;\n    \t\t\t\t\t\t})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n    \t\t\twindow.history.pushState({\n    \t\t\t\tcorpus: corpusId\n    \t\t\t}, 'Corpus: '+corpusId, url);\n    \t\t}\n    \t}\n\t},\n\tgetViewComponent: function() {\n\t\treturn this.viewport.down('#toolsContainer-main')\n\t},\n\tlaunch: function() {\n\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search) || {};\n\t\tvar view = this.getApiParam('view', 'CorpusSet');\n\t\tvar xtype = view.toLowerCase();\n\t\tif (!Ext.ClassManager.getByAlias(\"widget.\"+xtype) || queryParams.noskin) {\n\t\t\tExt.Msg.show({\n\t\t\t    title: this.localize('noViewErrorTitle'),\n\t\t\t    message: new Ext.Template(this.localize(queryParams.noskin ? 'noViewKnownErrorTpl' : 'noViewErrorTpl')).apply({\n\t\t\t    \tview: queryParams.noskin ? queryParams.noskin : view,\n\t\t\t    \tadditional: queryParams.noskin && queryParams.noskin == 'convert' ? this.localize(queryParams.noskin+'SkinMsg') : ''\n\t\t\t    }),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n\t\t\txtype = 'corpusset'; // switch to default view\n\t\t}\n\t\tvar SPLIT_SIZE = 5;\n\t\tthis.viewport = Ext.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    rtl: (this.getApiParam('rtl')!==undefined || Voyant.util.Localization.LANGUAGE==\"ar\" || Voyant.util.Localization.LANGUAGE==\"he\"),\n\t\t    items: [{\n\t\t    \txtype: 'voyantheader',\n\t\t    \tregion: 'north'\n\t\t    },{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    },{\n\t\t    \tregion: 'center',\n\t\t    \tlayout: 'card',\n\t\t    \titemId: 'toolsContainer',\n\t\t\t\tactiveItem: 0,\n\t\t\t\titems: [{\n\t\t\t\t\txtype : 'container',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\tpack: 'center',\n\t\t\t\t\t\talign: 'center'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'corpuscreator'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'container',\n\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\thtml: \"<div id='voyantIs' style='font-style: italic; text-align: center; margin-top: 10px;'><div>\"+this.localize('voyantIs')+\"</div>\" + (this.localize('translatedBy').indexOf(\"English\") == -1 ? \"<div>\"+this.localize('translatedBy')+\"</div>\" : \"\") +\n\t\t\t\t\t\t\t(this.getCorpusCreatorText &&  this.getCorpusCreatorText().trim().length>0 ?  \"<div id='corpusCreatorText'>\"+this.getCorpusCreatorText()+\"</div>\" : \"\")\n\t\t\t\t\t}]\t\n\t\t\t\t},{\n\t\t\t\t\tlayout: 'fit',\n\t\t\t\t\titemId: 'toolsContainer-main',\n\t\t\t\t\titems: {\n\t\t\t\t\t\txtype: xtype\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t    }]\n\t\t});\n\t\tthis.callParent(arguments);\n\t}\n});","Ext.define('Voyant.panel.MoreLikeThis', {\n\textend: 'Ext.panel.Panel',\n\talias: 'widget.morelikethis',\n\ttitle: \"More Like this\"\n})\nExt.define('Voyant.VoyantDocumentToolsetApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\trequires: ['Voyant.panel.Contexts','Voyant.panel.CollocatesGraph','Voyant.panel.Trends'],\n\tname : 'VoyantDocumentToolsetApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    }, {\n         \t   xtype: 'tabpanel',\n        \t   region: 'center',\n\t\t    \tsplit: true,\n        \t   items: [{\n        \t\t   xtype: 'cirrus',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documentterms',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'contexts',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'collocatesgraph',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'trends',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'morelikethis',\n                   collapsible: true\n        \t   }],\n        \t   flex: 6\n           }]\n\t\t});\n        this.callParent(arguments);\n\t}\n});","Ext.define('Voyant.VoyantNotebookApp', {\n\textend : 'Voyant.VoyantApp',\n\trequires: ['Voyant.panel.VoyantFooter','Voyant.notebook.Notebook','Voyant.data.model.Corpus'],\n\tname : 'VoyantNotebookApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t    \txtype: 'notebook',\n\t\t    \tregion: 'center'\n\t\t    },{\n\t\t    \txtype: 'voyantfooter',\n\t\t    \tregion: 'south'\n\t\t    }]\n\t\t});\n\t\tthis.callParent(arguments);    \t\n\t}\n});","Ext.define('Voyant.VoyantToolApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\tname : 'VoyantToolApp',\n\tstatics: {\n\t\tapi: {\n\t\t\tminimal: undefined,\n\t\t\tembeddedApiId: undefined\n\t\t}\n\t},\n\tlaunch: function() {\n\t\tvar items = [], me = this;\n\t\tif (!this.getApiParam('minimal')) {\n\t\t\titems.push({\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    })\n\t\t};\n\t\titems.push({\n\t        region: 'center',\n\t        layout: 'fit',\n\t        itemId: 'toolcontainer',\n\t        items: {\n\t\t        xtype: this.getApiParam('embeddedApiId') ? 'container' : this.getTool()\n\t        },\n\t        listeners: {\n\t        \tafterrender: function(container) {\n\t        \t\tif (me.getApiParam('embeddedApiId')) {\n\t    \t\t\t\tvar dfd = me.getDeferred(this);\n\t    \t    \t\tcontainer.mask(this.localize('loadingConfiguration'));\n\t        \t    \tExt.Ajax.request({\n\t        \t    \t    url: me.getTromboneUrl(),\n\t        \t    \t    params: {\n\t        \t        \t\ttool: 'resource.StoredResource',\n\t        \t        \t\tretrieveResourceId: this.getApiParam('embeddedApiId')\n\t        \t    \t    }\n\t        \t    \t}).then(function(response) {\n\t    \t\t\t\t\tdfd.resolve();\n\t    \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t        \t    \t\tvar configString = decodeURIComponent(json.storedResource.resource);\n\t        \t    \t\tvar config = Ext.decode(configString);\n\t        \t    \t\tvar tool = Ext.create({xtype: me.getTool()});\n\t        \t    \t\ttool.setApiParams(config);\n\t        \t    \t\tcontainer.unmask();\n\t        \t    \t\tcontainer.remove(container.down('container'));\n\t        \t    \t\tcontainer.add(tool);\n\t        \t    \t\tif (config.corpus) {\n\t        \t    \t\t\tme.loadCorpusFromParams(config);\n\t        \t    \t\t}\n\t        \t    \t}).otherwise(function(response) {\n\t        \t    \t\tif (me.getTargetEl) {\n\t            \t\t\t\tVoyant.notebook.util.Show.TARGET = me.getTargetEl();\n\t            \t\t\t\tshowError(response);\n\t        \t    \t\t}\n\t        \t    \t\tVoyant.application.showError(response);\n\t        \t    \t\tdfd.reject();\n\t        \t    \t})\n\t    \t\t\t}\n\t        \t},\n\t        \tscope: this\n\t        }\n\t    });\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: items\n\t\t});\n\t\tthis.callParent(arguments);\n\t}\n});"],
"names":["Bubblelines","config","container","externalClickHandler","clickHandler","INTERVAL","DISMISS_DELAY","UNIFORM_LINE_LENGTH","SEPARATE_LINES_FOR_TERMS","MAX_LINE_WIDTH","MAX_LABEL_WIDTH","DRAW_TITLES","DRAW_SHORT_TITLES","graphSeparation","MIN_GRAPH_SEPARATION","yIndex","mouseOver","clearToolTipId","intervalId","overBubbles","lastClickedBubbles","ctx","canvas","dragInfo","maxDocLength","maxFreq","term","value","maxRadius","cache","Ext","util","MixedCollection","currentTerms","termsFilter","bubbleSpacing","initialized","prototype","constructor","initializeCanvas","height","getHeight","width","getWidth","id","add","xtype","html","border","listeners","afterrender","fn","cnt","document","getElementById","getContext","addEventListener","bind","mouseDownHandler","mouseUpHandler","moveHandler","mouseEnterHandler","mouseLeaveHandler","single","scope","updateLayout","doBubblelinesLayout","setTitleWidthsAndMaxTitleWidth","children","DomQuery","jsSelect","el","dom","i","length","fly","child","setWidth","padding","setMaxLineWidth","setLineLengths","recache","setCanvasHeight","drawGraph","addDocToCache","doc","cacheBubbles","calculateBubbleRadii","lineLength","freqCounts","containsKey","replace","sort","addTermsToDoc","termsObj","docId","key","get","apply","terms","maxFreqChanged","termInfo","bins","distributions","spacing","cachedPositions","tokenPos","maxDistribution","xIndex","d","push","x","freq","radius","bin","tokenPositions","positions","slice","pos","setMaxFreq","newTerm","maxFreqLog","Math","log","minFreq","t","bubble","max","freqLog","each","doCache","getTotalHeight","totalHeight","index","calculateGraphHeights","undefined","setHeight","findLongestDocument","twt","getTotalWordTokens","getTitleWidth","title","indexOf","textBaseline","font","measureText","doTitle","titleWidth","doLength","includeLegend","clearInterval","setInterval","doDraw","setTimeout","clearCanvas","drawDocument","drawLegend","drawToolTip","doDrag","totalDocs","hidden","titleIndent","oldIndex","fillStyle","fillText","drawLine","that","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","pi2","PI","freqTotal","checkClickedBubbles","termsDrawn","info","freqForType","c","color","join","rawFreq","checkCurrentType","b","doClickedBubble","arc","closePath","fill","typeStore","record","type","y","label","docIndex","count","fillRect","strokeRect","clearToolTip","clearTimeout","event","layerX","layerY","docHeight","getCount","newIndex","body","style","cursor","showPointer","round","prevDocHeight","xOffset","yOffset","ordering","reorder","hits","termData","flatten","maxObj","findMaxFreq","getNewColor","colors","findExact","match","removeAllTerms","removeTerm","getNewMax","lcTypes","lcType","Knots","MAX_LINE_LENGTH","LINE_SIZE","progressiveDraw","progDrawDone","drawStep","refreshInterval","forceRedraw","lastDrawTime","getTime","Date","startAngle","angleIncrement","currentDoc","offset","audio","audioCtx","sqrt","doLayout","buildGraph","done","createDelegate","time","save","translate","originOpacity","originColor","abs","restore","muteTerms","setAudio","gainNode","gain","prevXY","xy","drawPolygon","polygon","polyX","polyY","over","termStore","setCurrentDoc","cacheCurrentDocument","addTerms","oscillator","stop","determineGraphSizeAndPosition","window","AudioContext","webkitAudioContext","e","createOscillator","createGain","connect","destination","frequency","random","start","cacheTurns","tokenIds","lastTokenId","angle","prevX","prevY","prevLength","o","segment","newPoint","findEndPoint","getPolygonFromLine","tokenId","point","radians","degreesToRadians","cos","sin","bb","findBoundingBoxForGraph","maxX","minX","maxY","minY","ratio","min","getBoundingBox","hit","isPointInPolygon","test","lastX","lastY","yDiff","point1","point2","size","perpDown","perpUp","p1","p2","p3","p4","j","oddNodes","Cirrus","hex2RGB","hex","charAt","substring","rgb","parseInt","canvasId","containerId","alert","wordController","resizeTimer","clear","this.clear","addWords","this.addWords","words","arrangeWords","this.arrangeWords","clearAll","this.clearAll","setWords","grid","resizeWords","this.resizeWords","setCanvasDimensions","resetWordCoordinates","calculateSizeAdjustment","this.setCanvasDimensions","$","offsetHeight","clientHeight","offsetWidth","clientWidth","ready","init","createElement","setAttribute","append","context","wordData","useFadeEffect","WordController","layout","CIRCLE","SQUARE","isArray","css","wordsToArrange","resize","keypress","which","click","matchingWord","handleWordClick","text","mouseover","startUpdates","mouseout","stopUpdates","mousemove","handleMouseMove","Word","_text","_origSize","_color","_rolloverText","_value","relativeSize","rotation","mask","origSize","rolloverText","ty","tx","fontFamily","fontSize","alpha","isOver","live","draw","this.draw","rotate","parentApp","calculateWordArea","word","baseSize","LOG10E","letter","sortWords","_words","a","createAllGraphics","wordObj","sizeAdjustment","area","pow","adjustedSize","minFontSize","myFont","app","ceil","getWordOrientation","MIXED","tempHeight","backgroundColor","imageData","getImageData","xm","floor","COARSENESS","ym","data","pixel","drawWords","$canvasEl","overWord","wordWidth","valueWidth","maxWidth","overX","overY","appWidth","appHeight","_layout","getLayout","this.getLayout","setLayout","this.setLayout","HORIZONTAL","_wordOrientation","this.getWordOrientation","setWordOrientation","this.setWordOrientation","UPDATE_RATE","timer_i","timer","doingArrange","getWords","this.getWords","this.setWords","largestWordSize","smallestWordSize","_uniqueWords","newWords","sizeChanged","parseFloat","setRelativeSizes","this.resetWordCoordinates","this.calculateSizeAdjustment","stageArea","totalWordsSize","wordArea","this.setRelativeSizes","ostart","istart","toggleLoadingText","set_grid","xt","yt","fadeWord","finalizeWord","drawIt","hitTest","h","w","doArrange","wordCount","appCanvasWidth","appCanvasHeight","halfWidth","halfHeight","da","halfWordWidth","halfWordHeight","fail","dd","wrd","this.toggleLoadingText","show","this.startUpdates","this.stopUpdates","this.handleMouseMove","remainder","pageX","left","pageY","top","findWordByCoords","this.handleWordClick","this.findWordByCoords","Function","Function.prototype.createDelegate","obj","args","appendArgs","method","callArgs","arguments","Array","call","concat","applyArgs","splice","doubletree","new_pruneTree","tree","ids","copyIDs","origIDs","addTo","Object","keys","origCount","idNums","n","cid","containedIn","filter","continuations","cMax","d3","map","maxChildren","o1","o2","k","noOp","DoubleTree","doubletree.DoubleTree","mine","selection","containers","node","visWidth","visHt","prefixesOnRight","filters","handlers","showTokenExtra","scaleLabels","sortFun","sortByStrFld","nodeText","tokenText","tokenExtraText","fieldText","rectColor","rectBorderColor","continuationColor","basicStyles","succeeded","dispatch","on","leftTree","rtTree","setIds","continuationIDs","updateContinuations","leftTrie","rtTrie","visibleIDs","textScale","mine.init","containerPattern","select","selectAll","redraw","mine.redraw","setupFromTries","mine.setupFromTries","leftOne","rtOne","getUniqRoot","leftTrieTree","toTree","rtTrieTree","right","pruned","newInfo","isNaN","scaleLog","range","kMinFontSize","kFontSize","domain","textScale.domain","minCount","bottom","forEach","tmp","thisVis","attr","zoom","scaleExtent","transform","remove","Tree","handleAltPress","alt","handleShiftPress","shift","handleClick","setupFromArrays","mine.setupFromArrays","prefixArray","hitArray","suffixArray","idArray","caseSensitive","fieldNames","fieldDelim","distinguishingFieldsArray","Trie","thisID","thisHit","thesePrefixes","theseSuffixes","reverse","unshift","addNgram","filteredIDs","mine.filteredIDs","search","mine.search","searchRE","found","empty","what","foundRt","clearSearch","mine.clearSearch","updateTokenExtras","mine.updateTokenExtras","showTokenExtras","tokExtra","ht","mine.visWidth","visHeight","mine.visHeight","mine.prefixesOnRight","mine.filters","mine.handlers","mine.showTokenExtra","mine.scaleLabels","mine.succeeded","mine.sortFun","mine.nodeText","mine.tokenExtraText","mine.rectColor","mine.rectBorderColor","mine.continuationColor","mine.basicStyles","stylesObj","aspect","doubletree.Tree","vis","toLeft","showTokenXtra","nodeTextFun","tokenExtraTextFun","rectColorFun","rectBorderFun","contColorFun","baseStyles","collapse","_children","collapseSiblings","nd","parent","altKey","shiftKey","clickedNode","toggleChildren","update","positionX","root","nodeSize","diagonal","linkHorizontal","readJSONTree","this.readJSONTree","json","hierarchy","x0","y0","this.update","source","nodes","treeData","descendants","textSize","measured","TextMeasurer","name","baseBranchSegmentWidth","depth","nodeEnter","enter","infoToText","txtNode","drawRects","nodeUpdate","merge","transition","duration","nodeExit","exit","link","links","target","insert","branch","linkEnter","linkUpdate","this.drawRects","parentElement","getBBox","parentW","this.setIds","this.updateContinuations","classed","isContinuation","this.search","this.clearSearch","this.showTokenExtras","setRectColor","this.setRectColor","this.handleAltPress","handleShifttPress","this.handleShifttPress","this.handleClick","doubletree.sortByStrFld","fld","aUndefined","bUndefined","aVal","toLowerCase","bVal","sortByCount","doubletree.sortByCount","sortByContinuations","doubletree.sortByContinuations","filterByMinCount","doubletree.filterByMinCount","inf","filterByMaxCount","doubletree.filterByMaxCount","filterByPOS","doubletree.filterByPOS","re","RegExp","p","doubletree.fieldText","fieldName","doubletree.tokenText","token","doubletree.infoToText","infp","doubletree.Trie","fldNames","fldDelim","distinguishingFldsArray","undistinguishedRoot","TrieNode","item","rootName","flds","split","this.addNgram","itemArray","thisItem","theseFlds","thisKey","undistinguishedRt","f","noCase","toLocaleLowerCase","endNG","subTrie","thisFld","this.getUniqRoot","this.toTree","filterFuns","toTreeHelper","descendentLevel","trieData","k2","itemNode","thisFilter","maxLen","JSON","parse","stringify","trie","serialize","this.serialize","deserialize","this.deserialize","serialized","this.endNG","this.rootName","this.trie","this.caseSensitive","this.fieldNames","this.fieldDelim","this.distinguishingFieldsArray","TermsRadio","isSliderVisible","showSlider","chart","absMinFreq","absMaxFreq","allData","continueTransition","counterSeries","displayData","isTransitioning","dragged","lastSticky","lastSlippery","maxFont","numDataPoints","numVisPoints","overlayQueue","recordsLength","records","reselectTop","sliderDragSum","shiftCount","titlesArray","transitionCall","valFraction","win","bPadding","lPadding","rPadding","tPadding","sliderHeightRatio","sliderHeight","sliderBPadding","largestH","largestW","xAxisEl","xAxis","axisBottom","xScale","scaleLinear","xSliderScale","yAxisEl","yAxis","axisLeft","yScale","ySliderScale","fontScale","opacityScale","doResize","loadRecords","initData","prepareData","len","initializeChart","highlightQuery","query","sticky","getApiParam","getCorpus","getDocument","getId","paramsBundle","buildParamsBundle","wordString","manageOverlaySticky","manageOverlaySlippery","highlightRecord","parentBins","loadStore","transferArray","rec","dists","counter","posInSeries","numInSeries","frequencySeries","copy1","copy2","copy4","check1","check2","frequencyArray","l","inSeries","allDataInternal","outerCounter","displaySetup","dotObject","displayInternal","manageMvtButtons","queryById","setPlaying","nextR","toggleRightCheck","manageXScale","setApiParams","position","animateVis","nextL","startScroll","me","initChart","drawXAxis","drawYAxis","drawChart","drawSlider","drawVerticalSlider","redrawSliderOverlay","updateFullPath","redrawXAxis","redrawYAxis","redrawChart","redrawSlider","redrawVerticalSlider","redrawChartOverlay","chartSVG","DomHelper","down","setSliderHeight","getSliderHeight","setTitleLength","manageAllXScales","ticks","tickFormat","val","styleXAxis","manageAllYScales","yTicksScale","numberFormat","format","logFormat","tickSize","counterSeriesDiv","frequencySeriesDiv","removeFilteredCharacters","startPoint","valueRange","callOffset","lengthHor","offsetVisStart","offsetVisEnd","greyBoxBefore","greyBoxAfter","drag","displaceX","dx","checkBefore","checkAfter","getAttribute","moveByThis","inverseSliderScale","moveShiftCount","oldShiftCount","removeSlider","removeTermLines","getDuration","ease","easeLinear","isMasked","unmask","callTransition","toggleLeftCheck","params","totalTokens","tokenIdStart","category","docIdType","string","selector","checkOn","pathHolder","prepareFullPath","lineObject","fullPath","path","pathMin","pathMax","colour","chartOverlayOff","sliderOverlayOff","chartOverlayOn","sliderOverlayOn","isTermSelected","doTermDeselect","doTermSelect","getTermIndex","legendAdd","apiArray","selectedWords","getApplication","getColorForTerm","legend","getStore","mark","findRecord","set","refresh","legendRemove","removeAt","updateApi","linePosArray","foundB","lenA","lenB","yVal1","yVal2","buildSliderPath","pathArray","line","curve","curveNatural","objectToSelect","transitionSliderOverlay","updateYSliderScale","preparePath","foundA","yVal3","yVal4","foundC","posDif","manageFontScale","manageOpacityScale","manageYScale","manageYSliderScale","rangeRound","updateWithObject","selectedMin","selectedMax","manageXSliderScale","hideSlider","scale","corpus","getDocumentsCount","shortTitle","getShortTitle","shorterTitle","getSpeed","define","apis","isApplication","Voyant","application","mixins","clz","ClassManager","api","addParentApi","getClass","getApiParams","initial","queryParams","fromQueryString","location","getXType","setApiParam","isObject","superclass","self","defaultValue","keepEmpty","isString","isEmpty","getModifiedApiParams","statics","DEFAULT_LANGUAGE","LANGUAGE","AVAILABLE_LANGUAGES","i18n","getLanguage","code","Localization","localize","langs","lang","lowerCaseCode","find","_localizeObject","object","_localizeClass","mixin","clazz","use","isTemplate","getLanguageToolMenu","tooltip","glyph","handler","showLanguageOptions","localeCompare","Window","modal","items","queryMode","editable","fieldLabel","labelAlign","labelWidth","displayField","valueField","store","fields","buttons","ui","flex","btn","up","close","form","isDirty","getAliasOrId","panels","values","getValues","assign","toQueryString","bodyPadding","palettes","colorTermAssociations","setPalettes","resetColorTermAssociations","cat10","scaleOrdinal","schemeCategory10","hexToRgb","cat20a","schemeCategory20","cat20b","schemeCategory20b","cat20c","schemeCategory20c","addColorPalette","extjs","create","getColors","setColorTermAssociations","rgbToHex","toString","shorthandRegex","m","r","g","result","exec","getPalettes","getColorPalette","returnHex","paletteKey","palette","getColor","getColorTermAssociations","setColorForTerm","deferredStack","releaseAllDeferred","getDeferredCount","getDeferred","transferable","deferred","Deferred","transfer","promise","always","pop","getPromiseFromDeferred","dfd","getDeferredNestedPromise","callee","caller","then","promised","resolve","extend","msg","error","details","setMsg","setError","setDetails","callParent","showError","showMsg","applyIf","message","getMsg","getError","escape","getDetails","Msg","OK","icon","MessageBox","ERROR","autoScroll","response","setResponse","statusText","responseText","getSparkLine","stretch","Number","MAX_VALUE","MIN_VALUE","hasDecimal","dif","newvalues","multiplier","divider","valuesPerImage","baseUrl","images","wid","vals","requires","suppressTools","header","moreTools","getMenuItemFromXtype","getInitialConfig","getMoreTools","tools","categories","menu","toolsMap","exportToolClick","plus","gear","showOptionsClick","getOptions","panel","isXType","getActiveTab","getForm","getFields","collect","setValues","fireEvent","doGlobalUpdate","getViewport","globalUpdate","stopListGlobal","dispatchEvent","help","helpToolClick","includeTools","tool","callback","getHeader","os","deviceType","getEl","getTools","hide","getToolConfigFromToolXtype","clone","textAlign","replacePanel","maximizeToolClick","parts","getName","url","getBaseUrl","openUrl","hostname","exportViewItems","inputValue","boxLabel","getExtraExportItems","getExportUrl","checked","boxLabelEl","collapsible","collapsed","exportitems","getExportGridAll","getExportVisualization","getTargetEl","querySelector","formats","minValue","maxValue","increment","decimalPrecision","itemId","Template","change","slider","newVal","setFieldLabel","changecomplete","previousSibling","setValue","String","capitalize","isFunction","exportSvg","img","svg","parentNode","innerHTML","btoa","unescape","encodeURIComponent","INFO","prompt","multiline","exportPngData","exportPng","getValue","canvasSurface","isChart","isCanvas","innerElement","getSize","surfaces","zIndexes","surfaceZIndexes","surface","zIndex","targetCanvas","className","getClassName","devicePixelRatio","rect","getRect","surfaceSize","canvases","getOffsetsTo","getParent","drawImage","isVisible","toDataURL","targetEl","image","Image","src","onload","image.onload","cloneNode","svgChildren","removeChild","appendChild","outerHTML","createDom","tag","exportUrl","exportEmbed","asTool","exportBiblio","date","exportSpyral","toolForUrl","isDebug","view","debug","input","encode","exportGridCurrentJson","jsonCollector","row","visibleColumns","column","dataIndex","getColumnManager","headerCt","getVisibleGridColumns","col","trim","buffered","exportGridCurrentTsv","tsvCollector","cells","exportGridCurrentHtml","htmlCollector","exportGridAllJson","confirm","limit","getProxy","getExtraParams","getTromboneUrl","exportGridAllTsv","template","getViewComponent","removeAll","history","pushState","newTool","setActiveTab","alias","renderTpl","privates","onClick","returnValue","toolMenu","Menu","showAt","getX","getY","onDestroy","destroyMembers","initComponent","glyphParts","glyphFontFamily","glyphConfig","renderData","baseCls","blank","BLANK_IMAGE_URL","member","variants","variant","v","getVariants","documentFormat","documentFilename","downloadFromCorpusId","corpusId","openDownloadCorpus","MAX_LENGTH","storeResource","dataString","numChunks","chunkIds","_doStore","chunkCount","currIndex","chunkString","substr","reject","Ajax","request","resourceId","getStoredResource","verifyResourceId","decode","storedResource","_doGetStored","fullData","dataChunks","chunkId","isChunk","retrieveResourceId","failQuietly","resource","diacriticsMap","defaultDiacriticsRemovalMap","letters","base","removeDiacritics","str","embed","embeddedParameters","embeddedConfig","cmp","embedded","notebook","Show","SINGLE_LINE_MODE","embeddable","getByAlias","isEmbedded","embeddedParams","isNumber","embeddedConfigParamEncodded","embeddedConfigParam","iframeId","getBaseUrlFull","lastIndexOf","minimal","embeddedApiId","otherwise","Embed","showWidgetNotRecognized","widgetNotRecognized","tryWidget","widget","idProperty","getDocIndex","getLeft","getMiddle","getHighlightedMiddle","getRight","getPosition","getHighlightedContext","getLabel","getFacet","getInDocumentsCount","getTerm","getKeyword","getRawFreq","getKeywordRawFreq","getContextTerm","getContextTermRawFreq","calculate","getDistributions","getString","convert","getLexicalTokensCount","getLexicalTypeTokenRatio","loadDocumentTerms","documentTerms","getDocumentTerms","load","operation","success","loadTokens","tokens","getTokens","proxy","extraParams","getIndex","getFullLabel","author","getAuthor","getTitle","getTruncated","slash","space","getTinyTitle","getShortLabel","getTinyLabel","getPubDate","getPublisher","getPubPlace","getMultiple","getCollection","field","getCorpusId","isPlainText","getAverageWordsPerSentence","getText","getPlainText","outputFormat","noOthers","getLemmasArray","getEntities","loadEntities","getCSS","getPositions","getDocIds","getRelativeFreq","getSource","getTarget","getPrincipalComponents","pcs","principalComponents","pc","getDimensions","dimensions","dim","percentage","tok","getInfoFromElement","arg","isWord","getTokenType","isStopword","getDocId","getTermWithLineSpacing","getDocumentRawFreq","parentPanel","extras","remoteSort","autoLoad","pagePurgeCount","pageSize","leadingBufferZone","actionMethods","read","reader","rootProperty","totalProperty","metaProperty","simpleSortMode","exception","forTool","setParentPanel","setCorpus","beforeload","getParentPanel","isBufferedStore","from","previouslySetExtraParams","setExtraParam","getAt","storeJson","storeClass","storeData","model","withDistributions","CorpusFacet","CorpusTerm","sorters","property","direction","successful","opts","getById","noCache","NotebookFacet","facet","alternateClassName","rows","headers","rowsMap","headersMap","rowKey","table","VoyantTable","setRows","getRows","setHeaders","getHeaders","setRowsMap","getRowsMap","setHeadersMap","getHeadersMap","setRowKey","getRowKey","fromBlock","Notebook","getDataFromBlock","noHeaders","freqs","counts","orientation","isStore","getData","firstRow","getRow","cell","reMapRows","addRow","updateCell","getColumnIndex","eachRecord","getRecord","eachRow","asMap","getRowIndex","mapRows","getColumnHeader","getColumnSum","sum","getColumnValues","getColumnMean","mean","getColumnMax","getColumnMin","clean","sortByColumn","columns","sortColumnsIndices","loadCorrespondenceAnalysis","_doAnalysisLoad","loadPrincipalComponentAnalysis","loadTSNEAnalysis","storeType","columnHeaders","rowHeaders","analysisInput","toTsv","inputFormat","noCorpus","rowkey","columnIndices","tableJson","axes","series","tsv","edges","setEdges","setNodes","addEdge","getEdges","getNode","binarySearch","getNodes","lhs","rhs","edge","jsonData","queries","isIncrementalLoadingOccurrences","previousParams","setPreviousParams","localParams","getQueries","noOverwrite","setData","dreamscape","progress","ProgressMonitor","maxMillisSinceStart","failure","responseOrProgress","showResponseError","getCitiesCount","locations","getTotalCitiesCount","total","hasMoreCities","eachCity","orderedLocations","c1","c2","getConnectionsCount","connections","getTotalConnectionsCount","eachConnection","orderedConnections","getConnectionOccurrence","connectionOccurrencesData","connectionOccurrences","getIsIncrementalLoadingOccurrences","setIsIncrementalLoadingOccurrences","getPreviousParams","suppressLocations","suppressConnections","occurrence","getAllConnectionOccurrences","sourceId","targetId","occurences","occurence","documentsStore","dateFormat","defer","inlineData","metadata","subTitle","docsLimit","getDocuments","setDocumentsStore","loadCorpusTerms","corpusTerms","getCorpusTerms","getRange","getCorpusCollocates","getDocumentQueryMatches","getDocumentEntities","loadContexts","contexts","getContexts","getDocumentsStore","Document","isNumeric","getWordTokensCount","getWordTypesCount","getCreatedTime","requiresPassword","noPasswordAccess","getNoPasswordAccess","getSubTitle","getRelatedWords","loadRelatedWords","relatedTerms","transformCase","toUpperCase","getWordsArray","withPosLemmas","lemmas","XTemplate","Format","number","types","createdDate","now","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","diff","content","mode","buildFromParams","openMenu","getStoreItemsFromDefinition","getOpenMenu","decodeURIComponent","definition","nameValue","triggerAction","editList","list","keywords","OKCANCEL","buttonText","ok","cancel","original","combo","req","stoplists","ar","bg","br","ca","ckb","cn","cz","de","en","es","eu","fa","fr","ga","gl","grc","hi","hu","hy","it","ja","la","lv","lt","mu","nl","no","pt","ro","ru","se","th","tr","StopListOption","stopList","stoplist","tokenType","isDocsMode","inDocumentsCountOnly","showAggregateInDocumentsCount","clearOnQuery","currentOriginalRawQueryPlan","hasCorpusLoadedListener","isClearing","minWidth","matchFieldWidth","minChars","filterPickList","createNewOnEnter","createNewOnBlur","autoSelect","tpl","itemTpl","triggers","weight","cls","getIsDocsMode","setClearOnQuery","queryPlan","originalRawQueryPlan","setCurrentOriginalRawQueryPlan","originalRawQueryPlanWithoutAt","cat","getCategoriesManager","getCategories","tags","getClearOnQuery","removeValue","getValueRecords","setHtml","q","getStopList","findParentBy","doSetCorpus","tip","QuickTipManager","register","unregister","setStopList","getInDocumentsCountOnly","setStore","updateStatus","getTotalCount","docs","singleSelect","setSingleSelect","getSingleSelect","fbar","getMenu","setChecked","button","hasVisibleMenu","hideMenu","populate","setDocs","isSingleSelect","groupId","group","checkHandler","nextSibling","initField","eachKey","DropZone","ddGroup","getTargetFromEvent","onNodeDrop","contains","Helper","defaults","rendered","enabled","hasCls","fonts","paletteTpl","paletteStore","ArrayStore","op","mod","editPaletteWin","spectrum","editPalette","loadPalette","align","margin","toRgb","dv","sel","getSelectionModel","getSelection","scrollable","itemSelector","overItemCls","selectedItemCls","selectionModel","selectionchange","viewmodel","selected","savePalette","initSpectrum","setColorForSelected","rgbA","editor","flat","showInput","showButtons","preferredFormat","move","paletteId","paletteData","loadData","valueString","getConfigFromTableJson","setAxes","setSeries","setLegend","jsonString","noLegend","docked","axis","degrees","cfg","xField","yField","marker","highlightCfg","scaling","trackMouse","renderer","getYField","searchValue","matches","currentIndex","searchRegExp","regExpMode","matchCls","tagsRe","tagsProtect","onTextFieldChange","visibleColumnManager","getColumns","idx","getCellInnerSelector","seen","cellHTML","gotoCurrent","deselectAll","focus","getNavigationModel","setPosition","msgbox","delay","initConfig","getProgress","getScope","completion","status","progressBar","wait","getMaxMillisSinceStart","opt","setProgress","finish","getDelay","setDelay","getSuccess","getFailure","getArgs","destroy","tableHtml","hiddenColumns","ux","TransformGrid","render","getHiddenColumns","hides","setHiddenColumns","configFields","configColumns","cols","mapping","sortable","doDestroy","tabl","builderWin","getBuilderWin","getCategoriesId","setBuilderWin","categoriesId","setCategoriesId","relativeFreq","addCategory","removeCategory","removeTerms","categoryName","exists","confirmRemove","features","increaseCategory","decreaseCategory","FontFamilyOption","addCategoryWin","closeAction","categoriesManager","console","warn","onEsc","emptyFn","tabBarHeaderPosition","region","viewConfig","plugins","ptype","copy","enableDrop","dragZone","getDragText","dragData","selModel","dockedItems","dock","overflowHandler","getAddCategoryWin","sels","hideable","processFeatures","setColorTermsFromCategoryFeatures","saveCategoryData","loadCategoryData","buildCategories","buildFeatures","builder","setAddCategoryWin","allowBlank","validator","getCategoryTerms","enableKeyEvents","evt","getKey","Event","ENTER","isValid","reset","clearInvalid","termsData","frame","bbar","findParentByType","prev","prevChild","moveBefore","setCategoryRanking","next","nextChild","moveAfter","beforedrop","drop","titleEditor","Editor","updateEl","alignment","autoSize","complete","ed","newvalue","oldvalue","renameCategory","textEl","startEdit","categoriesParent","queryBy","featuresStore","addFeature","getFeatures","featuresConfigs","feature","featureConfig","widgetConfig","rowIndex","getCategoryFeature","reconfigure","featureValue","setCategoryFeature","cats","visLayout","nodeData","edgeData","nodeSelection","edgeSelection","currentNode","currentEdge","zoomExtent","fixOnDrag","nodeScaling","minSize","maxSize","scalingFunction","edgeScaling","graphStyle","normal","fillOpacity","strokeOpacity","strokeWidth","highlight","graphPhysics","damping","centralGravity","nodeGravity","springLength","springStrength","collisionScale","setNodeData","setEdgeData","loadJson","initGraph","refreshGraph","elHeight","elWidth","getVisLayout","force","forceX","forceY","processJson","wordFreq","loc","existingTerms","getNodeData","newNodes","newEdges","idGet","newedge","getEdgeData","updateDataForNode","nodeId","dataObj","updateDataForEdge","edgeId","addNode","removeNode","removeOrphans","potentialOrphans","orphanId","removeEdge","getRenderTarget","physics","getGraphPhysics","setVisLayout","forceSimulation","velocityDecay","strength","forceLink","distance","forceManyBody","forceCollide","bbox","getEdgeSelection","getNodeSelection","zoomToFit","getZoomExtent","setZoom","setEdgeSelection","setNodeSelection","setVis","resetGraph","nodeExtent","extent","edgeExtent","getEdgeScaling","getNodeScaling","edgeEnter","edgeMouseOver","edgeMouseOut","stopImmediatePropagation","preventDefault","setCurrentEdge","nodeMouseOver","nodeMouseOut","setCurrentNode","active","alphaTarget","restart","getFixOnDrag","fx","fy","applyEdgeStyle","applyNodeStyle","paddingPercent","transitionDuration","bounds","getVis","midX","midY","svgRect","getBoundingClientRect","fullWidth","fullHeight","getZoom","zoomIdentity","nodeState","state","getGraphStyle","edgeState","documentTermsStore","locationMarker","isDetailedGraph","locationMarkerColor","DETAILED_GRAPH_DOC_LIMIT","LOCATION_UPDATE_FREQ","SCROLL_UP","SCROLL_EQ","SCROLL_DOWN","setDocumentTermsStore","withPositions","graphDatas","graphData","dist","getIsDetailedGraph","graphs","graph","getAxes","setMaximum","getLocationMarker","setLocationMarker","updateCorpus","getDocumentTermsStore","setIsDetailedGraph","generateChart","loadQueryTerms","queryTerms","addChart","docInfo","fraction","relativeHeight","bColor","sColor","insetPadding","background","stops","showDelay","dismissDelay","hideDelay","toolTip","itemclick","box","getBox","chartContainer","containerParent","toArray","tokensTotal","docInfos","docMinSize","docMaxSize","minGapWidth","minBarWidth","sprite","rendererData","docWidth","moveLocationMarker","scrollDir","locMarkEl","locX","currX","setX","corpusValidated","subtitle","setTitle","selectedRecordsToRemember","mergedRecords","currentPage","addAll","totalCount","loadedCorpus","priority","toastError","toast","toastInfo","slideInDuration","shadow","anchor","hasCorpusAccess","corpusAccess","getCorpusAccess","tabchange","newTab","addTool","tab","rowLines","eOpts","emptyText","hideHeaders","selType","metaData","setStoreCorpus","speed","options","bubbles","frameRate","beforedestroy","Processing","bindJavascript","noLoop","loadDocument","handleCurrentTerm","handleDocFinished","documentTerm","whitelist","setLines","loop","getAudio","Loader","loadScript","maxDocs","bubblelines","docTermStore","selectedDocs","termTpl","setDocTermStore","processTerms","termObj","getBubblelines","initLoad","getDocTermsFromQuery","docIds","setTermStore","termsView","getTermStore","reloadTermsData","boxLabelAlign","checkbox","focusCls","beforeitemclick","stopPropagation","beforecontainerclick","selections","getNodeByRecord","removeCls","addCls","lcTerms","itemcontextmenu","isSelected","floating","deselect","getXY","autoEl","overflowY","overflowX","component","canvasParent","setBubblelines","bubbleClickHandler","afterlayout","inLimit","autoload","getDocTermStore","filterDocuments","setSelectedDocs","getSelectedDocs","filterBy","termRecord","splash","facets","matchingDocIds","customResultsHtml","facetCmp","updateResults","addFacet","disabled","catalogue","keepDocuments","getMatchingDocIds","getCustomResultsHtml","setCustomResultsHtml","facetsCmp","CorpusTerms","selectFacet","labels","getFacets","results","setDisabled","documentQueryMatches","includeDocIds","labelItems","suffix","isMatch","part","lnks","lnk","setMatchingDocIds","firstDocIds","loadSnippets","first","elToMask","stripTags","perDocLimit","accurateTotalNotNeeded","snippets","snippet","docItem","insertHtml","facetsSelectionStore","existingFacets","forceSelection","whiteList","visible","cirrusForceFlash","fade","smoothness","diagonals","cirrusId","MODE_CORPUS","MODE_DOCUMENT","setCirrusId","loadFromTermsRecords","boxready","initVisLayout","setTerms","buildFromTerms","setAdjustedSizes","getTerms","loadFromCorpus","corpusSelected","documentSelected","loadFromDocumentTerms","ensureCorpusView","getMode","loadFromCorpusTerms","setMode","setRecords","getRecords","forceLayout","getCirrusId","appVars","swfscript","loadFlash","swfobject","cirrusFlash","flashVars","flashParams","allowScriptAccess","bgcolor","wmode","cirrusFlashApp","layoutCloud","overflow","getFeatureForTerm","spiral","getTip","setTip","setSmallestWordSize","setLargestWordSize","nodesEnter","coords","mouse","nodesUpdate","istop","ostop","setMinFontSize","setSizeAdjustment","findNewRelativeSize","getMinFontSize","getSmallestWordSize","getLargestWordSize","areaMultiplier","getSizeAdjustment","centralize","linkData","visId","dragging","contextMenu","networkMode","keywordNode","contextNode","defaultMode","centralizedMode","DEFAULT_MODE","CENTRALIZED_MODE","setLinkData","setVisId","newValue","getNetworkMode","loadFromQuery","setContextMenu","renderTo","getBody","checkchange","getCurrentNode","fixed","setNetworkMode","fetchCollocatesForNode","doCentralize","getContextMenu","getVisId","loadFromCorpusTermRecords","operations","loadFromCorpusCollocateRecords","corpusTerm","keywordId","cX","cY","existingKeys","newLinks","corpusCollocate","contextTerm","termFreq","contextFreq","termValue","contextValue","termEntry","contextId","contextTermEntry","existingLink","getLinkData","linkValue","centralizeLimit","applyNetworkMode","getLinks","getDragging","setLinks","linkMouseOver","linkMouseOut","setDragging","isOffCanvas","applyLinkStyle","linkState","include","corpusCollocates","isConsumptive","expand","sm","rowBodyTpl","clearAndLoad","getView","recordsExpanded","getByInternalId","expandRow","childNodes","colIndex","documentsSelected","documentSegmentTermClicked","documentSegmentTerm","documentIndexTermsClicked","documentIndexTerms","queriesHash","docIndexHash","rowNode","textContent","middle","loadFromApis","documents","docid","termsClicked","collocatesStore","correlationsStore","phrasesStore","minHeight","loadStuff","tagName","getHtml","getDockedItems","setCollocatesStore","setCorrelationsStore","setPhrasesStore","getComponent","docIndexes","arrays","reduce","addSection","getCollocatesStore","getCorrelationsStore","getPhrasesStore","minLength","phrase","minInDocumentsCountRatio","setText","corpusSortInitialOrder","dtocIndexDoc","language","xmlDocumentsXpath","xmlGroupByXpath","xmlContentXpath","xmlTitleXpath","xmlAuthorXpath","xmlPubDateXpath","xmlPublisherXpath","xmlPubPlaceXpath","xmlKeywordsXpath","xmlCollectionXpath","xmlExtraMetadataXpath","htmlGroupByQuery","htmlDocumentsQuery","htmlContentQuery","htmlTitleQuery","htmlAuthorQuery","htmlPubDateQuery","htmlPublisherQuery","htmlPubPlaceQuery","htmlKeywordsQuery","htmlCollectionQuery","htmlExtraMetadataQuery","jsonDocumentsPointer","jsonContentPointer","jsonTitlePointer","jsonAuthorPointer","jsonPubDatePointer","jsonPublisherPointer","jsonPubPlacePointer","jsonKeywordsPointer","jsonCollectionPointer","jsonExtraMetadataPointer","tokenization","adminPassword","accessPassword","tableDocuments","tableContent","tableTitle","tableAuthor","inputRemoveFrom","inputRemoveFromAfter","inputRemoveUntil","inputRemoveUntilAfter","borderColor","borderStyle","frameHeader","buttonAlign","submitEmptyText","loadCorpus","buttonOnly","hideLabel","filefield","fileInputEl","files","badFilesRe","goodFilesRe","badFiles","unknownFiles","filename","YESNO","loadForm","isFloating","buttonId","addTextLabel","getAllowInput","getNoAllowInputText","addDocuments","apiParams","submit","action","stepEnabledCorpusCreator","corpusParams","storedId","loadCorpusFromParams","optionsWin","defaultType","maxHeight","fieldDefaults","newval","oldval","dtocIndexDocField","applyTemplate","grow","validatePositiveNumbersCsv","numbers","keyword","pubDate","citiesMaxCount","minPopulation","citiesMinFreq","connectionsMaxCount","connectionsMinFreq","millisPerAnimation","annotationsId","overridesId","filterHasLowerCaseForm","filterIsPersonName","preferredCoordinates","overlay","contentEl","isOpenLayersLoaded","isArcLoaded","animationDelay","isProj4Loaded","projection","filterWidgets","drawInteraction","drawMode","baseLayers","annotations","annotationsLoadedIfAvailable","overrides","onLoad","ol","Map","getLayer","ol.Map.prototype.getLayer","layer","getLayers","lyr","setIsOpenLayersLoaded","setIsArcLoaded","setIsProj4Loaded","setAnnotations","getAnnotations","setAnnotationsLoadedIfAvailable","bodyBorder","getMap","getItemId","getFilterWidgets","setVisible","unique","vertical","getBaseLayers","setOpacity","setAt","setProjection","proj","proj4","defs","gallPetersProjection","sphereMollweideProjection","setExtent","newProjExtent","getProjection","getExtent","earthWidth","newView","View","center","getCenter","maxResolution","layers","newGeometry","getGeometry","setGeometry","setView","oldVal","currentCitiesCount","getGeonames","filterUpdate","loadGeonames","getAnimationDelay","setMillisPerAnimation","animate","hasMatch","ownerCt","removeFilterWidget","removeLayer","getDockedComponent","connectionsLayer","Vector","wrapX","useSpatialIndex","opacity","travelStyleFunction","updateWhileAnimating","updateWhileInteracting","addLayer","citiesLayer","cityStyleFunction","animationLayer","animationStyleFunction","tryInit","getIsOpenLayersLoaded","getIsArcLoaded","getIsProj4Loaded","getAnnotationsLoadedIfAvailable","setId","Tile","preload","Infinity","TileWMS","crossOrigin","Stamen","OSM","TileArcGISRest","cacheize","loadTilesWhileInteracting","handleSingleClick","getFeaturesAtPixel","handleLocationClick","foundFeature","geonames","infos","occurrences","occ","sourceCoordinates","targetCoordinates","getContentEl","getOverlay","coordinate","elements","onmouseover","link.onmouseover","showTermInCorpus","selectedLayer","getResolution","previewLayer","preview","getEventPixel","originalEvent","hasFeatureAtPixel","getDrawMode","baseTextStyle","offsetY","Fill","Stroke","textOverlayStyle","Style","Text","selectedFeature","Feature","geometry","forms","coordinates","confidence","cityId","textFeature","geom","Point","setStyle","layerId","connection","annotationsObj","readFeatures","geojson","GeoJSON","addFeatures","setDrawInteraction","interaction","Draw","freehand","getDrawInteraction","editAnnotation","setMap","enableToggle","toggleHandler","addInteraction","removeInteraction","removeFeature","transformedFeatures","transformedFeature","writeFeatures","storeAnnotations","resolution","styles","end","getLastCoordinate","beforeEnd","getCoordinateAt","atan2","lineStr1","LineString","lineStr2","diameter","confArc","Circle","lineDash","getFirstCoordinate","reloadFilters","clearAnimation","city","layerSource","validCitiesHash","population","lng","lat","description","fit","maxConnectionsCount","arcLine","Arc","arcGenerator","GreatCircle","geometries","featureType","handleConnectionClick","out","currentGeonameId","suppressConnectionOccurrences","locationId","newId","appendOverrides","focusleave","isAll","newConfig","authorLabel","titleLabel","keywordLabel","pubDateLabel","loading","disclaimer","noDataForField","timeout","currentConnectionOccurrence","stepByStepMode","keepAnimationInFrame","Geonames","setGeonames","getParams","disable","setMinValue","setMaxValue","suspendEvent","resumeEvent","getAnimationLayer","getCurrentConnectionOccurrence","setCurrentConnectionOccurrence","getGlyph","setGlyph","Glyph","setStepByStepMode","setKeepAnimationInFrame","ownerCmp","totalCitiesCount","currentConnectionsCount","totalConnectionsCount","autoCloseDelay","closable","querysearchfield","pubDateSlider","getTimeout","setAnimationLayer","connectionsFeatures","connectionsLayerSource","getKeepAnimationInFrame","calculateExtent","containsExtent","newExtent","allcoords","getCoordinates","getMillisPerAnimation","getStepByStepMode","knots","tokensStore","currentTerm","firstDoc","pDoc","processDocument","getKnots","getTokensStore","termsToKeep","setTokensStore","currTerm","getCurrentTerm","getRefreshInterval","setRefreshInterval","getStartAngle","setStartAngle","getAngleIncrement","setAngleIncrement","setKnots","knotClickHandler","updateRefreshInterval","updateStartAngle","updateAngleIncrement","setCurrentTerm","dir","maxLength","overlapFilter","ct","maxBins","comparisonCorpus","pruneRemoved","expandbody","numberRenderer","eopts","tipTpl","getDocumentTitle","newCorpusError","MODE_EDITING","MODE_NORMAL","dockedItemsItems","overModel","dropPosition","dropHandlers","keepRemoveReorderHandler","percent","btnMode","confirmBtn","editCorpus","require","exportGridAll","cellEditing","clicksToEdit","onEditComplete","getQueryFromStore","setLoading","createNewCorpus","getReader","rawData","documentsFinder","typeAhead","Store","autoDestroy","menuDisabled","removeRow","getHeaderByDataIndex","getEditor","updateAggregate","getQueryFromRecord","getCell","exportBtn","go","helpTip","tbar","specialkey","loadUrl","groups","moveWordsTimeout","angleField","donut","getMoveWordsTimeout","offsetX","moveWords","lcwords","lenVal","setGroups","svgEl","svgDom","getGroups","FountainWord","yshift","jump","groupVals","until","gaugeVals","ys","avg","polar","setSprites","sparkline","chunkify","setMoveWordsTimeout","balanced","minEdgeCount","network","nodesStore","nodesDataSet","edgesDataSet","isNetworkBounded","categorizedNodeOptions","person","organization","nodeOptions","shape","edgeOptions","hover","labelHighlightBold","highlightOptions","setNodesStore","sortOnLoad","getNodesStore","getNetwork","selectNodes","categoriesHandler","allowDecimals","allowExponential","allowOnlyWhitespace","setRawValue","repulsion","nodeDistance","startSimulation","springConstant","entityCollocationsGraph","newEdgeCount","processEntities","entityParent","scaleFont","visNodes","visEdges","to","setNodesDataSet","DataSet","setEdgesDataSet","hoverConnectedEdges","multiselect","solver","Network","getNodesDataSet","getEdgesDataSet","getIsNetworkBounded","nodePositions","canvasToDOM","bXY","DOMtoCanvas","boundedX","boundedY","doNodeSelect","unselectAll","setNetwork","getConnectedNodes","getConnectedEdges","selectionHandler","selectObject","nodeObj","edgeObj","checkitem","controls","frequenciesGroup","coverageGroup","distributionsGroup","termsGroup","inDocumentsLabel","inDocumentsLabelTip","spanSomeLabel","spanSomeLabelTip","spanAllLabel","spanAllLabelTip","spanOnlyLabel","spanOnlyLabelTip","rawFreqLabel","rawFreqLabelTip","rawFreqPercentileLabel","rawFreqPercentileLabelTip","distributionsStdDevLabel","distributionsStdDevLabelTip","distributionsStdDevPercentileLabel","distributionsStdDevPercentileLabelTip","termsLengthLabel","termsLengthLabelTip","termsLengthPercentileLabel","termsLengthPercentileLabelTip","distributionIncreasesLabel","distributionIncreasesLabelTip","distributionConsecutiveIncreasesLabel","distributionConsecutiveIncreasesLabelTip","distributionDecreasesLabel","distributionDecreasesLabelTip","distributionConsecutiveDecreasesLabel","distributionConsecutiveDecreasesLabelTip","distributionMaxLabel","distributionMaxLabelTip","distributionMinLabel","distributionMinLabelTip","presetsGroup","presetHighFreq","presetHighFreqLonger","presetSingleDoc","presetIncreaseDistributions","presetDecreaseDistributions","presetNearStartDistributions","presetNearEndDistributions","presetSporadicDistributions","visibleTerms","scaleSqrt","inDocuments","spanSome","spanAll","spanOnly","termLength","termsLengthPercentile","rawFreqPercentile","distributionsStdDev","distributionsStdDevPercentile","distributionIncreases","distributionDecreases","distributionConsecutiveIncreases","distributionConsecutiveDecreases","distributionMax","distributionMin","allowFunctions","LoomControl","initControl","setMin","setMax","validateRecord","getLow","getHigh","offsetTipText","low","high","ind","allvals","scaledVals","squareDiffs","avgSquareDiff","stdDev","termsLength","increases","decreases","control","setEnabled","setLow","setHigh","getEnabled","filterRecords","setControls","clearApiParamsForControls","currentParams","tbitems","getByKey","getMax","getGroup","beforerender","getMin","tipText","getOffsetTipText","updateFromControl","threads","thick","fadeIt","filterchange","textHeight","fisheye","circular","distortion","yFisheye","scaleIdentity","currentItem","fs","fo","yin","xincrement","scaleApi","yscale","valueline","curveCardinal","tooltipbox","tooltiptext","datum","raise","fireEventArgs","updateControlsFromStore","clearFilter","every","keep","getControls","getValidateRecord","revalidate","clearRect","loomTermRecords","LoomTermRecords","getChecked","newvals","getField","isBoolean","some","termRecords","setTermRecords","getTermRecords","LoomTermRecord","texts","setRecord","setTerm","setTexts","columnWidth","getTexts","observable","initControls","maxTokens","tokensPerSegment","maxVerticalLines","maxSegments","initialize","updateSearchResults","setMaxVerticalLines","lineSize","corpusSize","gutter","gutterSize","columnSize","maxSegmentsPerLine","segmentWidth","setMaxSegments","getMaxVerticalLines","setMaxTokens","setTokensPerSegment","getMaxTokens","getMaxSegments","segments","addValue","redistributeDistributions","drawDocumentDistributions","getTokensPerSegment","newdistributions","textFont","editMagnet","updateFromQueries","clientX","clientY","docRadius","isHovering","magnets","updateDocs","diam","updateMagnets","stepValue","newpos","allowEmpty","rad","notMatching","targetX","targetY","weights","needRedraw","noHovering","hoveringTerms","hoveringDocs","halfSize","dy","minDist","spring","ax","ay","uri","itemsMap","tagsMap","isClose","isGroupItems","entry","Corpus","skipToDocId","innerContainer","exportVisualization","lastScrollTop","scrollIntoView","insertWhere","lastLocationUpdate","INITIAL_LIMIT","parentTool","s","contents","documentFrequency","isLastNewLine","newContents","isNewLine","updateText","highlightKeywords","centerPanel","setInnerContainer","getLastScrollTop","scrollTop","fetchPrevious","scrollHeight","fetchNext","amount","getLastLocationUpdate","updateLocationMarker","setLastScrollTop","Token","splitterResize","documentRelativePositionSelected","bufferPosition","corpusTermsClicked","documentTermsClicked","documentsClicked","termLocationClicked","termRec","doScroll","getInnerContainer","spans","caseInsensitiveQuery","compEl","firstChild","nodeValue","scroll","readerContainer","getPrevDoc","scrollContainer","getScrollIntoViewXY","scrollNeeded","scrollLeft","insertSibling","setInsertWhere","setScrollIntoView","last","nextSib","oldNext","doClear","loadingMask","inserted","getInsertWhere","getScrollIntoView","readerWords","firstWord","lastWord","partialFirstDoc","info1","info2","docTokens","currToken","tokenPosInDoc","updateChart","fetch","iframe","analysis","clusters","perplexity","iterations","comparisonType","caStore","pcaStore","tsneStore","docSimStore","chartMenu","termsTimeout","highlightData","highlightTask","tokenFreqTipTemplate","docFreqTipTemplate","setCaStore","maskAndBuildChart","setPcaStore","setTsneStore","setDocSimStore","groupField","setChartMenu","getSeries","enableToolTips","doLabels","anyMatch","filterChart","collapseMode","numb","oldValue","doLoad","getTermsTimeout","setTermsTimeout","doAnalysisChange","dims","forceFit","ftype","hideGroupedHeader","enableGroupingMenu","getNearbyForTerm","allowDeselect","toggleOnClick","isDoc","selectTerm","enable","setNewTerm","loadStoreFromJson","oldChart","setCheckBound","setCheckItemFromApi","apiParamName","getCaStore","getPcaStore","getDocSimStore","loadRawData","getTsneStore","buildChart","numDims","summary","eigenTotal","pcMapping","eigenValue","maxFill","minFill","docData","isTerm","addSorted","z","tokenData","cluster","newCount","termSeriesStore","docSeriesStore","interactions","sprites","innerPadding","display","clusterIndex","fillAlpha","strokeAlpha","interpolate","getDefaultDocColor","parentXY","chartItem","getItemForPoint","disableToolTips","getChartMenu","nearby","getNewTerm","getSurface","getItems","setHighlightItem","getSprites","getItemInstancing","getPointFromIndex","setHighlightData","getHighlightTask","setHighlightTask","TaskManager","newTask","run","doHighlight","interval","repeat","getHighlightData","surfaceMatrix","matrix","prependMatrix","transformPoint","dataX","dataY","surf","setAttributes","reQueries","series0","label0","setAttributesFor","getCurrentTerms","keepCurrentTerms","lambda","minSrc","maxSrc","minDst","maxDst","seriesType","tipsDisabled","showTip","layerData","graphId","graphMargin","setGraphId","Toolbar","JsonStore","isActive","firstElementChild","loadFromRecords","binsMax","resizeGraph","loadFromDocument","legendData","setLayerData","getLayerData","steps","docsCount","processedLayers","y1","curveCatmullRom","xAxisDomain","xAxisScale","scalePoint","paths","xAxisText","yAxisText","stack","stackOffsetWiggle","order","stackOrderInsideOut","getGraphId","numberOfDocumentsForDistinctiveWords","loadSummary","addListener","available","spark","main","d1","d2","docsLengthTpl","sparkWidth","numberOfTerms","valTip","showMoreDistinctiveWords","distinctiveWordsContainer","selectNode","Query","addRecords","array","remaining","more","minRawFreq","perim","tokensFetch","isReading","availableWidth","availableHeight","setDiam","setPerim","getPerim","drawTerms","drawReading","current","readingIndex","lastToken","readingStartTime","delta","sourceTerm","targetTerm","previousBeziers","sx","sy","previousTerm","xd","yd","ix","iy","maxTail","drawBezierSplit","nextReadingIndex","startReadingIndex","isCurrentTerm","isReadingTerm","maxRawFreq","termsMap","tokensLoading","fetchMoreTokens","getDiam","fetchMoreDocumentTerms","noMoreTokens","animatePathDrawing","x1","x2","y2","step","timestamp","requestAnimationFrame","t0","t1","quadraticCurveTo","t00","t01","t02","t03","nx0","ny0","nx2","ny2","nx1","lerp","ny1","v0","v1","getPath","twicLevel","TWiC","Level","Instance","LoadJSON","m_queue","await","graphViews","infoViews","topicBar","TopicBar","divName","docBar","DocumentBar","corpusClusterView","CorpusClusterView","m_linkedViews","Initialize","Start","numInitialTerms","scalingFactor","maxCollocateValue","minFillValue","maxFillValue","currentData","blacklist","visInfo","MODE_TOP","MODE_DISTINCT","MIN_TERMS","MAX_TERMS","COLLOCATES_LIMIT","MIN_SCALING","MAX_SCALING","MIN_STROKE_OPACITY","MAX_STROKE_OPACITY","getScalingFactor","setScalingFactor","reload","getCurrentData","getBlacklist","activate","resetVis","resetMinMax","setCurrentData","getDistinctTerms","getTopTerms","processCollocates","buildVisFromData","setMinRawFreq","setMaxRawFreq","setMaxCollocateValue","setMinFillValue","setMaxFillValue","getMaxRawFreq","getMinRawFreq","minFillVal","getMinFillValue","maxFillVal","getMaxFillValue","fillVal","fillValue","collocates","getCollocatesForQuery","collocatesWhitelist","maxCol","getMaxCollocateValue","rootId","stratify","parentId","collocateFill","scalePow","exponent","defaultFill","layoutRadius","termRadius","scalingInverse","maxFontSize","textSizer","fillLabel","collocate","pack","setVisInfo","termsRadio","visibleBins","yAxisScale","onLoadHandler","getTermsRadio","corpusStore","documentStore","legendMenu","bool","forId","setSpeed","sliderParam","setTermsRadio","queryTerm","trends","radiogroup","getBoxes","setBoxLabel","chartType","activeCls","docLabels","toFixed","kinds","kind","getItemToolTip","singleDoc","isOneTerm","serie","stacked","showInLegend","smooth","showMarkers","clickTimer","blockClick","itemdblclick","translateY","animation","moveEvents","setHidden","itemhighlightchange","titles","labelInSpan","reloadFromChart","notYetImplemented","oldTools","getNotYetImplemented","yes","getNewUrl","queryString","getFullYear","getVersion","footer","footerWidth","partWidth","getTextWidth","animCollapse","titleCollapse","floatable","hideCollapseTool","onCollapse","titleAlign","home","href","panelsString","tabpanels","tabpanel","cirrus","toolbar","panelChange","introHtml","fieldItems","fieldColumns","intro","foot","handleSendToVoyant","handleExport","bodyStyle","chartRangeMin","performAggregateQuery","getAggregateQuery","lastOptions","temporaryCorpus","statuscontainer","aggregateQueries","ComponentQuery","tableLayout","initTableLayout","initBorderLayoutComponents","doTableSizing","newwidth","newheight","oldwidth","oldheight","layoutString","decodeURI","addBorderLayouts","custom","suspendLayouts","numCols","cellWidth","cellHeight","colspan","rowspan","tableAttrs","tdAttrs","verticalAlign","resumeLayouts","widthRatio","heightRatio","sizeMap","tableSize","cellEl","panelEl","cmpId","sizeObj","getCmp","widthPercent","initialConfig","heightPercent","setSize","script","previous","fieldStyle","veliza","resetOriginalValue","handleUserSentence","tf","addSentence","sendApiParamMessage","sentences","sentence","fromCorpus","noScroll","setPrevious","meta","speaker","kwicStore","numBranches","lastClick","doubleClickDelay","getNumBranches","setNumBranches","setKwicStore","parseRecords","firstTerm","setRoot","getTree","parsedRecords","pr","prefix","prefixTokenCounts","suffixTokenCounts","prefixToken","suffixToken","sortableTokens","suffixCount","prefixCount","s1","s2","topSuffixTokens","topPrefixTokens","prefixes","suffixes","parsedRecord","dt","setTree","getLastClick","setLastClick","stripPunctuation","getKwicStore","simulation","tempNodes","filterOutUniqueTerms","currentSegment","segmentTerms","segmentTermsQueue","segmentDelay","segmentDelayTimer","webWorker","isSimulating","transitionTime","letterDistribution","frequencyScale","xForceStrength","yForceStrength","chargeStrength","chargeDistance","debugMsg","getSegmentDelay","setSegmentDelay","restartSegmentTimer","getTransitionTime","setTransitionTime","getXForceStrength","setXForceStrength","getYForceStrength","setYForceStrength","getChargeStrength","setChargeStrength","getChargeDistance","setChargeDistance","getSegmentDelayTimer","initVis","setTempNodes","getWebWorker","setWebWorker","Worker","onmessage","handleWebWorkerMessage","setSegments","corpusSegmentTerms","getFilterOutUniqueTerms","rawFreqs","setCurrentSegment","getSegments","getNextSegment","setSegmentDelayTimer","updateNodePositions","getCurrentSegment","processTermsForSegment","segmentIndex","letterDistMap","u","firstLetter","setSegmentTerms","setMinFreq","letterDist","setLetterDistribution","calculateNodeSizes","getSegmentTerms","runSimulation","getTempNodes","fontSizer","getFrequencyScale","getMaxFontSize","bboxTotal","availableSpace","setMaxFontSize","setIsSimulating","postMessage","getMinFreq","getMaxFreq","getLetterDistribution","timeEnd","getSegmentTermsQueue","getIsTransitioning","getIsSimulating","setIsTransitioning","allNodes","updateMinFreq","setFrequencyScale","updateMaxFreq","numTopics","documentTopicSmoothing","topicWordSmoothing","vocabularySize","vocabularyCounts","stopwords","docSortSmoothing","sumDocSortSmoothing","requestedSweeps","wordTopicCounts","topicWordCounts","tokensPerTopic","topicWeights","totalIterations","zeros","ret","score","buffer","postSweep","loadFromExistingDocuments","runIterations","resetData","loadStopwords","setStopwords","loadDocuments","lines","allwords","totalWords","wordsPerBin","parseLine","setVocabularyCounts","setSumDocSortSmoothing","getDocSortSmoothing","setRequestedSweeps","setWordTopicCounts","setTopicWordCounts","setTokensPerTopic","setTopicWeights","setDocuments","setTotalIterations","originalText","sweeps","getRequestedSweeps","getTotalIterations","progressText","customUpdateProgress","updateProgress","sweep","getVocabularySize","getTopicWordSmoothing","getTokensPerTopic","getWordTopicCounts","getTopicWeights","getDocumentTopicSmoothing","topicNormalizers","topic","docTopicCounts","topicCounts","currentWordTopicCounts","sample","sortTopicWords","getTopicWordCounts","getSumDocSortSmoothing","scores","topNWords","wordCounts","byCountDescending","getStopwords","getVocabularyCounts","docID","docDate","rawTokens","setVocabularySize","relatedWords","nodeclicked","timedout","modeCode","modeJavascript","modeData","modeFile","modeJson","modeText","modeXml","modeHtml","configWin","initWindow","buttonInstance","CodeConfig","showConfigWindow","codeEditorInstance","setHandler","setIsEdited","switchModes","codeMode","exportTitle","exportOpen","exportDownload","exportCorpus","cancelTitle","exportWin","getExportWindow","instance","wrapper","notebookId","getNotebookId","getInput","output","getOutput","corpusButton","openButton","fileName","fileType","fileContent","Spyral","Util","hasOwnProperty","corpusid","open","isUndefined","getContent","getCellId","isNode","serializeToString","XMLSerializer","getDataName","file","File","lastModified","myWindow","write","URL","createObjectURL","download","updateCachedOutput","Export","setOrder","updateHtml","getOrder","QUESTION","rew","runUntil","runUntilTip","runFrom","runFromTip","runMenu","ev","cellId","isEditing","setCellId","tb","setVisibilityMode","Element","VISIBILITY","setActiveMode","mon","setVisibility","getIsEditing","Error","isRun","forceRun","priorVariables","getIsInitialized","getNotebookVariables","_run","Promise","clearMarkers","setIsRun","runPromise","eventData","addMarker","addLineMarker","getVariables","getHasRunError","getCachedResultsValue","_reduceDataViewerOutput","parseFromString","DOMParser","trimContent","toRemove","wasTrimmed","insertAdjacentHTML","expandResults","getExpandResults","isInitialized","cachedPaddingHeight","cachedResultsHeight","cachedResultsValue","cachedResultsOutput","cachedResultsVariables","hasRunError","initIntervalID","maskTimeoutId","emptyResultsHeight","minimumResultsHeight","isExpanded","sandboxSrcUrl","getEmptyResultsHeight","paddingTop","pointerEvents","_doExpandContract","resetResults","borderTop","handleResultsScoped","_handleResults","setInitIntervalID","_sendMessage","command","removeEventListener","setCachedResultsValue","setCachedResultsOutput","setCachedResultsVariables","setHasRunError","setRunPromise","actualPromise","getRunPromise","variables","maskMsg","setMaskTimeoutId","getMaskTimeoutId","updateValue","getCachedResultsOutput","getCachedResultsVariables","getResultsEl","messageObj","getWin","getFrame","contentWindow","setIsInitialized","getInitIntervalID","_setHeight","expandButton","setExpandResults","setTooltip","getCachedPaddingHeight","computedStyle","getComputedStyle","setCachedPaddingHeight","getPropertyValue","setCachedResultsHeight","getCachedResultsHeight","resultsEl","expandWidget","getMinimumResultsHeight","isChangeRegistered","editedTimeout","markers","ternServer","MIN_LINES","editorTarget","getDom","CodeMirror","_getModeConfig","lineNumbers","lineWrapping","styleActiveLine","viewportMargin","extraKeys","Shift-Enter","Shift-Ctrl-Enter","Shift-Cmd-Enter","Ctrl-/","toggleComment","Cmd-/","defaultTextHeight","editorWrapperEl","getWrapperElement","getScrollerElement","lineCount","getLines","getIsChangeRegistered","setIsChangeRegistered","getEditedTimeout","setEditedTimeout","CodeEditor","getDocs","TernServer","useWorker","workerScript","workerDeps","getOption","Ctrl-Space","Ctrl-O","showDocs","updateArgHints","setEditor","_setModeOptions","removed","modeConfig","autoCloseBrackets","matchBrackets","setOption","getDoc","markText","ch","getMarkers","addLineClass","where","removeLineClass","setMarkers","Load","addData","notebookWrapperRemove","isEditRegistered","currentHeight","isFresh","isEnabled","focusManager","blur","getIsEnabled","_enable","_initEditor","CKEDITOR","inline","extraPlugins","allowedContent","toolbarCanCollapse","startupFocus","attachListener","getIsFresh","setIsFresh","_disable","editorHeight","getCurrentHeight","setCurrentHeight","getIsEditRegistered","setIsEditRegistered","setReadOnly","setIsEditing","setIsEnabled","dataUrl","fileUpload","buttonLabel","deleteMsg","serverStorage","inputEl","setFile","setFileName","setDataUrl","setResourceId","ServerStorage","getDataUrl","getResourceId","loadStoredFile","getFile","storeFile","blobToDataUrl","err","onFileChange","dataNameAlphanum","dataNameAlphastart","dataName","isFile","fileInput","setDataName","addCode","_getCode","getFileName","octokit","Octokit","auth","authToken","userAgent","getInfoForAuthenticatedUser","users","getAuthenticated","getReposForAuthenticatedUser","affiliation","page","per_page","repos","listForAuthenticatedUser","getReposForUser","owner","searchWithinRepositories","getRepoContents","repoId","parseFullName","getBranchSHAs","repo","resp","getTreeContentsRecursively","git","tree_sha","baseTreeSHA","recursive","unflattenContents","truncated","loadFile","getContents","ref","sha","atob","doesRepoExist","getPermissionsForUser","username","getCollaboratorPermissionLevel","permission","saveFile","getLatestFileSHA","createOrUpdateFile","fullName","getBranch","commit","parentCommitSHA","catch","oid","flatContents","findSubFolder","parentFolder","folderNameToFind","subfolder","pathSections","pathSection","pathSectionIndex","subFolder","newFile","newSubFolder","repoType","selectedNode","newValues","setRepoType","clearTree","getRepoType","addReposToTree","repoOwner","rootVisible","afteritemexpand","hasChildNodes","addRepoContentsToNode","setSelectedNode","updateSelectedNode","repoParent","setRepoId","setPath","repoTree","getRootNode","rawRepos","full_name","leaf","octokitResponse","parseContents","nodeConfig","currentFile","saveData","setCurrentFile","nodeSelected","getRepoId","pathComponents","getPathComponents","folder","nodeDeselected","validitychange","valid","initForm","login","setUsername","getCurrentFile","doSave","isPR","repoExists","fileData","setStatus","getUsername","octokitWrapper","currentWindow","showAuthenticate","authWin","postMessageHandler","origin","initOctokitWrapper","showLoad","getCookieValue","loadWin","maximizable","repoBrowser","showSave","saveWin","formValidityChange","fileSaved","cookieName","sMatch","cookie","github","OctokitWrapper","loadFileFromId","filePath","accessCode","newNotebook","beforeshowtip","currentTarget","inputAttrTpl","readOnly","generateAccessCode","getAccessCode","vtype","doesNotebookIdExist","findField","markInvalid","didSave","trombone","email","setAccessCode","alphabet","metadataTitle","metadataTip","metadataAuthor","metadataKeywords","metadataDescription","metadataLicense","metadataLanguage","trackResetOnLoad","enableAlignments","enableColors","enableFont","enableFontSize","enableLinks","enableLists","delimiter","loadMetadata","Metadata","loadRecord","license","importFromHtml","parser","setMetadata","hasDomError","cells2Init","querySelectorAll","section","classes","classList","addText","editorType","typeRe","matchClass","secPos","startPre","endPre","innerText","codeCell","cellIndex","dataCell","getInnerHeaderHtml","getMetadata","getInnerFooterHtml","created","modified","shortDate","generateExportHtml","aceChromeEl","stylesEl","codeTextLayer","setProperty","generateExportMetadata","keywordsArray","generateExportJson","properties","Blob","exportHtml","browse","noResults","suggested","gettingFacets","suggestedStore","suggestedTemplate","showWindow","getTriggers","getNotebooks","keyup","getCharCode","multi","but","_loadFacets","isLoaded","getSuggestedNotebooks","hideWindow","_getSelectedFacets","facetQuery","facetResult","queryfieldstring","notebooks","clickToEdit","errorLoadingNotebook","cannotLoadJson","cannotLoadJsonUnrecognized","cannotLoadUnrecognized","cannotLoadNotebookId","openTitle","openMsg","exportHtmlDownload","errorParsingDomInput","metadataEditor","metadataReset","metadataSave","metadataCancel","inputEncodedBase64Json","isEdited","version","storageSolution","metadataWindow","voyantStorageDialogs","githubDialogs","catalogueWindow","spyralTernDocs","ecmaTernDocs","browserTernDocs","showSaveDialog","setStorageSolution","getStorageSolution","loadFromString","runAll","showMetadataEditor","notebookWrapperMoveUp","notebookWrapperMoveDown","notebookWrapperAdd","notebookInitialized","StorageDialogs","fileLoaded","setNotebookId","saveCancelled","GitHubDialogs","Catalogue","notebookSelected","loadFromId","onbeforeunload","getIsEdited","all","responses","Table","createTable","loadFromQueryParams","getScrollable","scrollTo","trackingScrollTop","trackingScrollLeft","saveAs","setDateNow","finally","isDefined","spyralIdMatches","pathname","isGithub","githubId","inputJsonArrayOfEncodedBase64","block","loadFromUrl","addNew","loadFromJson","batchLayouts","cell2Init","upToCmp","fromCmp","matched","prevVars","newVars","newVar","prevVar","getIsRun","getNotebookBlocks","blocks","_add","findIndex","WARNING","redoOrder","runnable","getXTypes","hasModifier","updateMetadata","tromboneUrl","setBaseUrl","setTromboneUrl","setCategoriesManager","Categories","_getColor","this.getColor","_getColorForTerm","this.getColorForTerm","protocol","getRelativeUrl","relative","launch","getQuickTip","tromboneCall","eventName","viewport","isHeard","hasListener","ResponseError","Operation","toolFlow","hasQueryToLoad","useCache","loadColorPaletteForCorpus","corpuscreator","beforeclose","archive","validateCorpusLoadParams","validateCorpusAccess","passWin","password","passwordForSession","access","setCorpusAccess","passwordForSessionRemove","docIndObj","rtl","setActiveItem","noskin","additional","activeItem","getCorpusCreatorText","getTool","configString","TARGET"]
}
